<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Shell 是一门解释性语言，也就是说在编写完 Shell 脚本后，可以直接使用 Shell 解释器解释执行，而无需像 Java 语言那样需要先经过 javac 进行编译，编译后才能被执行。 Shell 编程怎么学  学习 shell 语言的语法和格式要求  使用 shell 语法尝试编写若干个 shell 脚本  使用 shell 命令的解释器解释执行 shell 脚本。   Shell 概述">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell">
<meta property="og:url" content="http://example.com/2021/10/30/Shell/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Shell 是一门解释性语言，也就是说在编写完 Shell 脚本后，可以直接使用 Shell 解释器解释执行，而无需像 Java 语言那样需要先经过 javac 进行编译，编译后才能被执行。 Shell 编程怎么学  学习 shell 语言的语法和格式要求  使用 shell 语法尝试编写若干个 shell 脚本  使用 shell 命令的解释器解释执行 shell 脚本。   Shell 概述">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/10/30/Shell/image-20211030163357198.png">
<meta property="og:image" content="http://example.com/2021/10/30/Shell/image-20211030212648163.png">
<meta property="og:image" content="http://example.com/2021/10/30/Shell/image-20211030212915700.png">
<meta property="article:published_time" content="2021-10-30T08:20:00.000Z">
<meta property="article:modified_time" content="2021-11-19T14:07:49.858Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/10/30/Shell/image-20211030163357198.png">


<link rel="canonical" href="http://example.com/2021/10/30/Shell/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2021/10/30/Shell/","path":"2021/10/30/Shell/","title":"Shell"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Shell | Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E7%BC%96%E7%A8%8B%E6%80%8E%E4%B9%88%E5%AD%A6"><span class="nav-number">1.</span> <span class="nav-text">Shell 编程怎么学</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E6%A6%82%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">Shell 概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="nav-number">3.</span> <span class="nav-text">Shell 解释器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-Linux-%E6%94%AF%E6%8C%81%E7%9A%84-shell-%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="nav-number">3.1.</span> <span class="nav-text">查看 Linux 支持的 shell 解释器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bash-%E5%92%8C-sh-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-number">3.2.</span> <span class="nav-text">bash 和 sh 的关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E5%91%BD%E4%BB%A4%E5%BA%95%E5%B1%82%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">3.3.</span> <span class="nav-text">Linux 命令底层执行流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D-Linux-%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8%E7%9A%84-shell-%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="nav-number">3.4.</span> <span class="nav-text">查看当前 Linux 系统默认使用的 shell 解释器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E7%9B%AE%E5%BD%95"><span class="nav-number">3.5.</span> <span class="nav-text">Linux 中的常用目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">3.6.</span> <span class="nav-text">环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9B%AE%E5%BD%95"><span class="nav-number">3.6.1.</span> <span class="nav-text">查看当前环境变量目录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E8%84%9A%E6%9C%AC%E5%85%A5%E9%97%A8"><span class="nav-number">4.</span> <span class="nav-text">Shell 脚本入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-shell-%E8%84%9A%E6%9C%AC"><span class="nav-number">4.1.</span> <span class="nav-text">第一个 shell 脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E5%B8%B8%E7%94%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="nav-number">4.2.</span> <span class="nav-text">脚本常用的执行方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C"><span class="nav-number">5.</span> <span class="nav-text">变量操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99"><span class="nav-number">5.1.</span> <span class="nav-text">变量定义规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">5.2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8F%98%E9%87%8F"><span class="nav-number">5.2.1.</span> <span class="nav-text">基本变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A2%9E"><span class="nav-number">5.2.1.1.</span> <span class="nav-text">增</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5"><span class="nav-number">5.2.1.2.</span> <span class="nav-text">查</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%B9"><span class="nav-number">5.2.1.3.</span> <span class="nav-text">改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0"><span class="nav-number">5.2.1.4.</span> <span class="nav-text">删</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">5.2.2.</span> <span class="nav-text">关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#readonly"><span class="nav-number">5.2.2.1.</span> <span class="nav-text">readonly</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#export"><span class="nav-number">5.2.2.2.</span> <span class="nav-text">export</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="nav-number">5.2.3.</span> <span class="nav-text">特殊变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#n"><span class="nav-number">5.2.3.1.</span> <span class="nav-text">$n</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">5.2.3.2.</span> <span class="nav-text">$#</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%92%8C"><span class="nav-number">5.2.3.3.</span> <span class="nav-text">$* 和 $@</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#-1"><span class="nav-number">5.2.3.4.</span> <span class="nav-text">$?</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">5.3.</span> <span class="nav-text">变量的生命周期</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="nav-number">6.</span> <span class="nav-text">特殊字符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%92%8C-%E5%8F%8D%E5%BC%95%E5%8F%B7-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">6.1.</span> <span class="nav-text">$() 和 反引号 的区别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">7.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">7.1.</span> <span class="nav-text">整数运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">7.1.1.</span> <span class="nav-text">基本语法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-number">8.</span> <span class="nav-text">条件判断</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">9.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#if-%E5%88%A4%E6%96%AD"><span class="nav-number">9.1.</span> <span class="nav-text">if 判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case-%E8%AF%AD%E5%8F%A5"><span class="nav-number">9.2.</span> <span class="nav-text">case 语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="nav-number">9.3.</span> <span class="nav-text">for循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#foreach-%E5%BE%AA%E7%8E%AF"><span class="nav-number">9.3.1.</span> <span class="nav-text">foreach 循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83-%E5%92%8C-%E5%8C%BA%E5%88%AB"><span class="nav-number">9.3.2.</span> <span class="nav-text">比较 $* 和 $@ 区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="nav-number">9.4.</span> <span class="nav-text">while循环</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">10.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#read%E5%87%BD%E6%95%B0"><span class="nav-number">10.1.</span> <span class="nav-text">read函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#basename-%E5%92%8C-dirname"><span class="nav-number">10.2.</span> <span class="nav-text">basename 和 dirname</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#basename"><span class="nav-number">10.2.1.</span> <span class="nav-text">basename</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dirname"><span class="nav-number">10.2.2.</span> <span class="nav-text">dirname</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-number">10.3.</span> <span class="nav-text">自定义函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell-%E5%B7%A5%E5%85%B7"><span class="nav-number">11.</span> <span class="nav-text">Shell 工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#wc"><span class="nav-number">11.1.</span> <span class="nav-text">wc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cut"><span class="nav-number">11.2.</span> <span class="nav-text">cut</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed"><span class="nav-number">11.3.</span> <span class="nav-text">sed</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">232</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">65</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/30/Shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Shell | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Shell
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-30 16:20:00" itemprop="dateCreated datePublished" datetime="2021-10-30T16:20:00+08:00">2021-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-11-19 22:07:49" itemprop="dateModified" datetime="2021-11-19T22:07:49+08:00">2021-11-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Shell 是一门解释性语言，也就是说在编写完 Shell 脚本后，可以直接使用 Shell 解释器解释执行，而无需像 Java 语言那样需要先经过 <code>javac</code> 进行编译，编译后才能被执行。</p>
<h1 id="Shell-编程怎么学"><a href="#Shell-编程怎么学" class="headerlink" title="Shell 编程怎么学"></a>Shell 编程怎么学</h1><ol>
<li> 学习 shell 语言的语法和格式要求</li>
<li> 使用 shell 语法尝试编写若干个 shell 脚本</li>
<li> 使用 shell 命令的解释器解释执行 shell 脚本。</li>
</ol>
<hr>
<h1 id="Shell-概述"><a href="#Shell-概述" class="headerlink" title="Shell 概述"></a>Shell 概述</h1><p><img src="/2021/10/30/Shell/image-20211030163357198.png" alt="image-20211030163357198"></p>
<p>Linux 系统的核心是<strong>内核</strong>，内核直接控制着计算机系统上的所有硬件和软件，应用程序在执行时都需要先向内核申请 CPU、内存等硬件资源。也就是说应用程序执行时会先向内核发送申请资源的指令，为了防止第三方程序发送一些恶意指令损坏内核，Linux 开发人员在应用程序和内核之间，设置了一个中间层——<strong>Shell</strong>。这样所有发送给内核的指令，都必须先由 Shell 层进行一次校验，校验通过后才可以继续发往内核，减少了内核被损坏的风险。</p>
<p><strong>本质上来说：</strong></p>
<ul>
<li>  Shell 是一种编程规范，类似于 Java、Python 等。Shell 是一种解释性语言，所有符合 shell 语法规定的指令都会先由 shell 解释器进行语法、安全校验，合法后再交给内核执行。</li>
<li>  <strong>shell命令</strong>：shell 命令就是按照 shell 编程规范编写的命令。</li>
<li>  <strong>shell脚本</strong>：shell 脚本就是一组 shell 命令的集合。多条 shell 命令，可以编写在一个文件中，文件中的 shell 指令，将会按照顺序执行，这个保存多条 shell 命令的文件就称为 shell 脚本。</li>
</ul>
<hr>
<h1 id="Shell-解释器"><a href="#Shell-解释器" class="headerlink" title="Shell 解释器"></a>Shell 解释器</h1><h2 id="查看-Linux-支持的-shell-解释器"><a href="#查看-Linux-支持的-shell-解释器" class="headerlink" title="查看 Linux 支持的 shell 解释器"></a>查看 Linux 支持的 shell 解释器</h2><ul>
<li>  在 Linux 中，<strong>一切皆文件</strong>，Linux 支持的所有 shell 解释器也包含在一个文件中。【文件目录：<code>/etc/shells</code>】</li>
<li>  shell 支持多种不同风格的解释器，我们可以通过查看 <code>/etc/shells</code> 文件得到当前 Linux 系统支持的 shell 解释器种类。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos ~]# cat -n /etc/shells</span><br><span class="line">     1	/bin/sh</span><br><span class="line">     2	/bin/bash</span><br><span class="line">     3	/sbin/nologin</span><br><span class="line">     4	/usr/bin/sh</span><br><span class="line">     5	/usr/bin/bash</span><br><span class="line">     6	/usr/sbin/nologin</span><br><span class="line">     7	/bin/tcsh</span><br><span class="line">     8	/bin/csh</span><br></pre></td></tr></table></figure>

<ul>
<li>  不同的 shell 解释器风格不同，比如 csh 就是一种符合 C 语言风格的 shell 解释器。</li>
<li>  Centos 默认使用 <code>/bin/sh</code> 和 <code>/bin/bash</code> 作为 shell 解析器。</li>
</ul>
<hr>
<h2 id="bash-和-sh-的关系"><a href="#bash-和-sh-的关系" class="headerlink" title="bash 和 sh 的关系"></a>bash 和 sh 的关系</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos ~]# ll | grep bash</span><br><span class="line">-rw-r--r-- 1 root root 25386 Jan  9  2021 bash</span><br><span class="line">lrwxrwxrwx 1 root root     4 Jan  9  2021 sh -&gt; bash</span><br></pre></td></tr></table></figure>

<p>我们可以看到，<strong>sh 是 bash 的一个软链接</strong>，所以说，用 <code>/bin/sh</code> 执行命令和使用 <code>/bin/bash</code> 执行命令是一样的，最终都是调用 <code>bash</code> 执行的。</p>
<hr>
<h2 id="Linux-命令底层执行流程"><a href="#Linux-命令底层执行流程" class="headerlink" title="Linux 命令底层执行流程"></a>Linux 命令底层执行流程</h2><p>我们在终端窗口中输入的每一条 Linux 命令，其实都是一条 shell 指令，但是我们在使用的时候并没有去指定具体使用哪一个 shell 解释器，这是因为在未显式指定 shell 解释器的情况下，当前系统使用了自己默认的 shell 解释器。所以我们在执行 <code>cat -n /etc/shells</code> 命令时，底层执行的是：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c &#x27;cat -n /etc/shells&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  分析：</p>
</blockquote>
<ul>
<li>  Part1：**/bin/bash**，显式指定使用哪一个 shell 解释器。</li>
<li>  Part2：**-c**，因为 <code>/bin/bash</code> 默认只支持执行一个脚本，而我们当前要执行的是一条命令（command），所以要显式设置一下，表明要执行的是一条命令。</li>
<li>Part3：**’cat -n /etc/shells’**，待执行的 shell 命令。<ul>
<li>  <strong>为什么要用引号引起来？</strong> 因为 shell 在执行命令的时候，参数之间默认使用空格隔开的，如果不用引号引起来，那么当前命令的参数就会被识别成 4 个，显然与实际情况不符。而使用引号引起来后，参数个数就变成了 2 个，这样才是符合当前 shell 脚本的参数设置的，所以这里必须使用单引号将要执行的 shell 命令引起来。</li>
</ul>
</li>
</ul>
<p>执行该条命令同样能得出和上面相同的结果！</p>
<hr>
<h2 id="查看当前-Linux-系统默认使用的-shell-解释器"><a href="#查看当前-Linux-系统默认使用的-shell-解释器" class="headerlink" title="查看当前 Linux 系统默认使用的 shell 解释器"></a>查看当前 Linux 系统默认使用的 shell 解释器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos ~]# echo $SHELL</span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li><p>  <strong>$</strong> 表示引用一个已经定义好的变量，</p>
</li>
<li><p><strong>SHELL</strong> 是一个已经在 Linux 中已经定义好了的全局变量，其变量值就是 <code>/bin/bash</code>。类比于 Java 中就是：</p>
<p>  首先在定义了一个全局变量 SHELL，</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="variable">SHELL</span> <span class="operator">=</span> <span class="string">&quot;/bin/bash&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>  那么在当前上下文中再次使用这个变量时，直接通过变量名调用即可。</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(SHELL);</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="Linux-中的常用目录"><a href="#Linux-中的常用目录" class="headerlink" title="Linux 中的常用目录"></a>Linux 中的常用目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">bin 和 sbin 目录的位置</span></span><br><span class="line">/usr/bin/</span><br><span class="line">/usr/sbin/</span><br></pre></td></tr></table></figure>



<ul>
<li><p><strong>/bin</strong>：该目录下保存着用户常用命令对应的脚本，如 <code>cd、pwd、ll</code> 等，所以在该目录下可以使用 shell 解释器直接执行这些脚本。</p>
<p>  <img src="/2021/10/30/Shell/image-20211030212648163.png" alt="image-20211030212648163"></p>
</li>
<li><p><strong>/sbin（superUser bin）</strong>：该目录下保存着 root 用户常用命令的脚本，一般用于对整个机器进行管理。如 <code>service</code> 等，在该目录下同样可以使用 shell 解释器执行这些脚本。</p>
<p>  <img src="/2021/10/30/Shell/image-20211030212915700.png" alt="image-20211030212915700"></p>
</li>
</ul>
<hr>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>在上一小节中，我们看到了 Linux 中常用的命令脚本一般都保存在 bin 或 sbin 目录下，那么按道理来说我们只能在 bin 或 sbin 目录下才能够直接执行目录中的命令脚本，但实际情况确实我们在 Linux 中的任何目录下都可以执行这些命令脚本，这是什么原因呢？这就是因为我们将 <code>/usr/bin/</code> 和 <code>/usr/sbin/</code> 目录添加到了环境变量中，这样我们在任何目录下执行命令的时候都会先在当前文件夹下查找，若没有再去检索环境变量对应的目录下是否有该命令，若这两个地方都没有最后再抛出错误信息。</p>
<h3 id="查看当前环境变量目录"><a href="#查看当前环境变量目录" class="headerlink" title="查看当前环境变量目录"></a>查看当前环境变量目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos sbin]# echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk1.8.0_121/bin:/root/bin</span><br></pre></td></tr></table></figure>

<p>分析：</p>
<ul>
<li><p>  我们可以看到，在 Linux 中，多个环境变量目录之间用<strong>冒号（:）</strong>分隔。</p>
</li>
<li><p>  而 <code>/usr/sbin:/usr/bin</code> 目录都配置在了环境变量中，所以 bin、sbin 下面的命令脚本在任何位置都能执行，而无需跳转到对应的文件夹下执行。</p>
</li>
<li><p>但是如果我们随便执行一个不存在的命令脚本，它会先查找当前目录下是否存在该命令脚本，若不存在再继续从环境变量对应的目录中去查找，若还不存在最后才报错。比如我们执行一个不存在的脚本命令，Linux 在查找不到后就会抛出一个错误 <strong>command not found（命令找不到）</strong></p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos sbin]# abcll</span><br><span class="line">-bash: abcll: command not found</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="Shell-脚本入门"><a href="#Shell-脚本入门" class="headerlink" title="Shell 脚本入门"></a>Shell 脚本入门</h1><h2 id="第一个-shell-脚本"><a href="#第一个-shell-脚本" class="headerlink" title="第一个 shell 脚本"></a>第一个 shell 脚本</h2><ol>
<li><p>创建一个临时文件夹 myshells，编写测试脚本。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]# mkdir myshells</span><br></pre></td></tr></table></figure></li>
<li><p>在该文件夹下创建一个脚本文件 （起名任意，因为<strong>在 Linux 系统下文件名可以不加后缀</strong>），这里为了见名知意，给它加一个后缀 <code>.sh</code>，表名当前文件是一个 shell 脚本。这里取名为 <code>helloworld.sh</code>。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]# vim hellworld.sh</span><br></pre></td></tr></table></figure></li>
<li><p>编辑文件内容</p>
<ul>
<li>  格式要求</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1、声明，这部分不是必须的，只是一个声明，但是为了语法语义的完整性一般要求必须要写</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 表示用 bash 解释器执行该脚本，同理，如果你写的脚本适配的是csh解释器，则应该声明为 `#!/bin/csh`</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、正文：要求必须是shell解释器能解释执行的命令</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  示例</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> HelloWorld!</span><br></pre></td></tr></table></figure></li>
<li><p>执行脚本文件</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]# bash hellworld.sh </span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="脚本常用的执行方式"><a href="#脚本常用的执行方式" class="headerlink" title="脚本常用的执行方式"></a>脚本常用的执行方式</h2><ol>
<li><p><strong>采用 <code>bash</code> 或 <code>sh</code> + 脚本的相对路径或绝对路径</strong></p>
<ul>
<li><p>bash + 脚本文件的绝对路径</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># bash /tmp/hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
<li><p>bash + 脚本文件的相对路径</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># bash hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
<li><p>sh + 脚本文件的绝对路径</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh /tmp/hellworld.sh</span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
<li><p>sh + 脚本文件的相对路径</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
</ul>
<p> <strong>特点：</strong></p>
<ul>
<li>  方式1的执行特点是会新开启一个 bash 解释器来执行对应的脚本文件，一旦脚本文件执行完毕，这个新开启的bash自动关闭。</li>
<li>  什么叫新开启一个 bash 解释器？就是说当前 Linux 系统已经在维护一个 bash 进程了，使用当前 bash 进程也是可以执行脚本的，但是使用 <code>bash+脚本路径</code> 的执行方式会在当前 bash 的基础上再新建一个 bash 用于执行脚本，形成了一种 bash 的嵌套，并在脚本执行完毕后关闭新建的 bash。</li>
</ul>
</li>
<li><p><strong>直接执行对应的脚本文件（前提：当前用户必须对脚本文件有执行权限）</strong></p>
<ul>
<li><p>首先要赋予 <code>helloworld.sh</code> 脚本文件具有执行权限</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># chmod 777 hellworld.sh </span></span><br></pre></td></tr></table></figure></li>
<li><p>直接执行 <code>helloworld.sh</code> 脚本文件</p>
<p>  1️⃣绝对路径</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># /tmp/hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure>

<p>  2️⃣相对路径</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># ./hellworld.sh</span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
</ul>
<p> Tip：第一种执行方法，本质上是 bash 解释器帮你执行脚本，所以脚本文件本身不需要执行权限。第二种执行方法，本质上是脚本文件自己执行，所以需要执行权限。</p>
</li>
<li><p><strong>在脚本的路径前加上点（.）</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 相对路径</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># . hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绝对路径</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># . /tmp/hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure></li>
<li><p><strong>使用 source 执行脚本文件</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># source /tmp/hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br><span class="line"></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># source ./hellworld.sh </span></span><br><span class="line">HelloWorld!</span><br></pre></td></tr></table></figure>

<p> Tip：Source 和 点(.) 是相同的，<code>.</code> 实际上是 source 的一种简写，这种执行脚本的方式并不需要当前用户对脚本文件有执行权限。</p>
</li>
</ol>
<hr>
<h1 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h1><h2 id="变量定义规则"><a href="#变量定义规则" class="headerlink" title="变量定义规则"></a>变量定义规则</h2><ol>
<li> 变量名称可以由字母、数字和下划线组成，但是<strong>不能以数字开头</strong>，<strong>环境变量名建议大写</strong>。</li>
<li> <strong>等号两侧不能有空格；</strong>（因为在 shell 中，空格是用来分割参数的，所以等号两侧不能有空格，如果有就会被识别为多个参数）</li>
<li> 在 bash 中，变量默认类型都是字符串类型，<strong>无法直接进行数值运算</strong>。</li>
<li> 变量的值如果有空格，需要使用双引号或单引号括起来。</li>
<li> 使用双引号，可以识别空格之外的其他变量，使用单引号则会只会忽略空格！</li>
<li> 使用反引号，可以将语句运行的结果作为值赋值给变量！</li>
</ol>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="基本变量"><a href="#基本变量" class="headerlink" title="基本变量"></a>基本变量</h3><h4 id="增"><a href="#增" class="headerlink" title="增"></a>增</h4><ul>
<li>  新增一个变量</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">变量名=变量值 # 注意等号两侧不能有空格</span><br></pre></td></tr></table></figure>

<h4 id="查"><a href="#查" class="headerlink" title="查"></a>查</h4><ul>
<li>  <strong>查看指定变量的值</strong>：新增了一个变量后，如果想要查看这个变量，一般使用 <code>echo $变量名</code> 就可以查看这个变量的值。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增变量a</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># a=1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看变量a</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># echo $a</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<ul>
<li>  <strong>查看当前 bash 管理的所有变量</strong>：set</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 由于 set 的输出内容过多，我们可以截取一部分查看，可以看到，我们新定义的变量a也被当前shell所管理</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># set | grep a=1</span></span><br><span class="line">a=1</span><br></pre></td></tr></table></figure>



<h4 id="改"><a href="#改" class="headerlink" title="改"></a>改</h4><ul>
<li>  修改操作与新增操作一样，就是把新的变量值赋值给旧的变量名。</li>
</ul>
<h4 id="删"><a href="#删" class="headerlink" title="删"></a>删</h4><ul>
<li>  删除变量：<code>unset 变量名</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># unset a</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># set | grep a=1</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 先删除变量a，再查看当前shell管理的所有变量时就发现变量a已经不存在了</span></span><br></pre></td></tr></table></figure>



<h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><h4 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h4><ul>
<li>  <code>readonly</code> 是一个修饰符，被该关键字修饰的变量只能被读，不能被写（修改或删除）。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个只读变量a</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># readonly a=10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取变量a，OK</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># echo $a</span></span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改变量a，Error</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># a=99</span></span><br><span class="line">-bash: a: <span class="built_in">readonly</span> variable</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除变量a，Error</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># unset a</span></span><br><span class="line">-bash: <span class="built_in">unset</span>: a: cannot <span class="built_in">unset</span>: <span class="built_in">readonly</span> variable</span><br></pre></td></tr></table></figure>





<h4 id="export"><a href="#export" class="headerlink" title="export"></a>export</h4><ul>
<li>  <code>export</code>，导出。作用是将一个变量提升为全局变量。</li>
</ul>
<p><strong>局部变量</strong>：默认只在当前 bash 进程中有效。如果希望在 bashA 中能访问 bashB 中定义的变量，则必须满足以下两点条件：</p>
<ol>
<li> 要求 bashB 不能关闭</li>
<li> 让 bashB 中的变量提升为全局变量，这样才能被 bashA 访问到。</li>
</ol>
<p><strong>Demo</strong></p>
<ol>
<li> 编写 <code>helloworld.sh</code> 脚本，内容为：①输出Hello；②输出变量b；③输出World</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> Hello</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span></span><br><span class="line"><span class="built_in">echo</span> World</span><br></pre></td></tr></table></figure>

<ol start="2">
<li> 在当前 shell 中定义变量b，并测试输出</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># b=99</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># echo $b</span></span><br><span class="line">99</span><br></pre></td></tr></table></figure>

<ol start="3">
<li> 在当前 bash 中使用 sh 执行 <code>hellworld.sh</code> 脚本，这条命令会在当前 bash 的基础上新创建一个 bash，由于 <code>$b</code> 是局部变量，所以在新的 bash 中不能检测到该变量，输出为空。</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh hellworld.sh</span></span><br><span class="line">Hello</span><br><span class="line"></span><br><span class="line">World</span><br></pre></td></tr></table></figure>

<ol start="3">
<li> 将 <code>$b</code> 提升为一个全局变量，由于全局变量的特性，此时新建的 bash 可以访问到原 bash 中的 <code>$b</code>，所有此时的输出如下：</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># export b</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh hellworld.sh</span></span><br><span class="line">Hello</span><br><span class="line">99</span><br><span class="line">World</span><br></pre></td></tr></table></figure>





<hr>
<h3 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h3><h4 id="n"><a href="#n" class="headerlink" title="$n"></a>$n</h4><p><strong>基本语法：</strong><code>$n</code></p>
<ul>
<li>  功能描述：n 为数字，<code>$0</code> 代表该<strong>脚本名称</strong>，<code>$1 ~ $9</code> 代表第一到第九个参数，若该脚本含有十个以上的参数，十以上的参数需要用大括号包含，如<code>$&#123;10&#125;</code></li>
</ul>
<p><strong>Demo</strong></p>
<ol>
<li> 编写一个脚本文件：<code>test1.sh</code></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$0==》&#x27;</span> <span class="variable">$0</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$1==》&#x27;</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$2==》&#x27;</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$3==》&#x27;</span> <span class="variable">$3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$4==》&#x27;</span> <span class="variable">$4</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$5==》&#x27;</span> <span class="variable">$5</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$6==》&#x27;</span> <span class="variable">$6</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$7==》&#x27;</span> <span class="variable">$7</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$8==》&#x27;</span> <span class="variable">$8</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$9==》&#x27;</span> <span class="variable">$9</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$10==》&#x27;</span> <span class="variable">$&#123;10&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$11==》&#x27;</span> <span class="variable">$&#123;11&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li> 脚本测试</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># bash test1.sh a b c d e f g h i j k</span></span><br><span class="line"><span class="variable">$0</span>==》 test1.sh</span><br><span class="line"><span class="variable">$1</span>==》 a</span><br><span class="line"><span class="variable">$2</span>==》 b</span><br><span class="line"><span class="variable">$3</span>==》 c</span><br><span class="line"><span class="variable">$4</span>==》 d</span><br><span class="line"><span class="variable">$5</span>==》 e</span><br><span class="line"><span class="variable">$6</span>==》 f</span><br><span class="line"><span class="variable">$7</span>==》 g</span><br><span class="line"><span class="variable">$8</span>==》 h</span><br><span class="line"><span class="variable">$9</span>==》 i</span><br><span class="line"><span class="variable">$10</span>==》 j</span><br><span class="line"><span class="variable">$11</span>==》 k</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>分析：<ul>
<li>  执行脚本的时候共传入了 11 个参数；</li>
<li>  在脚本中，<code>$0</code> 输出了当前脚本文件的名称；</li>
<li>  <code>$1 ~ $9</code>，分别输出了第1~9个参数；</li>
<li>  <code>$&#123;10&#125;</code> 和 <code>$&#123;11&#125;</code> 分别输出了第 10 个和第 11 个参数。</li>
</ul>
</li>
</ol>
<hr>
<h4 id><a href="#" class="headerlink" title="$#"></a>$#</h4><p><strong>基本语法</strong>：<code>$#</code></p>
<ul>
<li>  功能描述：获取所有输入参数个数，常用于循环。</li>
</ul>
<p><strong>Demo</strong></p>
<ol>
<li> 编写一个脚本 <code>test2.sh</code></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$#</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li> 脚本测试</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh test2.sh</span></span><br><span class="line">0</span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh test2.sh 1 2 3 4 5</span></span><br><span class="line">5</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="和"><a href="#和" class="headerlink" title="$* 和 $@"></a>$* 和 $@</h4><ul>
<li>  <code>$*</code>：打印执行这个脚本时输入的所有参数，也就是参数列表，<code>$*</code> 把所有的参数看成一个整体；</li>
<li>  <code>$@</code>：打印执行这个脚本时输入的所有参数，也就是参数列表，不过 <code>$@</code> 把每个参数区分对待。</li>
</ul>
<ol>
<li> 编写一个测试脚本</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$*==========================&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> $*</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$@==========================&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$@</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li> 脚本测试</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># sh test3.sh 1 2 3 4 5</span></span><br><span class="line">$*==========================</span><br><span class="line">1 2 3 4 5</span><br><span class="line"><span class="variable">$@</span>==========================</span><br><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="-1"><a href="#-1" class="headerlink" title="$?"></a>$?</h4><p><strong>基本语法</strong>：<code>$?</code></p>
<ul>
<li>  功能描述：返回上一条命令的执行状态。如果返回值为0，则证明上一条命令执行成功，如果返回值<strong>非0</strong>，则证明上一条命令执行失败。</li>
</ul>
<p><strong>Demo</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表示上一条命令执行成功</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随便给一条必然会执行失败的指令</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># asdadad</span></span><br><span class="line">-bash: asdadad: <span class="built_in">command</span> not found</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次测试发现返回结果非0，表示上一条命令执行失败</span></span><br><span class="line">[root@VM-0-17-centos tmp]<span class="comment"># echo $?</span></span><br><span class="line">127</span><br></pre></td></tr></table></figure>







<hr>
<h2 id="变量的生命周期"><a href="#变量的生命周期" class="headerlink" title="变量的生命周期"></a>变量的生命周期</h2><ul>
<li>  <strong>产生：</strong>在第一次创建变量时产生</li>
<li>  <strong>销毁：</strong>①变量在执行 unset 时会被销毁；②当关闭当前 bash 时，当前 bash 所定义的变量也会被全部销毁。</li>
</ul>
<h1 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h1><h2 id="和-反引号-的区别"><a href="#和-反引号-的区别" class="headerlink" title="$() 和 反引号 的区别"></a>$() 和 反引号<code> </code>的区别</h2><p>在 bash中，<code>$()</code>与 <code> </code>（反引号）都是用来作命令替换的。<strong>命令替换</strong>与变量替换差不多，都是用来重组命令行的，先完成引号里的命令行，然后将其结果替换出来，再重组成新的命令行。</p>
<ul>
<li>  <code>$()</code> 与｀｀</li>
</ul>
<p>在操作上，这两者都能达到相同的效果，但是建议使用 <code>$( )</code>，理由如下：</p>
<hr>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="整数运算符"><a href="#整数运算符" class="headerlink" title="整数运算符"></a>整数运算符</h2><p><strong>整数运算符</strong>：只适用于整数之间的运算，小数不适用，浮点运算需要借助其它的命令。</p>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><ul>
<li>  方式一：使用 <code>$</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">((运算式))</span></span><br><span class="line">或</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">[运算式]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  案例一</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos ~]<span class="comment"># echo $(((1+1)*3-3))</span></span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># num=$[(1+2)*2-4]</span></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># echo $num</span></span><br><span class="line">2</span><br></pre></td></tr></table></figure>



<ul>
<li><p>方式二：使用 <code>expr</code> 表达式</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运算符：+ , - , \*, /, %</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意</strong>：<ol>
<li> <code>expr</code> 运算符间要有空格; </li>
<li> 在 Shell 中，<code>*</code> 默认被识别为通配符，所以如果想要进行乘运算，需要对 <code>*</code> 进行转义，转义为 <code>\*</code>，否则会被视为通配符；</li>
<li> <code>expr</code> 不支持括号，所以在进行复杂运算时经常需要和反引号（<code> </code>）或 <code>$()</code> 配合使用。</li>
</ol>
</li>
</ul>
</li>
<li><p>  案例二：</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos ~]<span class="comment"># expr 2 + 3</span></span><br><span class="line">5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复杂运算：(1+1)*2</span></span><br><span class="line"><span class="comment"># 反引号 `` 或 $() ，可以将语句运行的结果作为值赋值给一个变量</span></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># expr `expr 1 + 1` \* 2</span></span><br><span class="line">4</span><br><span class="line"><span class="comment"># 分析：先计算 `expr 1 + 1` 结果为 2，再将结果代入外层的表达式继续进行运算</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是使用反引号不适合多层括号嵌套的运算，理由是反引号无法进行智能识别，</span></span><br><span class="line"><span class="comment"># 例如计算 ((1+1)*2-1)/4，使用反引号表达式为：</span></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># expr `expr `expr 1 + 1` \* 2 - 1` / 4</span></span><br><span class="line"><span class="built_in">expr</span>: missing operand</span><br><span class="line">Try <span class="string">&#x27;expr --help&#x27;</span> <span class="keyword">for</span> more information.</span><br><span class="line">-bash: *: <span class="built_in">command</span> not found</span><br><span class="line"><span class="built_in">expr</span>: syntax error</span><br><span class="line"><span class="comment"># 因为反引号被提前识别了，在 `expr` 上消耗了一对反引号，导致剩余的反引号不能正确被识别，所以这时需要用 $() 来代替反引号</span></span><br><span class="line"></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># expr $(expr $(expr 1 + 1) \* 2 - 1) / 4</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>







<hr>
<h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><ol>
<li> 基本语法</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ condition ]	</span><br><span class="line"><span class="comment"># 1、condition 是一个条件表达式；</span></span><br><span class="line"><span class="comment"># 2、condition 的返回值是 Boolean 类型，在shell中，0为true，非0为false</span></span><br><span class="line"><span class="comment"># 3、注意condition前后要有空格</span></span><br><span class="line"><span class="comment"># 4、注意：如果 condition 不是一个条件表达式而是一个普通字符串，那么非空即为true，空为false。</span></span><br><span class="line"><span class="comment"># 如 [ newBoy ] 返回true，[] 返回false。</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>常用判断条件</p>
<ol>
<li><p> <strong>字符串比较</strong>：字符串比较使用 <code>=</code>；</p>
</li>
<li><p><strong>两个整数之间比较</strong>：不能使用 <code>=</code> 而是要使用 shell 提供的比较符，注意<strong>在 shell 中比较复杂两边必须有空格</strong>。 常见的比较符如下：</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-lt 小于（less than）            -le 小于等于（less equal）</span><br><span class="line"></span><br><span class="line">-eq 等于（equal）                   -gt 大于（greater than）</span><br><span class="line"></span><br><span class="line">-ge 大于等于（greater equal）  -ne 不等于（Not equal）</span><br></pre></td></tr></table></figure></li>
<li><p><strong>按照文件权限进行判断</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-r 有读的权限（<span class="built_in">read</span>）          -w 有写的权限（write）</span><br><span class="line"></span><br><span class="line">-x 有执行的权限（execute）</span><br></pre></td></tr></table></figure>

</li>
<li><p><strong>按照文件类型进行判断</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-f 文件存在并且是一个常规的文件（file）</span><br><span class="line"></span><br><span class="line">-e 文件存在（existence）       -d 文件存在并是一个目录（directory）</span><br><span class="line"></span><br><span class="line">-s 文件存在且不为空      -L 文件存在且是一个链接(<span class="built_in">link</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>案例实操</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#（1）23是否小于等于22</span></span><br><span class="line"></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># [ 23 -lt 32 ]</span></span><br><span class="line">[root@VM-0-17-centos ~]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#（2）当前用户对 /etc 目录是否有写的权限</span></span><br><span class="line">[root@VM-0-17-centos /]<span class="comment"># [ -w etc ]</span></span><br><span class="line">[root@VM-0-17-centos /]<span class="comment"># echo $?</span></span><br><span class="line">0	<span class="comment"># 0表示true，即有写的权限</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#（3）/etc 文件是否存在并且是一个目录</span></span><br><span class="line">[root@VM-0-17-centos /]<span class="comment"># [ -d /etc ]</span></span><br><span class="line">[root@VM-0-17-centos /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#（4）多条件判断（&amp;&amp; 表示前一条命令执行成功时，才执行后一条命令，|| 表示上一条命令执行失败后，才执行下一条命令）</span></span><br><span class="line"></span><br><span class="line">[root@VM-0-17-centos /]<span class="comment"># [ condition ] &amp;&amp; echo Yes || echo No</span></span><br><span class="line">Yes</span><br><span class="line">[root@VM-0-17-centos /]<span class="comment"># [ condition ] &amp;&amp; [ ] || echo No</span></span><br><span class="line">No</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="if-判断"><a href="#if-判断" class="headerlink" title="if 判断"></a>if 判断</h2><ol>
<li><p><strong>基本语法</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断式 ] </span><br><span class="line">  	<span class="keyword">then</span> 程序 </span><br><span class="line"><span class="keyword">elif</span> [ 条件判断式 ] </span><br><span class="line">	<span class="keyword">then</span> 程序..</span><br><span class="line"><span class="keyword">else</span> 程序..</span><br><span class="line"><span class="keyword">fi</span>	<span class="comment"># if 是 if 的反写，表示if代码块结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="keyword">if</span> [ 条件判断式 ] ; <span class="keyword">then</span> 程序.. </span><br><span class="line"><span class="keyword">elif</span> [条件判断式] ; <span class="keyword">then</span> 程序..</span><br><span class="line"><span class="keyword">else</span> 程序</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意事项：<ol>
<li> <code>[ 条件判断式 ]</code>：中括号和条件判断式之间必须有空格</li>
<li> <strong><code>if</code> 后要有空格</strong></li>
</ol>
</li>
</ul>
</li>
<li><p>案例实操</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需求：判断用户如果用户输入的参数是否为1，如果是1，就打印1；如果是2，就打印2；如果是3，就打印3；否则打印不是是1，2，3。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> -eq 1 ]</span><br><span class="line">  <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;用户输入的参数为：&quot;</span><span class="variable">$1</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> -eq 2 ]</span><br><span class="line">  <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;用户输入的参数为：&quot;</span><span class="variable">$1</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> -eq 3 ]</span><br><span class="line">  <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;用户输入的参数为：&quot;</span><span class="variable">$1</span></span><br><span class="line"><span class="keyword">else</span> <span class="built_in">echo</span> <span class="string">&quot;用户输入的参数不是1，2，3！&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="case-语句"><a href="#case-语句" class="headerlink" title="case 语句"></a>case 语句</h2><ol>
<li><p><strong>基本语法</strong></p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $变量名 <span class="keyword">in</span> </span><br><span class="line">	<span class="string">&quot;值1&quot;</span>） </span><br><span class="line">		如果变量的值等于值1，则执行程序1 </span><br><span class="line">	;; </span><br><span class="line">	</span><br><span class="line">	<span class="string">&quot;值2&quot;</span>） </span><br><span class="line">		如果变量的值等于值2，则执行程序2 </span><br><span class="line">	;; </span><br><span class="line">	</span><br><span class="line">	*）</span><br><span class="line">		如果变量的值都不是以上的值，则执行此程序</span><br><span class="line">	;; </span><br><span class="line"><span class="keyword">esac</span>	<span class="comment"># 反写case表示case结束</span></span><br></pre></td></tr></table></figure>

<p> <strong>注意事项：</strong></p>
<ul>
<li>  case 行尾必须为单词 <code>in</code>，每一个模式匹配必须以右括号 <code>)</code>结束。</li>
<li>  双分号 <code>;;</code> 表示命令序列结束，相当于 Java 中的 break。</li>
<li>  最后的 <code>*）</code> 表示默认模式，相当于 Java 中的 default。     </li>
</ul>
</li>
<li><p>案例实操</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断用户输入的参数是否为 guest，如果是 guest，输出欢迎光临；如果是admin，输出欢迎管理员；其它情况输出不欢迎。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">  guset)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;欢迎光临！&quot;</span></span><br><span class="line">  ;;</span><br><span class="line">  admin)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;欢迎管理员！&quot;</span></span><br><span class="line">  ;;</span><br><span class="line">  *)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;不欢迎！&quot;</span></span><br><span class="line">  ;;</span><br><span class="line"><span class="keyword">esac</span>	</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><ol>
<li><p>基本语法</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( 初始值;循环控制条件;变量变化 ))</span><br><span class="line">	<span class="keyword">do</span> </span><br><span class="line">		程序</span><br><span class="line">    <span class="keyword">done</span>	<span class="comment"># 表示程序执行结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( 初始值;循环控制条件;变量变化 )); <span class="keyword">do</span> 程序; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></li>
<li><p>案例实操</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计1-100的和</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span>=0</span><br><span class="line"><span class="keyword">for</span>((i=1; i&lt;=100; i++))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">    	<span class="built_in">sum</span>=$[<span class="variable">$sum</span> + <span class="variable">$i</span>]</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切记在shell中等号两边不能有空格</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="foreach-循环"><a href="#foreach-循环" class="headerlink" title="foreach 循环"></a>foreach 循环</h3><ol>
<li><p>基本语法</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值1 值2 值3… </span><br><span class="line">	<span class="keyword">do</span> </span><br><span class="line">		程序 </span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 1 2 3; <span class="keyword">do</span> 程序; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> &#123;1..3&#125;; <span class="keyword">do</span> 程序; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></li>
<li><p>案例实操</p>
<ul>
<li><p>打印集合中的数字</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环遍历输出集合中每个元素的值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> 1 2 3 4 5</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> 数鸭子<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
<li><p>动态获取参数列表集合</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环遍历输出结合中每个元素的值</span></span><br><span class="line"><span class="comment"># 通过 $* 或 $@ 获取参数列表中的所有参数</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> $*</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> 数鸭子<span class="variable">$num</span></span><br><span class="line">    <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>  执行结果：</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos 00temp]<span class="comment"># bash foreach.sh 1 3 5 7 9</span></span><br><span class="line">数鸭子1</span><br><span class="line">数鸭子3</span><br><span class="line">数鸭子5</span><br><span class="line">数鸭子7</span><br><span class="line">数鸭子9</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<hr>
<h3 id="比较-和-区别"><a href="#比较-和-区别" class="headerlink" title="比较 $* 和 $@ 区别"></a>比较 $* 和 $@ 区别</h3><ol>
<li><p><code>$*</code> 和 <code>$@</code> 都表示传递给函数或脚本的所有参数，不被双引号<code>“ ”</code>包含时，二者是等价的，都是以 <code>$1 $2 …$n</code> 的形式输出所有参数。</p>
<ul>
<li>  编写 dif.sh 脚本</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash      </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;张三打中了 <span class="variable">$i</span> 环&quot;</span>  </span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;李四打中了 <span class="variable">$j</span> 环&quot;</span>  </span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>  运行 dif.sh 脚本</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos 00temp]<span class="comment"># bash dif.sh 10 9 8 7</span></span><br><span class="line">张三打中了 10 环</span><br><span class="line">张三打中了 9 环</span><br><span class="line">张三打中了 8 环</span><br><span class="line">张三打中了 7 环</span><br><span class="line">李四打中了 10 环</span><br><span class="line">李四打中了 9 环</span><br><span class="line">李四打中了 8 环</span><br><span class="line">李四打中了 7 环</span><br></pre></td></tr></table></figure></li>
<li><p>当它们被双引号 <code>“”</code> 包含时，<code>“$*”</code> 会将所有的参数作为一个整体，以 <code>“$1 $2 …$n”</code> 的形式输出所有参数；而 <code>“$@”</code> 会将各个参数分开，以<code>“$1” “$2”…”$n”</code>的形式输出所有参数。</p>
<ul>
<li>  编写 dif2.sh 脚本</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash      </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;张三打中了 <span class="variable">$i</span> 环&quot;</span>  </span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;李四打中了 <span class="variable">$j</span> 环&quot;</span>  </span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>  运行 dif2.sh 脚本</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos 00temp]<span class="comment"># bash dif2.sh 10 9 8 7</span></span><br><span class="line">张三打中了 10 9 8 7 环</span><br><span class="line">李四打中了 10 环</span><br><span class="line">李四打中了 9 环</span><br><span class="line">李四打中了 8 环</span><br><span class="line">李四打中了 7 环</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>总结：</strong></p>
<ul>
<li>  当 <code>$@</code> 和 <code>$*</code> 都不被双引号包裹时，二者的作用是一样的；</li>
<li>  当 <code>$@</code> 和 <code>$*</code> 被双引号包裹时，即表现形式为 <code>&quot;$@&quot;</code> 和 <code>&quot;$*&quot;</code> ，<code>&quot;$@&quot;</code> 表示将参数列表中的所有参数分别处理，而 <code>&quot;$*&quot;</code> 表示将参数列表中的所有参数视为一个整体处理。</li>
</ul>
<hr>
<h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><ol>
<li><p>基本语法</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ 条件判断式 ] </span><br><span class="line">	<span class="keyword">do</span> </span><br><span class="line">  		程序</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>((表达式))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	    程序</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>案例实操</p>
<ul>
<li>  编写 <code>while.sh</code> 脚本</li>
</ul>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 从1累加到100，用while循环实现</span></span><br><span class="line"><span class="built_in">sum</span>=0</span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 100 ]</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">sum</span>=$[<span class="variable">$sum</span>+<span class="variable">$i</span>]</span><br><span class="line">    i=$[<span class="variable">$i</span>+1]</span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="read函数"><a href="#read函数" class="headerlink" title="read函数"></a>read函数</h2><p><strong>作用：</strong>读取控制台输入</p>
<p><strong>基本语法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span>(选项)(参数)</span><br><span class="line">  选项：</span><br><span class="line">	-p：指定读取值时的提示符；(<span class="built_in">print</span>)</span><br><span class="line">	-t：指定读取值时等待的时间（秒）。(time)</span><br><span class="line"></span><br><span class="line">  参数</span><br><span class="line">	变量：将读取到值赋值给一个变量，在这里设定变量名</span><br></pre></td></tr></table></figure>

<p><strong>Demo</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表示通过 username 接收控制台的输入，-p 表示提供给控制台的展示信息，-t 表示在10s之后自动退出，如果不指定表示一直死等，永不退出</span></span><br><span class="line">[root@VM-0-17-centos 00temp]<span class="comment"># read -p 请输入用户名： -t 10 username</span></span><br><span class="line">请输入用户名：张三</span><br><span class="line">[root@VM-0-17-centos 00temp]<span class="comment"># echo $username</span></span><br><span class="line">张三</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="basename-和-dirname"><a href="#basename-和-dirname" class="headerlink" title="basename 和 dirname"></a>basename 和 dirname</h2><h3 id="basename"><a href="#basename" class="headerlink" title="basename"></a>basename</h3><p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">basename [string / pathname] [suffix] </span><br></pre></td></tr></table></figure>

<ul>
<li>  功能描述：<code>basename</code> 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。</li>
<li>  选项：<code>suffix</code> 为后缀，如果 suffix 被指定了，basename 会将 pathname 或 string 中的 suffix 去掉。</li>
</ul>
<p><strong>Demo</strong></p>
<ul>
<li>  截取该 <code>/opt/module/jdk1.8.0_121/</code> 路径的文件名称</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># basename /opt/module/jdk1.8.0_121/</span></span><br><span class="line">jdk1.8.0_121</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除后缀</span></span><br><span class="line">[root@VM-0-17-centos module]<span class="comment"># basename /opt/module/jdk1.8.0_121/ _121</span></span><br><span class="line">jdk1.8.0</span><br></pre></td></tr></table></figure>





<h3 id="dirname"><a href="#dirname" class="headerlink" title="dirname"></a>dirname</h3><p><strong>作用</strong>：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分））</p>
<p><strong>Demo</strong></p>
<ul>
<li>  比如当前系统有一个文件的绝对路径是：<code>/opt/module/jdk1.8.0_121/</code>，那么使用 <code>dirname</code> 函数后：</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># dirname /opt/module/jdk1.8.0_121/</span></span><br><span class="line">/opt/module		<span class="comment"># 得到文件前的路径</span></span><br><span class="line">[root@VM-0-17-centos module]<span class="comment"># dirname jdk1.8.0_121/</span></span><br><span class="line">.	<span class="comment"># 得到文件前的相对路径， `.` 表示当前目录</span></span><br></pre></td></tr></table></figure>





<hr>
<h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><p><strong>基本语法</strong></p>
<ol>
<li> <strong>函数定义</strong></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">关键字 函数名()</span><br><span class="line">&#123;</span><br><span class="line">	函数体</span><br><span class="line">	<span class="comment"># 如果没有定义return，默认返回函数中最后一条语句的执行结果</span></span><br><span class="line">	[<span class="built_in">return</span> int]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> funname[()]</span><br><span class="line">&#123;</span><br><span class="line">	Action;</span><br><span class="line">	[<span class="built_in">return</span> int;]</span><br><span class="line">&#125;</span><br><span class="line">funname</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li> <strong>函数调用</strong></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名 参数1 参数2 ...</span><br></pre></td></tr></table></figure>





<p><strong>Tip</strong></p>
<ul>
<li>  必须在调用函数之前先声明函数，因为 shell 脚本是逐行运行的，不会像其它语言一样先编译。</li>
<li>  函数返回值只能通过 <code>$?</code> 系统变量获得，可以通过显式声明 <code>return</code> 返回，如果没有显式声明，将以最后一条命令运行结果作为返回值，return 后跟的数值是整型且范围必须在 <code>0-255</code> 内。</li>
</ul>
<p><strong>Demo</strong></p>
<ul>
<li>  <code>add.sh</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需求：两数之和</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数定义</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">add</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    result=$[<span class="variable">$1</span>+<span class="variable">$2</span>]</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两数之和为<span class="variable">$result</span>&quot;</span></span><br><span class="line">    <span class="comment"># 如果没有显式指定return，返回函数中的最后一条语句的执行结果</span></span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$result</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数调用：执行脚本时真正运行的程序</span></span><br><span class="line">  <span class="comment"># 1、读取用户输入的两个参数</span></span><br><span class="line"><span class="built_in">read</span> -p 请输入第一个参数：num1</span><br><span class="line"><span class="built_in">read</span> -p 请输入第二个参数：num2</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 2、调用自定义的 add 函数</span></span><br><span class="line">add num1 num2</span><br></pre></td></tr></table></figure>

<ul>
<li>  执行脚本</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># bash add.sh </span></span><br><span class="line">请输入第一个参数：10</span><br><span class="line">请输入第二个参数：20</span><br><span class="line">两数之和为30</span><br><span class="line">[root@VM-0-17-centos module]<span class="comment"># echo $?	</span></span><br><span class="line">30	<span class="comment"># 在控制台上打印上一个函数的返回结果</span></span><br></pre></td></tr></table></figure>





<hr>
<h1 id="Shell-工具"><a href="#Shell-工具" class="headerlink" title="Shell 工具"></a>Shell 工具</h1><h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><p><strong>wc（WordCount）</strong>命令用来计算数字。利用<code>wc</code>指令我们可以用来统计文件行数、单词数、字符数、字节数。</p>
<p>若不指定文件名称，或是所给予的文件名为 “-” ，则wc指令会从标准输入设备读取数据。</p>
<p><strong>基本用法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [选项参数] filename</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>-l</code></td>
<td>统计文件行数</td>
</tr>
<tr>
<td><code>-w</code></td>
<td>统计文件的单词数</td>
</tr>
<tr>
<td><code>-m</code></td>
<td>统计文件的字符数</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>统计文件的字节数</td>
</tr>
</tbody></table>
<p><strong>Demo</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># wc myfun.sh </span></span><br><span class="line"> 20  35 468 myfun.sh	<span class="comment"># 默认展示4个属性，包括：行数 单词数 字节数 文件名	</span></span><br><span class="line"> <span class="comment"># 行数 单词数 字节数 文件名	</span></span><br><span class="line"> </span><br><span class="line">[root@VM-0-17-centos module]<span class="comment"># wc -m myfun.sh </span></span><br><span class="line">272 myfun.sh	<span class="comment"># 单独展示字符数+文件名</span></span><br></pre></td></tr></table></figure>



<hr>
<h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><p><strong>cut</strong> 就是在文件中负责剪切数据用的。cut 命令从文件的<strong>每一行</strong>剪切字节、字符和字段并将这些字节、字符和字段输出。cut 不会改变源文件的数据。</p>
<p><strong>基本用法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> [选项参数]  filename </span><br></pre></td></tr></table></figure>

<ul>
<li>  说明：默认分隔符是制表符</li>
</ul>
<p><strong>选项参数说明</strong></p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>-f</code></td>
<td>f 为 fileds，列号，提取第几列</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>d 为 Descriptor，分隔符，按照指定分隔符分割列</td>
</tr>
</tbody></table>
<p><strong>Demo</strong></p>
<ol>
<li> 首先查看 <code>$PATH</code> 变量的内容</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk1.8.0_121/bin:/root/bin</span><br></pre></td></tr></table></figure>



<ol start="2">
<li> 以 <code>:</code> 为分隔符，切割 PATH 环境变量，并取出第一列</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># echo $PATH | cut -d : -f 1</span></span><br><span class="line">/usr/local/sbin</span><br></pre></td></tr></table></figure>



<ol start="3">
<li> 以 <code>:</code> 为分隔符，切割 PATH 环境变量，并取出第二、三列</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># echo $PATH | cut -d : -f 2,3</span></span><br><span class="line">/usr/local/bin:/usr/sbin</span><br></pre></td></tr></table></figure>



<ol start="4">
<li> 以 <code>:</code> 为分隔符，切割 PATH 环境变量，并取出第2个<code>:</code>开始后的所有路径：</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># echo $PATH | cut -d : -f 2-</span></span><br><span class="line">/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk1.8.0_121/bin:/root/bin</span><br></pre></td></tr></table></figure>



<ol start="5">
<li> 以 <code>:</code> 为分隔符，切割 PATH 环境变量，并取出第第一到三列，和第五列</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-0-17-centos module]<span class="comment"># echo $PATH | cut -d : -f 1-3,5</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/opt/module/jdk1.8.0_121/bin</span><br></pre></td></tr></table></figure>





<hr>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><p><strong>sed</strong> 是一种<strong>流</strong>处理器，用于批量处理，它每次处理的单位是一行。处理时，把当前要处理的行数据存储在临时缓冲区中，接着用 <code>sed</code> 命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。<code>sed</code> 命令并不会修改源文件的内容。</p>
<p><strong>基本用法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [选项参数] ‘<span class="built_in">command</span>’ filename</span><br></pre></td></tr></table></figure>



<p><strong>选项参数说明</strong></p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>-e</code></td>
<td>直接在指令列模式上进行sed的动作编辑。</td>
</tr>
</tbody></table>
<p><strong>命令功能描述</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>新增（add），a 的后面可以接字串，在下一行出现</td>
</tr>
<tr>
<td>d</td>
<td>删除（delete）</td>
</tr>
<tr>
<td>s</td>
<td>查找并替换（search）</td>
</tr>
</tbody></table>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/10/28/Java%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" rel="prev" title="Java序列化和反序列化">
                  <i class="fa fa-chevron-left"></i> Java序列化和反序列化
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/11/04/SpringSecurity/" rel="next" title="SpringSecurity">
                  SpringSecurity <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
