<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="1 Spring概述1.1 是什么   轻量级 Java 开发框架。   目的是为了解决企业级应用开发中的业务逻辑层和其他各层的耦合问题。   它是一个分层的 JavaSE&#x2F;JavaEE 一站式轻量级开源框架，为开发Java应用程序提供全面的基础架构支持。   Spring 负责基础架构，因此Java开发者可以专注于应用程序的开发。   Spring 最根本的使命是解决企业级应用开发的复杂性，即简">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring">
<meta property="og:url" content="http://example.com/2020/07/28/Spring/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1 Spring概述1.1 是什么   轻量级 Java 开发框架。   目的是为了解决企业级应用开发中的业务逻辑层和其他各层的耦合问题。   它是一个分层的 JavaSE&#x2F;JavaEE 一站式轻量级开源框架，为开发Java应用程序提供全面的基础架构支持。   Spring 负责基础架构，因此Java开发者可以专注于应用程序的开发。   Spring 最根本的使命是解决企业级应用开发的复杂性，即简">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2020/07/28/Spring/image-20220329182326817.png">
<meta property="og:image" content="http://example.com/2020/07/28/Spring/spring%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-1598445621955">
<meta property="og:image" content="http://example.com/2020/07/28/Spring/%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98.png">
<meta property="og:image" content="http://example.com/2020/07/28/Spring/RowMapper.png">
<meta property="article:published_time" content="2020-07-28T02:05:13.000Z">
<meta property="article:modified_time" content="2022-03-29T10:35:01.492Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2020/07/28/Spring/image-20220329182326817.png">


<link rel="canonical" href="http://example.com/2020/07/28/Spring/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2020/07/28/Spring/","path":"2020/07/28/Spring/","title":"Spring"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Spring | Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Spring%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">1 Spring概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E4%B8%A4%E5%A4%A7%E6%A0%B8%E5%BF%83"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 两大核心</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Spring-%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E3%80%81%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%E3%80%81%E5%92%8C%E6%A0%B8%E5%BF%83"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 Spring 的设计目标、设计理念、和核心</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">1.4.</span> <span class="nav-text">1.4    优缺点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">1.5.</span> <span class="nav-text">1.5    体系结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-Spring-%E4%B8%AD%E7%94%A8%E5%88%B0%E4%BA%86%E5%93%AA%E4%BA%9B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.6.</span> <span class="nav-text">1.6 Spring 中用到了哪些设计模式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-IoC"><span class="nav-number">2.</span> <span class="nav-text">2    IoC</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-AOP"><span class="nav-number">3.</span> <span class="nav-text">3    AOP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Spring-TX%EF%BC%9ASpring-%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1"><span class="nav-number">4.</span> <span class="nav-text">4    Spring TX：Spring 中的事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Before%EF%BC%9A%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.1.</span> <span class="nav-text">1    Before：不使用事务管理存在的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-After%EF%BC%9A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">4.2.</span> <span class="nav-text">2    After：解决方案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Spring%E4%B8%AD%E7%9A%84JDBCTemplate"><span class="nav-number">5.</span> <span class="nav-text">5    Spring中的JDBCTemplate</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-JdbcTemplate%E6%A6%82%E8%BF%B0"><span class="nav-number">5.1.</span> <span class="nav-text">5.1    JdbcTemplate概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-JdbcTemplate%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="nav-number">5.2.</span> <span class="nav-text">5.2    JdbcTemplate对象的创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-Spring%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">5.3.</span> <span class="nav-text">5.3    Spring中配置数据源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">5.3.1.</span> <span class="nav-text">5.3.1    环境搭建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-2-%E7%BC%96%E5%86%99spring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6bean-xml"><span class="nav-number">5.3.2.</span> <span class="nav-text">5.3.2    编写spring的配置文件bean.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-3-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">5.3.3.</span> <span class="nav-text">5.3.3    配置数据源</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AEc3p0%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">5.3.3.1.</span> <span class="nav-text">1、配置c3p0数据源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AEDBCP%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">5.3.3.2.</span> <span class="nav-text">2、配置DBCP数据源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AESpring%E5%86%85%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">5.3.3.3.</span> <span class="nav-text">3、配置Spring内置数据源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E5%B0%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%BF%A1%E6%81%AF%E9%85%8D%E7%BD%AE%E5%88%B0%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%E4%B8%AD"><span class="nav-number">5.3.3.4.</span> <span class="nav-text">4、将数据库连接的信息配置到外部属性文件中</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1%E3%80%81%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.3.4.1.</span> <span class="nav-text">4.1、定义属性文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2%E3%80%81%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E7%9A%84%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.3.4.2.</span> <span class="nav-text">4.2、引入外部的属性文件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-JdbcTemplate%E7%9A%84CRUD%E6%93%8D%E4%BD%9C"><span class="nav-number">5.4.</span> <span class="nav-text">5.4    JdbcTemplate的CRUD操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-1-%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87"><span class="nav-number">5.4.1.</span> <span class="nav-text">5.4.1    前期准备</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">5.4.1.1.</span> <span class="nav-text">1、准备数据库</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-2-%E5%9C%A8Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AEJdbcTemplate"><span class="nav-number">5.4.2.</span> <span class="nav-text">5.4.2    在Spring配置文件中配置JdbcTemplate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-3-%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84CRUD"><span class="nav-number">5.4.3.</span> <span class="nav-text">5.4.3    最基本的CRUD</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-4-%E5%9F%BA%E6%9C%AC%E7%9A%84CRUD"><span class="nav-number">5.4.4.</span> <span class="nav-text">5.4.4    基本的CRUD</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C"><span class="nav-number">5.4.4.1.</span> <span class="nav-text">1、保存操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"><span class="nav-number">5.4.4.2.</span> <span class="nav-text">2、更新操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="nav-number">5.4.4.3.</span> <span class="nav-text">3、删除操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E6%93%8D%E4%BD%9C-%E2%98%85"><span class="nav-number">5.4.4.4.</span> <span class="nav-text">4、查询所有操作[★]</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%86%E6%9E%90%EF%BC%9A"><span class="nav-number">5.4.4.4.1.</span> <span class="nav-text">分析：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1%E3%80%81%E8%87%AA%E5%B7%B1%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%BF%94%E5%9B%9E%E7%9A%84Bean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B0%81%E8%A3%85"><span class="nav-number">5.4.4.4.2.</span> <span class="nav-text">1、自己手动实现对返回的Bean对象的封装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%E3%80%81%E9%87%87%E7%94%A8JdbcTemplate%E6%8F%90%E4%BE%9B%E7%9A%84%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95%E5%AE%8C%E6%88%90%E5%AF%B9%E8%BF%94%E5%9B%9E%E7%9A%84Bean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B0%81%E8%A3%85"><span class="nav-number">5.4.4.4.3.</span> <span class="nav-text">2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5%E3%80%81%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AA%E6%93%8D%E4%BD%9C"><span class="nav-number">5.4.4.5.</span> <span class="nav-text">5、查询一个操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6%E3%80%81%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E4%B8%80%E8%A1%8C%E4%B8%80%E5%88%97%E6%93%8D%E4%BD%9C"><span class="nav-number">5.4.4.6.</span> <span class="nav-text">6、查询返回一行一列操作</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">231</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">64</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/28/Spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Spring | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-07-28 10:05:13" itemprop="dateCreated datePublished" datetime="2020-07-28T10:05:13+08:00">2020-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-03-29 18:35:01" itemprop="dateModified" datetime="2022-03-29T18:35:01+08:00">2022-03-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="1-Spring概述"><a href="#1-Spring概述" class="headerlink" title="1 Spring概述"></a>1 Spring概述</h1><h2 id="1-1-是什么"><a href="#1-1-是什么" class="headerlink" title="1.1 是什么"></a>1.1 是什么</h2><ul>
<li>  <strong>轻量级</strong> Java 开发框架。</li>
<li>  目的是为了解决企业级应用开发中的业务逻辑层和其他各层的耦合问题。</li>
<li>  它是一个分层的 JavaSE/JavaEE <strong>一站式轻量级</strong>开源框架，为开发Java应用程序提供全面的基础架构支持。</li>
<li>  Spring 负责基础架构，因此Java开发者可以<strong>专注于应用程序的开发</strong>。</li>
<li>  Spring 最根本的使命是解决企业级应用开发的复杂性，即简化 Java 开发。</li>
<li>  Spring可以做很多事情，它为企业级开发提供给了丰富的功能，但是这些功能的底层都依赖于它的两个核心特性，也就是依赖注入（dependency injection，DI）和面向切面编程（aspectoriented programming，AOP）。</li>
</ul>
<h2 id="1-2-两大核心"><a href="#1-2-两大核心" class="headerlink" title="1.2 两大核心"></a>1.2 两大核心</h2><blockquote>
<ol>
<li><strong>IoC（Inverse of Control）</strong>：控制反转</li>
<li><strong>AOP（Aspect Oriented Programmimg）</strong>：面向切面编程</li>
</ol>
</blockquote>
<p><strong>IOC</strong></p>
<ul>
<li>  IOC 就是不会在代码中直接使用 <code>new</code> 关键字创建对象，只是把对象声明出来；</li>
<li>  在代码中不直接让对象与服务进行连接，但是在配置文件中描述了哪一项组件需要哪一项服务，由容器将它们组装起来。</li>
<li>  在一般的 IOC 场景中，容器创建了所有的对象，并设置了必要的属性将他们联系在一起，等到需要使用的时候才把他们声明出来；</li>
<li>  或者使用注解方式，容器会自动根据注解把对象组合起来。</li>
</ul>
<p><strong>AOP</strong></p>
<ul>
<li>  AOP 是一种编程模式，它允许开发人员通过自定义的横切点进行模块化，将那些影响多个类的行为封装到可重用的模块中。</li>
<li>  比如日志输出，不使用 AOP 的话就需要把日志的输出语句放在所有类、方法中，但是有了 AOP 就可以把日志输出语句封装成一个可重用模块，在以声明的方式将它们放在类中，每次使用类就自动完成了日志输出。 </li>
</ul>
<hr>
<h2 id="1-3-Spring-的设计目标、设计理念、和核心"><a href="#1-3-Spring-的设计目标、设计理念、和核心" class="headerlink" title="1.3 Spring 的设计目标、设计理念、和核心"></a>1.3 Spring 的设计目标、设计理念、和核心</h2><ul>
<li>  <strong>Spring设计目标</strong>：为开发者提供一个一站式轻量级应用开发平台；</li>
<li>  <strong>Spring设计理念</strong>：在JavaEE开发中，支持POJO和JavaBean开发方式，使应用面向接口开发，充分支持OOP（面向对象）设计方法；Spring通过IOC容器实现对象耦合关系的管理，并实现依赖反转，将对象之间的依赖关系交给IOC容器，实现解耦；</li>
<li>  <strong>Spring框架的核心</strong>：IOC 容器和 AOP 模块。通过 IOC 容器管理 POJO 对象以及他们之间的耦合关系；通过 AOP 以动态非侵入的方式增强服务。</li>
<li>  IOC 让相互协作的组件保持松散的耦合，而 AOP 编程允许你把遍布于应用各层的功能分离出来形成可重用的功能组件。</li>
</ul>
<hr>
<h2 id="1-4-优缺点"><a href="#1-4-优缺点" class="headerlink" title="1.4    优缺点"></a>1.4    优缺点</h2><blockquote>
<p>  <strong>优点</strong></p>
</blockquote>
<ol>
<li><strong>降低耦合度，简化开发</strong><ul>
<li>通过Spring提供的IoC容器，可以将对象间的依赖关系交由Spring进行控制，避免硬解码所造成的程序过度耦合。</li>
<li>用户也不必再为单例模式、属性文件解析这些很底层的需求写代码，可以更专注于上层的应用。</li>
</ul>
</li>
<li><strong>支持面向切面编程（AOP）</strong><ul>
<li>  Spring 提供面向切面编程，可以方便的实现对程序进行权限拦截、运行监控等功能。</li>
</ul>
</li>
<li><strong>声明式事务的支持</strong><ul>
<li>  只需要通过配置就可以完成对事务的管理，而无需手动编写代码。</li>
</ul>
</li>
<li><strong>方便程序的测试</strong><ul>
<li>  Spring 对 Junit4 的支持，可以通过注解方便的测试 Spring 程序。</li>
</ul>
</li>
<li><strong>方便集成各种优秀框架</strong><ul>
<li>  Spring 不排斥各种优秀的开源框架，其内部提供了对各种优秀框架的直接支持（如：Struts、Hibernate、MyBatis等）。</li>
</ul>
</li>
<li><strong>降低 JavaEE API 的使用难度</strong><ul>
<li>  Spring 对 JavaEE 开发中非常难用的一些 API（JDBC、JavaMail、远程调用等），都提供了封装，使这些 API 应用难度大大降低。 </li>
</ul>
</li>
</ol>
<blockquote>
<p>  <strong>缺点</strong></p>
</blockquote>
<ol>
<li> 配置复杂（相较于 SpringBoot 而言）</li>
<li> Spring 依赖反射，反射影响性能</li>
</ol>
<hr>
<h2 id="1-5-体系结构"><a href="#1-5-体系结构" class="headerlink" title="1.5    体系结构"></a>1.5    体系结构</h2><p>Spring 项目目前总共有20多个模块，点击这里访问 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework">GitHub</a> 查看模块源码。</p>
<p><img src="/2020/07/28/Spring/image-20220329182326817.png" alt="image-20220329182326817"></p>
<p>这些模块按照功能大致被划分为</p>
<ul>
<li>  <strong>核心容器（Core Container）</strong></li>
<li>  <strong>AOP（Aspect Oriented Programming）</strong></li>
<li>  <strong>设备支持（Instrmentation）</strong></li>
<li>  <strong>数据访问与集成（Data Access/Integeration）</strong> 、 </li>
<li>  <strong>Web</strong></li>
<li>  <strong>消息（Messaging）</strong> </li>
<li>  <strong>Test</strong></li>
</ul>
<p>6类，下图是 Spring5 的模块分类图：</p>
<p><img src="/2020/07/28/Spring/spring%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-1598445621955" alt="image-20200706181255193"></p>
<p><strong>Spring Core</strong>：提供了框架的基本组成部分，包括控制反转（IOC）和依赖注入（DI）功能。</p>
<p><strong>Spring Beans</strong>：提供了 BeanFactory，是工厂模式的一个经典实现，Spring 将管理的对象称为 Bean。</p>
<p><strong>Spring Context</strong>：构建于 Core 封装包基础上的 Context 封装包，提供了一种框架式的对象访问方法。</p>
<p><strong>Spring JDBC</strong>：提供了一个 JDBC 的抽象层，消除了烦琐的 JDBC 编码和数据库厂商特有的错误代码解析， 用于简化JDBC。</p>
<p><strong>Spring AOP</strong>：提供了面向切面的编程实现，让你可以自定义拦截器、切点等。</p>
<p><strong>Spring Web</strong>：提供了针对 Web 开发的集成特性，例如文件上传，利用 servlet listeners 进行 IOC 容器初始化和针对 Web 的 ApplicationContext。</p>
<p><strong>Spring Test</strong>：主要为测试提供支持的，支持使用 JUnit 或 TestNG 对 Spring 组件进行单元测试和集成测试。</p>
<h2 id="1-6-Spring-中用到了哪些设计模式"><a href="#1-6-Spring-中用到了哪些设计模式" class="headerlink" title="1.6 Spring 中用到了哪些设计模式"></a>1.6 Spring 中用到了哪些设计模式</h2><ol>
<li> <strong>工厂模式</strong>：BeanFactory 就是工厂模式的提现，用来创建对象的实例。</li>
<li> <strong>单例模式</strong>：Bean 默认为单例模式。</li>
<li> <strong>代理模式</strong>：AOP 功能用到了 JDK 的动态代理和 cglib 字节码生成技术。</li>
<li> <strong>模板方法模式</strong>：用来解决代码重复的问题。比如 RestTemplate，JmsTemplate，JpaTemplate。</li>
<li> <strong>观察者模式</strong>：定义对象间一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都会得到通知并被动更新，如Spring 中 listener 的实现 ApplicationListener。</li>
</ol>
<hr>
<h1 id="2-IoC"><a href="#2-IoC" class="headerlink" title="2    IoC"></a>2    IoC</h1><blockquote>
<p>  超链接：<a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/08/07/Spring%E2%80%94%E2%80%94IoC/">Spring——IoC</a></p>
</blockquote>
<hr>
<h1 id="3-AOP"><a href="#3-AOP" class="headerlink" title="3    AOP"></a>3    AOP</h1><blockquote>
<p>  超链接：<a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/07/20/Spring%E2%80%94%E2%80%94AOP/">Spring——AOP</a></p>
</blockquote>
<hr>
<h1 id="4-Spring-TX：Spring-中的事务"><a href="#4-Spring-TX：Spring-中的事务" class="headerlink" title="4    Spring TX：Spring 中的事务"></a>4    Spring TX：Spring 中的事务</h1><blockquote>
<p>  <strong>超链接：</strong><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/07/20/Spring%E2%80%94%E2%80%94TX/">Spring——TX</a></p>
</blockquote>
<ul>
<li>  Spring 中的事务是利用 AOP 面向切面的特性配置的。</li>
<li>  事务管理是一个公共的功能，在很多方法中都需要被使用到，利用 AOP 的特性，可以将事务管理抽取成一个增强类，在代码中需要使用事务管理的方法上动态织入即可。可以在不修改代码的基础上动态的给方法增加事务管理的功能。</li>
<li>  如果是基于 XML 配置的 Spring 事务管理，那么在业务层方法的代码上，你将看不到任何事务管理的相关代码，但是这些方法确确实实是被事务所管理的，管理事务的配置信息写在 XML 配置文件中，运行期间通过动态织入对切入点方法进行增强。</li>
</ul>
<h2 id="1-Before：不使用事务管理存在的问题"><a href="#1-Before：不使用事务管理存在的问题" class="headerlink" title="1    Before：不使用事务管理存在的问题"></a>1    Before：不使用事务管理存在的问题</h2><blockquote>
<p>  <strong>转账（Account）案例中的事务</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户的业务层实现类</span></span><br><span class="line"><span class="keyword">package</span> cn.xsyu.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 业务逻辑层的具体实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 依赖注入</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAccountDao</span><span class="params">(AccountDao accountDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        accountDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.update(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.add(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转账操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sourceName    转出账户名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetName    转入账户名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money         转账金额</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String sourceName, String targetName, Double money)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取转出账户和转入账户</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">sourceAccount</span> <span class="operator">=</span> accountDao.findByName(sourceName);</span><br><span class="line">        <span class="type">Account</span> <span class="variable">targetAccount</span> <span class="operator">=</span> accountDao.findByName(targetName);</span><br><span class="line">        <span class="comment">// 转出账户减钱，转入账户加钱</span></span><br><span class="line">        sourceAccount.setMoney(sourceAccount.getMoney()-money);</span><br><span class="line">        targetAccount.setMoney(targetAccount.getMoney()+money);</span><br><span class="line">        <span class="comment">// 更新数据</span></span><br><span class="line">        accountDao.update(sourceAccount);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;	<span class="comment">// 模拟转账异常</span></span><br><span class="line">        accountDao.update(targetAccount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>存在的问题</strong>：</p>
</blockquote>
<ol>
<li><p>事务被自动控制了[默认]。换言之，我们使用了 <code>connection</code> 对象的 <code>setAutoCommit(true)</code>，每执行一条 SQL 语句就会进行一次完整的事务。</p>
</li>
<li><p>此时，如果方法的每个业务功能中都只包含一条 SQL 语句，事务管理是 OK 的，出现异常时可以回滚所有的操作。  </p>
</li>
<li><p>但是如果一个业务方法中包含多条 SQL 语句，当业务出现异常时，就无法实现整个业务的回滚操作了。</p>
<ul>
<li>当我们执行转账业务时，由于执行过程中出现异常，会导致转账失败。但是因为我们每次执行的持久层方法都是独立事务，导致无法实现事务控制（不符合事务的一致性）。</li>
<li>每次自动提交，都会执行一遍开启事务、提交事务、回滚事务、关闭事务的过程。</li>
</ul>
</li>
</ol>
<blockquote>
<p>  <strong>分析：</strong></p>
</blockquote>
<p><img src="/2020/07/28/Spring/%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98.png"></p>
<ol>
<li><code>accountDao.findByName(sourceName);</code>：完成了按姓名查找的功能，并成功提交事务。</li>
<li><code>accountDao.findByName(targetName);</code>：完成了按姓名查找的功能，并成功提交事务。</li>
<li><code>accountDao.update(sourceAccount);</code>：完成了更新<code>sourceAccount</code>账户的功能，该<code>账户中的余额=原本的余额-money</code>，并成功提交事务。</li>
<li><code>int i = 1/0；</code>：除0异常，程序终止。</li>
<li><code>accountDao.update(targetAccount);</code>：更新<code>targetAccount</code>账户的事务未能执行，但是由于之前的三个事务与该事务独立，所以回滚的时候并不会撤销之前的操作。这就造成了转出账户余额减少，而转入账户余额未增加的问题。</li>
</ol>
<hr>
<h2 id="2-After：解决方案"><a href="#2-After：解决方案" class="headerlink" title="2    After：解决方案"></a>2    After：解决方案</h2><blockquote>
<p>  <strong>解决方法</strong></p>
</blockquote>
<ul>
<li>关闭事务的自动提交，让上述四步操作由一个事务管理。这样其中的任何一步出现异常，事务都会回滚到事务开始的状态。</li>
<li>并且让上述四步操作的<code>Connection对象</code>为同一个。</li>
</ul>
<blockquote>
<p>  <strong>具体步骤</strong></p>
</blockquote>
<ol>
<li>编写ConnectionUtils类。从数据源中获取一个连接Connection，并且实现和线程的绑定。<ul>
<li>  如果不绑定 Connection，每次使用调用 CRUD 操作时都会重新创建一个新的 Connection 对象。</li>
<li>  绑定了 Connection 后，每次操作使用的 Connection 都是同一个 Connection 对象。</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库连接的工具类；</span></span><br><span class="line"><span class="comment"> * 用于从DataSource中获取一个连接Connection，并且实现和线程的绑定</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectionUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建一个本地线程变量</span></span><br><span class="line">    <span class="keyword">private</span> ThreadLocal&lt;Connection&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;Connection&gt;();</span><br><span class="line">    <span class="comment">// DI</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDataSource</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dataSource = dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前线程上的连接【本程序是单线程程序】</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.从ThreadLocal上获取数据库连接Connection</span></span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">            <span class="comment">// 2.判断当前线程上是否有连接</span></span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">// 3.判断当前线程上没有连接</span></span><br><span class="line">                <span class="comment">// 从数据源中获取一个连接，并且存入ThreadLocal中</span></span><br><span class="line">                <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">                threadLocal.set(conn);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4.返回当前线程上的连接</span></span><br><span class="line">            <span class="keyword">return</span> conn;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 把连接和线程解绑</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<hr>
<h1 id="5-Spring中的JDBCTemplate"><a href="#5-Spring中的JDBCTemplate" class="headerlink" title="5    Spring中的JDBCTemplate"></a>5    Spring中的JDBCTemplate</h1><h2 id="5-1-JdbcTemplate概述"><a href="#5-1-JdbcTemplate概述" class="headerlink" title="5.1    JdbcTemplate概述"></a>5.1    JdbcTemplate概述</h2><ul>
<li><p>JdbcTemplate 是 Spring 为我们提供的一个框架，是对原始 Jdbc API 接口的简单封装。</p>
</li>
<li><p>Spring 框架为我们提供了很多的操作框架。</p>
<ol>
<li>操作关系型数据库的：<ul>
<li><code>JdbcTemplate</code></li>
<li><code>HibernateTemplate</code></li>
</ul>
</li>
<li>操作 NoSQL 数据库的：<ul>
<li><code>RedisTemplate</code></li>
</ul>
</li>
<li>操作消息队列的：<ul>
<li><code>JmsTemplate</code></li>
</ul>
</li>
</ol>
<ul>
<li><p>在使用<code>JdbcTemplate</code>时，需要导入：</p>
<ol>
<li><code>spring-jdbc-5.0.2.RELEASE.jar</code></li>
<li><code>spring-tx-5.0.2.RELEASE.jar</code>：和事务相关的jar</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-JdbcTemplate对象的创建"><a href="#5-2-JdbcTemplate对象的创建" class="headerlink" title="5.2    JdbcTemplate对象的创建"></a>5.2    JdbcTemplate对象的创建</h2><blockquote>
<p>  <strong>源码</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3种构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">JdbcTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">JdbcTemplate</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">	setDataSource(dataSource);</span><br><span class="line">	afterPropertiesSet();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">JdbcTemplate</span><span class="params">(DataSource dataSource, <span class="type">boolean</span> lazyInit)</span> &#123;</span><br><span class="line">	setDataSource(dataSource);</span><br><span class="line">	setLazyInit(lazyInit);</span><br><span class="line">	afterPropertiesSet();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1、除了无参构造器之外，都需要提供一个数据源。</span></span><br><span class="line"><span class="comment">	2、并且类中含有`set`方法，可以使用配置文件配置`dataSourse`，采用依赖注入赋值。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>





<h2 id="5-3-Spring中配置数据源"><a href="#5-3-Spring中配置数据源" class="headerlink" title="5.3    Spring中配置数据源"></a>5.3    Spring中配置数据源</h2><h3 id="5-3-1-环境搭建"><a href="#5-3-1-环境搭建" class="headerlink" title="5.3.1    环境搭建"></a>5.3.1    环境搭建</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Spring IoC--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置Spring Jdbc--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置Spring 事务管理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置数据库--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-3-2-编写spring的配置文件bean-xml"><a href="#5-3-2-编写spring的配置文件bean-xml" class="headerlink" title="5.3.2    编写spring的配置文件bean.xml"></a>5.3.2    编写spring的配置文件bean.xml</h3><ul>
<li><code>bean.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="5-3-3-配置数据源"><a href="#5-3-3-配置数据源" class="headerlink" title="5.3.3    配置数据源"></a>5.3.3    配置数据源</h3><ul>
<li>我们学过的数据源：</li>
</ul>
<ol>
<li><code>c3p0</code></li>
<li><code>DBCP</code></li>
<li><code>Spring内置数据源</code></li>
</ol>
<h4 id="1、配置c3p0数据源"><a href="#1、配置c3p0数据源" class="headerlink" title="1、配置c3p0数据源"></a>1、配置c3p0数据源</h4><ol>
<li>导入jar：<code>c3p0-0.9.2.1</code></li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>设置<code>bean</code>：<ul>
<li>查看<code>com.mchange.v2.c3p0.ComboPooledDataSource</code>的源码发现，其中有许多<code>set</code>方法，所以可以采用DI的方式配置连接数据库所需的信息。</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置数据源--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2、配置DBCP数据源"><a href="#2、配置DBCP数据源" class="headerlink" title="2、配置DBCP数据源"></a>2、配置DBCP数据源</h4><ol>
<li><p>导入<code>jar</code>：<code>commons-dbcp.jar</code>和<code>commons-pool.jar</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-pool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>配置<code>bean</code>：</p>
<ul>
<li>显然<code>org.apache.commons.dbcp.BasicDataSource</code>的构造函数中也有大量相关的<code>set</code>方法，可以注入数据库连接信息，只是在<code>set</code>方法的命名上略有差异罢了。</li>
</ul>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3、配置Spring内置数据源"><a href="#3、配置Spring内置数据源" class="headerlink" title="3、配置Spring内置数据源"></a>3、配置Spring内置数据源</h4><ul>
<li>Spring框架也提供了一个内置数据源，我们可以使用Spring的内置数据源。</li>
</ul>
<ol>
<li><p>导入jar：<code>spring-jdbc-5.0.2.RELEASE.jar</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>配置<code>bean</code>：<code>DI</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="4、将数据库连接的信息配置到外部属性文件中"><a href="#4、将数据库连接的信息配置到外部属性文件中" class="headerlink" title="4、将数据库连接的信息配置到外部属性文件中"></a>4、将数据库连接的信息配置到外部属性文件中</h4><h5 id="4-1、定义属性文件"><a href="#4-1、定义属性文件" class="headerlink" title="4.1、定义属性文件"></a>4.1、定义属性文件</h5><ul>
<li><p><code>jdbc.properties</code></p>
  <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/db4</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="4-2、引入外部的属性文件"><a href="#4-2、引入外部的属性文件" class="headerlink" title="4.2、引入外部的属性文件"></a>4.2、引入外部的属性文件</h5><ol>
<li><p>方式一：</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入外部属性文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;location&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>	</span><br></pre></td></tr></table></figure>

</li>
<li><p>方式二：</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="5-4-JdbcTemplate的CRUD操作"><a href="#5-4-JdbcTemplate的CRUD操作" class="headerlink" title="5.4    JdbcTemplate的CRUD操作"></a>5.4    JdbcTemplate的CRUD操作</h2><h3 id="5-4-1-前期准备"><a href="#5-4-1-前期准备" class="headerlink" title="5.4.1    前期准备"></a>5.4.1    前期准备</h3><h4 id="1、准备数据库"><a href="#1、准备数据库" class="headerlink" title="1、准备数据库"></a>1、准备数据库</h4><h3 id="5-4-2-在Spring配置文件中配置JdbcTemplate"><a href="#5-4-2-在Spring配置文件中配置JdbcTemplate" class="headerlink" title="5.4.2    在Spring配置文件中配置JdbcTemplate"></a>5.4.2    在Spring配置文件中配置JdbcTemplate</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置数据库操作模板JdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据源DataSource--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-4-3-最基本的CRUD"><a href="#5-4-3-最基本的CRUD" class="headerlink" title="5.4.3    最基本的CRUD"></a>5.4.3    最基本的CRUD</h3><ul>
<li>使用<code>Statement</code>对象执行SQL语句，存在SQL注入的隐患。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into account (name, money) values(&#x27;王五&#x27;, 555);&quot;</span>;</span><br><span class="line">    jdbc.execute(sql);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-4-4-基本的CRUD"><a href="#5-4-4-基本的CRUD" class="headerlink" title="5.4.4    基本的CRUD"></a>5.4.4    基本的CRUD</h3><ul>
<li>使用<code>PreparedStatement</code>对象，可以有效防止SQL注入</li>
</ul>
<h4 id="1、保存操作"><a href="#1、保存操作" class="headerlink" title="1、保存操作"></a>1、保存操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into account (name, money) values(?, ?);&quot;</span>;</span><br><span class="line">        jdbc.update(sql,<span class="string">&quot;赵四&quot;</span>, <span class="number">666</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2、更新操作"><a href="#2、更新操作" class="headerlink" title="2、更新操作"></a>2、更新操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update account set name=? where id=?&quot;</span>;</span><br><span class="line">        jdbc.update(sql,<span class="string">&quot;黄猿&quot;</span>, <span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3、删除操作"><a href="#3、删除操作" class="headerlink" title="3、删除操作"></a>3、删除操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from account where id=?&quot;</span>;</span><br><span class="line">        jdbc.update(sql,<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4、查询所有操作-★"><a href="#4、查询所有操作-★" class="headerlink" title="4、查询所有操作[★]"></a>4、查询所有操作[★]</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account where money&gt;?&quot;</span>;</span><br><span class="line">        List&lt;Account&gt; accounts = jdbc.query(sql, <span class="keyword">new</span> <span class="title class_">AccountRowMapper</span>(), <span class="number">600</span>);</span><br><span class="line">        <span class="keyword">for</span> (Account account : accounts) &#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountRowMapper</span> <span class="keyword">implements</span> <span class="title class_">RowMapper</span>&lt;Account&gt;&#123;</span><br><span class="line">        <span class="keyword">public</span> Account <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">            <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line">            account.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            account.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">            account.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> account;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h5><h5 id="1、自己手动实现对返回的Bean对象的封装"><a href="#1、自己手动实现对返回的Bean对象的封装" class="headerlink" title="1、自己手动实现对返回的Bean对象的封装"></a>1、自己手动实现对返回的Bean对象的封装</h5><ol>
<li><p><code>RowMapper&lt;T&gt;接口</code>的作用</p>
<ul>
<li><code>JdbcTemplate</code>中所有查询语句的返回结果必须实现的父接口。</li>
<li>作用：执行查询语句从数据库中得到结果集，并把结果集中的数据一一映射到JavaBean实体类中，返回JavaBean实体类。</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RowMapper</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行查询语句从数据库中得到结果集，并把结果集中的数据一一映射到JavaBean实体类中，返回JavaBean实体类</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rs 要映射到Bean对象中的结果集[数据库查询语句得到的结果集]</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rowNum 当前行的编号</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> 当前行映射后的结果对象 (may be &#123;<span class="doctag">@code</span> null&#125;)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	T <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>手动实现<code>RowMapper&lt;T&gt;</code>接口，将查询数据库得到的结果集每行的数据映射到一个JavaBean对象上。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现RowMapper&lt;T&gt;接口，并指定封装后的泛型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountRowMapper</span> <span class="keyword">implements</span> <span class="title class_">RowMapper</span>&lt;Account&gt;&#123;</span><br><span class="line">    <span class="comment">// 重写mapRow方法</span></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="comment">// 创建一个空的Account对象</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line">        <span class="comment">// 从数据库的返回的结果集rs中分别取出`id`、`name`和`money`，映射到实体类JavaBean的对应的字段中</span></span><br><span class="line">        account.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        account.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        account.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">        <span class="comment">// 返回JavaBean对象account</span></span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>jdbc.query()</code>方法得到的返回值是<code>List&lt;T&gt;</code>集合的形式，</p>
<ul>
<li>就是先让<code>RowMapper&lt;T&gt;</code>接口中的<code>mapRow()</code>方法先把从数据库中得到的每一行数据都封装为一个JavaBean对象；</li>
<li>然后再通过<code>query()</code>方法把这些结果封装为一个List集合，作为返回值返回。</li>
</ul>
</li>
</ol>
<h5 id="2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装"><a href="#2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装" class="headerlink" title="2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装"></a>2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account where money&gt;?&quot;</span>;</span><br><span class="line">    List&lt;Account&gt; accounts = jdbc.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Account&gt;(Account.class), <span class="number">600</span>);</span><br><span class="line">    <span class="keyword">for</span> (Account account : accounts) &#123;</span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/2020/07/28/Spring/RowMapper.png"></p>
<ol>
<li>显然，<code>BeanPropertyRowMapper类</code>继承自<code>RowMapper接口</code></li>
<li>它是<code>JdbcTemplate</code>为我们提供的自动封装工具。作用：<ul>
<li>从数据库中查询数据，把得到的每行数据封装为一个JavaBean对象。</li>
</ul>
</li>
<li>我们只需要指定JavaBean对象的类型即可。如：<code>new BeanPropertyRowMapper&lt;Account&gt;(Account.class)</code></li>
</ol>
<h4 id="5、查询一个操作"><a href="#5、查询一个操作" class="headerlink" title="5、查询一个操作"></a>5、查询一个操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account where id=?&quot;</span>;</span><br><span class="line">    List&lt;Account&gt; accounts = jdbc.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Account&gt;(Account.class), <span class="number">5</span>);</span><br><span class="line">    System.out.println(accounts.isEmpty()?<span class="string">&quot;没有结果&quot;</span>:accounts.get(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6、查询返回一行一列操作"><a href="#6、查询返回一行一列操作" class="headerlink" title="6、查询返回一行一列操作"></a>6、查询返回一行一列操作</h4><ul>
<li>返回值结果只能是<strong>一行一列</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT COUNT(*) FROM account WHERE money&gt;?;&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> jdbc.queryForObject(sql, Integer.class, <span class="number">600</span>);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/" rel="prev" title="容器（数组+集合）">
                  <i class="fa fa-chevron-left"></i> 容器（数组+集合）
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" rel="next" title="Hexo+Gitee/GitHub搭建个人博客">
                  Hexo+Gitee/GitHub搭建个人博客 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
