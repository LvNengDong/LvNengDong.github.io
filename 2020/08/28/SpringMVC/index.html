<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="三层架构和MVC1 三层架构 在B&#x2F;S架构中，系统标准的三层架构包括：表现层、业务层、持久层。  表现层（Web层）    Web 层最核心的功能是接收客户端提交的请求，给客户端返回响应结果。   常用的数据传输协议是 HTTP 协议，即 Web 层需要接收 HTTP 请求，返回 HTTP 响应。 Web层中又包含展示层和控制层： 控制层负责接收请求，处理业务的逻辑。 展示层负责结果的展示。">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC">
<meta property="og:url" content="http://example.com/2020/08/28/SpringMVC/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="三层架构和MVC1 三层架构 在B&#x2F;S架构中，系统标准的三层架构包括：表现层、业务层、持久层。  表现层（Web层）    Web 层最核心的功能是接收客户端提交的请求，给客户端返回响应结果。   常用的数据传输协议是 HTTP 协议，即 Web 层需要接收 HTTP 请求，返回 HTTP 响应。 Web层中又包含展示层和控制层： 控制层负责接收请求，处理业务的逻辑。 展示层负责结果的展示。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/%E5%BC%80%E5%8F%91%E6%9E%B6%E6%9E%84.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/%E9%85%8D%E7%BD%AESpringMVC_xml.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.svg">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/%E5%9F%BA%E4%BA%8ESpringMVC%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/HandlerAdapter.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-1651810035436.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/SpringMVC%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/image-20200713101251171.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/image-20200713102859647.png">
<meta property="og:image" content="http://example.com/2020/08/28/SpringMVC/SpringMVC%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%AD%E5%BC%95%E5%85%A5%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.png">
<meta property="article:published_time" content="2020-08-28T02:05:13.000Z">
<meta property="article:modified_time" content="2022-05-08T12:44:28.991Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2020/08/28/SpringMVC/%E5%BC%80%E5%8F%91%E6%9E%B6%E6%9E%84.png">


<link rel="canonical" href="http://example.com/2020/08/28/SpringMVC/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2020/08/28/SpringMVC/","path":"2020/08/28/SpringMVC/","title":"SpringMVC"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SpringMVC | Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E5%92%8CMVC"><span class="nav-number">1.</span> <span class="nav-text">三层架构和MVC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-number">1.1.</span> <span class="nav-text">1 三层架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-MVC%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.2.</span> <span class="nav-text">2 MVC模型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC-%E6%A6%82%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">SpringMVC 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">2.1.</span> <span class="nav-text">1 是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-SpringMVC%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">2.2.</span> <span class="nav-text">2 SpringMVC的优势</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E6%B8%85%E6%99%B0%E7%9A%84%E8%A7%92%E8%89%B2%E5%88%92%E5%88%86"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.1 清晰的角色划分</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-SpringMVC%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">2.3.</span> <span class="nav-text">3 SpringMVC入门案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">2.3.1.</span> <span class="nav-text">1、项目初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA-Maven-%E5%B7%A5%E7%A8%8B%EF%BC%8C%E5%BC%95%E5%85%A5%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96%E7%9A%84%E5%9D%90%E6%A0%87"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">1.1 新建一个 Maven 工程，引入开发所需依赖的坐标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA-index-jsp-%E6%96%87%E4%BB%B6%E7%94%A8%E4%BA%8E%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="nav-number">2.3.1.2.</span> <span class="nav-text">1.2 新建一个 index.jsp 文件用于发送请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA-success-jsp-%E6%96%87%E4%BB%B6%E4%BB%A5%E5%A4%87%E5%90%8E%E7%94%A8"><span class="nav-number">2.3.1.3.</span> <span class="nav-text">1.3 新建一个 success.jsp 文件以备后用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E9%A1%B9%E7%9B%AE%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.3.2.</span> <span class="nav-text">2、项目核心配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E9%85%8D%E7%BD%AE%E5%89%8D%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%99%A8-DispatcherServlet"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">2.1 配置前端控制器 DispatcherServlet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E5%88%9B%E5%BB%BASpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-SpringMVC-xml"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">2.2 创建SpringMVC的配置文件 SpringMVC.xml</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E3%80%81%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95%EF%BC%9A%E7%BC%96%E5%86%99%E6%8E%A7%E5%88%B6%E5%99%A8%E5%B9%B6%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE"><span class="nav-number">2.3.3.</span> <span class="nav-text">3、代码测试：编写控制器并使用注解配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Case1%EF%BC%9A%E4%B8%8D%E5%90%AB-ResponseBody-%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.3.3.1.</span> <span class="nav-text">Case1：不含 @ResponseBody 注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Case2%EF%BC%9A%E5%90%AB-ResponseBody-%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.3.3.2.</span> <span class="nav-text">Case2：含 @ResponseBody 注解</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="nav-number">2.4.</span> <span class="nav-text">4 入门案例的执行流程分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">2.4.1.</span> <span class="nav-text">入门案例的执行流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringMVC-%E7%9A%84%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E6%B5%81%E7%A8%8B"><span class="nav-number">2.4.2.</span> <span class="nav-text">SpringMVC 的请求响应流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC%E4%B8%AD%E7%9A%84%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">SpringMVC中的的组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-DispatherServlet%EF%BC%9A%E5%89%8D%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-number">3.1.</span> <span class="nav-text">1 DispatherServlet：前端控制器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-HandlerMapping%EF%BC%9A%E5%A4%84%E7%90%86%E5%99%A8%E6%98%A0%E5%B0%84%E5%99%A8"><span class="nav-number">3.2.</span> <span class="nav-text">2 HandlerMapping：处理器映射器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-HandlerAdapter%EF%BC%9A%E5%A4%84%E7%90%86%E5%99%A8%E9%80%82%E9%85%8D%E5%99%A8"><span class="nav-number">3.3.</span> <span class="nav-text">3 HandlerAdapter：处理器适配器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E5%A4%84%E7%90%86%E5%99%A8%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%9F"><span class="nav-number">3.3.1.</span> <span class="nav-text">为什么要使用处理器适配器？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Controller-Handler%EF%BC%9A%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">3.4.</span> <span class="nav-text">4 Controller&#x2F;Handler：处理器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-ViewResolver%EF%BC%9A%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="nav-number">3.5.</span> <span class="nav-text">5 ViewResolver：视图解析器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-View%EF%BC%9A%E8%A7%86%E5%9B%BE"><span class="nav-number">3.6.</span> <span class="nav-text">6 View：视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-HandlerExceptionResolver%EF%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">3.7.</span> <span class="nav-text">7 HandlerExceptionResolver：异常处理器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80"><span class="nav-number">3.7.1.</span> <span class="nav-text">7.1 理论基础</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.7.2.</span> <span class="nav-text">7.2 实现步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E7%BC%96%E5%86%99%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2"><span class="nav-number">3.7.2.1.</span> <span class="nav-text">1、编写访问页面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E7%BC%96%E5%86%99%E6%8E%A7%E5%88%B6%E5%99%A8Controller"><span class="nav-number">3.7.2.2.</span> <span class="nav-text">2、编写控制器Controller</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E7%BC%96%E5%86%99%E5%BC%82%E5%B8%B8%E7%B1%BB%EF%BC%88%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%B1%BB%EF%BC%89"><span class="nav-number">3.7.2.3.</span> <span class="nav-text">3、编写异常类（自定义异常类）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E4%BF%AE%E6%94%B9Controller%E6%8E%A7%E5%88%B6%E5%99%A8%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="nav-number">3.7.2.4.</span> <span class="nav-text">4、修改Controller控制器中的代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">3.7.2.5.</span> <span class="nav-text">5、自定义异常处理器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%95%E7%A4%BA%E7%BB%99%E7%94%A8%E6%88%B7%E7%9A%84%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E9%A1%B5%E9%9D%A2"><span class="nav-number">3.7.2.6.</span> <span class="nav-text">6、自定义展示给用户的错误信息页面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7%E3%80%81%E6%B3%A8%E5%86%8C%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-number">3.7.2.7.</span> <span class="nav-text">7、注册异常处理器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-%E5%B0%8F%E6%80%BB%E7%BB%93"><span class="nav-number">3.7.3.</span> <span class="nav-text">7.3 小总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-HandlerInterceptor%EF%BC%9A%E5%A4%84%E7%90%86%E5%99%A8%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">3.8.</span> <span class="nav-text">8 HandlerInterceptor：处理器拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">3.8.1.</span> <span class="nav-text">8.1 拦截器的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-1-%E6%8B%A6%E6%88%AA%E5%99%A8%E9%93%BE"><span class="nav-number">3.8.1.1.</span> <span class="nav-text">8.1.1 拦截器链</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-2-%E6%8B%A6%E6%88%AA%E5%99%A8vs-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">3.8.1.2.</span> <span class="nav-text">8.1.2 拦截器vs.过滤器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.8.2.</span> <span class="nav-text">8.2 自定义拦截器的步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%8F%AF%E6%8F%90%E4%BE%9B%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E7%9A%84SpringMVC%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.8.2.1.</span> <span class="nav-text">1、编写一个可提供访问服务的SpringMVC项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E7%B1%BB%EF%BC%88HandlerInterceptor%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%89"><span class="nav-number">3.8.2.2.</span> <span class="nav-text">2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E6%B3%A8%E5%86%8C%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">3.8.2.3.</span> <span class="nav-text">3、注册拦截器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E7%BB%93%E6%9E%9C%E6%B5%8B%E8%AF%95"><span class="nav-number">3.8.2.4.</span> <span class="nav-text">4、结果测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-%E6%8B%A6%E6%88%AA%E5%99%A8%E7%BB%86%E8%8A%82"><span class="nav-number">3.8.3.</span> <span class="nav-text">8.3 拦截器细节</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Converter%EF%BC%9A%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="nav-number">3.9.</span> <span class="nav-text">9 Converter：类型转换器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">3.9.1.</span> <span class="nav-text">1 类型转换器的使用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.9.2.</span> <span class="nav-text">2 使用步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-lt-mvc-annotation-driven-gt"><span class="nav-number">3.10.</span> <span class="nav-text">10 &lt;mvc:annotation-driven&gt;</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E7%BB%91%E5%AE%9A"><span class="nav-number">4.</span> <span class="nav-text">请求参数的绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%BB%91%E5%AE%9A%E8%AF%B4%E6%98%8E"><span class="nav-number">4.1.</span> <span class="nav-text">1 绑定说明</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E7%BB%91%E5%AE%9A%E7%9A%84%E6%9C%BA%E5%88%B6"><span class="nav-number">4.1.1.</span> <span class="nav-text">1.1 绑定的机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E6%94%AF%E6%8C%81%E7%BB%91%E5%AE%9A%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.1.2.</span> <span class="nav-text">1.2 支持绑定的数据类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%87%AA%E5%8A%A8%E7%BB%91%E5%AE%9A"><span class="nav-number">4.2.</span> <span class="nav-text">2 自动绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E5%8E%9F%E7%90%86"><span class="nav-number">4.2.1.</span> <span class="nav-text">2.1 原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA"><span class="nav-number">4.2.2.</span> <span class="nav-text">2.2 代码演示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B-String%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">1、基本类型&#x2F;String类型的请求参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81POJO-%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">4.2.2.2.</span> <span class="nav-text">2、POJO 类型的请求参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81POJO%E7%B1%BB%E4%B8%AD%E5%8C%85%E5%90%AB%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="nav-number">4.2.2.3.</span> <span class="nav-text">3、POJO类中包含集合类型参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="nav-number">4.2.3.</span> <span class="nav-text">2.3 请求参数乱码问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Q1%EF%BC%9APOST-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">Q1：POST 请求参数中文乱码的问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E6%8E%A5%E6%94%B6Servlet%E5%8E%9F%E7%94%9F%E7%9A%84API%E4%BD%9C%E4%B8%BA%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0"><span class="nav-number">4.2.4.</span> <span class="nav-text">2.4 接收Servlet原生的API作为方法参数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%83%A8%E5%88%86%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">4.2.4.1.</span> <span class="nav-text">部分示例代码：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E7%BB%91%E5%AE%9A"><span class="nav-number">4.3.</span> <span class="nav-text">3 通过注解绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-RequestParam"><span class="nav-number">4.3.1.</span> <span class="nav-text">1 @RequestParam</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-RequestBody"><span class="nav-number">4.3.2.</span> <span class="nav-text">2 @RequestBody</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-PathVaribale"><span class="nav-number">4.3.3.</span> <span class="nav-text">3 @PathVaribale</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-ModelAttribute"><span class="nav-number">4.3.4.</span> <span class="nav-text">4 @ModelAttribute</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Case1%EF%BC%9A-ModelAttribute-%E4%BF%AE%E9%A5%B0%E6%96%B9%E6%B3%95"><span class="nav-number">4.3.4.1.</span> <span class="nav-text">Case1：@ModelAttribute 修饰方法</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.</span> <span class="nav-text">常用注解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-RequestMapping%E6%B3%A8%E8%A7%A3"><span class="nav-number">5.1.</span> <span class="nav-text">1 @RequestMapping注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E8%AF%B4%E6%98%8E"><span class="nav-number">5.1.1.</span> <span class="nav-text">1.1 说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.1.2.</span> <span class="nav-text">1.2 示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81value-path-%E5%B1%9E%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="nav-number">5.1.2.1.</span> <span class="nav-text">1、value&#x2F;path 属性测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81method%E5%B1%9E%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="nav-number">5.1.2.2.</span> <span class="nav-text">2、method属性测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81params%E5%B1%9E%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="nav-number">5.1.2.3.</span> <span class="nav-text">3、params属性测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81headers%E5%B1%9E%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="nav-number">5.1.2.4.</span> <span class="nav-text">4、headers属性测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-HiddenHttpMethodFilter"><span class="nav-number">5.2.</span> <span class="nav-text">2 HiddenHttpMethodFilter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-RequestHeader"><span class="nav-number">5.3.</span> <span class="nav-text">3 @RequestHeader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="nav-number">5.3.1.</span> <span class="nav-text">3.1 使用说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.3.2.</span> <span class="nav-text">3.2 使用示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-CookieValue"><span class="nav-number">5.4.</span> <span class="nav-text">4 @CookieValue</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="nav-number">5.4.1.</span> <span class="nav-text">4.1 使用说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.4.2.</span> <span class="nav-text">4.2 使用示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-SessionAttribute"><span class="nav-number">5.5.</span> <span class="nav-text">5 @SessionAttribute</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="nav-number">5.5.1.</span> <span class="nav-text">5.1 使用说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.5.2.</span> <span class="nav-text">5.2 使用示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-ResponseBody"><span class="nav-number">5.6.</span> <span class="nav-text">6 @ResponseBody</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%92%8C%E7%BB%93%E6%9E%9C%E8%A7%86%E5%9B%BE"><span class="nav-number">6.</span> <span class="nav-text">响应数据和结果视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%BF%94%E5%9B%9E%E5%80%BC%E5%88%86%E7%B1%BB"><span class="nav-number">6.1.</span> <span class="nav-text">1 返回值分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%BA%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">6.1.1.</span> <span class="nav-text">1.1 返回值为：字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%BA%EF%BC%9Avoid"><span class="nav-number">6.1.2.</span> <span class="nav-text">1.2 返回值为：void</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%BA%EF%BC%9AModelAndView"><span class="nav-number">6.1.3.</span> <span class="nav-text">1.3 返回值为：ModelAndView</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">6.2.</span> <span class="nav-text">2 转发和重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-forward%E8%BD%AC%E5%8F%91"><span class="nav-number">6.2.1.</span> <span class="nav-text">2.1 forward转发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-Redirect%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">6.2.2.</span> <span class="nav-text">2.2 Redirect重定向</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-ResponseBody%E6%B3%A8%E8%A7%A3"><span class="nav-number">6.3.</span> <span class="nav-text">3 @ResponseBody注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">6.3.1.</span> <span class="nav-text">3.1 使用示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E9%9C%80%E6%B1%82"><span class="nav-number">6.3.1.1.</span> <span class="nav-text">1、需求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81SpringMVC-%E9%85%8D%E7%BD%AE%E8%AE%BF%E9%97%AE%E8%B5%84%E6%BA%90%E7%99%BD%E5%90%8D%E5%8D%95"><span class="nav-number">6.3.1.2.</span> <span class="nav-text">2、SpringMVC 配置访问资源白名单</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81JSON-%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E-JavaBean-%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">6.3.1.3.</span> <span class="nav-text">4、JSON 字符串与 JavaBean 的转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA"><span class="nav-number">6.3.1.4.</span> <span class="nav-text">3、代码演示</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">235</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">69</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/28/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SpringMVC | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringMVC
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-28 10:05:13" itemprop="dateCreated datePublished" datetime="2020-08-28T10:05:13+08:00">2020-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-08 20:44:28" itemprop="dateModified" datetime="2022-05-08T20:44:28+08:00">2022-05-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/SpringMVC/" itemprop="url" rel="index"><span itemprop="name">SpringMVC</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="三层架构和MVC"><a href="#三层架构和MVC" class="headerlink" title="三层架构和MVC"></a>三层架构和MVC</h1><h2 id="1-三层架构"><a href="#1-三层架构" class="headerlink" title="1 三层架构"></a>1 三层架构</h2><p><img src="/2020/08/28/SpringMVC/%E5%BC%80%E5%8F%91%E6%9E%B6%E6%9E%84.png"></p>
<p>在B/S架构中，系统标准的三层架构包括：表现层、业务层、持久层。 </p>
<p><strong>表现层（Web层）</strong></p>
<ul>
<li>  Web 层最核心的功能是<strong>接收客户端提交的请求，给客户端返回响应结果</strong>。</li>
<li>  常用的数据传输协议是 HTTP 协议，即 Web 层需要接收 HTTP 请求，返回 HTTP 响应。</li>
<li>Web层中又包含展示层和控制层：<ol>
<li><strong>控制层</strong>负责接收请求，处理业务的逻辑。</li>
<li><strong>展示层</strong>负责结果的展示。</li>
</ol>
</li>
<li>  Web 层依赖 Service 层，接收到客户端请求一般都会转发到业务层进行业务处理。</li>
<li>  <strong>Web 层的设计一般都使用MVC模型。（MVC 是 Web 层的设计模型，和其他层没有关系）</strong> </li>
</ul>
<p><strong>业务层（service层）</strong></p>
<ul>
<li>  负责业务逻辑处理。</li>
<li>  业务层在业务处理时可能会依赖持久层。在对数据持久化时需要保证事务一致性。（也就是我们说的，事务应该放到业务层来控制） </li>
</ul>
<p><strong>持久层（Dao层）</strong></p>
<ul>
<li>  负责数据持久化。</li>
<li>  数据库是对数据进行持久化的载体，通俗的讲，持久层就是和数据库交互，对数据库表进行增删改查的。</li>
</ul>
<hr>
<h2 id="2-MVC模型"><a href="#2-MVC模型" class="headerlink" title="2 MVC模型"></a>2 MVC模型</h2><blockquote>
<p><strong>MVC；Model View Controller；模型-视图-控制器</strong></p>
</blockquote>
<p>MVC 是一种用于设计 WEB 应用表现层的模型。</p>
<p>MVC中每个部分各司其职：</p>
<p><strong>Model（模型）</strong>：</p>
<ul>
<li>通常指数据模型。</li>
<li>作用：一般情况下用于封装数据。</li>
<li>网络中数据传输一般使用 JSON 字符串。所以说 HTTP 协议携带的请求数据往往是 JSON 字符串，请求到达服务器时，会根据需要将 JSON 字符串反序列化为 Java 对象；服务器作出响应时，首先会把响应消息序列化为 JSON 字符串，再传递给客户端。</li>
</ul>
<p><strong>View（视图）</strong>：</p>
<ul>
<li>终端显示层，各个端的模板渲染并执行显示的层。通常指的就是我们的 JSP 或 HTML。</li>
<li>视图层负责将从Model（模型）中得到的数据渲染到View（视图）上。</li>
<li>在前后端分离的项目开发中，后端开发人员不再需要关注 View（视图）。</li>
</ul>
<p><strong>Controller（控制器）</strong>：</p>
<ul>
<li>它是应用程序中处理用户交互的部分。作用一般是处理程序逻辑的</li>
</ul>
<hr>
<h1 id="SpringMVC-概述"><a href="#SpringMVC-概述" class="headerlink" title="SpringMVC 概述"></a>SpringMVC 概述</h1><h2 id="1-是什么"><a href="#1-是什么" class="headerlink" title="1 是什么"></a>1 是什么</h2><ul>
<li>SpringMVC 是 MVC 模型的一种落地实现框架。常见的 MVC 模型的实现框架还有 Struts1，Struts2 等。</li>
<li>SpringMVC 通过一套注解，让一个简单的 Java 类成为处理请求的控制器，而无需实现任何接口。</li>
<li>同时它还支持 RESTful 编程风格的请求。</li>
</ul>
<h2 id="2-SpringMVC的优势"><a href="#2-SpringMVC的优势" class="headerlink" title="2 SpringMVC的优势"></a>2 SpringMVC的优势</h2><h3 id="2-1-清晰的角色划分"><a href="#2-1-清晰的角色划分" class="headerlink" title="2.1 清晰的角色划分"></a>2.1 清晰的角色划分</h3><table>
<thead>
<tr>
<th>英文名称</th>
<th>中文名称</th>
</tr>
</thead>
<tbody><tr>
<td>DispatcherServlet</td>
<td>前端控制器；分发器</td>
</tr>
<tr>
<td>HandlerMapping</td>
<td>处理器映射器</td>
</tr>
<tr>
<td>HandlerAdapter</td>
<td>处理器适配器</td>
</tr>
<tr>
<td>ViewResolver</td>
<td>视图解析器</td>
</tr>
<tr>
<td>Controller</td>
<td>处理器或页面控制器</td>
</tr>
<tr>
<td>Validator</td>
<td>验证器</td>
</tr>
<tr>
<td>Command</td>
<td>命令对象：请求参数要绑定的对象就是命令对象</td>
</tr>
<tr>
<td>FormObject</td>
<td>表单对象：提供给表单展示的对象叫做表单对象</td>
</tr>
</tbody></table>
<hr>
<h2 id="3-SpringMVC入门案例"><a href="#3-SpringMVC入门案例" class="headerlink" title="3 SpringMVC入门案例"></a>3 SpringMVC入门案例</h2><h3 id="1、项目初始化"><a href="#1、项目初始化" class="headerlink" title="1、项目初始化"></a>1、项目初始化</h3><h4 id="1-1-新建一个-Maven-工程，引入开发所需依赖的坐标"><a href="#1-1-新建一个-Maven-工程，引入开发所需依赖的坐标" class="headerlink" title="1.1 新建一个 Maven 工程，引入开发所需依赖的坐标"></a>1.1 新建一个 Maven 工程，引入开发所需依赖的坐标</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Spring基本框架--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Spring Web框架--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Spring webmvc框架--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Servlet_API--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--jsp_API--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-新建一个-index-jsp-文件用于发送请求"><a href="#1-2-新建一个-index-jsp-文件用于发送请求" class="headerlink" title="1.2 新建一个 index.jsp 文件用于发送请求"></a>1.2 新建一个 index.jsp 文件用于发送请求</h4><p>在 Maven 工程中新建一个<code>webapp/index.jsp</code>页面用于发送请求。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h3&gt;SpringMVC入门案例&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/hello&quot;</span>&gt;SpringMVC入门案例&lt;/a&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="1-3-新建一个-success-jsp-文件以备后用"><a href="#1-3-新建一个-success-jsp-文件以备后用" class="headerlink" title="1.3 新建一个 success.jsp 文件以备后用"></a>1.3 新建一个 success.jsp 文件以备后用</h4><p>编写一个<code>/WEB-INF/pages/success.jsp</code>。</p>
<p>根据视图解析器解析的解析的转发地址编写一个页面，前端控制器会将的页面内容传递给终端显示器。终端显示器（一般是浏览器）解析并展示给用户。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;success&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h3&gt;入门成功！！！&lt;/h3&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<h3 id="2、项目核心配置文件"><a href="#2、项目核心配置文件" class="headerlink" title="2、项目核心配置文件"></a>2、项目核心配置文件</h3><h4 id="2-1-配置前端控制器-DispatcherServlet"><a href="#2-1-配置前端控制器-DispatcherServlet" class="headerlink" title="2.1 配置前端控制器 DispatcherServlet"></a>2.1 配置前端控制器 DispatcherServlet</h4><p>DispatcherServlet 是 SpringMVC 项目的核心组件，需要在配置文件（<code>webapp/WEB-INF/web.xml</code>）中进行配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">&quot;2.4&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加SpringMVC的前端控制器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置初始化参数：指定DispatcherServlet实例创建时加载的配置文件。--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置DispatcherServlet实例对象创建的时间点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span> <span class="comment">&lt;!--（1）取值为0：应用加载时创建；（2）取值为非0正整数：Tomcat启动时就创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--设置前端控制器要拦截哪些请求（根据请求URL匹配，这里设置了拦截所有请求）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  服务器上保存着很多资源（静态资源和接口），所有访问服务器上的资源的请求首先都会被 DispatcherServlet 拦截，然后再由 DispatcherServlet 转发到对应的服务中去，所以 DispatherServlet 又被称为“转发器”。</li>
<li>  DispatcherServlet 是请求进入服务器的第一道拦截路径。</li>
<li>  <code>&lt;url-pattern&gt;</code> 标签中配置的是 DispatcherServlet 要拦截的请求的 URL 路径。</li>
</ul>
<h4 id="2-2-创建SpringMVC的配置文件-SpringMVC-xml"><a href="#2-2-创建SpringMVC的配置文件-SpringMVC-xml" class="headerlink" title="2.2 创建SpringMVC的配置文件 SpringMVC.xml"></a>2.2 创建SpringMVC的配置文件 SpringMVC.xml</h4><p>在上一节中，我们配置了 DispatherServlet 在创建实例时加载的配置文件的保存路径。 </p>
<p>这个配置文件是 SpringMVC 的另一个核心配置文件，它对命名无特殊要求，可在 web.xml 配置文件中自行指定。这里我们将其命名为 SpringMVC.xml。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--指定应用程序启动后要扫描的包，并将其中符合规则（一般是添加了@Component注解的类）的组件添加到Spring容器中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.xsyu&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--开启SpringMVC对注解的支持。（如果项目中使用了SpringMVC中特有的注，则必须开启此配置项，否则这些注解就无法生效）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/08/28/SpringMVC/%E9%85%8D%E7%BD%AESpringMVC_xml.png"></p>
<h3 id="3、代码测试：编写控制器并使用注解配置"><a href="#3、代码测试：编写控制器并使用注解配置" class="headerlink" title="3、代码测试：编写控制器并使用注解配置"></a>3、代码测试：编写控制器并使用注解配置</h3><h4 id="Case1：不含-ResponseBody-注解"><a href="#Case1：不含-ResponseBody-注解" class="headerlink" title="Case1：不含 @ResponseBody 注解"></a>Case1：不含 @ResponseBody 注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/hello&quot;)</span> <span class="comment">//SpringMVC特有的注解，必须开启SpringMVC对注解的支持后才可以使用</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;   <span class="comment">// 相当于一个转发</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们在控制器方法上没有使用 @ResponseBody 注解，那么控制器方法中返回字符串的操作就相当于一个“转发操作”。字符串字面量将会返回给项目中配置的视图解析器，并根据视图解析器的解析规则拼接上一个前缀 <code>/WEB-INF/pages/</code> 和一个后缀 <code>.jsp</code>，组成一个具体页面的地址 <code>/WEB-INF/pages/success.jsp</code>，给浏览器显示改地址的页面内容。</p>
<h4 id="Case2：含-ResponseBody-注解"><a href="#Case2：含-ResponseBody-注解" class="headerlink" title="Case2：含 @ResponseBody 注解"></a>Case2：含 @ResponseBody 注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ResponseBody</span>			<span class="comment">// ！！！</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/hello&quot;)</span>   </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们在控制器方法上使用了 @ResponseBody 注解后，将不再执行转发的操作，而是直接返回 “success” 字面量给浏览器显示。</p>
<hr>
<h2 id="4-入门案例的执行流程分析"><a href="#4-入门案例的执行流程分析" class="headerlink" title="4 入门案例的执行流程分析"></a>4 入门案例的执行流程分析</h2><h3 id="入门案例的执行流程"><a href="#入门案例的执行流程" class="headerlink" title="入门案例的执行流程"></a>入门案例的执行流程</h3><p><img src="/2020/08/28/SpringMVC/%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.svg" alt="入门案例执行流程"></p>
<ol>
<li>Web 应用启动后，会自动读取配置文件 <code>web.xml</code> 中的配置项，尝试实例化一个 <code>DispatherServlet</code> 对象。</li>
<li>[可选]如果配置文件 <code>web.xml</code> 中关于 <code>DispatherServlet</code> 的配置项关联了 <code>SpringMVC.xml</code> 配置文件的话，继续读取 <code>SpringMVC.xml</code> 配置文件的内容。</li>
<li>根据两个配置文件的配置项，实例化对应的组件。<ul>
<li>  根据 <code>web.xml</code> 配置文件，实例化 <code>DispatherServlet</code> 组件；</li>
<li>  根据 <code>SpringMVC.xml</code> 配置文件，实例化 <code>&lt;context:component-scan base-package=&quot;&quot;/&gt;</code> 指定包下的组件；</li>
<li>  实例化视图解析器组件 InternalResourceViewResolver；</li>
<li>  ……</li>
</ul>
</li>
<li>客户端浏览器向服务器发送请求；</li>
<li>请求首先会被服务器上的 <code>DispatherServlet</code> 拦截；</li>
<li><code>DispatherServlet</code> 并不处理请求，而是把请求转发给 Controller。<ul>
<li>转发的路径是根据请求的 URL，匹配 <code>@RequestMapping</code> 注解的 value 值。</li>
<li><code>@RequestMapping</code> 注解位于 <code>Handler[控制器]</code>模块中，匹配成功后，执行控制器中对应的方法。</li>
<li>执行 HelloController 中对应的方法，该方法有一个返回值，是一个逻辑转发路径（返回值为String类型，且方法上不加<code>@ResponseBody</code>注解）。</li>
</ul>
</li>
<li>根据这个转发路径，经过 <code>InternalResourceViewResolver[视图解析器]</code> 解析，形成一个完整的访问路径。</li>
<li>将对应访问路径下的网页内容响应给浏览器。浏览器解析网页内容，展示给用户。</li>
</ol>
<h3 id="SpringMVC-的请求响应流程"><a href="#SpringMVC-的请求响应流程" class="headerlink" title="SpringMVC 的请求响应流程"></a>SpringMVC 的请求响应流程</h3><p><img src="/2020/08/28/SpringMVC/%E5%9F%BA%E4%BA%8ESpringMVC%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png" alt="基于SpringMVC组件的请求处理流程"></p>
<ol>
<li>客户端（浏览器）向服务器发送 HTTP 请求，首先被 DispatherServlet 拦截；</li>
<li>DispatherServlet 会将请求消息中的 URL 与 HandlerMapping 中保存的 Controller 的地址逐一进行比对。<ul>
<li><p>如果能找到对应的 Controller，则返回一个执行链给 DispatherServlet；</p>
</li>
<li><p>如果找不到对应的 Controller，则返回错误信息。</p>
</li>
<li><p>Request 请求中携带的 URL 只是一串字符串字面量，并不能直接定位到 Controller。这些字符串字面量经过 HandlerMapping 处理后返回给 DispatherServlet 的执行链才是 Controller 真正的地址。</p>
</li>
</ul>
</li>
<li>返回执行链给 Controller；</li>
<li>根据执行链调用 Controller 的过程中，请求消息首先会被 HandlerAdapter 接收，再交由 Controller 处理；<ul>
<li>  <em>SpringMVC 中的 HandlerAdapter 是一个接口，Controller 是该接口的实现类。类似于 Service 和 ServiceImpl。</em></li>
</ul>
</li>
<li>HandlerAdapter 调用 Controller，执行业务处理逻辑；</li>
<li>Controller 处理完具体的业务后，将业务的执行结果（也就是 ModelAndView）交给 HandlerAdapter 代为返回；</li>
<li>HandlerAdapter 将 ModelAndView 对象交给 DispatherServlet 统一调度；</li>
<li>DispatherServlet 将 ModelAndView 对象转发给 ViewResolver 进行解析；</li>
<li>ViewResolver 拼接 ModelAndView 中的信息得到物理视图地址，并将视图地址转发给 DispatherServlet 统一调度。（相当于原先只知道一个逻辑地址，在视图解析器中先拼接成一个静态页面物理地址）</li>
<li>在第 9 步中，我们得到了一个静态页面地址，如果这个页面中还有动态数据。根据这个地址，DispatherServlet 还会将 ModelAndView 中的数据信息传递给静态页面，进行页面的渲染；</li>
<li>DispatherServlet 将渲染完成后的页面数据响应给客户端，客户端使用浏览器加载并展示页面。</li>
</ol>
<hr>
<h1 id="SpringMVC中的的组件"><a href="#SpringMVC中的的组件" class="headerlink" title="SpringMVC中的的组件"></a>SpringMVC中的的组件</h1><h2 id="1-DispatherServlet：前端控制器"><a href="#1-DispatherServlet：前端控制器" class="headerlink" title="1 DispatherServlet：前端控制器"></a>1 DispatherServlet：前端控制器</h2><p>DispatherServlet 是客户端和服务器数据传输的中枢，主要负责：</p>
<ul>
<li>  接收客户端的请求，并转发请求给其它组件处理；</li>
<li>  将处理后的响应结果返回给客户端。</li>
</ul>
<p>DispatherServlet 是整个流程的控制中心，由它调用其它组件处理用户的请求。</p>
<p>DispatherServlet 的存在降低了组件间的耦合性。</p>
<blockquote>
<p>  <strong>总结：</strong></p>
<p>  前端控制器就是一个拦截器，如果将拦截的路径设置为 <code>/</code> 的话，所有访问服务器的请求都会被该前端控制器拦截。请求被拦截后由前端控制器负责筛选，将筛选后符合要求的请求转发给 SpringMVC 中的其它组件，继续业务流程。</p>
</blockquote>
<h2 id="2-HandlerMapping：处理器映射器"><a href="#2-HandlerMapping：处理器映射器" class="headerlink" title="2 HandlerMapping：处理器映射器"></a>2 HandlerMapping：处理器映射器</h2><p>DispatherServlet 会把请求消息转发给 HandlerMapping，HandlerMapping 根据请求消息中的 URL 匹配对应的 Controller 的执行链，并返回给 DispatherServlet 。</p>
<p>SpringMVC 提供了不同的映射器实现方式。如：配置文件方式、实现接口方式、注解方式等。</p>
<h2 id="3-HandlerAdapter：处理器适配器"><a href="#3-HandlerAdapter：处理器适配器" class="headerlink" title="3 HandlerAdapter：处理器适配器"></a>3 HandlerAdapter：处理器适配器</h2><p>HandlerAdapter 的设计采用了设计模式中的适配器模式。</p>
<p>HandlerAdapter 可以理解为“接口”，是对很多个 Controller 更高层次的抽象，但程序在真正执行时调用的还是底层的 Controller。</p>
<p>DispatherServlet 知道了要执行哪一个 Controller 后，在将请求转发给 Controller 时，并不会调用“具体”而是会调用“抽象”，这个所谓的抽象就是 HandlerAdapter。举个例子就是：</p>
<ul>
<li>  DispatherServlet 类的代码中会将请求转发给 HandlerAdapter，而代码运行时实际是由 HandlerAdapter 的实现类 Controller 来接收的（就是接口与实现类的关系，用到了多态语法）。</li>
<li>  在 Controller 中执行具体的业务。</li>
<li>  Controller 中的业务代码执行完毕之后，返回一个 ModelAndView 对象。从代码底层来看是由 Controller 返回的，但是从 DispatherServlet 的角度来看是 HandlerAdapter 返回的。</li>
</ul>
<h3 id="为什么要使用处理器适配器？"><a href="#为什么要使用处理器适配器？" class="headerlink" title="为什么要使用处理器适配器？"></a>为什么要使用处理器适配器？</h3><p>在 MVC 框架中，DispatherServlet 负责接收请求消息和响应结果，HandlerMapping 负责找到对应的执行链，HandlerAdapter 规定了 Controller 的编写标准，Controller 负责真正的业务逻辑。</p>
<ul>
<li><p><strong>不使用处理器适配器：</strong></p>
<p>  如果我们不使用 HandlerAdapter，由 Controller 直接接收请求信息，显然耦合度非常高，一旦需求发生改变，我们除了要更改Controller 中的代码，还需要更改 Controller 依赖的和被依赖的一系列的代码，显然耦合度非常高。</p>
</li>
<li><p><strong>使用处理器适配器：</strong></p>
<p>  为了解决这个问题，SpringMVC 定义了一个 HandlerAdapter，我们在调用时候都使用适配器接口，通过多态的方式去调用真正的处理器类。这样，即使处理请求消息的 Controller 发生了变化，我们也无需修改所有的代码，只需要根据适配器接口添加一个新的处理器类即可。</p>
</li>
</ul>
<p>所以说，<strong>HandlerAdapter 是一个接口，Controller 是这个接口的实现类，它们之间是一对多的关系</strong>。</p>
<p><img src="/2020/08/28/SpringMVC/HandlerAdapter.png"></p>
<h2 id="4-Controller-Handler：处理器"><a href="#4-Controller-Handler：处理器" class="headerlink" title="4 Controller/Handler：处理器"></a>4 Controller/Handler：处理器</h2><p>Controller/Handler 的作用是处理业务逻辑。</p>
<h2 id="5-ViewResolver：视图解析器"><a href="#5-ViewResolver：视图解析器" class="headerlink" title="5 ViewResolver：视图解析器"></a>5 ViewResolver：视图解析器</h2><p>DispatherServlet 会把逻辑视图（字符串字面量）发送给视图解析器进行解析，</p>
<ol>
<li>（可选）ViewResolver 首先会把逻辑视图解析为完整的视图地址（一般是拼接前缀、后缀）；</li>
<li>再根据完整的视图地址找到物理视图（View）；</li>
<li>（可选）如果是动态页面，还要根据 ModeAndView 中的数据对 View 进行渲染；</li>
<li>最后将 View 数据转发到 DispatherServlet 统一调度。</li>
</ol>
<h2 id="6-View：视图"><a href="#6-View：视图" class="headerlink" title="6 View：视图"></a>6 View：视图</h2><p>SpringMVC 框架提供了很多的 View 视图类型的支持，包括 jsp、freemarker、Thymeleaf  等。</p>
<p>一般情况下会通过页面标签或页面模板技术将模型数据通过页面展示给用户，需要程序员根据业务需求开发具体的页面。</p>
<h2 id="7-HandlerExceptionResolver：异常处理器"><a href="#7-HandlerExceptionResolver：异常处理器" class="headerlink" title="7 HandlerExceptionResolver：异常处理器"></a>7 HandlerExceptionResolver：异常处理器</h2><h3 id="7-1-理论基础"><a href="#7-1-理论基础" class="headerlink" title="7.1 理论基础"></a>7.1 理论基础</h3><p><img src="/2020/08/28/SpringMVC/SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-1651810035436.png" alt="SpringMVC异常处理"></p>
<p>默认地，应用的 Dao、Service、Controller、DispatcherServlet 中出现异常的解决方案都是向上一级抛出。</p>
<p>这种情况下，如果程序运行的过程中某一步出现了异常，那么最终响应给客户端浏览器的就是将程序报错信息展示在浏览器页面上，这对于用户是十分不友好的。</p>
<p>SpringMVC 中提供了一种异常处理机制：在程序运行过程中出现的异常一路向上抛出，直到到达 DispatcherServlet 时，由 DispatcherServlet 将异常信息交给 HandlerExceptionResolver 来处理，通过 HandlerExceptionResolver 跳转到一个提前写好的、友好的错误提示页面返回给客户端。</p>
<h3 id="7-2-实现步骤"><a href="#7-2-实现步骤" class="headerlink" title="7.2 实现步骤"></a>7.2 实现步骤</h3><img src="/2020/08/28/SpringMVC/SpringMVC%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8.png" style="zoom: 67%;">

<h4 id="1、编写访问页面"><a href="#1、编写访问页面" class="headerlink" title="1、编写访问页面"></a>1、编写访问页面</h4><ul>
<li>index.jsp</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;user/testException&quot;</span>&gt;异常处理&lt;/a&gt;</span><br></pre></td></tr></table></figure>



<h4 id="2、编写控制器Controller"><a href="#2、编写控制器Controller" class="headerlink" title="2、编写控制器Controller"></a>2、编写控制器Controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testException&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testException</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行&quot;</span>)</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;    <span class="comment">// 模拟异常</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在出现异常后，Controller 会自动向上层抛出异常，最后展示给用户的是一个很不友好的错误页面。</li>
<li>为了解决这个问题，我们使用自定义的异常处理器处理异常。</li>
</ul>
<h4 id="3、编写异常类（自定义异常类）"><a href="#3、编写异常类（自定义异常类）" class="headerlink" title="3、编写异常类（自定义异常类）"></a>3、编写异常类（自定义异常类）</h4><p>我们可以使用自定义的“友好的”异常信息来代替原生的“不友好的”异常信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义的异常类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储提示信息的字符串</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4、修改Controller控制器中的代码"><a href="#4、修改Controller控制器中的代码" class="headerlink" title="4、修改Controller控制器中的代码"></a>4、修改Controller控制器中的代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testException&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testException</span><span class="params">()</span> <span class="keyword">throws</span> MyException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;    <span class="comment">// 模拟异常</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// 在控制台打印异常信息</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="comment">// 抛出自定义异常信息(由于定义了异常处理器，此处是抛给异常处理器处理)</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;服务器崩溃了&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="5、自定义异常处理器"><a href="#5、自定义异常处理器" class="headerlink" title="5、自定义异常处理器"></a>5、自定义异常处理器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义异常处理器</span></span><br><span class="line"><span class="comment"> * 异常处理器必须实现`HandlerExceptionResolver`接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyExceptionResolver</span> <span class="keyword">implements</span> <span class="title class_">HandlerExceptionResolver</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理异常的业务逻辑</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpServletRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpServletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e 接收下一级返回的异常信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">resolveException</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取异常对象</span></span><br><span class="line">        <span class="type">MyException</span> <span class="variable">exception</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 如果从Controller中接收异常信息是MyException类型，就直接接收，否则就自定义一个MyException异常类型</span></span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> MyException)&#123;</span><br><span class="line">            exception = (MyException)e;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            exception = <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;系统正在维护&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建ModelAndView对象</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">// 从自定义的异常类中拿到提示信息，并转发到error页面</span></span><br><span class="line">        mv.addObject(<span class="string">&quot;errorMessage&quot;</span>, exception.getMessage());</span><br><span class="line">        mv.setViewName(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 接收从Controller控制器中抛出的异常信息 `Exception e`;</span></span><br><span class="line"><span class="comment">	2. 创建一个返回页面`error.jsp`；</span></span><br><span class="line"><span class="comment">	 并将从Controller控制器中得到的异常信息转发到`error.jsp`中。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h4 id="6、自定义展示给用户的错误信息页面"><a href="#6、自定义展示给用户的错误信息页面" class="headerlink" title="6、自定义展示给用户的错误信息页面"></a>6、自定义展示给用户的错误信息页面</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;错误提示页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    $&#123;errorMessage&#125;		&lt;!--从异常处理器中拿到的错误信息数据--&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="7、注册异常处理器"><a href="#7、注册异常处理器" class="headerlink" title="7、注册异常处理器"></a>7、注册异常处理器</h4><ul>
<li><code>SpringMVC.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置异常处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;MyExceptionResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.exception.MyExceptionResolver&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	启用异常处理器的工作由 &lt;mvc:annotation-driven&gt; 帮助我们完成了</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="7-3-小总结"><a href="#7-3-小总结" class="headerlink" title="7.3 小总结"></a>7.3 小总结</h3><p>如果程序在运行过程中出现了异常，那么异常必然会层层向上抛出，直到到达<strong>前端控制器（DispatherServlet）</strong>，前端控制器如果发现接收的消息中含有异常，就会转发给异常处理器，在异常处理器中，可以改变默认的异常处理逻辑，比如：改变返回给用户的异常信息，也可以转发到一个友好的异常展示页面中去。</p>
<hr>
<h2 id="8-HandlerInterceptor：处理器拦截器"><a href="#8-HandlerInterceptor：处理器拦截器" class="headerlink" title="8 HandlerInterceptor：处理器拦截器"></a>8 HandlerInterceptor：处理器拦截器</h2><h3 id="8-1-拦截器的作用"><a href="#8-1-拦截器的作用" class="headerlink" title="8.1 拦截器的作用"></a>8.1 拦截器的作用</h3><ul>
<li>SpringMVC 中的 HandlerInterceptor 类似于 Servlet 开发中的过滤器 Filter，<strong>用于对请求消息进行预处理，对响应消息进行后处理</strong>。</li>
<li>SpringMVC 支持用户自定义一些拦截器来实现特定的功能。</li>
<li>开发人员自定义的拦截器必须实现 HandlerInterceptor 接口</li>
</ul>
<h4 id="8-1-1-拦截器链"><a href="#8-1-1-拦截器链" class="headerlink" title="8.1.1 拦截器链"></a>8.1.1 拦截器链</h4><p><strong>拦截器链</strong>：拦截器链就是将拦截器按一定的顺序连成一条链。在请求被拦截时，拦截器链中的拦截器就会按照定义的顺序被调用。</p>
<h4 id="8-1-2-拦截器vs-过滤器"><a href="#8-1-2-拦截器vs-过滤器" class="headerlink" title="8.1.2 拦截器vs.过滤器"></a>8.1.2 拦截器vs.过滤器</h4><table>
<thead>
<tr>
<th></th>
<th>过滤器（Filter）</th>
<th>拦截器（HandlerInterceptor）</th>
</tr>
</thead>
<tbody><tr>
<td>使用范围</td>
<td>Filter 是 Servlet 规范中的一部分，在任何JavaWeb 工程中都可以使用。</td>
<td>HandlerInterceptor 是 SpringMVC 框架特有的，只能在 SpringMVC 项目中使用。</td>
</tr>
<tr>
<td>使用规则</td>
<td>Filter 在 <code>url-pattern</code> 中配置了 <code>/*</code> 之后，会拦截访问所有资源的请求。</td>
<td><strong>拦截器只会拦截访问 Controller 的请求</strong>，如果访问的是 jsp、image、js 等静态资源，是不会进行拦截的。</td>
</tr>
</tbody></table>
<hr>
<h3 id="8-2-自定义拦截器的步骤"><a href="#8-2-自定义拦截器的步骤" class="headerlink" title="8.2 自定义拦截器的步骤"></a>8.2 自定义拦截器的步骤</h3><h4 id="1、编写一个可提供访问服务的SpringMVC项目"><a href="#1、编写一个可提供访问服务的SpringMVC项目" class="headerlink" title="1、编写一个可提供访问服务的SpringMVC项目"></a>1、编写一个可提供访问服务的SpringMVC项目</h4><h4 id="2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）"><a href="#2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）" class="headerlink" title="2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）"></a>2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 预处理：返回值为true，表示执行完拦截器中的方法后放行；</span></span><br><span class="line"><span class="comment">     * 返回值为false，表示执行完拦截器中的方法后仍不放行。</span></span><br><span class="line"><span class="comment">     * Tip：预处理、后处理、最终处理拦截器是一次性放行的</span></span><br><span class="line"><span class="comment">     *  	</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;预处理拦截器&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 后处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后处理拦截器&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最终处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;最终处理拦截器&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="3、注册拦截器"><a href="#3、注册拦截器" class="headerlink" title="3、注册拦截器"></a>3、注册拦截器</h4><ul>
<li><code>SpringMVC.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册拦截器链--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>   <span class="comment">&lt;!--配置拦截器要拦截的路径：这里设置拦截所有所有访问Controller的请求--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HandlerInterceptor1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.MyHandlerInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HandlerInterceptor2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.MyHandlerInterceptor2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、结果测试"><a href="#4、结果测试" class="headerlink" title="4、结果测试"></a>4、结果测试</h4><hr>
<h3 id="8-3-拦截器细节"><a href="#8-3-拦截器细节" class="headerlink" title="8.3 拦截器细节"></a>8.3 拦截器细节</h3><ul>
<li>  <strong>拦截器的放行：</strong></li>
</ul>
<p>放行的含义是指，如果有下一个拦截器就执行下一个拦截器，如果该拦截器处于拦截器链上的最后一个，则执行 Controller 中的方法。</p>
<ul>
<li>  <strong>拦截器的作用路径</strong></li>
</ul>
<p>作用路径可以通过在配置文件中设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册拦截器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>   <span class="comment">&lt;!--指定拦截的URL--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;&quot;</span>/&gt;</span>	<span class="comment">&lt;!--指定不拦截的URL--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这2个标签的作用相反，只要写一个即可--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HandlerInterceptor1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.MyHandlerInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>





<hr>
<h2 id="9-Converter：类型转换器"><a href="#9-Converter：类型转换器" class="headerlink" title="9 Converter：类型转换器"></a>9 Converter：类型转换器</h2><blockquote>
<p>  <strong>自定义类型转换器</strong></p>
</blockquote>
<h3 id="1-类型转换器的使用场景"><a href="#1-类型转换器的使用场景" class="headerlink" title="1 类型转换器的使用场景"></a>1 类型转换器的使用场景</h3><p>客户端浏览器向服务器发送的请求中包含一个日期字符串，但是这个字符串格式却不符合 JVM 内置的字符串格式。</p>
<ul>
<li>  如果服务器使用 String 类型来接收这个字符串，自然可以接收成功；</li>
<li>  但是服务器使用 Date 数据类型来接收这个字符串，就会出现<strong>类型转换失败</strong>的情况。</li>
</ul>
<p>如果我们能够在请求到达 Controller 前，将请求消息中的日期格式改为符合 JVM 标准的格式，如 <code>date=2020/07/14</code>，在 Controller 中就可以直接使用 Date 数据类型来接收这个字符串。这就是所谓的“类型转换”。</p>
<p>这种情况下就需要我们手动实现自定义类型转换。</p>
<p>自定义的类型转换器需要实现 Converter 接口，Convert 接口的源码如下所示：</p>
<blockquote>
<p>  Convert接口源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span>	<span class="comment">// 函数式接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Converter</span>&lt;S, T&gt; &#123;	<span class="comment">// 该接口有2个泛型，S表示接收的类型，T表示目标类型</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Convert the source object of type &#123;<span class="doctag">@code</span> S&#125; to target type &#123;<span class="doctag">@code</span> T&#125;.</span></span><br><span class="line"><span class="comment">	 * 实现类型转换的方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    T <span class="title function_">convert</span><span class="params">(S source)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="2-使用步骤"><a href="#2-使用步骤" class="headerlink" title="2 使用步骤"></a>2 使用步骤</h3><ol>
<li><p>客户端浏览器发送请求的代码：<code>index.jsp</code></p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;自定义类型转换器&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/account/deleteAccount?date=2020-07-14&quot;</span>&gt;根据日期删除用户&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>服务器 Controller 层代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(value = &quot;accountController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;account&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;deleteAccount&quot;)</span></span><br><span class="line">    <span class="comment">// public String deleteAccount(String date)&#123;</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteAccount</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;删除了账户&quot;</span>+date);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  如果使用 String 类型接收客户端传递的 date 变量，可以成功接收。因为 date 在传递过程中就是以字符串格式流转的。</li>
<li>  但是如果使用 Date 类型接收客户端传递的 date 变量会出现 <strong>[400 – Bad Request]</strong> 错误，因为字符串 “2020-07-14” 不能自动转换为 Date 类型。此时，我们需要自定义一个类型转换器，将接收到的 date 字符串转换为 Date 类型的对象。</li>
</ul>
</li>
<li><p>自定义一个 Converter 接口的实现类，重写接口中的 <code>convert(S source)</code> 方法</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringToDateConverter</span> <span class="keyword">implements</span> <span class="title class_">Converter</span>&lt;String, Date&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (source == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>(<span class="string">&quot;请输入要转换的日期！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">DateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">            <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> dateFormat.parse(source);</span><br><span class="line">            <span class="keyword">return</span> date;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在 <code>SpringMVC.xml</code> 配置文件中注册类型转换器</p>
<ul>
<li>  SpringMVC 中，类型转换器（Converter）可以有多个，被一个类型转换器工厂（ConversionServiceFactoryBean）统一管理。</li>
<li>  SpringMVC 配置 Converter 的机制是，将自定义的类型转换器注册（添加）到类型转换工厂维护的的类型转换器服务中。</li>
</ul>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置类型转换器 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1.配置类型转换工厂--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionServiceFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.给工厂注入一个新的类型转换器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;myConverter01&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置自定义类型转换器--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.utils.StringToDateConverter&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	一个类型转换工厂中可以有多个类型转换器</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在<code>SpringMVC.xml</code>配置文件中，使用<code>&lt;annotation-driven&gt;</code>标签启用<code>类型转换器工厂</code>。</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Spring开启注解MVC的支持 + 引用自定义的类型转换器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionServiceFactoryBean&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p> 配置完成，类型转换器生效后。在 Controller 的接口中就可以直接使用 Date 类型的变量来接收 String 类型的日期值了。</p>
</li>
</ol>
<hr>
<h2 id="10-lt-mvc-annotation-driven-gt"><a href="#10-lt-mvc-annotation-driven-gt" class="headerlink" title="10 &lt;mvc:annotation-driven&gt;"></a>10 <code>&lt;mvc:annotation-driven&gt;</code></h2><p>在 SpringMVC 项目中，<strong>HandlerMapping、HandlerAdapter、ViewResolver</strong> 等都是 SpringMVC 特有的组件。</p>
<p>如果在配置文件 <code>SpringMVC.xml</code> 中配置了 <code>&lt;mvc:annotation-driven&gt;</code> 标签，就会默认使用 SpringMVC 源码中定义的HandlerMapping、HandlerAdapter 等组件。</p>
<p>也就是说如果使用了 <code>&lt;mvc:annotation-driven&gt;</code> 标签，如无特殊需求，就无需再手动配置 HandlerMapping、HandlerAdapter 等组件了。</p>
<p>它就相当于在 <code>SpringMVC.xml</code> 中配置了：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">---------------------------------<span class="comment">&lt;!--等价于--&gt;</span>-----------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置处理器映射器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置处理器适配器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置处理器异常解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>







<hr>
<h1 id="请求参数的绑定"><a href="#请求参数的绑定" class="headerlink" title="请求参数的绑定"></a>请求参数的绑定</h1><h2 id="1-绑定说明"><a href="#1-绑定说明" class="headerlink" title="1 绑定说明"></a>1 绑定说明</h2><h3 id="1-1-绑定的机制"><a href="#1-1-绑定的机制" class="headerlink" title="1.1 绑定的机制"></a>1.1 绑定的机制</h3><ol>
<li><p>我们都知道，前端页面中表单的请求参数默认是以 <code>key=value</code> 的格式传输的。</p>
<ul>
<li>  HTML中表单默认的传输数据类型 <code>&lt;form enctype=&quot;application/x-www-form-urlencoded&quot;&gt;</code></li>
</ul>
</li>
<li><p>SpringMVC 中，绑定请求参数就是把表单提交的数据赋值给 Controller 中接口方法的形参。也就是将表单中请求参数的 key 和 Controller 中接口方法的形参名进行映射。</p>
</li>
</ol>
<h3 id="1-2-支持绑定的数据类型"><a href="#1-2-支持绑定的数据类型" class="headerlink" title="1.2 支持绑定的数据类型"></a>1.2 支持绑定的数据类型</h3><ul>
<li>  基本类型 &amp; String 类型</li>
<li>  POJO 类型参数：包括实体类，以及关联的实体类</li>
<li>  数组和集合类型参数：包括List结构和Map结构的集合（包括数组）</li>
</ul>
<hr>
<h2 id="2-自动绑定"><a href="#2-自动绑定" class="headerlink" title="2 自动绑定"></a>2 自动绑定</h2><p>SpringMVC 支持请求参数的自动绑定机制，但前提是请求参数必须 SpringMVC 制定的标准。</p>
<h3 id="2-1-原理"><a href="#2-1-原理" class="headerlink" title="2.1 原理"></a>2.1 原理</h3><ol>
<li><p>如果是<strong>基本类型或 String 类型</strong>：</p>
<ul>
<li>要求我们的请求参数的 key 必须和 Controller 中接口方法的形参名称一致。（严格区分大小写）</li>
</ul>
</li>
<li><p>如果是 <strong>POJO 类型</strong>，或者它的关联对象：</p>
<ul>
<li>要求 Controller 中方法对应的参数类型是 POJO 类型。</li>
<li>并且要求 POJO 类提供公共的 setXxx() 方法。</li>
<li>注意：表单中请求参数的 key 要和 setXxx() 方法中的 xxx 保持一致。</li>
</ul>
</li>
<li><p>如果是<strong>集合类型</strong>，有2种方式：</p>
<ul>
<li><p>第1种：集合类型的请求参数在 POJO 中。</p>
<ul>
<li>此时，要求表单中的请求参数的 key 和 POJO 中集合的 setXxx() 方法中的 xxx 名称相同。</li>
<li>给 List 形式的集合中的元素赋值，使用下标。</li>
<li>给 Map 形式的集合中的元素赋值，使用键值对。</li>
</ul>
</li>
<li><p>第2种：接收的请求参数是 json 格式数据。</p>
<ul>
<li>  接收 json 字符串之后，使用 json 转换工具将 json 字符串转换成对应的 POJO 对象。</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="2-2-代码演示"><a href="#2-2-代码演示" class="headerlink" title="2.2 代码演示"></a>2.2 代码演示</h3><h4 id="1、基本类型-String类型的请求参数"><a href="#1、基本类型-String类型的请求参数" class="headerlink" title="1、基本类型/String类型的请求参数"></a>1、基本类型/String类型的请求参数</h4><ol>
<li><p>客户端请求页面：<code>index.jsp</code></p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交POST请求&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	在index.jsp页面中键入：</span><br><span class="line">		username=zhangsan, password=<span class="number">123456</span></span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Controller</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC： &quot;</span>+username+<span class="string">&quot;=&quot;</span>+password);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	控制台输出：</span></span><br><span class="line"><span class="comment">		Hello SpringMVC： zhangsan=123456</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="2、POJO-类型的请求参数"><a href="#2、POJO-类型的请求参数" class="headerlink" title="2、POJO 类型的请求参数"></a>2、POJO 类型的请求参数</h4><ol>
<li><p>实体类代码</p>
<ul>
<li>  Account类</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 账户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line">    <span class="comment">// 省略 getter、setter、toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  User类</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="keyword">private</span> Account account;	<span class="comment">// 关联的实体类</span></span><br><span class="line">    <span class="comment">// 省略 getter、setter、toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li><p>客户端浏览器<code>index.jsp</code>代码</p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;请求参数的绑定（User类型及关联的Account实体类）&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/saveUser&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        性别：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;gender&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;account.username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;account.password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        余额：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;account.money&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>Controller 层代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;saveUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveAccount</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">执行结果：</span></span><br><span class="line"><span class="comment">	User&#123;name=&#x27;张三&#x27;, gender=&#x27;男&#x27;, age=&#x27;29&#x27;, </span></span><br><span class="line"><span class="comment">		account=Account&#123;username=&#x27;zhangsan@qq.com&#x27;, password=&#x27;123&#x27;, money=666.66&#125;&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="3、POJO类中包含集合类型参数"><a href="#3、POJO类中包含集合类型参数" class="headerlink" title="3、POJO类中包含集合类型参数"></a>3、POJO类中包含集合类型参数</h4><blockquote>
<ol>
<li> 实体类代码</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Account&gt; map;</span><br><span class="line">	<span class="comment">// get&amp;set</span></span><br><span class="line">    <span class="comment">// toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<ol start="2">
<li> 客户端浏览器<code>index.jsp</code>代码</li>
</ol>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>请求参数的绑定（POJO类中包含集合类型参数）<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/saveUser&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        用户姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        用户性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        用户年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        账户名1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list[0].username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户密码1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list[0].password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户余额1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list[0].money&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        账户名2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;map[&#x27;one&#x27;].username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户密码2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;map[&#x27;one&#x27;].password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户余额2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;map[&#x27;one&#x27;].money&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="3">
<li> 控制器代码</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;saveUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveAccount</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">     System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果：</span></span><br><span class="line"><span class="comment">	User&#123;name=&#x27;张三&#x27;, gender=&#x27;男&#x27;, age=&#x27;29&#x27;, </span></span><br><span class="line"><span class="comment">	list=[Account&#123;username=&#x27;zhangsan@qq.com&#x27;, password=&#x27;123&#x27;, money=66.6&#125;], </span></span><br><span class="line"><span class="comment">	map=&#123;one=Account&#123;username=&#x27;zhangsan@163.com&#x27;, password=&#x27;456&#x27;, money=0.63&#125;&#125;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>




<hr>
<h3 id="2-3-请求参数乱码问题"><a href="#2-3-请求参数乱码问题" class="headerlink" title="2.3 请求参数乱码问题"></a>2.3 请求参数乱码问题</h3><h4 id="Q1：POST-请求参数中文乱码的问题"><a href="#Q1：POST-请求参数中文乱码的问题" class="headerlink" title="Q1：POST 请求参数中文乱码的问题"></a>Q1：POST 请求参数中文乱码的问题</h4><blockquote>
<p>  <strong>问题</strong></p>
</blockquote>
<p>当请求参数为中文时，</p>
<ul>
<li>如果使用 GET 请求，不会出现乱码的问题，</li>
<li>但是当我们使用 POST 请求时，则会出现中文乱码的问题。</li>
</ul>
<blockquote>
<p>  <strong>解决思路：</strong></p>
</blockquote>
<ul>
<li>添加一个过滤器 Filter，将所有的请求和响应消息的编码都设置为 UTF-8。</li>
<li>同理，也可以考虑使用 SpringMVC 特有的 HandlerInterceptor 来实现。</li>
</ul>
<blockquote>
<p>  <strong>解决方案：</strong></p>
</blockquote>
<ul>
<li>  在配置文件 web.xml 中添加一个过滤器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册编码过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置CharacterEncodingFilter过滤器中的属性值encoding=utf-8 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 启动过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>setEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>   <span class="comment">&lt;!--过滤所有请求--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>





<hr>
<h3 id="2-4-接收Servlet原生的API作为方法参数"><a href="#2-4-接收Servlet原生的API作为方法参数" class="headerlink" title="2.4 接收Servlet原生的API作为方法参数"></a>2.4 接收Servlet原生的API作为方法参数</h3><p>SpringMVC 还支持使用原生的 Servlet API 对象作为 controller 中接口方法的入参。支持的原生 Servlet API 对象包括：</p>
<ul>
<li>  <code>HttpServletRequest</code></li>
<li>  <code>HttpServletResponse</code></li>
<li>  <code>HttpSession</code></li>
<li>  <code>java.security.Principal</code></li>
<li>  <code>Locale</code></li>
<li>  <code>InputStream</code></li>
<li>  <code>OutputStream</code></li>
<li>  <code>Reader</code></li>
<li>  <code>Writer</code></li>
</ul>
<p>上述对象，都可以直接映射到 Controller 中的方法的同名形参上。</p>
<h4 id="部分示例代码："><a href="#部分示例代码：" class="headerlink" title="部分示例代码："></a>部分示例代码：</h4><ol>
<li><p>客户端浏览器的访问请求代码：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--原始ServletAPI作为控制器参数--&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testServletAPI&quot;</span>&gt;测试访问ServletAPI&lt;/a&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testServletAPI&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testServletAPI</span><span class="params">(HttpServletRequest request, HttpSession session)</span>&#123;</span><br><span class="line">        System.out.println(request);</span><br><span class="line">        System.out.println(session);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">		org.apache.catalina.connector.RequestFacade@2d9079c9</span></span><br><span class="line"><span class="comment">		org.apache.catalina.session.StandardSessionFacade@4be66770</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="3-通过注解绑定"><a href="#3-通过注解绑定" class="headerlink" title="3 通过注解绑定"></a>3 通过注解绑定</h2><p>HTTP 请求中能够携带请求参数的地方无非就三个地方：</p>
<ul>
<li>  在 GET 请求的 URL 中拼接请求参数；</li>
<li>  在 GET 请求中使用占位符携带请求参数；</li>
<li>  在 POST 请求的请求体中携带请求参数。</li>
</ul>
<p>针对这三个地方的请求数据，SpringMVC 分别提供了 @RequestParam、@PathVariable 和 @RequestBody 三个注解进行请求参数的解析。</p>
<h3 id="1-RequestParam"><a href="#1-RequestParam" class="headerlink" title="1 @RequestParam"></a>1 @RequestParam</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li>  <strong>作用</strong>：把 HTTP 请求中指定名称的请求参数赋值给 Controller 中接口方法的形参（此时不强制要求请求参数的名称与 Controller 方法中形参的名称相同）。</li>
<li>属性：<ul>
<li>  <code>value</code>：HTTP 请求消息中参数的 key。</li>
<li>  <code>required</code>：请求参数中是否必须提供此参数（默认为True）。</li>
</ul>
</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--requestParam注解的使用--&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testRequestParam?name=张三&quot;</span>&gt;</span><br><span class="line">    测试RequestParam注解</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;br&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testRequestParam&quot;)</span>		</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;name&quot;)</span> String username)</span>&#123;	<span class="comment">// 将请求参数中的name赋值给本方法的username参数</span></span><br><span class="line">        System.out.println(username);	<span class="comment">// 张三</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li>  如果此时 HTTP 请求的请求参数中没有 key 为 name 的属性，得到的 username 不是 null，而是会直接报错：400 – Bad Request。</li>
<li>  如果想要得到结果为 null，则需要设置：<code>@RequestParam(value = &quot;name&quot;, required = false)</code></li>
</ul>
</li>
</ol>
<hr>
<h3 id="2-RequestBody"><a href="#2-RequestBody" class="headerlink" title="2 @RequestBody"></a>2 @RequestBody</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li><p>作用：</p>
<ul>
<li>  <strong>用于获取 POST 请求消息中请求体的内容，GET 请求方式不适用。</strong></li>
<li>  直接使用得到的是 <code>key=value&amp;key=value......</code> 结构的 String 类型的数据。</li>
</ul>
</li>
<li><p>属性：</p>
<ul>
<li>  <code>required</code>：是否必须有请求体（默认为True）。    -   如果 required=true，GET 请求方式会报错。    -   如果 required=false，GET 请求不会报错，但是 Controller 中接口方法得到数据是 null。</li>
</ul>
</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--RequestBody注解测试--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/testRequestBody&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    用户性别：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;gender&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    用户年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testRequestBody&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody(required = false)</span> String body)</span>&#123;	<span class="comment">// 此处的变量名可以自定义</span></span><br><span class="line">        System.out.println(body);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">		name=zs&amp;gender=nan&amp;age=29</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="3-PathVaribale"><a href="#3-PathVaribale" class="headerlink" title="3 @PathVaribale"></a>3 @PathVaribale</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li>  作用：</li>
<li>用于绑定 HTTP 请求中请求 URL 中的占位符。</li>
<li>例如，<code>$&#123;pageContext.request.contextPath&#125;/delete/&#123;id&#125;</code> 请求 URL 中的 <code>&#123;id&#125;</code> 就是占位符。</li>
<li>URL 占位符是 Spring3.0+ 之后加入的。是 SpringMVC 支持 Restful 风格 URL 的一个重要标志。</li>
<li>  属性：</li>
<li><code>value</code>：用于指定 URL 中占位符名称。</li>
<li><code>required</code>：是否必须提供占位符。</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--PathVariable注解测试--%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testPathVariable/lisi&quot;</span>&gt;测试PathVariable注解&lt;/a&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testPathVariable/&#123;name&#125;&quot;)</span><span class="comment">//从请求URL中截取部分作为请求参数传递</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span>&#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果：lisi</span></span><br><span class="line"><span class="comment">* /</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="4-ModelAttribute"><a href="#4-ModelAttribute" class="headerlink" title="4 @ModelAttribute"></a>4 @ModelAttribute</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li><p>  作用：</p>
</li>
<li><p>该注解是 SpringMVC4.3 版本之后新加入的，它可以用于<strong>修饰方法和参数</strong>。</p>
</li>
<li><p>在方法上使用时，被该注解修饰的方法会先于本该被执行的方法执行。</p>
</li>
<li><p>在参数上使用时，表示使用 HTTP 请求中指定的数据给参数赋值。</p>
</li>
<li><p>  属性：</p>
</li>
<li><p><code>value</code>：用于获取数据的 key。[key可以是POJO的属性名称，也可以是Map结构的key]</p>
</li>
<li><p>  应用场景：</p>
</li>
<li><p>当表单提交的数据不是完整的实体类数据时，可以保证没有提交数据的字段使用数据库对象中原有的数据。</p>
</li>
<li><p>例如：当我们在编辑一个用户时，用户有一个创建信息字段，该字段的值是不被允许修改的。在表单提交数据时，是肯定没有此字段的内容，此时，正常情况下，一旦更新用户数据就会把该字段内容置位 null，这时就可以使用此注解保留原始数据中该字段的内容。</p>
</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<h4 id="Case1：-ModelAttribute-修饰方法"><a href="#Case1：-ModelAttribute-修饰方法" class="headerlink" title="Case1：@ModelAttribute 修饰方法"></a>Case1：@ModelAttribute 修饰方法</h4><p>需求：要求修改用户信息，但是用户的名不能被修改</p>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ModelAttribute注解测试--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/updateUser&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户编号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    用户性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    用户年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在表单页面键入：id=01，gender=男，age=23。</p>
</li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 该方法会先于本该执行的方法执行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  从数据库中查询到的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ModelAttribute</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">showUser</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        <span class="comment">// 模拟查询数据库</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> findUserById(id);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模拟根据id从数据库中查询数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUserById</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;根据id从数据库中查询数据并返回：&quot;</span>+id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;管理员&quot;</span>);</span><br><span class="line">        user.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        user.setAge(<span class="string">&quot;46&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;updateUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果：User&#123;name=&#x27;管理员&#x27;, gender=&#x27;男&#x27;, age=&#x27;23&#x27;, list=null, map=null&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">分析：</span><br><span class="line">   </span><br><span class="line">   -   在 updateUser 方法中，用户上传的数据只有 `id`、`gender` 和 `age` 字段，但是输出结果中却还有 `name` 字段，是因为 `name` 属性沿用了数据库中的数据。</span><br><span class="line">   -   使用 `@ModelAttribute` 注解提前从数据库中获取 user 对象，然后再将用户新提交的数据赋值给 user 对象，这时新提交的数据将会覆盖原先 user 对象中对应的字段，而剩余的字段将会沿用从数据库中取出的 user 对象中的值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### Case2：@ModelAttribute 修饰参数</span><br><span class="line"></span><br><span class="line">需求：要求修改用户信息，但是用户的用户名不能被修改</span><br><span class="line"></span><br><span class="line">1. 客户端浏览器的请求页面：`index.jsp`</span><br><span class="line"></span><br><span class="line">   ```xml</span><br><span class="line">   &lt;!-- 修改用户信息 --&gt;</span><br><span class="line">   &lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/user/updateUser&quot; method=&quot;post&quot;&gt;</span><br><span class="line">       用户编号：&lt;input type=&quot;text&quot; name=&quot;id&quot;/&gt;&lt;br&gt;</span><br><span class="line">       用户性别：&lt;input type=&quot;text&quot; name=&quot;gender&quot;/&gt;&lt;br&gt;</span><br><span class="line">       用户年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot;/&gt;&lt;br&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</span><br><span class="line">   &lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 该方法会先执行,</span></span><br><span class="line"><span class="comment">     * 根据ID从数据库中查询用户，并将用户存入Map集合中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ModelAttribute</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showUser</span><span class="params">(Integer id, Map&lt;String, User&gt; map)</span>&#123;</span><br><span class="line">        <span class="comment">// 模拟查询数据库</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> findUserById(id);</span><br><span class="line">        map.put(<span class="string">&quot;abc&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;updateUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">(<span class="meta">@ModelAttribute(&quot;abc&quot;)</span> User user)</span>&#123; <span class="comment">// 根据Map集合的key获取value，并给user参数赋值</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模拟根据id从数据库中查询数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUserById</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;根据id从数据库中查询数据并返回：&quot;</span>+id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;管理员&quot;</span>);</span><br><span class="line">        user.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        user.setAge(<span class="string">&quot;46&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h1><h2 id="1-RequestMapping注解"><a href="#1-RequestMapping注解" class="headerlink" title="1 @RequestMapping注解"></a>1 @RequestMapping注解</h2><h3 id="1-1-说明"><a href="#1-1-说明" class="headerlink" title="1.1 说明"></a>1.1 说明</h3><p><strong>作用：</strong>用于建立请求 URL 和处理请求的方法之间的联系。[HandlerMapping 的管辖范围]</p>
<p><strong>使用位置：</strong></p>
<ul>
<li><p>类上</p>
<ul>
<li>  请求 URL 的第一级访问目录。此处不写的话，就相当于 URL 为工程路径下的根目录，写的话需要以 <code>/</code> 开头。</li>
<li>  它出现的目的是为了使我们的 URL 可以按照模块化管理。例如：</li>
</ul>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">账户模块：</span><br><span class="line">	/account/add</span><br><span class="line">	/account/update</span><br><span class="line">	...</span><br><span class="line">订单模块:</span><br><span class="line">	/order/add</span><br><span class="line">	/order/update</span><br><span class="line">	...</span><br><span class="line">......</span><br></pre></td></tr></table></figure></li>
<li><p>  方法上：请求 URL 的第二级访问目录。</p>
</li>
</ul>
<p><strong>属性：</strong></p>
<ul>
<li><p><code>value[]</code>：用于限定请求的 URL，和 <code>path</code> 属性的作用是一样的。只有这一个属性时可以省略 key。</p>
</li>
<li><p><code>path[]</code>：用于限定请求的 URL，和 <code>value</code> 属性的作用是一样的。只有这一个属性时可以省略key。</p>
</li>
<li><p><code>method[]</code>：用于限定请求的方式。</p>
</li>
<li><p><code>params[]</code>：用于限定请求参数。它支持简单的表达式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例如：</span></span><br><span class="line">params = &#123;<span class="string">&quot;username&quot;</span>&#125;	<span class="comment">// 要求参数中必须有`username`。</span></span><br><span class="line">params = &#123;<span class="string">&quot;password != 123&quot;</span>&#125;;	<span class="comment">// 要求参数中必须有`password`，且对应的value不能为`123`。</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>headers</code>：用于限定请求消息的请求头。</p>
</li>
</ul>
<hr>
<h3 id="1-2-示例"><a href="#1-2-示例" class="headerlink" title="1.2 示例"></a>1.2 示例</h3><h4 id="1、value-path-属性测试"><a href="#1、value-path-属性测试" class="headerlink" title="1、value/path 属性测试"></a>1、value/path 属性测试</h4><ul>
<li>控制器代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/the&quot;)</span>                     <span class="comment">// 一级路径</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span>               <span class="comment">// 二级路径</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>客户端浏览器<code>jsp</code>中的代码</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">    </span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;SpringMVC入门案例&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">    &lt;!--第<span class="number">1</span>种查询方式--&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span>&gt;SpringMVC入门案例&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">---------------------------------&lt;!--等价于--&gt;-------------------------------------</span><br><span class="line">	&lt;!--第<span class="number">2</span>种查询方式--&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;the/hello&quot;</span>&gt;SpringMVC入门案例&lt;/a&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	当我们使用第<span class="number">2</span>种方式配置时，一定不要在URL前面加`/`，否则无法找到资源</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>





<h4 id="2、method属性测试"><a href="#2、method属性测试" class="headerlink" title="2、method属性测试"></a>2、method属性测试</h4><blockquote>
<p>  <strong>源码</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// method的取值类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RequestMethod</span> &#123;</span><br><span class="line">	GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS, TRACE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li><p>控制器代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &amp;quot;/the&amp;quot;, method = &#123;RequestMethod.POST&#125;)</span>	<span class="comment">// 请求方式限定为POST</span></span><br><span class="line"><span class="meta">@Controller(value = &amp;quot;helloController&amp;quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&amp;quot;/hello&amp;quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;Hello SpringMVC&amp;quot;);</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;success&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  限定了请求方式后，如果继续以 GET 请求的方式请求服务器资源，会出现：<strong>HTTP Status 405 – Method Not Allowed</strong> 错误。表示方法不支持 GET 请求。</li>
</ul>
</li>
</ol>
<p><img src="/2020/08/28/SpringMVC/image-20200713101251171.png" alt="image-20200713101251171"></p>
<ol start="2">
<li> 改造 <code>index.jsp</code> 代码：修改 GET 请求为 POST 请求。</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;SpringMVC入门案例&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;the/hello&quot;</span>&gt;SpringMVC入门案例（GET请求）&lt;/a&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交POST请求&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">	当使用GET请求时，会出现<span class="number">405</span>访问异常；</span><br><span class="line">	当使用POST请求时，可以成功访问到资源</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3、params属性测试"><a href="#3、params属性测试" class="headerlink" title="3、params属性测试"></a>3、params属性测试</h4><ol>
<li><p>控制器的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数中必须有`username`和`password`，且`password`的值不能为`123`；</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;, params = &#123;&quot;username&quot;, &quot;password!=123&quot;&#125;)</span>	</span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>index.jsp</code>的代码</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交POST请求&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>当我们在<code>index.jsp</code>页面键入<code>username</code>和<code>password</code>后，如果<code>password</code>的值不为<code>123</code>，则可以成功请求到服务器资源。</p>
</li>
<li><p>如果<code>password</code>的值键入<code>123</code>，则会出现下述错误：**<code>400-Bad Request</code>**，</p>
<p><img src="/2020/08/28/SpringMVC/image-20200713102859647.png" alt="image-20200713102859647"></p>
</li>
</ul>
</li>
</ol>
<h4 id="4、headers属性测试"><a href="#4、headers属性测试" class="headerlink" title="4、headers属性测试"></a>4、headers属性测试</h4><ol>
<li><p>HTTP Request Headers Demo</p>
 <figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Request Headers</span><br><span class="line">    Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span><br><span class="line">    Accept-Encoding:gzip, deflate, sdch</span><br><span class="line">    Accept-Language:zh-CN,zh;q=0.8</span><br><span class="line">    Cache-Control:max-age=0</span><br><span class="line">    Connection:keep-alive</span><br><span class="line">    Cookie:JSESSIONID=210075B5E521CWE3CDE938076295A57A</span><br><span class="line">    Host:localhost:8080</span><br><span class="line">    Upgrade-Insecure-Requests:1</span><br><span class="line">    User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93</span><br></pre></td></tr></table></figure></li>
<li><p>Controller中的代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span>	</span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="comment">// 限定请求头中的IP信息和端口信息。这里是只接收本机8080端口传来的请求</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;, headers=&quot;Host=localhost:8080&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-HiddenHttpMethodFilter"><a href="#2-HiddenHttpMethodFilter" class="headerlink" title="2 HiddenHttpMethodFilter"></a>2 HiddenHttpMethodFilter</h2><p><strong>作用：</strong></p>
<ul>
<li>  由于 HTML 页面的 form 表单只支持 GET 和 POST 请求，并不支持 DELETE、PUT 等提交方式。所以 Spring 在 3.0 版本新增了一个过滤器，这个过滤器的作用就是拦截浏览器的 GET 和 POST 请求，并将请求方式修改写为服务器指定的请求方式（如 Delete、Put 等）后再发送给我们的处理器 Controller。</li>
<li>  <strong>HiddenHttpMethodFilter</strong>：隐藏 HTTP 请求方式的过滤器，就是通过过滤器，将 GET/POST 请求转换为 PUT、DELETE 等请求方式。</li>
</ul>
<hr>
<h2 id="3-RequestHeader"><a href="#3-RequestHeader" class="headerlink" title="3 @RequestHeader"></a>3 @RequestHeader</h2><h3 id="3-1-使用说明"><a href="#3-1-使用说明" class="headerlink" title="3.1 使用说明"></a>3.1 使用说明</h3><ul>
<li>  <strong>作用</strong>：用于获取请求消息中的请求头数据。</li>
<li><strong>属性</strong>：<ul>
<li>  <code>value</code>：提供请求头的 key 名称。</li>
</ul>
</li>
</ul>
<h3 id="3-2-使用示例"><a href="#3-2-使用示例" class="headerlink" title="3.2 使用示例"></a>3.2 使用示例</h3><ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--RequestHeader注解测试--&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testRequestHeader&quot;</span>&gt;测试获取请求消息的请求头&lt;/a&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>控制器中的代码：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testRequestHeader&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@RequestHeader(value = &quot;User-Agent&quot;, required = false)</span> String userAgent)</span>&#123;</span><br><span class="line">        System.out.println(userAgent);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">		Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="4-CookieValue"><a href="#4-CookieValue" class="headerlink" title="4 @CookieValue"></a>4 @CookieValue</h2><h3 id="4-1-使用说明"><a href="#4-1-使用说明" class="headerlink" title="4.1 使用说明"></a>4.1 使用说明</h3><ul>
<li><p><strong>作用</strong>：客户端在首次访问服务器时，服务器会将一次会话间的共享数据以键值对的形式响应并保存在客户端，这就是 cookie 缓存。在本次会话中，客户端继续向服务器发送请求时，请求头中会携带 cookie 缓存的数据。</p>
<ul>
<li>  <code>@CookieValue</code> 注解的作用就是通过 key 获取 cookie 中的 value。</li>
</ul>
</li>
<li><p><strong>属性</strong>：</p>
<ul>
<li>  <code>value</code>：指定 cookie 的 key 的名称。</li>
<li>  <code>required</code>：是否必须有此 cookie。</li>
</ul>
</li>
</ul>
<h3 id="4-2-使用示例"><a href="#4-2-使用示例" class="headerlink" title="4.2 使用示例"></a>4.2 使用示例</h3><ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--CookieValue注解测试--%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testCookieValue&quot;</span>&gt;</span><br><span class="line">    获取指定键名称的Cookie的值</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;br&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testCookieValue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@CookieValue(value = &quot;JSESSIONID&quot;, required = false)</span> String cookieValue)</span>&#123;</span><br><span class="line">        System.out.println(cookieValue);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：6B73CA84FD25F96DA4FA530DC8481550</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-SessionAttribute"><a href="#5-SessionAttribute" class="headerlink" title="5 @SessionAttribute"></a>5 @SessionAttribute</h2><h3 id="5-1-使用说明"><a href="#5-1-使用说明" class="headerlink" title="5.1 使用说明"></a>5.1 使用说明</h3><ul>
<li><p>  <strong>作用</strong>：操作一个 Session 域中共享的数据</p>
</li>
<li><p><strong>属性</strong>：</p>
<ul>
<li>  <code>value</code>：用于指定存入 session 域的属性名称</li>
<li>  <code>type</code>：用于指定存入 session 域的数据类型</li>
</ul>
</li>
</ul>
<h3 id="5-2-使用示例"><a href="#5-2-使用示例" class="headerlink" title="5.2 使用示例"></a>5.2 使用示例</h3><ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;SessionAttribute注解测试&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testPut&quot;</span>&gt;将数据存入Session域中&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testGet&quot;</span>&gt;将数据从Session域中取出&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testClean&quot;</span>&gt;将数据从Session域中删除&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="meta">@SessionAttributes(value = &#123;&quot;username&quot;,&quot;password&quot;&#125;,types = &#123;Integer.class&#125;)</span>	<span class="comment">// 注解中的属性表示存入SessionAttribute中的第1、2个属性名为`username`和`password`，第3个属性的类型为Integer类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 把数据存入SessionAttribute中【即存入Session域中】</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model：Model 是 Spring 提供的一个接口，该接口有一个实现类 ExtendModelMap，该类继承了ModelMap</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testPut&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPut</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">// 将数据保存到SessionAttribute中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;泰斯特&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;age&quot;</span>,<span class="number">31</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;数据保存成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ModelMap 是 Model 接口的一个实现类，Model 接口中没有get方法，ModelMap 中有get方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testGet&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testGet</span><span class="params">(ModelMap model)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) model.get(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> (String) model.get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> (Integer) model.get(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        System.out.println(username+<span class="string">&quot;:&quot;</span>+password+<span class="string">&quot;:&quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 清除SessionAttribute中的全部缓存数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sessionStatus</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testClean&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testClean</span><span class="params">(SessionStatus sessionStatus)</span>&#123;</span><br><span class="line">        sessionStatus.setComplete();</span><br><span class="line">        System.out.println(<span class="string">&quot;格式化Session域成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="6-ResponseBody"><a href="#6-ResponseBody" class="headerlink" title="6 @ResponseBody"></a>6 @ResponseBody</h2><ul>
<li>见下一章 <code>@ResponseBody注解</code></li>
</ul>
<hr>
<h1 id="响应数据和结果视图"><a href="#响应数据和结果视图" class="headerlink" title="响应数据和结果视图"></a>响应数据和结果视图</h1><h2 id="1-返回值分类"><a href="#1-返回值分类" class="headerlink" title="1 返回值分类"></a>1 返回值分类</h2><h3 id="1-1-返回值为：字符串"><a href="#1-1-返回值为：字符串" class="headerlink" title="1.1 返回值为：字符串"></a>1.1 返回值为：字符串</h3><p>处理器（Controller）中方法的返回值如果是 String 类型：</p>
<ul>
<li>  可以返回逻辑视图名称，再通过 ViewResolver 视图解析器拼接为物理视图地址。</li>
<li>  可以直接返回 String 字符串字面量给客户端（+<code>@ResponseBody</code>注解即可实现）。</li>
</ul>
<p><strong>测试：</strong></p>
<ol>
<li><p>客户端：<code>index.jsp</code>页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;主页&lt;/h3&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/returnValue/testReturnString&quot;</span>&gt;testReturnString&lt;/a&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>服务器中的 Controller 模块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testReturnString&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testReturnString</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testReturnString方法执行了&quot;</span>);</span><br><span class="line">        <span class="comment">// 模拟从数据库查询数据</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;里番&quot;</span>);</span><br><span class="line">        user.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加到SessionAttribute域</span></span><br><span class="line">        model.addAttribute(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  Controller 方法返回值字符串指定逻辑视图为 <code>success</code>；经过 ViewResolver 解析后的物理视图地址为 <code>/WEB-INF/pages/success.jsp</code>，并将 jsp 页面经 View 渲染后响应给用户。</li>
</ul>
</li>
<li><p>跳转到的页面：<code>success.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;执行成功&lt;/h3&gt;</span><br><span class="line">    $&#123;user.name&#125;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    $&#123;user.gender&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="1-2-返回值为：void"><a href="#1-2-返回值为：void" class="headerlink" title="1.2 返回值为：void"></a>1.2 返回值为：void</h3><p>我们已经知道 Servlet 原生 API 可以作为控制器 Controller 中方法的参数。当返回值为 void 时，我们可以使用 <code>Request</code> 对象中的转发方法或 <code>Response</code> 对象中的重定向方法给用户响应结果视图。</p>
<ol>
<li><p>客户端：<code>index.jsp</code>页面</p>
<ul>
<li>同上</li>
</ul>
</li>
<li><p>服务器中的 Controller 模块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testReturnVoid&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testReturnVoid</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testReturnVoid方法执行了&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.使用Request对象转发到指定页面</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>).forward(request,response);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.使用Response对象重定向到指定页面【用户无法直接访问WEB-INF目录下的静态资源】</span></span><br><span class="line">        <span class="comment">// response.sendRedirect(&quot;/D02/index.jsp&quot;);		// 或</span></span><br><span class="line">        response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以通过Response对象直接在当前页面展示数据，并响应数据给用户浏览器</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;&lt;h3&gt;你好&lt;/h3&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	以上3种方式同时只能运行一种</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p>跳转到的页面：<code>success.jsp</code></p>
<ul>
<li>同上</li>
</ul>
</li>
</ol>
<hr>
<h3 id="1-3-返回值为：ModelAndView"><a href="#1-3-返回值为：ModelAndView" class="headerlink" title="1.3 返回值为：ModelAndView"></a>1.3 返回值为：ModelAndView</h3><p><code>ModelAndView</code> 是 SpringMVC 提供的一个内置类，该类的实例对象也可以当作控制器方法的返回值。</p>
<ol>
<li><p>客户端：<code>index.jsp</code>页面</p>
<ul>
<li>同上</li>
</ul>
</li>
<li><p>服务器中的Controller模块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testReturnModelAndView&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">testReturnModelAndView</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testReturnModelAndView方法被执行了&quot;</span>);</span><br><span class="line">        <span class="comment">// 创建ModelAndView对象</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">// 将数据添加到 mv 对象中</span></span><br><span class="line">        mv.addObject(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="comment">// 响应给客户端浏览器视图View的逻辑地址</span></span><br><span class="line">        mv.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>跳转到的页面：<code>success.jsp</code></p>
<ul>
<li>同上</li>
</ul>
</li>
</ol>
<hr>
<h2 id="2-转发和重定向"><a href="#2-转发和重定向" class="headerlink" title="2 转发和重定向"></a>2 转发和重定向</h2><h3 id="2-1-forward转发"><a href="#2-1-forward转发" class="headerlink" title="2.1 forward转发"></a>2.1 forward转发</h3><p>Controller 中的方法在将返回值设置为 String 类型时，默认就是请求转发。当然我们也可以显式声明：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testForward&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testForward</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testForward方法执行了&quot;</span>);</span><br><span class="line"><span class="comment">//        return &quot;success&quot;; // 默认方式</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/WEB-INF/pages/success.jsp&quot;</span>; <span class="comment">// 显式声明</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	需要注意的是：如果用了`forward`；则路径必须写成物理视图的地址，而不能写成逻辑视图名称。</span></span><br><span class="line"><span class="comment">	它相于：</span></span><br><span class="line"><span class="comment">&quot;request.getRequestDispatcher(&quot;/WEBINF/pages/success.jsp&quot;).forward(request,response);&quot;</span></span><br><span class="line"><span class="comment">	使用请求转发，既可以转发到jsp，也可以转发到控制器Controller中的其它方法。	</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意事项：</p>
<ol>
<li>如果使用 <code>forward</code> 关键字显式指定转发；则转发路径必须写成完整的视图地址，而不能写成逻辑视图名称。</li>
<li>使用请求转发，既可以转发到 jsp 页面，也可以转发到 Controller 中的其它方法。</li>
</ol>
</li>
</ul>
<hr>
<h3 id="2-2-Redirect重定向"><a href="#2-2-Redirect重定向" class="headerlink" title="2.2 Redirect重定向"></a>2.2 Redirect重定向</h3><p>Controller 控制器中的方法在将返回值设置为 String 类型时，默认就是请求转发，当然也可以手动将其设置为重定向。</p>
<p>Controller 控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testRedirect&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRedirect</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testRedirect方法执行了&quot;</span>);</span><br><span class="line"><span class="comment">//        return &quot;redirect:/index.jsp&quot;;   // 重定向到jsp页面中</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/returnValue/testForward&quot;</span>;	<span class="comment">// 重定向到Controller控制器中的其它方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 它相当于`response.sendRedirect(url)`。</span></span><br><span class="line"><span class="comment">	* 使用返回值关键字进行跳转时，可以不用添加工程路径，因为SpringMVC框架的底层实现已经帮我们添加过了</span></span><br><span class="line"><span class="comment">	* 需要注意的是：如果重定向到jsp页面，则jsp页面不能写在WEB-INF目录中。</span></span><br><span class="line"><span class="comment">    */</span></span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong></p>
<ul>
<li>  使用返回值关键字进行跳转时，可以不用添加工程路径，因为 SpringMVC 框架的底层实现已经帮我们添加过了。</li>
<li>  使用重定向，既可以转发到 jsp 页面中，也可以转发到任意 Controller 中的任意方法。</li>
<li>  如果重定向到 jsp 页面，则 jsp 页面不能写在 WEB-INF 目录中。</li>
</ul>
<hr>
<h2 id="3-ResponseBody注解"><a href="#3-ResponseBody注解" class="headerlink" title="3 @ResponseBody注解"></a>3 @ResponseBody注解</h2><p><strong>作用</strong>：该注解用于将 Controller 控制器中方法的响应信息（即方法的返回值数据），通过 HttpMessageConvert 接口转换为指定格式的数据（如：json字符串、xml字符串等），再添加到 HTTP 的响应消息 Response 中响应给客户端。</p>
<ul>
<li>  step1： JavaBean –&gt;&gt; json字符串</li>
<li>  step2： json字符串 –&gt;&gt; 客户端</li>
</ul>
<h3 id="3-1-使用示例"><a href="#3-1-使用示例" class="headerlink" title="3.1 使用示例"></a>3.1 使用示例</h3><h4 id="1、需求"><a href="#1、需求" class="headerlink" title="1、需求"></a>1、需求</h4><ul>
<li>客户端向服务器发送 Ajax 异步请求；</li>
<li>服务器执行业务逻辑</li>
<li>服务器使用 @ResponseBody 注解实现将 Controller 中方法的返回值转换为 json 字符串，并响应给客户端。</li>
</ul>
<h4 id="2、SpringMVC-配置访问资源白名单"><a href="#2、SpringMVC-配置访问资源白名单" class="headerlink" title="2、SpringMVC 配置访问资源白名单"></a>2、SpringMVC 配置访问资源白名单</h4><ul>
<li>  <code>&lt;mvc:resources&gt;</code> 标签</li>
<li>  功能：配置静态资源在服务器中的目录以及暴露给客户端访问的 URL</li>
<li>属性：<ul>
<li>  <code>location</code>：服务器 webapp 目录下的的资源路径。</li>
<li>  <code>mapping</code>：客户端访问静态资源时的请求 URL。</li>
</ul>
</li>
</ul>
<p><strong>配置访问资源白名单</strong></p>
<p><img src="/2020/08/28/SpringMVC/SpringMVC%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%AD%E5%BC%95%E5%85%A5%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.png"></p>
<ol>
<li><p>前端控制器 DispatcherServlet 拦截了所有访问服务器资源的请求 URL。</p>
</li>
<li><p>有时候，客户端的打开的请求页面(如 jsp 页面)使用了服务器上的静态资源(如 css/js/images等),以 JQuery 为例，如果请求页面是用 JQuery 写的，而 JQuery 依赖的类库又保存在服务器中的 webapp 目录下，这时我们就需要先拿到 JQuery 的类库，然后客户端浏览器才能看懂(解析)请求页面，才能在请求页面上完成后续操作。</p>
</li>
<li><p>所以我们需要设置一些目录白名单来跳过 DispatherServlet 的拦截，让其可以直接请求到服务器中的资源。</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在SpringMVC.xml文件中配置访问资源白名单--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置静态资源路径。</span></span><br><span class="line"><span class="comment">	location表示资源在webapp下的路径，mapping表示客户端的请求路径，**表示该目录下的文件以及子目录的文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/css/&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/css/**&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/**&quot;</span>/&gt;</span>	<span class="comment">&lt;!--工程路径下的js文件夹中的所有子文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/images/&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/images/**&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	配置完成后，需要在请求页面`index.jsp`中导入JQuery类库的URL(或者叫mapping地址)。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line">------------------------------index.jsp------------------------------------------------</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		导入JQuery依赖；</span></span><br><span class="line"><span class="comment">		src是SpringMVC.xml中&lt;mvc:resources&gt;标签中的的 `mapping`属性 </span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4、JSON-字符串与-JavaBean-的转换"><a href="#4、JSON-字符串与-JavaBean-的转换" class="headerlink" title="4、JSON 字符串与 JavaBean 的转换"></a>4、JSON 字符串与 JavaBean 的转换</h4><p>SpringMVC 默认使用 MappingJacksonHttpMessageConvert 接口实现 json 数据与 JavaBean 之间的转换。需要导入其具体实现工具 <code>jackson</code> 的 jar 包。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入以下3个依赖的目的是：让Spring后台自动将客户端传递的json字符串转换为JavaBean对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3、代码演示"><a href="#3、代码演示" class="headerlink" title="3、代码演示"></a>3、代码演示</h4><ol>
<li><p>使用 <code>index.jsp</code> 向服务器发送异步请求。</p>
<ul>
<li>  这里使用 JQuery 向服务器发送 Ajax 异步请求，所以必须导入 JQuery 类库。</li>
<li>  JQuery 是 JS 框架，其类库是静态资源，我们一般把它放在 <code>webapp/js/jquerymin.js</code> 目录下。</li>
</ul>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">        &lt;!--导入JQuery依赖--&gt;</span><br><span class="line">        &lt;script src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            <span class="comment">// 页面加载，绑定单击事件</span></span><br><span class="line">            <span class="comment">// 页面加载</span></span><br><span class="line">            $(function () &#123;</span><br><span class="line">                <span class="comment">// 绑定单击事件</span></span><br><span class="line">                $(<span class="string">&quot;#btn&quot;</span>).click(function () &#123;</span><br><span class="line">                    <span class="comment">//发送Ajax请求</span></span><br><span class="line">                    $.ajax(&#123;</span><br><span class="line">                        <span class="comment">// 编写json格式的请求</span></span><br><span class="line">                        url:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/testAjax&quot;</span>,</span><br><span class="line">                        contentType:<span class="string">&quot;application/json;charset=utf-8&quot;</span>,</span><br><span class="line">                        data:<span class="string">&#x27;&#123;&quot;name&quot;:&quot;派大星&quot;,&quot;gender&quot;=&quot;男&quot;,&quot;hobby&quot;=&quot;篮球&quot;&#125;&#x27;</span>,</span><br><span class="line">                        type:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">                        success:function (data) &#123;   <span class="comment">// 回调函数，data：服务器响应的json数据</span></span><br><span class="line">                            alert(data);</span><br><span class="line">                            alert(data.username);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;发送Ajax请求,响应json&quot;</span> id=<span class="string">&quot;btn&quot;</span>&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>控制器 Controller 接收用户的请求，并返回响应结果</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testAjax&quot;)</span></span><br><span class="line"><span class="comment">//    public void testAjax(@RequestBody String body)&#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> User <span class="title function_">testAjax</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        <span class="comment">// 客户端发送ajax的请求，传的是json字符串，@RequestBody把json字符串封装到user对象中</span></span><br><span class="line">        System.out.println(<span class="string">&quot;异步请求&quot;</span>+user);</span><br><span class="line">        user.setHobby(<span class="string">&quot;海绵宝宝&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  <strong>@RequestBody</strong>：负责接收客户端的请求数据的请求体(的字符串格式)</li>
<li>  <strong>@ResponseBody</strong> 注解：负责将控制器 Controller 中的方法的返回值结果转换为 JSON 格式响应给客户端。</li>
<li>  如果在 Maven 工程中引入 <code>Jackson</code> 相关的依赖，就可以自动完成 JSON 字符串和 JavaBean 对象的互相转换。</li>
</ul>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/08/25/MyBatis/" rel="prev" title="MyBatis">
                  <i class="fa fa-chevron-left"></i> MyBatis
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/09/07/%E9%80%9A%E7%94%A8Mapper%E7%9A%84%E8%AF%A6%E8%A7%A3/" rel="next" title="通用Mapper的详解">
                  通用Mapper的详解 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
