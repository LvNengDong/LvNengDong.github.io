<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="1    什么是JDBC Java Database Connectivity，Java数据库连接[规范]。 JDBC规范就是Java语言内置一套接口，包含了CRUD等方法，用来访问数据库应用程序。   1231、程序员通过JDBC接口操作对应数据库的实现类；[多态]---&gt;&gt;2、实现类完成调用数据库并返回结果的过程。      1.1.1    JDBC的作用 JDBC是一个接口，这">
<meta property="og:type" content="article">
<meta property="og:title" content="JDBC">
<meta property="og:url" content="http://example.com/2020/08/20/JDBC/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1    什么是JDBC Java Database Connectivity，Java数据库连接[规范]。 JDBC规范就是Java语言内置一套接口，包含了CRUD等方法，用来访问数据库应用程序。   1231、程序员通过JDBC接口操作对应数据库的实现类；[多态]---&gt;&gt;2、实现类完成调用数据库并返回结果的过程。      1.1.1    JDBC的作用 JDBC是一个接口，这">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/JDBC%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B1.png">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B2.png">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/JDBC%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/%E5%8F%8D%E5%B0%84%E4%B9%8B%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0.bmp">
<meta property="og:image" content="http://example.com/2020/08/20/JDBC/JDBC%E6%A0%B8%E5%BF%83.png">
<meta property="article:published_time" content="2020-08-20T01:44:29.000Z">
<meta property="article:modified_time" content="2020-10-30T13:55:44.000Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2020/08/20/JDBC/JDBC%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png">


<link rel="canonical" href="http://example.com/2020/08/20/JDBC/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2020/08/20/JDBC/","path":"2020/08/20/JDBC/","title":"JDBC"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>JDBC | Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFJDBC"><span class="nav-number">1.</span> <span class="nav-text">1    什么是JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-1-JDBC%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">1.0.1.</span> <span class="nav-text">1.1.1    JDBC的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-2-JDBC%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">1.0.2.</span> <span class="nav-text">1.1.2    JDBC的优势</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-JDBC%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.</span> <span class="nav-text">2    JDBC的实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-JDBC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-number">2.1.</span> <span class="nav-text">2.1    JDBC快速入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E5%90%84%E4%B8%AA%E5%AF%B9%E8%B1%A1%E8%AF%A6%E8%A7%A3"><span class="nav-number">2.2.</span> <span class="nav-text">2.2    各个对象详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A9%B1%E5%8A%A8%E7%AE%A1%E7%90%86%E7%B1%BB%E2%80%94%E2%80%94DriverManger"><span class="nav-number">2.2.1.</span> <span class="nav-text">1    驱动管理类——DriverManger</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1%E2%80%94%E2%80%94Connection"><span class="nav-number">2.2.2.</span> <span class="nav-text">2    数据库连接对象——Connection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%89%A7%E8%A1%8CSQL%E7%9A%84%E5%AF%B9%E8%B1%A1%E2%80%94%E2%80%94Statement"><span class="nav-number">2.2.3.</span> <span class="nav-text">3    执行SQL的对象——Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%BB%93%E6%9E%9C%E9%9B%86%E5%AF%B9%E8%B1%A1%E2%80%94%E2%80%94ResultSet"><span class="nav-number">2.2.4.</span> <span class="nav-text">4    结果集对象——ResultSet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%89%A7%E8%A1%8CSQL%E7%9A%84%E5%AF%B9%E8%B1%A12%E2%80%94%E2%80%94PreparedStatement"><span class="nav-number">2.2.5.</span> <span class="nav-text">5    执行SQL的对象2——PreparedStatement</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81SQL%E6%B3%A8%E5%85%A5"><span class="nav-number">2.2.5.1.</span> <span class="nav-text">1、SQL注入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81PreparedStatement"><span class="nav-number">2.2.5.2.</span> <span class="nav-text">2、PreparedStatement</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-JDBCUtils"><span class="nav-number">3.</span> <span class="nav-text">3    JDBCUtils</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-number">3.1.</span> <span class="nav-text">3.1    工具类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E6%8A%BD%E5%8F%96JDBC%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9AJDBCUtils"><span class="nav-number">3.2.</span> <span class="nav-text">3.2    抽取JDBC工具类：JDBCUtils</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1    步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-%E5%8F%8D%E5%B0%84%E4%B9%8B%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2    反射之读取配置文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-JDBC%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">4.</span> <span class="nav-text">4    JDBC事务操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">5.</span> <span class="nav-text">5    数据库连接池</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%A6%82%E8%BF%B0"><span class="nav-number">5.1.</span> <span class="nav-text">5.1    数据库连接池概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%8A%80%E6%9C%AF%E2%80%94%E2%80%94C3p0"><span class="nav-number">5.2.</span> <span class="nav-text">5.2    数据库连接池技术——C3p0</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%8A%80%E6%9C%AF%E2%80%94%E2%80%94Druid"><span class="nav-number">5.3.</span> <span class="nav-text">5.3    数据库连接池技术——Druid</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-Spring-JDBC"><span class="nav-number">5.4.</span> <span class="nav-text">5.4    Spring_JDBC</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">232</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">65</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/20/JDBC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="JDBC | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JDBC
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-20 09:44:29" itemprop="dateCreated datePublished" datetime="2020-08-20T09:44:29+08:00">2020-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-10-30 21:55:44" itemprop="dateModified" datetime="2020-10-30T21:55:44+08:00">2020-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="1-什么是JDBC"><a href="#1-什么是JDBC" class="headerlink" title="1    什么是JDBC"></a>1    什么是JDBC</h1><ol>
<li><code>Java Database Connectivity</code>，Java数据库连接[规范]。</li>
<li>JDBC规范就是Java语言内置一套接口，包含了CRUD等方法，用来访问数据库应用程序。</li>
</ol>
<p><img src="/2020/08/20/JDBC/JDBC%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、程序员通过JDBC接口操作对应数据库的实现类；[多态]</span><br><span class="line">---&gt;&gt;</span><br><span class="line"><span class="number">2</span>、实现类完成调用数据库并返回结果的过程。</span><br></pre></td></tr></table></figure>





<h3 id="1-1-1-JDBC的作用"><a href="#1-1-1-JDBC的作用" class="headerlink" title="1.1.1    JDBC的作用"></a>1.1.1    JDBC的作用</h3><ol>
<li>JDBC是一个<strong>接口</strong>，这个接口的作用是：<ul>
<li>定义了一套使用Java语言操作关系型数据的的规范；</li>
<li>但是这些规范的实现类不是存在于JDK中，而是由各大数据库厂商提供的；</li>
<li>所以使用JDBC操作数据库时，必须要导入各大数据库厂商提供的实现类。</li>
</ul>
</li>
</ol>
<h3 id="1-1-2-JDBC的优势"><a href="#1-1-2-JDBC的优势" class="headerlink" title="1.1.2    JDBC的优势"></a>1.1.2    JDBC的优势</h3><ol>
<li>开发人员可以通过一套固定的Java代码操作所有关系型数据库。</li>
</ol>
<hr>
<h1 id="2-JDBC的实现"><a href="#2-JDBC的实现" class="headerlink" title="2    JDBC的实现"></a>2    JDBC的实现</h1><h2 id="2-1-JDBC快速入门"><a href="#2-1-JDBC快速入门" class="headerlink" title="2.1    JDBC快速入门"></a>2.1    JDBC快速入门</h2><ol>
<li><p><strong>导入相关数据库的依赖jar包</strong>[实际上就是JDBC接口的实现类]</p>
<ul>
<li><p>JDBC只是一个数据库接口API，却没有具体的实现类。</p>
</li>
<li><p>具体的实现类由各大数据库厂商提供。如果要通过java操作数据库，必须要下载这些厂商对应的jar包并导入到IDE环境中。</p>
</li>
</ul>
</li>
</ol>
<p>   <img src="/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B1.png"></p>
<p>   <img src="/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B2.png"></p>
<ol start="2">
<li><p><strong>加载和注册驱动</strong></p>
<ul>
<li><p>原理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 通过导入具体数据库的驱动jar包，我们已经得到了数据库厂商编写的实现类的字节码文件;</span><br><span class="line"><span class="number">2.</span> 通过反射机制，将实现类的字节码文件加载进内存，得到字节码文件对应的`Class类对象`;</span><br><span class="line">	* 字节码文件整体及其中每个成员变量、成员方法、构造方法等都是一个独立的`Class类对象`。</span><br></pre></td></tr></table></figure></li>
<li><p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	格式：</span></span><br><span class="line"><span class="comment">		Class.forName(数据库驱动的实现类的全类名)</span></span><br><span class="line"><span class="comment">		通过&quot;全类名&quot;将字节码文件加载进内存，得到对应类的Class对象。</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">    	反射机制，将字节码文件加载进内存，获得字节码文件中的所有`Class类对象`。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>)	<span class="comment">// 加载和注册mysql数据库，获取Driver的Class类对象</span></span><br></pre></td></tr></table></figure></li>
<li><p>分析：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`Class.forName()`方法的原理和`import xxx`导包的原理相类似，不同的是:</span><br><span class="line">	1. import导入的是`.java`文件，得到的是类，在使用时要先根据类创建对象才能使用；</span><br><span class="line">	2. Class.forName()导入的是`.class`文件，得到的是 Class类对象 ，使用时要先根据Class类对象创建实例对象才能使用。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取数据库连接对象Connection</strong></p>
<ul>
<li><p><code>DriverManger</code>类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DriverManager</span>;</span><br><span class="line">	<span class="number">1.</span> 是Java内部提供的类</span><br><span class="line">	<span class="number">2.</span> 作用是管理 JDBC 驱动程序的基本服务。</span><br><span class="line"></span><br><span class="line">类中的静态方法：</span><br><span class="line">	<span class="number">1.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, String username, String password)</span>;</span><br><span class="line">	<span class="number">2.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, Properties info)</span>;</span><br><span class="line">	<span class="number">3.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url)</span>;</span><br><span class="line">	作用：建立与指定数据库的连接，返回一个连接对象。</span><br><span class="line">	参数：</span><br><span class="line">		* url：不同数据库的url是不同的，</span><br><span class="line">		  	   MySQL的是：jdbc:mysql:<span class="comment">//localhost:3306/demo[?参数名=参数值]</span></span><br><span class="line">		 	   格式：协议名:子协议:<span class="comment">//服务器名或IP地址:端口号/数据库名?参数=参数值</span></span><br><span class="line">		* username：登录MySQL的用户名</span><br><span class="line">		* password：登录MySQL的密码	</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取执行SQL语句的对象<code>Statement</code></strong></p>
<ul>
<li><p><code>Connection</code>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Connection</span>;</span><br><span class="line">	Connection接口，代表一个连接对象,具体的实现类由数据库厂商实现。</span><br><span class="line">        </span><br><span class="line">Connection接口中的方法：</span><br><span class="line">	Statement <span class="title function_">createStatement</span><span class="params">()</span>;	创建一个 Statement 对象用于将 SQL 语句发送到数据库。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>执行SQL语句，返回结果</strong>。</p>
<ul>
<li><p>使用<code>Statement</code>对象中的<code>executeXxx()方法</code>执行SQL语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Statement对象的作用：</span><br><span class="line">    * java中执行SQL语句的对象，用于发送SQL语句给数据库，并接收数据库返回的执行的结果。</span><br><span class="line">    </span><br><span class="line">Statement接口中的方法：</span><br><span class="line">    * <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql)</span>	</span><br><span class="line">    	用于发送DML语句，增删改的操作，insert、update、delete</span><br><span class="line">    	参数：String类型的SQL语句</span><br><span class="line">    	返回值：返回对数据库影响的行数</span><br><span class="line">    </span><br><span class="line">    * ResultSet <span class="title function_">executeQuery</span><span class="params">(String sql)</span></span><br><span class="line">    	用于发送DQL语句，查询的操作，select</span><br><span class="line">    	参数：SQL语句</span><br><span class="line">    	返回值：查询的结果集</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>释放资源</strong></p>
<ul>
<li>需要释放资源的对象：<code>ResultSet结果集</code>、<code>Statement语句对象</code>、<code>Connection连接对象</code></li>
<li>释放原则：栈式原则</li>
<li>释放资源的步骤放在哪个代码块中：finally代码块中。</li>
</ul>
</li>
<li><p><strong>流程图</strong>：</p>
<p><img src="/2020/08/20/JDBC/JDBC%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png"></p>
<ul>
<li><p><strong><code>Connection</code>：建立连接通道</strong></p>
</li>
<li><p><strong><code>Statement</code>：一个容器，携带SQL语句从Java发送给MySQL处理。</strong></p>
</li>
<li><p><strong><code>ResultSet</code>：一个容器，携带MySQL的处理结果返回给Java。</strong></p>
</li>
</ul>
</li>
<li><p><strong>快速入门</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.导入驱动jar包。</span></span><br><span class="line"><span class="comment">    2.加载和注册驱动</span></span><br><span class="line"><span class="comment">    3.获取数据库连接对象Connection</span></span><br><span class="line"><span class="comment">    4.获取执行sql语句的对象Statement</span></span><br><span class="line"><span class="comment">    5.执行sql并处理结果</span></span><br><span class="line"><span class="comment">    6.释放资源</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// 1. 导入驱动jar包</span></span><br><span class="line">        <span class="comment">// 2. 注册数据库驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. 获取数据库连接对象</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// 4. 获取执行sql语句的对象Statement</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update watertiger set name = &#x27;李四&#x27; where id = 36&quot;</span>;</span><br><span class="line">        <span class="comment">// 5.执行sql语句（java-&gt;mysql） 并 返回执行结果（mysql—&gt;java）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">executeUpdate</span> <span class="operator">=</span> statement.executeUpdate(sql);  </span><br><span class="line">        System.out.println(executeUpdate);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 释放资源</span></span><br><span class="line">        connection.close();</span><br><span class="line">        statement.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-2-各个对象详解"><a href="#2-2-各个对象详解" class="headerlink" title="2.2    各个对象详解"></a>2.2    各个对象详解</h2><h3 id="1-驱动管理类——DriverManger"><a href="#1-驱动管理类——DriverManger" class="headerlink" title="1    驱动管理类——DriverManger"></a>1    驱动管理类——DriverManger</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>注册驱动。</p>
<p><em>[静态代码块的特点：随着类的加载而执行，且只执行一次。]</em></p>
<p>利用反射机制，将<code>Driver</code>字节码文件加载进内存，此时会执行类中的静态代码块，即创建Driver实例对象并使用DriverManager类中的静态方法注册该驱动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 利用反射机制，将字节码文件加载进内存，获得Driver类的Class类对象</span></span><br><span class="line">  class.forName(com.mysql.jdbc.Driver)	<span class="comment">// 驱动jar包的com.mysql.jdbc目录中有一个Driver类.</span></span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">  <span class="comment">// 通过查看源码发现：在 com.mysql.jdbc.Driver 类中存在静态代码块</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Driver</span> <span class="keyword">extends</span> <span class="title class_">NonRegisteringDriver</span> <span class="keyword">implements</span> <span class="title class_">java</span>.sql.Driver &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Driver</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">static</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              DriverManager.registerDriver(<span class="keyword">new</span> <span class="title class_">Driver</span>());</span><br><span class="line">          &#125; <span class="keyword">catch</span> (SQLException var1) &#123;</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Can&#x27;t register driver!&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 注意：MySQL5.0+之后的驱动jar包可以省略注册驱动的过程。</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>DriverManager</code>类中的<strong>静态方法</strong>获取数据库连接对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, String user, String password)</span>;</span><br><span class="line"><span class="comment">/* 参数：</span></span><br><span class="line"><span class="comment">	url：指定连接的路径</span></span><br><span class="line"><span class="comment">		语法：jdbc:mysql://ip地址(域名):端口号/数据库名称</span></span><br><span class="line"><span class="comment">		例子：jdbc:mysql://localhset:3306/db1</span></span><br><span class="line"><span class="comment">		细节：如果连接的是本机的mysql服务器，并且默认服务器端口号是3306，</span></span><br><span class="line"><span class="comment">			 则url可简写为：jdbc:mysql://db1</span></span><br><span class="line"><span class="comment">	user：用户名</span></span><br><span class="line"><span class="comment">	password:密码</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="2-数据库连接对象——Connection"><a href="#2-数据库连接对象——Connection" class="headerlink" title="2    数据库连接对象——Connection"></a>2    数据库连接对象——Connection</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>获取执行SQL的对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：</span></span><br><span class="line">Statement <span class="title function_">createStatement</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 方法2：</span></span><br><span class="line">PreparedStatement <span class="title function_">createPreparedStatement</span><span class="params">(String sql)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>管理事务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.开启事务</span></span><br><span class="line">setAutoCommit(<span class="type">boolean</span> autoCommit);	<span class="comment">// 调用该方法设置参数为false，即可开启事务</span></span><br><span class="line"><span class="comment">// 2.提交事务</span></span><br><span class="line">commit();</span><br><span class="line"><span class="comment">// 3.回滚事务</span></span><br><span class="line">rollback();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="3-执行SQL的对象——Statement"><a href="#3-执行SQL的对象——Statement" class="headerlink" title="3    执行SQL的对象——Statement"></a>3    执行SQL的对象——Statement</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>执行SQL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.可以执行任意SQL语句(了解)</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">execute</span><span class="params">(String sql)</span>;	 </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.执行DML(insert、delete、update)语句，DDL(create、drop、alter)语句</span></span><br><span class="line"><span class="comment">// 返回值:影响的行数。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql)</span>;	 </span><br><span class="line">						  </span><br><span class="line"><span class="comment">// 3.执行DQL（select）语句</span></span><br><span class="line"><span class="comment">// 返回值：ResultSet结果集</span></span><br><span class="line">ResultSet <span class="title function_">executeQuery</span><span class="params">(String sql)</span>;	</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="4-结果集对象——ResultSet"><a href="#4-结果集对象——ResultSet" class="headerlink" title="4    结果集对象——ResultSet"></a>4    结果集对象——ResultSet</h3><ul>
<li><p>功能：封装查询结果</p>
<ol>
<li><p>ResultSet对象中的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ResultSet结果集对象的结构是一个虚拟表，可以是多行多列的，如果要得到其中某行某列的数据还需要逐行读取。</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 1.游标向下移动一行，判断当前行是否是最后一行末尾（是否有数据），如果是返回false，如果不是返回true。</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.获取数据</span></span><br><span class="line">xxx <span class="title function_">getXxx</span><span class="params">(参数)</span>;</span><br><span class="line">	返回值类型：</span><br><span class="line">        Xxx代表查询结果的返回值类型。	如： <span class="type">int</span> <span class="title function_">getInt</span><span class="params">()</span>;	String <span class="title function_">getString</span><span class="params">()</span></span><br><span class="line">     参数：</span><br><span class="line">        <span class="number">1.</span> <span class="type">int</span>: 代表列的编号,从<span class="number">1</span>开始。表示按照列的编号查询数据。	如： getString(<span class="number">1</span>);</span><br><span class="line">        <span class="number">2.</span> String: 代表列的名称。表示按照列的名称查询数据。	如： getDouble(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">	</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用步骤：</span></span><br><span class="line"><span class="comment">	  1.游标向下移动一行，并判断是否有数据</span></span><br><span class="line"><span class="comment">	  2.如果有，获取数据；</span></span><br><span class="line"><span class="comment">	  	如果没有，结束。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="5-执行SQL的对象2——PreparedStatement"><a href="#5-执行SQL的对象2——PreparedStatement" class="headerlink" title="5    执行SQL的对象2——PreparedStatement"></a>5    执行SQL的对象2——PreparedStatement</h3><h4 id="1、SQL注入"><a href="#1、SQL注入" class="headerlink" title="1、SQL注入"></a>1、SQL注入</h4><ul>
<li><p>在拼接SQL时，有一些特殊的关键字参与字符串的拼接，会造成安全性问题。</p>
</li>
<li><p>如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在用户登录案例中：</span><br><span class="line">    用户名和密码随便输入xxx，只要在最后的输入位置加上：	<span class="keyword">or</span> <span class="string">&#x27;a&#x27;</span><span class="operator">=</span>a;</span><br><span class="line"></span><br><span class="line">那么整个<span class="keyword">sql</span>语句就变成了：</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">and</span> password<span class="operator">=</span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;a&#x27;</span><span class="operator">=</span>a</span><br><span class="line">	即使前面的账户名和密码错误，但是整个<span class="keyword">sql</span>语句传入到mysql后再执行，所以必定能得到<span class="keyword">sql</span>数据库，返回值也为<span class="literal">true</span>，可以正常登录，这显然是不安全的</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2、PreparedStatement"><a href="#2、PreparedStatement" class="headerlink" title="2、PreparedStatement"></a>2、PreparedStatement</h4><ul>
<li>使用<code>PreparedStatement</code>对象执行SQL语句可以解决SQL注入问题；</li>
<li>因为<code>PreparedStatement</code>执行的是预编译的SQL语句，使用<code>?</code>作为参数的占位符；</li>
<li>这时传递的SQL语句的结构是确定的，只能填充占位符上的空值，而不能修改SQL语句的整体结构。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">步骤:</span><br><span class="line">	<span class="number">1.</span>导入驱动jar包</span><br><span class="line">	<span class="number">2.</span>注册驱动</span><br><span class="line">	<span class="number">3.</span>获取数据库连接对象Connection</span><br><span class="line">	<span class="number">4.</span>定义SQL语句：使用？作为占位符。		如： select * from user where name=? and password=?；</span><br><span class="line">	<span class="number">5.</span>获取SQL执行语句对象PreparedStatement。</span><br><span class="line">		connection.PreparedStatement(String sql)	<span class="comment">// 该对象需要直接把SQL语句作为参数传递进去</span></span><br><span class="line">  	<span class="number">6.</span>给占位符？赋值</span><br><span class="line">  	  方法：</span><br><span class="line">  		setXxx(参数<span class="number">1</span>，参数<span class="number">2</span>)</span><br><span class="line">  		  * 参数<span class="number">1</span>：？的位置序号，从<span class="number">1</span>开始【第几个？】</span><br><span class="line">  		  * 参数<span class="number">2</span>：？的值</span><br><span class="line">  	<span class="number">7.</span>执行sql语句</span><br><span class="line">  	<span class="number">8.</span>处理结果</span><br><span class="line">  	<span class="number">9.</span>释放资源</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-JDBCUtils"><a href="#3-JDBCUtils" class="headerlink" title="3    JDBCUtils"></a>3    JDBCUtils</h1><h2 id="3-1-工具类"><a href="#3-1-工具类" class="headerlink" title="3.1    工具类"></a>3.1    工具类</h2><ul>
<li><p>什么时候自己创建工具类？</p>
</li>
<li><p>如果一个功能经常用到，那么我们建议把这个功能做成一个工具类，可以在不同的地方重用。</p>
</li>
<li><p>目的：简化书写</p>
<ul>
<li>根据之前学过的知识，通过Java操作数据库时，每创建一个类都要注册驱动、获取连接对象、获取执行SQL语句的对象、释放资源等。这些代码在不同的类中大体上都是相同的。所以JDBCUtils的作用就是把这些相同的代码抽取出来封装到一个静态的类JDBCUtils中，这样我们就可以通过JDBCUtils完成驱动注册、资源释放等操作，简化了代码的书写。</li>
</ul>
</li>
</ul>
<h2 id="3-2-抽取JDBC工具类：JDBCUtils"><a href="#3-2-抽取JDBC工具类：JDBCUtils" class="headerlink" title="3.2    抽取JDBC工具类：JDBCUtils"></a>3.2    抽取JDBC工具类：JDBCUtils</h2><ul>
<li>抽取JDBC工具类：JDBCUtils</li>
</ul>
<h3 id="3-2-1-步骤"><a href="#3-2-1-步骤" class="headerlink" title="3.2.1    步骤"></a>3.2.1    步骤</h3><ol>
<li><p>注册驱动的代码：每个类都要使用，可以抽取。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>获取连接对象的代码：每个类都要使用，可以抽取。</p>
<ul>
<li>把登录数据库，以及注册驱动的代码放到配置文件<code>jdbc.properties</code>中。如果要连接的数据库发生改变，或者使用了不同厂商的数据库，那么我们直接修改配置文件即可。JDBCUtils类内的代码完全不用改变</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	需求：1.不想传递参数，</span></span><br><span class="line"><span class="comment">		 2.还要保证代码的耦合性低。</span></span><br><span class="line"><span class="comment">	解决：使用配置文件</span></span><br><span class="line"><span class="comment">		jdbc.properties</span></span><br><span class="line"><span class="comment">			url=jdbc:mysql://localhost:3306/db1</span></span><br><span class="line"><span class="comment">			uesr=root</span></span><br><span class="line"><span class="comment">			password=root</span></span><br><span class="line"><span class="comment">			driver=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  </span><br><span class="line">-------------------------------------------------------------------------------------------------</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用配置文件需要把配置文件中的数据加载到内存中供JDBCUtils工具类使用：</span></span><br><span class="line"><span class="comment">		获取src目录下文件路径的方法：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">JDBCUtils.class.getClassLoader().getResource(<span class="string">&quot;jdbc.properties&quot;</span>).getPath();</span><br><span class="line">properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 	</span></span><br><span class="line"><span class="comment">	1. JDBCUtils.class;	根据类名获取Class类对象[将字节码文件加载进内存，返回Class类对象]</span></span><br><span class="line"><span class="comment">	2. getClassLoader();	返回该类的类加载器</span></span><br><span class="line"><span class="comment">	3. getResource(&quot;jdbc.properties&quot;);	根据完整的文件名获取资源的URL</span></span><br><span class="line"><span class="comment">	4. getPath();	根据URL获取路径的字符串形式</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
<li><p>释放资源的代码：每个类都要使用，可以抽取。</p>
<ul>
<li>释放资源的代码需要重载2个，因为<ul>
<li>DQL语句返回一个ResultSet集合，需要释放</li>
<li>而其他语句的返回值是int类型的，不需要释放。</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 下面4个参数声明为全局变量，为了防止try...catch之外的代码访问不到</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 注册驱动不是每个类中都必须使用的，所以可以放入静态代码块中，在需要时再修改</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.创建Properties集合类,准备接收 jdbc.properties 配置文件的数据</span></span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            <span class="comment">// 2.获取src路径下的文件的方式：ClassLoader【类加载器】</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> JDBCUtils.class.getClassLoader().getResource(<span class="string">&quot;jdbc.properties&quot;</span>).getPath();</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line">            <span class="comment">// 3.获取properties对象中的数据【properties对象中存的就是properties配置文件的数据】</span></span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="comment">// 4.注册驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,user,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Statement statement, Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源（重载方法）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultSet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(ResultSet resultSet, Statement statement, Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-2-2-反射之读取配置文件"><a href="#3-2-2-反射之读取配置文件" class="headerlink" title="3.2.2    反射之读取配置文件"></a>3.2.2    反射之读取配置文件</h3><p><img src="/2020/08/20/JDBC/%E5%8F%8D%E5%B0%84%E4%B9%8B%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png"></p>
<ol>
<li><p>需求：</p>
<ul>
<li>读取配置文件中的配置信息到当前类中。</li>
</ul>
</li>
<li><p>分析：</p>
<ul>
<li>每个类对应有一个Class类对象；</li>
<li>每个Class类对象对应有一个ClassLoader类加载器；</li>
<li>类加载器中有一个读取本地文件转化为输入流的方法；</li>
<li>然后原路返回，当前类A即可获得配置文件信息的输入流格式。</li>
</ul>
</li>
<li><p>步骤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">    </span><br><span class="line">    Class&lt;A&gt; aClass = A.class;</span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">acl</span> <span class="operator">=</span>aClass.getClassLoader();</span><br><span class="line">    <span class="type">inputStream</span> <span class="variable">in</span> <span class="operator">=</span>acl.getResourceAsStream(xxx.properties);</span><br><span class="line">    <span class="comment">// 创建Properties对象,用于接收 jdbc.properties 配置文件的字节输入流数据</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    properties.load(in);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="4-JDBC事务操作"><a href="#4-JDBC事务操作" class="headerlink" title="4    JDBC事务操作"></a>4    JDBC事务操作</h1><hr>
<ol>
<li><p>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这多个步骤要么同时成功，要么同时失败。</p>
</li>
<li><p>操作：</p>
<ul>
<li>开启事务</li>
<li>提交事务</li>
<li>回滚事务</li>
</ul>
</li>
<li><p>使用Connection对象来管理事务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.开启事务</span></span><br><span class="line">setAutoCommit(<span class="type">boolean</span> atuoCommit)  <span class="comment">// 调用该方法时设置参数为false，即为开启事务【在执行SQL之前开启事务】</span></span><br><span class="line"><span class="comment">// 2.提交事务</span></span><br><span class="line">commit()	<span class="comment">// 当所有sql都执行完之后提交事务</span></span><br><span class="line"><span class="comment">// 3.回滚事务</span></span><br><span class="line">rollback()	<span class="comment">// 在try...catch的catch代码块中回滚事务。             </span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="5-数据库连接池"><a href="#5-数据库连接池" class="headerlink" title="5    数据库连接池"></a>5    数据库连接池</h1><h2 id="5-1-数据库连接池概述"><a href="#5-1-数据库连接池概述" class="headerlink" title="5.1    数据库连接池概述"></a>5.1    数据库连接池概述</h2><hr>
<ol>
<li><p>概念：本质上就是一个容器（集合），存放数据库连接对象的容器。</p>
<ul>
<li>当系统初始化好之后，数据库连接池就会被创建，这个容器会申请一些连接对象，当用户访问数据库时，可以从数据库连接池中获取连接对象，当用户访问完数据库之后，会把连接对象归还给数据库连接池。</li>
</ul>
</li>
<li><p>优点：</p>
<ul>
<li><p>节约资源</p>
</li>
<li><p>访问高效。</p>
<p><img src="/2020/08/20/JDBC/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0.bmp"></p>
</li>
</ul>
</li>
<li><p>不使用数据库连接池的情况：</p>
<ul>
<li>每次访问数据库都需要创建一个新的数据库连接对象，这个对象在访问结束后就被释放了。</li>
</ul>
</li>
<li><p>使用数据库连接池的情况：</p>
<ul>
<li>程序初始化完成后就会创建一个数据库连接池，客户端访问数据库时无需创建<code>Connection</code>，直接从数据库连接池中拿出一个<code>Connection</code>对象使用即可。使用完毕后也不用释放资源，只需要把<code>Connection</code>对象归还即可。</li>
<li>实现了数据库连接对象的复用。</li>
</ul>
</li>
<li><p>实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">javax.sql.DataSource</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataSource</span>;		<span class="comment">// [接口,JDK中定义的规范]</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 方法</span><br><span class="line">    * getConnection()		<span class="comment">// 获取连接对象;</span></span><br><span class="line">    * connection.close()	<span class="comment">// 归还连接对象;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果连接对象Connection是从数据库连接池中获取的，那么调用<code>Connection.close()</code>方法就不是释放资源了，而是归还数据连接对象。</p>
</li>
<li><p>一般情况下，我们不去实现这个接口，而是交给数据库厂商来实现，我们只需要使用它们提供的jar包即可：</p>
<ol>
<li><code>C3p0</code>：数据库连接池实现技术</li>
<li><code>Druid</code>：数据库连接池实现技术，由阿里巴巴提供的。</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="5-2-数据库连接池技术——C3p0"><a href="#5-2-数据库连接池技术——C3p0" class="headerlink" title="5.2    数据库连接池技术——C3p0"></a>5.2    数据库连接池技术——C3p0</h2><ol>
<li><p>使用步骤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 导入jar包(<span class="number">2</span>个).	 </span><br><span class="line">    * c3p0-<span class="number">0.9</span><span class="number">.5</span><span class="number">.2</span>.jar；	</span><br><span class="line">    * mchange-commons-java-<span class="number">0.2</span><span class="number">.12</span>.jar</span><br><span class="line">    * 不要忘记导入数据库驱动jar包</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span> 定义配置文件：</span><br><span class="line">    * 名称:c3p0.properties	或者	  c3p0-config.xml</span><br><span class="line">        * 路径：直接将文件放在src目录下即可。</span><br><span class="line">        * 配置文件名称是写死的，因为程序默认自动扫描src目录下的c3p0.properties或者c3p0-config.xml文件</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 创建数据库连接池对象：</span><br><span class="line">    * <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>()</span><br><span class="line">        </span><br><span class="line"><span class="number">4.</span>获取数据库连接对象：</span><br><span class="line">    * getConnection()</span><br></pre></td></tr></table></figure></li>
<li><p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建数据库连接池对象</span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line"><span class="comment">// 获取数据库连接对象</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> ds.getConnection();</span><br></pre></td></tr></table></figure></li>
<li><p>配置文件</p>
<ul>
<li><code>c3p0-config.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用默认的配置读取连接池对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  连接参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/db1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池参数 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池初始化数据连接对象个数  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池最大数据连接对象个数  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 创建数据库连接池对象的超时响应时间  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>3000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--创建多个DataBase--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;otherc3p0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  连接参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/db2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 连接池参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-3-数据库连接池技术——Druid"><a href="#5-3-数据库连接池技术——Druid" class="headerlink" title="5.3    数据库连接池技术——Druid"></a>5.3    数据库连接池技术——Druid</h2><ol>
<li><p><strong>使用步骤</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入jar包</span><br><span class="line">	* druid-<span class="number">1.0</span><span class="number">.9</span>.jar</span><br><span class="line">    * 数据库驱动jar包</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>定义配置文件</span><br><span class="line">	* 文件格式：Xxx.properties</span><br><span class="line">	* 可以任意命名，可以放在任意目录下。【最终通过字节码文件找到其绝对路径】</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span>加载配置文件。</span><br><span class="line">    </span><br><span class="line"><span class="number">4.</span>获取数据库连接池对象</span><br><span class="line">	* 通过工厂来获取：DruidDataSourceFactory</span><br><span class="line">    </span><br><span class="line"><span class="number">5.</span>获取数据库连接对象</span><br><span class="line">	* getConnection()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><strong>代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.加载配置文件</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">pro</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span>DruidDemo.class.getClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br><span class="line">pro.load(is);	<span class="comment">// load()方法中的参数是字符输入流或字节输入流</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.获取数据库连接池对象</span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line"><span class="comment">// 5.获取数据库连接对象</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> ds.getConnection();</span><br></pre></td></tr></table></figure></li>
<li><p><strong>配置文件</strong></p>
<ul>
<li><code>druid.properties</code></li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/db1</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">3000</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>定义工具类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.定义一个类JDBCUtils</span></span><br><span class="line"><span class="comment">	2.提供静态代码块加载配置文件，初始化连接池对象</span></span><br><span class="line"><span class="comment">	3.提供方法：</span></span><br><span class="line"><span class="comment">		* 获取连接方法</span></span><br><span class="line"><span class="comment">		* 释放资源</span></span><br><span class="line"><span class="comment">		* 获取连接池方法</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-4-Spring-JDBC"><a href="#5-4-Spring-JDBC" class="headerlink" title="5.4    Spring_JDBC"></a>5.4    Spring_JDBC</h2><hr>
<ol>
<li><p>Spring框架对JDBC做了简单的封装。提供了一个<code>JDBCTemplate</code>对象简化JDBC的开发。</p>
</li>
<li><p>使用步骤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入jar包</span><br><span class="line"><span class="number">2.</span>创建JDBCTemplate对象。依赖于数据源（数据库连接池）DataSource。[所以仍需要c3p0或druid数据库连接池]</span><br><span class="line">	* <span class="type">JdbcTemplate</span> <span class="variable">jt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(DataSource ds);</span><br><span class="line"><span class="number">3.</span>调用JDBCTemplate对象中的方法来完成CRUD。</span><br><span class="line">	* update()	</span><br><span class="line">		+ 执行DML语句，增删改语句</span><br><span class="line">	* queryForMap()	</span><br><span class="line">		+ 将查询的结果集封装为Map集合，用列名作为key，值作为Value，将这条记录封装为一个Map集合。</span><br><span class="line">		  注意：这个方法查询的结果集长度只能为<span class="number">1.</span></span><br><span class="line">	* queryForList()	</span><br><span class="line">		+ 将查询的结果集封装为List集合。</span><br><span class="line">		  注意：本质上是先将每一条记录封装为一个Map集合，在将多个Map集合装载到List集合中</span><br><span class="line">	</span><br><span class="line">	* query()</span><br><span class="line">		+ 将查询结果封装为javaBean对象</span><br><span class="line">		+ query的参数<span class="number">2</span>：RowMapper</span><br><span class="line">		  - 一般我们使用BeanPropertyRowMapper实现类。可以完成JavaBean的自动封装。</span><br><span class="line">		  - <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;类型&gt;(类型.class)</span><br><span class="line">		  </span><br><span class="line">	* queryForObject(sql,*.class)		【*代表查询结果的数据类型】</span><br><span class="line">		+ 将查询结果封装为对象</span><br><span class="line">		+ 一般用于聚合函数的查询</span><br></pre></td></tr></table></figure></li>
<li><p>分析：</p>
<p><img src="/2020/08/20/JDBC/JDBC%E6%A0%B8%E5%BF%83.png"></p>
<ul>
<li>JDBC的核心就是<code>Connection</code>连接对象，<code>Connection</code>对象可以自己创建，也可以从数据库连接池中获取。</li>
<li><code>JdbcTemplate</code>对象：<ol>
<li><code>JdbcTemplate</code>首先从<code>DataSource</code>中获取<code>Connection</code>连接对象；</li>
<li>然后，在<code>JdbcTemplate</code>中集成了<code>JDBC</code>中原本使用<code>Connection、PreparedStatement、ResultSet</code>对象；</li>
<li>并对具体的步骤做了封装，让我们可以只关心SQL语句，而不用关心JDBC的具体执行步骤；</li>
<li>可以使用<code>JdbcTemplate</code>对象中的简单的方法完成对数据库的CRUD操作。</li>
</ol>
</li>
</ul>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/08/19/Servlet/" rel="prev" title="Servlet">
                  <i class="fa fa-chevron-left"></i> Servlet
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/08/20/%E5%8F%8D%E5%B0%84/" rel="next" title="反射">
                  反射 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
