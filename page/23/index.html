<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/23/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/23/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/23/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">235</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">69</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/15/SpringMVC%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E5%A4%84%E7%90%86HTTP%E5%93%8D%E5%BA%94%E7%9A%84%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/15/SpringMVC%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E5%A4%84%E7%90%86HTTP%E5%93%8D%E5%BA%94%E7%9A%84%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">SpringMVC中常见的处理HTTP响应的方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-15 09:32:31" itemprop="dateCreated datePublished" datetime="2020-09-15T09:32:31+08:00">2020-09-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-04-15 23:59:45" itemprop="dateModified" datetime="2021-04-15T23:59:45+08:00">2021-04-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/SpringMVC/" itemprop="url" rel="index"><span itemprop="name">SpringMVC</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Spring中处理Http响应的方式有多种，主要有以下几种：</p>
<blockquote>
<ul>
<li>ResponseEntity：表示一个完整的Http响应消息。包括：状态码、响应头和响应体。因此，我们可以用使用它来完全配置Http响应。</li>
<li>@ResponseBody：返回json格式的结果。</li>
<li>@ResponseStatus：返回状态码。</li>
</ul>
</blockquote>
<hr>
<h1 id="1-使用ResponseEntity处理Http响应"><a href="#1-使用ResponseEntity处理Http响应" class="headerlink" title="1    使用ResponseEntity处理Http响应"></a>1    使用ResponseEntity处理Http响应</h1><blockquote>
<ul>
<li><p><code>ResponseEntity</code>表示一个完整的Http响应消息，包括了：</p>
<ol>
<li>状态码（HttpStatus）</li>
<li>头部信息（HttpHeaders）</li>
<li>响应体内容，</li>
</ol>
<p>因此我们可以使用该对象配置Http响应消息中的任一部分的内容。</p>
</li>
<li><p><code>ResponseEntity</code>必须放在返回值的位置处使用。</p>
</li>
<li><p><code>ResponseEntity</code>是一种泛型类型，因此我们可以使用任意类型作为响应体。</p>
</li>
</ul>
</blockquote>
<ol>
<li><p><strong>设置响应体和响应状态码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">ResponseEntity&lt;String&gt; <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(<span class="string">&quot;Hello World!&quot;</span>, HttpStatus.OK);		<span class="comment">// 响应体|响应状态码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这里设置字符串&quot;Hello World&quot;作为字符串返回给请求客户端</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果响应体是一个对象，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">ResponseEntity&lt;String&gt; <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">User</span>(), HttpStatus.OK);		<span class="comment">// 响应体|响应状态码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>则返回的是json字符串。</p>
</li>
</ul>
</li>
<li><p><strong>设置响应头信息</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/customHeader&quot;)</span></span><br><span class="line">ResponseEntity&lt;String&gt; <span class="title function_">customHeader</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 设置自定义响应头</span></span><br><span class="line">    <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">    headers.add(<span class="string">&quot;Custom-Header&quot;</span>, <span class="string">&quot;foo&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(</span><br><span class="line">      <span class="string">&quot;Custom header set&quot;</span>, headers, HttpStatus.OK);	<span class="comment">// 响应体|响应头信息|响应状态码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>另一种设置方式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/customHeader&quot;)</span></span><br><span class="line">ResponseEntity&lt;String&gt; <span class="title function_">customHeader</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity</span><br><span class="line">        .ok()</span><br><span class="line">        .header(<span class="string">&quot;Custom-Header&quot;</span>, <span class="string">&quot;foo&quot;</span>)</span><br><span class="line">        .body(<span class="string">&quot;Custom header set&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 该方法的效果与上面方法相同，但是使用的是ResponseEntity中的静态方法。</span></span><br></pre></td></tr></table></figure></li>
<li><p>ResponseEntity类有多个构造函数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、ResponseEntity(HttpStatus)</span><br><span class="line"><span class="number">2</span>、ResponseEntity(T, HttpStatus)</span><br><span class="line"><span class="number">3</span>、ResponseEntity(MultiValueMap&lt;String, String&gt;, HttpStatus)</span><br><span class="line"><span class="number">4</span>、ResponseEntity(T, MultiValueMap&lt;String, String&gt;, HttpStatus)</span><br><span class="line"><span class="number">5</span>、ResponseEntity(T, MultiValueMap&lt;String, String&gt;, Object)</span><br></pre></td></tr></table></figure></li>
<li><p>尽管ResponseEntity非常强大，但不应该过度使用。在一些简单的情况下，还有其他方法能满足我们的需求，使代码更整洁。</p>
</li>
</ol>
<hr>
<h1 id="2-ResponseBody"><a href="#2-ResponseBody" class="headerlink" title="2    @ResponseBody"></a>2    @ResponseBody</h1><blockquote>
<ul>
<li><p><code>@ResponseBody</code>注解的作用范围：方法上</p>
</li>
<li><p><code>@ResponseBody</code>注解的作用：将方法的返回值序列化为JSON字符串，并添加到Http响应消息的响应体中响应给客户端浏览器。</p>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="keyword">public</span> User <span class="title function_">postResponseController</span><span class="params">(<span class="meta">@RequestBody</span> LoginForm loginForm)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果在类上使用了<code>@RestController</code>注解，那我们就不需要使用<code>@ResponseBody</code>了。</p>
<p>因为<code>@RestController = @Controller + @ResponseBody</code>。</p>
</li>
</ul>
<hr>
<h1 id="3-ResponseStatus"><a href="#3-ResponseStatus" class="headerlink" title="3    @ResponseStatus"></a>3    @ResponseStatus</h1><blockquote>
<ul>
<li><code>@ResponseStatus</code>注解的作用范围：方法上</li>
<li><code>@ResponseStatus</code>注解的作用：将响应状态码序列化为字符串并添加到响应消息中响应给客户端。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XXXController</span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@ResponseStatus(HttpStatus.FOUND)</span></span><br><span class="line"> <span class="keyword">public</span> User <span class="title function_">postResponseController</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Thanks For Posting!!!&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="4-直接操控响应"><a href="#4-直接操控响应" class="headerlink" title="4    直接操控响应"></a>4    直接操控响应</h1><blockquote>
<p>Spring允许我们直接使用<code>javax.servlet.http.HttpServletResponse</code>对象，我们只需要将它声明为方法参数即可。</p>
<p>但不推荐使用。因为Spring在底层之上提供了抽象和附加功能，因此如果以这种方式直接操作响应，会失去很多Spring提供的封装好的方便的功能。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/manual&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">manual</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      response.setHeader(<span class="string">&quot;Custom-Header&quot;</span>, <span class="string">&quot;foo&quot;</span>);</span><br><span class="line">      response.setStatus(<span class="number">200</span>);</span><br><span class="line">      response.getWriter().println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<hr>
<h1 id="5-ResponseEntity，-ResponseBody，-ResponseStatus比较"><a href="#5-ResponseEntity，-ResponseBody，-ResponseStatus比较" class="headerlink" title="5    ResponseEntity，@ResponseBody，@ResponseStatus比较"></a>5    ResponseEntity，@ResponseBody，@ResponseStatus比较</h1><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">ResponseEntity</th>
<th align="center">@ResponseBody</th>
<th align="center">@ResponseStatus</th>
</tr>
</thead>
<tbody><tr>
<td align="center">本质</td>
<td align="center">对象</td>
<td align="center">注解</td>
<td align="center">注解</td>
</tr>
<tr>
<td align="center">作用范围</td>
<td align="center">作为方法的返回值</td>
<td align="center">作用在方法上</td>
<td align="center">作用在方法上</td>
</tr>
<tr>
<td align="center">含义</td>
<td align="center">表示整个响应消息</td>
<td align="center">表示响应消息中的响应体</td>
<td align="center">表示响应消息中的响应状态码</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/14/Java%E4%B8%ADComparable%E6%8E%A5%E5%8F%A3%E5%92%8CComparator%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/14/Java%E4%B8%ADComparable%E6%8E%A5%E5%8F%A3%E5%92%8CComparator%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">Java比较器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-14 21:51:56" itemprop="dateCreated datePublished" datetime="2020-09-14T21:51:56+08:00">2020-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-08-01 17:01:02" itemprop="dateModified" datetime="2021-08-01T17:01:02+08:00">2021-08-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Java-比较器的使用背景"><a href="#Java-比较器的使用背景" class="headerlink" title="Java 比较器的使用背景"></a>Java 比较器的使用背景</h1><ul>
<li>  Java 中的对象，正常情况下只能进行 <code>==</code> 或 <code>!=</code> 的比较，不能使用 <code>&gt;</code> 或 <code>&lt;</code> 进行比较。【因为对象是引用类型，默认比较的是两个对象的地址值，只存在相等或不等，而没有一个标准用来比较大小】。</li>
<li>  但是在开发场景中，我们有时需要对多个对象进行排序，言外之意，就需要比较对象的大小。</li>
<li>  如何实现？使用两个接口中的任何一个：<strong>Comparable</strong> 或 <strong>Comparator</strong></li>
</ul>
<hr>
<h1 id="Comparable-接口"><a href="#Comparable-接口" class="headerlink" title="Comparable 接口"></a>Comparable 接口</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Comparable接口的源代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Comparable</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(T o)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  <code>Comparable</code>被叫做<strong>内比较器</strong>，实现了该接口的类，必须重写接口中的<code>compareTo()</code>方法，并在方法中自定义比较的规则。</li>
<li>  也就是说，如果一个类实现了 <code>Comparable</code> 接口，由该类创建的一组子类实例对象，就可以根据自定义的规则对这些实例对象进行排序。</li>
</ul>
<blockquote>
<p>  <strong>比较规则：</strong></p>
</blockquote>
<p><code>compareTo()</code>方法的返回值是 int 类型，有3种情况：</p>
<p>​    1、<code>this对象 &gt; 方法参数对象</code>，返回正整数；<br>​    2、<code>this对象 = 方法参数对象</code>，返回 0；<br>​    3、<code>this对象 &lt; 方法参数对象</code>，返回正负整数；</p>
<h2 id="1-实现-Comparable-接口的原生类"><a href="#1-实现-Comparable-接口的原生类" class="headerlink" title="1    实现 Comparable 接口的原生类"></a>1    实现 Comparable 接口的原生类</h2><p>​        Java 中存在着一些原生的类，这些类在设计时就已经实现了<code>Comparable</code>接口，并重写了接口中的<code>compareTo()</code>方法。对于这些类可以直接调用它的<code>CompareTo()</code>方法进行比较。</p>
<p>如：</p>
<ul>
<li>  <strong>String</strong>、<strong>包装类</strong>等已经实现了<code>Comparable</code>接口，即重写了<code>compareTo(obj)</code>方法，给出了比较两个对象大小的方式。</li>
<li>  String、包装类重写 <code>compareTo()</code> 方法以后，进行了<strong>从小到大</strong>的排列。</li>
<li>  String、包装类等可以直接调用类中的<code>compareTo()</code>方法进行比较。</li>
</ul>
<blockquote>
<p>  <strong>String类</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span></span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>测试</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;A&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;Z&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a.compareTo(b);</span><br><span class="line">    System.out.println(result);     <span class="comment">// -25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<hr>
<h2 id="2-自定义类实现Comparable接口"><a href="#2-自定义类实现Comparable接口" class="headerlink" title="2    自定义类实现Comparable接口"></a>2    自定义类实现Comparable接口</h2><p>​        对于自定义类来说，如果需要对类的实例对象进行排序，我们可以让自定义类实现 <code>Comparable</code> 接口，重写 <code>compareTo(obj)</code>方法，在 <code>compareTo(obj)</code> 方法中自定义比较的规则，指明要如何排序。</p>
<blockquote>
<ol>
<li>实现 <code>Comparable</code> 接口，</li>
<li>重写接口中的<code>compareTo()</code>方法，。</li>
</ol>
</blockquote>
<h3 id="2-1-Demo"><a href="#2-1-Demo" class="headerlink" title="2.1    Demo"></a>2.1    Demo</h3><ol>
<li><p>定义一个<code>Student</code>类，实现<code>comparable</code>接口，重写<code>compareTo()</code>方法；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Object&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">// get/set方法</span></span><br><span class="line">    <span class="comment">// toString方法</span></span><br><span class="line">    <span class="comment">// &lt;init&gt;()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写compareTo方法，定义比较的规则</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Student)&#123;</span><br><span class="line">            <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) o;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.getAge() - student.getAge();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;传入的数据类型不一致！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 主方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">st1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">23</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">st2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">Student</span> <span class="variable">maxStu</span> <span class="operator">=</span> getMax(st1, st2);</span><br><span class="line">        System.out.println(maxStu);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 比较两个学生对象，根据规则选出较大的一个</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st1   学生1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st2   学生2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Student <span class="title function_">getMax</span><span class="params">(Student st1, Student st2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> st1.compareTo(st2);</span><br><span class="line">        <span class="keyword">if</span> (result&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> st1;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> st2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Comparator-接口"><a href="#Comparator-接口" class="headerlink" title="Comparator 接口"></a>Comparator 接口</h1><p><code>Comparator</code>接口又叫做<strong>外比较器</strong>，如果我们需要比较由某个类创建出来的<strong>两个</strong>实例对象的大小，并且这个类本身不支持比较（即没有实现<code>Comparable</code>接口），那么我们可以通过定义一个工具类作为“该类的<strong>比较器</strong>”，用于对这个类的实例对象进行比较。</p>
<p>这个<code>比较器</code>需要实现<code>Comparator</code>接口并重写接口中的<code>compare(T o1, T o2)</code>方法，然后就可以通过这个<code>比较器</code>对目标类的实例对象进行比较。</p>
<blockquote>
<p>  <strong>compare() 方法</strong></p>
</blockquote>
<p><code>int compare(T o1, T o2)</code> 方法，返回值是 <code>int</code> 类型，有 3 种情况：</p>
<ul>
<li>  <strong>o1 &gt; o2</strong>，返回正整数；</li>
<li>  <strong>o1 = o2</strong>，返回 0 ；</li>
<li>  <strong>o1 &lt; o2</strong>，返回负整数。</li>
</ul>
<blockquote>
<p>  <strong><code>Compartor</code> 接口的适用场景：</strong></p>
</blockquote>
<ol>
<li>同一类的实例对象之间不支持互相比较（即<strong>没有实现<code>Comparable</code>接口），但又想对两个对象进行比较。</strong></li>
<li>实例对象的类上实现了<code>Comparable</code>接口，但开发者认为<code>compareTo()</code>方法中的比较规则并不是自己想要的，又不想破坏原有结构，就可以使用<code>Comparable</code>接口。</li>
</ol>
<hr>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><ol>
<li><p>创建一个 Student 类（复用上文的 Student 类）</p>
</li>
<li><p>创建一个 <code>StudentComparator</code> 类，这是一个<strong>比较器类</strong>，用于定义比较规则；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="comment">// 1、实现Comparator&lt;T&gt;接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;Object&gt; &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2、重写compare()方法，定义比较规则</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (o1 <span class="keyword">instanceof</span> Student &amp;&amp; o2 <span class="keyword">instanceof</span> Student)&#123;</span><br><span class="line">            <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> (Student)o1;</span><br><span class="line">            <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> (Student)o2;</span><br><span class="line">            <span class="keyword">return</span> s1.getAge() - s2.getAge();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;输入的数据类型不一致&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 主方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">st1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">23</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">st2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">Student</span> <span class="variable">maxStu</span> <span class="operator">=</span> getMax(st1, st2);</span><br><span class="line">        System.out.println(maxStu);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 比较两个学生对象，根据规则选出较大的一个</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st1   学生1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> st2   学生2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Student <span class="title function_">getMax</span><span class="params">(Student st1, Student st2)</span>&#123;</span><br><span class="line">        <span class="type">StudentComparator</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentComparator</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sc.compare(st1, st2);</span><br><span class="line">        <span class="keyword">if</span> (result&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> st1;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> st2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h1><ul>
<li>  对于 <code>Comparable</code> 接口而言，需要待比较对象的类来实现这个接口。</li>
<li>  而对于<code>Comparator</code> 接口来说，待比较对象的类无需实现 <code>Comparator</code>接口，而是通过额外定义一个比较器来实现<code>Comparator</code>接口。</li>
<li>  实现 <code>Comparable</code> 接口的方式能保证 <code>Comparable</code> 接口的实现类的对象在随时随地都可以比较大小。</li>
<li>  <code>Comparator</code>接口属于临时性的比较。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/09/07/%E9%80%9A%E7%94%A8Mapper%E7%9A%84%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/07/%E9%80%9A%E7%94%A8Mapper%E7%9A%84%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">通用Mapper的详解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-07 10:35:42" itemprop="dateCreated datePublished" datetime="2020-09-07T10:35:42+08:00">2020-09-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-01-22 20:32:29" itemprop="dateModified" datetime="2021-01-22T20:32:29+08:00">2021-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MyBatis/" itemprop="url" rel="index"><span itemprop="name">MyBatis</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li>集成通用Mapper</li>
<li>对象关系映射</li>
<li>配置介绍</li>
<li>代码生成器</li>
<li>扩展通用接口</li>
<li>Example用法</li>
<li>其它配置和用法</li>
</ol>
<h1 id="1、集成通用Mapper"><a href="#1、集成通用Mapper" class="headerlink" title="1、集成通用Mapper"></a>1、集成通用Mapper</h1><h2 id="1-1-Java编码方式"><a href="#1-1-Java编码方式" class="headerlink" title="1.1    Java编码方式"></a>1.1    Java编码方式</h2><h2 id="1-2-和Spring集成"><a href="#1-2-和Spring集成" class="headerlink" title="1.2    和Spring集成"></a>1.2    和Spring集成</h2><h2 id="1-3-和SpringBoot集成"><a href="#1-3-和SpringBoot集成" class="headerlink" title="1.3    和SpringBoot集成"></a>1.3    和SpringBoot集成</h2><blockquote>
<p>和MyBatis一样，SpringBoot集成通用Mapper和的方式可分为2种：</p>
<ol>
<li><code>@Mapper</code>注解</li>
<li><code>@MapperScan</code>注解的手动配置</li>
</ol>
</blockquote>
<h3 id="1-3-1-Mapper"><a href="#1-3-1-Mapper" class="headerlink" title="1.3.1    @Mapper"></a>1.3.1    @Mapper</h3><blockquote>
<p><strong>如果没有使用<code>@MapperScan</code>注解，就必须在Mapper/Dao接口上添加<code>@Mapper</code>注解，否则Spring容器无法判断扫描装配哪些接口。</strong></p>
</blockquote>
<h3 id="1-3-2-MapperScan"><a href="#1-3-2-MapperScan" class="headerlink" title="1.3.2    @MapperScan"></a>1.3.2    @MapperScan</h3><blockquote>
<p><strong>或者可以在带有<code>@Configuration</code>的类上添加<code>@MapperScan</code>注解</strong>，或直接配置到SpringBoot的启动类上，如：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@tk</span>.mybatis.spring.annotation.MapperScan(basePackages = <span class="string">&quot;扫描包&quot;</span>)</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SampleMapperApplication</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br></pre></td></tr></table></figure>

<p><em>Tip：与SpringBoot整合MyBatis不同的是：通用Mapper使用<code>tk.mybatis.spring.annotation.MapperScan</code>包下的<code>@MapperScan</code>注解，MyBatis的<code>org.mybatis.spring.annotation.MapperScan</code>包下的<code>@MapperScan</code>注解。</em></p>
<h3 id="1-3-3-实现步骤"><a href="#1-3-3-实现步骤" class="headerlink" title="1.3.3    实现步骤"></a>1.3.3    实现步骤</h3><ol>
<li><p>创建项目，添加通用Mapper依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>版本号<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>@Mapper/@MapperScan</code>注解</p>
</li>
<li><p>如果需要覆盖通用Mapper的默认配置，可以在<code>application.yml</code>文件中进行。如：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mapper:</span></span><br><span class="line">  <span class="attr">mappers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tk.mybatis.mapper.common.Mapper</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tk.mybatis.mapper.common.Mapper2</span></span><br><span class="line">  <span class="attr">notEmpty:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="2、对象关系映射"><a href="#2、对象关系映射" class="headerlink" title="2、对象关系映射"></a>2、对象关系映射</h1><h2 id="2-1-简单入门"><a href="#2-1-简单入门" class="headerlink" title="2.1    简单入门"></a>2.1    简单入门</h2><ol>
<li><p>数据库表（MySQL）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `country` (</span><br><span class="line">    `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;主键&#x27;,</span><br><span class="line">    `countryname` varchar(255) DEFAULT NULL COMMENT &#x27;名称&#x27;,</span><br><span class="line">    `countrycode` varchar(255) DEFAULT NULL COMMENT &#x27;代码&#x27;,</span><br><span class="line">    PRIMARY KEY (`Id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=10011 DEFAULT CHARSET=utf8 COMMENT=&#x27;国家信息&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p>对应的Java实体类型如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Country</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String  countryname;</span><br><span class="line">    <span class="keyword">private</span> String  countrycode;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//省略 getter 和 setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最简单的情况下，数据库中的字段名和是JavaBean中的属性名是完全相同的，可以直接产生一一映射关系，只需要添加一个<code>@Id</code>注解标记当前属性为主键数据库中的主键字段即可。</p>
<blockquote>
<p><strong>Tip：如果实体类中没有一个标记为<code>@Id</code>的字段，当你使用带有<code>ByPrimaryKey</code>的方法时，所有的字段会作为联合主键来使用。</strong></p>
</blockquote>
</li>
<li><p>通用Mapper接口提供了大量已封装好的方法，我们自定义的Mapper接口只需要继承该接口就能调用这些方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	前提：该接口必须实现 @Mapper 或 @MapperScan  注解</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CountryMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;Country&gt; &#123;	<span class="comment">// 继承通用Mapper接口必须指定接口的泛型类型是与数据库表对应的实体类的类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通用Mapper接口中常见的方法：</p>
<ul>
<li><code>selectOne</code></li>
<li><code>select</code></li>
<li><code>selectAll</code></li>
<li><code>selectCount</code></li>
<li><code>selectByPrimaryKey</code></li>
<li><code>...</code></li>
</ul>
</blockquote>
</li>
<li><p>使用该接口的类对象调用接口中的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取 countryMapper 对象，并调用 selectAll 方法</span></span><br><span class="line">List&lt;Country&gt; countries = countryMapper.selectAll();</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据主键查询</span></span><br><span class="line"><span class="type">Country</span> <span class="variable">country</span> <span class="operator">=</span> countryMapper.selectByPrimaryKey(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者使用对象传参，适用于1个字段或者多个字段联合主键使用。通用Mapper的会把对象中的所有非空属性联合起来作为一个主键查询</span></span><br><span class="line"><span class="type">Country</span> <span class="variable">query</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Country</span>();</span><br><span class="line">query.setId(<span class="number">1</span>);</span><br><span class="line">country = countryMapper.selectByPrimaryKey(query);</span><br></pre></td></tr></table></figure></li>
<li><p>如果想要自定义操作数据库的方法，可以直接在<code>CountryMapper</code>中增加。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CountryMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;Country&gt; &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from country where countryname = #&#123;countryname&#125;&quot;)</span></span><br><span class="line">    Country <span class="title function_">selectByCountryName</span><span class="params">(String countryname)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-2-数据库映射"><a href="#2-2-数据库映射" class="headerlink" title="2.2    数据库映射"></a>2.2    数据库映射</h2><blockquote>
<p>在2.1中看到的是最简单的情况，实际使用过程中也不会更复杂，下面是更详细的映射配置。</p>
</blockquote>
<ul>
<li><p>通用Mapper中，默认情况下是将实体类字段按照<strong>驼峰转下划线</strong>的形式与数据库表中的列名进行映射。</p>
<p>如：实体类的<code>userName</code>可以映射到表的<code>user_name</code>上。</p>
<p>如果想要修改默认的转换方式，可以在后续的配置中，修改<code>style</code>全局配置；</p>
<p>也可以使用通用Mapper提供的一些注解进行修改。</p>
</li>
</ul>
<h3 id="2-2-1-NameStyle注解"><a href="#2-2-1-NameStyle注解" class="headerlink" title="2.2.1    @NameStyle注解"></a>2.2.1    <code>@NameStyle</code>注解</h3><ul>
<li><p>这个注解可以在类上进行配置，优先级高于对应的<code>style</code>全局配置。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">normal,                     <span class="comment">//原值</span></span><br><span class="line">camelhump,                  <span class="comment">//驼峰转下划线</span></span><br><span class="line">uppercase,                  <span class="comment">//转换为大写</span></span><br><span class="line">lowercase,                  <span class="comment">//转换为小写</span></span><br><span class="line">camelhumpAndUppercase,      <span class="comment">//驼峰转下划线大写形式</span></span><br><span class="line">camelhumpAndLowercase,      <span class="comment">//驼峰转下划线小写形式</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用时，直接在类上配置即可。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NameStyle(Style.camelhumpAndUppercase)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Country</span></span><br></pre></td></tr></table></figure>

<p>配置该注解后，对该类和其中的字段进行转换时，会将形如<code>userName</code>的字段转换为表中的<code>user_name</code>字段。</p>
</li>
</ul>
<h3 id="2-2-2-Table注解"><a href="#2-2-2-Table注解" class="headerlink" title="2.2.2    @Table注解"></a>2.2.2    <code>@Table</code>注解</h3><ul>
<li><p><code>@Table</code>注解可以配置<code>name</code>、<code>catalog</code>和<code>schema</code>三个属性，配置<code>name</code>属性后，直接使用提供的表名，不再根据实体类名进行转换。其它的2个属性中，同时配置时，<code>catalog</code>优先级高于<code>scheam</code>，也就是说只有<code>catalog</code>会生效。</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Table(name = &quot;sys_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span></span><br></pre></td></tr></table></figure>

<p>将<code>User</code>实体类映射到<code>sys_user</code>表。</p>
</li>
</ul>
<h3 id="2-2-3-Column注解"><a href="#2-2-3-Column注解" class="headerlink" title="2.2.3    @Column注解"></a>2.2.3    <code>@Column</code>注解</h3><ul>
<li><p><code>@Colum</code>注解支持<code>name</code>、<code>insertable</code>和<code>updateable</code>3个属性。</p>
<p><code>name</code>配置映射的列名。</p>
<p><code>insertable</code>对提供的<code>insert</code>方法有效，如果设置为<code>false</code>后就不会出现在SQL中。</p>
<p><code>updateable</code>对提供的<code>update</code>方法有效，如果设置为<code>false</code>后就不会出现在SQL中。</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column(name = &quot;user_name&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>

<p>直接映射<code>name</code>到<code>user_name</code>。</p>
</li>
</ul>
<h3 id="2-2-4-ColumnType注解"><a href="#2-2-4-ColumnType注解" class="headerlink" title="2.2.4    @ColumnType注解"></a>2.2.4    <code>@ColumnType</code>注解</h3><ul>
<li><p>这个注解提供的<code>column</code>属性和<code>@Column</code>中的<code>name</code>作用相同，但是<code>@Column</code>的优先级更高。除了<code>name</code>属性外，这个注解主要提供了<code>jdbcType</code>属性和<code>typeHandler</code>属性。</p>
<p><code>jdbcType</code>用于设置特殊数据库类型时指定数据库中的<code>jdbcType</code>。</p>
<p><code>typeHandler</code>用于设置特殊类型处理器，常见的是枚举。</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ColumnType(</span></span><br><span class="line"><span class="meta">        column = &quot;countryname&quot;,</span></span><br><span class="line"><span class="meta">        jdbcType = JdbcType.VARCHAR,</span></span><br><span class="line"><span class="meta">        typeHandler = StringTypeHandler.class)</span></span><br><span class="line"><span class="keyword">private</span> String  countryname;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-5-Transient注解"><a href="#2-2-5-Transient注解" class="headerlink" title="2.2.5    @Transient注解"></a>2.2.5    <code>@Transient</code>注解</h3><ul>
<li><p>一般情况下，实体中的字段和数据库中的字段是一一对应的，但是有时候我们会在实体类中定义一些额外的属性并希望这些属性不会与数据库表中的字段产生映射，这种情况下，就需要使用<code>@Transient</code>注解来告诉通用Mapper这不是表中的字段。</p>
</li>
<li><p>默认情况下，只有简单类型会被自动认为是表中的字段（可以通过配置中的<code>useSimpleType</code>控制）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> 这里说的简单类型不包含Java中的8种类基本型：</span><br><span class="line">byte、short、int、long、float、double、char、boolean</span><br><span class="line"> 这是因为在类中，基本类型会有默认值，而MyBatis中经常会要判断属性值是否为空，所以不要在类中使用基本类型，否则会遇到莫名其妙的错误。</span><br><span class="line"> 如果要使用基本类型的数据，应该使用其包装类。	</span><br></pre></td></tr></table></figure>

<p>对于类中的复杂对象，以及<code>Map</code>、<code>List</code>等属性不需要配置这个注解。</p>
<p>对于枚举类型作为数据库字段的情况，需要看配置中的<code>enumAsSimpleType</code>参数</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transient</span></span><br><span class="line"><span class="keyword">private</span> String otherThings; <span class="comment">//非数据库表中字段</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-6-Id注解"><a href="#2-2-6-Id注解" class="headerlink" title="2.2.6    @Id注解"></a>2.2.6    <code>@Id</code>注解</h3><ul>
<li><p>上面的几个注解都涉及到映射。<code>@Id</code>注解和映射无关，它是一个特殊的标记，用于标识数据库中的主键字段。</p>
</li>
<li><p>正常情况下，一个实体类中至少需要一个标记<code>@Id</code>注解的字段，存在联合主键时可以标记多个。</p>
</li>
<li><p>如果表中没有主键，类中就可以不标记。</p>
</li>
<li><p>当类中没有存在标记了<code>@Id</code>注解的字段时，你可以理解为类中的所有字段是联合主键。使用所有的<code>ByPrimaryKey</code>相关的方法时，有<code>where</code>条件的地方，会将所有列作为条件。</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br></pre></td></tr></table></figure>

<p>或联合主键：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="keyword">private</span> Integer userId;</span><br><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="keyword">private</span> Integer roleId;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-7-KeySql注解"><a href="#2-2-7-KeySql注解" class="headerlink" title="2.2.7    @KeySql注解"></a>2.2.7    <code>@KeySql</code>注解</h3><ul>
<li>主键策略注解，用于配置如何生成主键。</li>
<li>这是通用Mapper的自定义注解，该注解的目的就是替换<code>@GenerateValue</code>注解。</li>
<li>详见<strong>2.3主键策略</strong>。</li>
</ul>
<h3 id="2-2-8-GenerateValue注解"><a href="#2-2-8-GenerateValue注解" class="headerlink" title="2.2.8    @GenerateValue注解"></a>2.2.8    <code>@GenerateValue</code>注解</h3><ul>
<li>主键策略注解，用于配置如何生成主键。</li>
<li>不同数据库的配置不同，详见<strong>2.3主键策略</strong>。</li>
</ul>
<h3 id="2-2-9-Version注解"><a href="#2-2-9-Version注解" class="headerlink" title="2.2.9    @Version注解"></a>2.2.9    <code>@Version</code>注解</h3><ul>
<li><code>@Version</code>是实现乐观锁的一个注解，大多数人都不需要。</li>
<li>详见<strong>2.4乐观锁</strong>。</li>
</ul>
<h3 id="2-2-10-RegisterMapper注解"><a href="#2-2-10-RegisterMapper注解" class="headerlink" title="2.2.10    @RegisterMapper注解"></a>2.2.10    <code>@RegisterMapper</code>注解</h3><ul>
<li>为了解决通用Mapper中最常见的一个错误而增加的注解标记，该注解仅用于开发用用接口，不是实体类上使用的，这里和其它注解一起介绍了。</li>
<li>4.0 版本提供的所有通用接口上都标记了该注解，因此自带的通用接口时，不需要配置 <code>mappers</code> 参数，该注解的具体用法会在 <strong>第五章 扩展通用接口</strong> 中介绍。</li>
</ul>
<hr>
<h2 id="2-3-主键策略"><a href="#2-3-主键策略" class="headerlink" title="2.3    主键策略"></a>2.3    主键策略</h2><p>​    在2.2中介绍了所有其它注解的作用和用法，由于主键策略比较复杂，单独用一节来阐述。</p>
<p>​    首先主键策略和数据库关系很大，有些数据库支持主键自增，而有些数据库只能通过序列来获得主键。</p>
<p>​    新增的<code>@KeySql</code>注解用于替换<code>@GeneratedValue</code>注解，因此<code>@KeySql</code>能以更简单的方式实现原来的功能。下面的示例都先使用<code>@KeySql</code>进行配置，然后再使用<code>@GeneratedValue</code>，大家可以自行选择。</p>
<h3 id="2-3-1-JDBC支持通过getGeneratedValue方法取回主键的情况"><a href="#2-3-1-JDBC支持通过getGeneratedValue方法取回主键的情况" class="headerlink" title="2.3.1    JDBC支持通过getGeneratedValue方法取回主键的情况"></a>2.3.1    JDBC支持通过<code>getGeneratedValue</code>方法取回主键的情况</h3><ul>
<li><p>这种情况首先需要数据库支持自增长，其次数据库提供的JDBC支持<code>getGeneratedKeys</code>方法。</p>
</li>
<li><p>常见的如MySql、SqlServer支持这种模式。</p>
</li>
<li><p>这种情况下，配置主键策略最简单。用法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="meta">@KeySql(useGeneratedKeys = true)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<p>或：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<ul>
<li>SqlServer中使用时，需要设置<code>id</code>的<code>insertable=false</code></li>
</ul>
</li>
</ul>
<h2 id="2-4-乐观锁"><a href="#2-4-乐观锁" class="headerlink" title="2.4    乐观锁"></a>2.4    乐观锁</h2><h2 id="2-5-全局主键"><a href="#2-5-全局主键" class="headerlink" title="2.5    全局主键"></a>2.5    全局主键</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/28/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/28/SpringMVC/" class="post-title-link" itemprop="url">SpringMVC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-28 10:05:13" itemprop="dateCreated datePublished" datetime="2020-08-28T10:05:13+08:00">2020-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-08 20:44:28" itemprop="dateModified" datetime="2022-05-08T20:44:28+08:00">2022-05-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/SpringMVC/" itemprop="url" rel="index"><span itemprop="name">SpringMVC</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="三层架构和MVC"><a href="#三层架构和MVC" class="headerlink" title="三层架构和MVC"></a>三层架构和MVC</h1><h2 id="1-三层架构"><a href="#1-三层架构" class="headerlink" title="1 三层架构"></a>1 三层架构</h2><p><img src="/2020/08/28/SpringMVC/%E5%BC%80%E5%8F%91%E6%9E%B6%E6%9E%84.png"></p>
<p>在B/S架构中，系统标准的三层架构包括：表现层、业务层、持久层。 </p>
<p><strong>表现层（Web层）</strong></p>
<ul>
<li>  Web 层最核心的功能是<strong>接收客户端提交的请求，给客户端返回响应结果</strong>。</li>
<li>  常用的数据传输协议是 HTTP 协议，即 Web 层需要接收 HTTP 请求，返回 HTTP 响应。</li>
<li>Web层中又包含展示层和控制层：<ol>
<li><strong>控制层</strong>负责接收请求，处理业务的逻辑。</li>
<li><strong>展示层</strong>负责结果的展示。</li>
</ol>
</li>
<li>  Web 层依赖 Service 层，接收到客户端请求一般都会转发到业务层进行业务处理。</li>
<li>  <strong>Web 层的设计一般都使用MVC模型。（MVC 是 Web 层的设计模型，和其他层没有关系）</strong> </li>
</ul>
<p><strong>业务层（service层）</strong></p>
<ul>
<li>  负责业务逻辑处理。</li>
<li>  业务层在业务处理时可能会依赖持久层。在对数据持久化时需要保证事务一致性。（也就是我们说的，事务应该放到业务层来控制） </li>
</ul>
<p><strong>持久层（Dao层）</strong></p>
<ul>
<li>  负责数据持久化。</li>
<li>  数据库是对数据进行持久化的载体，通俗的讲，持久层就是和数据库交互，对数据库表进行增删改查的。</li>
</ul>
<hr>
<h2 id="2-MVC模型"><a href="#2-MVC模型" class="headerlink" title="2 MVC模型"></a>2 MVC模型</h2><blockquote>
<p><strong>MVC；Model View Controller；模型-视图-控制器</strong></p>
</blockquote>
<p>MVC 是一种用于设计 WEB 应用表现层的模型。</p>
<p>MVC中每个部分各司其职：</p>
<p><strong>Model（模型）</strong>：</p>
<ul>
<li>通常指数据模型。</li>
<li>作用：一般情况下用于封装数据。</li>
<li>网络中数据传输一般使用 JSON 字符串。所以说 HTTP 协议携带的请求数据往往是 JSON 字符串，请求到达服务器时，会根据需要将 JSON 字符串反序列化为 Java 对象；服务器作出响应时，首先会把响应消息序列化为 JSON 字符串，再传递给客户端。</li>
</ul>
<p><strong>View（视图）</strong>：</p>
<ul>
<li>终端显示层，各个端的模板渲染并执行显示的层。通常指的就是我们的 JSP 或 HTML。</li>
<li>视图层负责将从Model（模型）中得到的数据渲染到View（视图）上。</li>
<li>在前后端分离的项目开发中，后端开发人员不再需要关注 View（视图）。</li>
</ul>
<p><strong>Controller（控制器）</strong>：</p>
<ul>
<li>它是应用程序中处理用户交互的部分。作用一般是处理程序逻辑的</li>
</ul>
<hr>
<h1 id="SpringMVC-概述"><a href="#SpringMVC-概述" class="headerlink" title="SpringMVC 概述"></a>SpringMVC 概述</h1><h2 id="1-是什么"><a href="#1-是什么" class="headerlink" title="1 是什么"></a>1 是什么</h2><ul>
<li>SpringMVC 是 MVC 模型的一种落地实现框架。常见的 MVC 模型的实现框架还有 Struts1，Struts2 等。</li>
<li>SpringMVC 通过一套注解，让一个简单的 Java 类成为处理请求的控制器，而无需实现任何接口。</li>
<li>同时它还支持 RESTful 编程风格的请求。</li>
</ul>
<h2 id="2-SpringMVC的优势"><a href="#2-SpringMVC的优势" class="headerlink" title="2 SpringMVC的优势"></a>2 SpringMVC的优势</h2><h3 id="2-1-清晰的角色划分"><a href="#2-1-清晰的角色划分" class="headerlink" title="2.1 清晰的角色划分"></a>2.1 清晰的角色划分</h3><table>
<thead>
<tr>
<th>英文名称</th>
<th>中文名称</th>
</tr>
</thead>
<tbody><tr>
<td>DispatcherServlet</td>
<td>前端控制器；分发器</td>
</tr>
<tr>
<td>HandlerMapping</td>
<td>处理器映射器</td>
</tr>
<tr>
<td>HandlerAdapter</td>
<td>处理器适配器</td>
</tr>
<tr>
<td>ViewResolver</td>
<td>视图解析器</td>
</tr>
<tr>
<td>Controller</td>
<td>处理器或页面控制器</td>
</tr>
<tr>
<td>Validator</td>
<td>验证器</td>
</tr>
<tr>
<td>Command</td>
<td>命令对象：请求参数要绑定的对象就是命令对象</td>
</tr>
<tr>
<td>FormObject</td>
<td>表单对象：提供给表单展示的对象叫做表单对象</td>
</tr>
</tbody></table>
<hr>
<h2 id="3-SpringMVC入门案例"><a href="#3-SpringMVC入门案例" class="headerlink" title="3 SpringMVC入门案例"></a>3 SpringMVC入门案例</h2><h3 id="1、项目初始化"><a href="#1、项目初始化" class="headerlink" title="1、项目初始化"></a>1、项目初始化</h3><h4 id="1-1-新建一个-Maven-工程，引入开发所需依赖的坐标"><a href="#1-1-新建一个-Maven-工程，引入开发所需依赖的坐标" class="headerlink" title="1.1 新建一个 Maven 工程，引入开发所需依赖的坐标"></a>1.1 新建一个 Maven 工程，引入开发所需依赖的坐标</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Spring基本框架--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Spring Web框架--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Spring webmvc框架--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Servlet_API--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--jsp_API--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-新建一个-index-jsp-文件用于发送请求"><a href="#1-2-新建一个-index-jsp-文件用于发送请求" class="headerlink" title="1.2 新建一个 index.jsp 文件用于发送请求"></a>1.2 新建一个 index.jsp 文件用于发送请求</h4><p>在 Maven 工程中新建一个<code>webapp/index.jsp</code>页面用于发送请求。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h3&gt;SpringMVC入门案例&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/hello&quot;</span>&gt;SpringMVC入门案例&lt;/a&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h4 id="1-3-新建一个-success-jsp-文件以备后用"><a href="#1-3-新建一个-success-jsp-文件以备后用" class="headerlink" title="1.3 新建一个 success.jsp 文件以备后用"></a>1.3 新建一个 success.jsp 文件以备后用</h4><p>编写一个<code>/WEB-INF/pages/success.jsp</code>。</p>
<p>根据视图解析器解析的解析的转发地址编写一个页面，前端控制器会将的页面内容传递给终端显示器。终端显示器（一般是浏览器）解析并展示给用户。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;success&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h3&gt;入门成功！！！&lt;/h3&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<h3 id="2、项目核心配置文件"><a href="#2、项目核心配置文件" class="headerlink" title="2、项目核心配置文件"></a>2、项目核心配置文件</h3><h4 id="2-1-配置前端控制器-DispatcherServlet"><a href="#2-1-配置前端控制器-DispatcherServlet" class="headerlink" title="2.1 配置前端控制器 DispatcherServlet"></a>2.1 配置前端控制器 DispatcherServlet</h4><p>DispatcherServlet 是 SpringMVC 项目的核心组件，需要在配置文件（<code>webapp/WEB-INF/web.xml</code>）中进行配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">&quot;2.4&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加SpringMVC的前端控制器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置初始化参数：指定DispatcherServlet实例创建时加载的配置文件。--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置DispatcherServlet实例对象创建的时间点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span> <span class="comment">&lt;!--（1）取值为0：应用加载时创建；（2）取值为非0正整数：Tomcat启动时就创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--设置前端控制器要拦截哪些请求（根据请求URL匹配，这里设置了拦截所有请求）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  服务器上保存着很多资源（静态资源和接口），所有访问服务器上的资源的请求首先都会被 DispatcherServlet 拦截，然后再由 DispatcherServlet 转发到对应的服务中去，所以 DispatherServlet 又被称为“转发器”。</li>
<li>  DispatcherServlet 是请求进入服务器的第一道拦截路径。</li>
<li>  <code>&lt;url-pattern&gt;</code> 标签中配置的是 DispatcherServlet 要拦截的请求的 URL 路径。</li>
</ul>
<h4 id="2-2-创建SpringMVC的配置文件-SpringMVC-xml"><a href="#2-2-创建SpringMVC的配置文件-SpringMVC-xml" class="headerlink" title="2.2 创建SpringMVC的配置文件 SpringMVC.xml"></a>2.2 创建SpringMVC的配置文件 SpringMVC.xml</h4><p>在上一节中，我们配置了 DispatherServlet 在创建实例时加载的配置文件的保存路径。 </p>
<p>这个配置文件是 SpringMVC 的另一个核心配置文件，它对命名无特殊要求，可在 web.xml 配置文件中自行指定。这里我们将其命名为 SpringMVC.xml。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--指定应用程序启动后要扫描的包，并将其中符合规则（一般是添加了@Component注解的类）的组件添加到Spring容器中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.xsyu&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--开启SpringMVC对注解的支持。（如果项目中使用了SpringMVC中特有的注，则必须开启此配置项，否则这些注解就无法生效）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/pages/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/08/28/SpringMVC/%E9%85%8D%E7%BD%AESpringMVC_xml.png"></p>
<h3 id="3、代码测试：编写控制器并使用注解配置"><a href="#3、代码测试：编写控制器并使用注解配置" class="headerlink" title="3、代码测试：编写控制器并使用注解配置"></a>3、代码测试：编写控制器并使用注解配置</h3><h4 id="Case1：不含-ResponseBody-注解"><a href="#Case1：不含-ResponseBody-注解" class="headerlink" title="Case1：不含 @ResponseBody 注解"></a>Case1：不含 @ResponseBody 注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/hello&quot;)</span> <span class="comment">//SpringMVC特有的注解，必须开启SpringMVC对注解的支持后才可以使用</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;   <span class="comment">// 相当于一个转发</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们在控制器方法上没有使用 @ResponseBody 注解，那么控制器方法中返回字符串的操作就相当于一个“转发操作”。字符串字面量将会返回给项目中配置的视图解析器，并根据视图解析器的解析规则拼接上一个前缀 <code>/WEB-INF/pages/</code> 和一个后缀 <code>.jsp</code>，组成一个具体页面的地址 <code>/WEB-INF/pages/success.jsp</code>，给浏览器显示改地址的页面内容。</p>
<h4 id="Case2：含-ResponseBody-注解"><a href="#Case2：含-ResponseBody-注解" class="headerlink" title="Case2：含 @ResponseBody 注解"></a>Case2：含 @ResponseBody 注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ResponseBody</span>			<span class="comment">// ！！！</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/hello&quot;)</span>   </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们在控制器方法上使用了 @ResponseBody 注解后，将不再执行转发的操作，而是直接返回 “success” 字面量给浏览器显示。</p>
<hr>
<h2 id="4-入门案例的执行流程分析"><a href="#4-入门案例的执行流程分析" class="headerlink" title="4 入门案例的执行流程分析"></a>4 入门案例的执行流程分析</h2><h3 id="入门案例的执行流程"><a href="#入门案例的执行流程" class="headerlink" title="入门案例的执行流程"></a>入门案例的执行流程</h3><p><img src="/2020/08/28/SpringMVC/%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.svg" alt="入门案例执行流程"></p>
<ol>
<li>Web 应用启动后，会自动读取配置文件 <code>web.xml</code> 中的配置项，尝试实例化一个 <code>DispatherServlet</code> 对象。</li>
<li>[可选]如果配置文件 <code>web.xml</code> 中关于 <code>DispatherServlet</code> 的配置项关联了 <code>SpringMVC.xml</code> 配置文件的话，继续读取 <code>SpringMVC.xml</code> 配置文件的内容。</li>
<li>根据两个配置文件的配置项，实例化对应的组件。<ul>
<li>  根据 <code>web.xml</code> 配置文件，实例化 <code>DispatherServlet</code> 组件；</li>
<li>  根据 <code>SpringMVC.xml</code> 配置文件，实例化 <code>&lt;context:component-scan base-package=&quot;&quot;/&gt;</code> 指定包下的组件；</li>
<li>  实例化视图解析器组件 InternalResourceViewResolver；</li>
<li>  ……</li>
</ul>
</li>
<li>客户端浏览器向服务器发送请求；</li>
<li>请求首先会被服务器上的 <code>DispatherServlet</code> 拦截；</li>
<li><code>DispatherServlet</code> 并不处理请求，而是把请求转发给 Controller。<ul>
<li>转发的路径是根据请求的 URL，匹配 <code>@RequestMapping</code> 注解的 value 值。</li>
<li><code>@RequestMapping</code> 注解位于 <code>Handler[控制器]</code>模块中，匹配成功后，执行控制器中对应的方法。</li>
<li>执行 HelloController 中对应的方法，该方法有一个返回值，是一个逻辑转发路径（返回值为String类型，且方法上不加<code>@ResponseBody</code>注解）。</li>
</ul>
</li>
<li>根据这个转发路径，经过 <code>InternalResourceViewResolver[视图解析器]</code> 解析，形成一个完整的访问路径。</li>
<li>将对应访问路径下的网页内容响应给浏览器。浏览器解析网页内容，展示给用户。</li>
</ol>
<h3 id="SpringMVC-的请求响应流程"><a href="#SpringMVC-的请求响应流程" class="headerlink" title="SpringMVC 的请求响应流程"></a>SpringMVC 的请求响应流程</h3><p><img src="/2020/08/28/SpringMVC/%E5%9F%BA%E4%BA%8ESpringMVC%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png" alt="基于SpringMVC组件的请求处理流程"></p>
<ol>
<li>客户端（浏览器）向服务器发送 HTTP 请求，首先被 DispatherServlet 拦截；</li>
<li>DispatherServlet 会将请求消息中的 URL 与 HandlerMapping 中保存的 Controller 的地址逐一进行比对。<ul>
<li><p>如果能找到对应的 Controller，则返回一个执行链给 DispatherServlet；</p>
</li>
<li><p>如果找不到对应的 Controller，则返回错误信息。</p>
</li>
<li><p>Request 请求中携带的 URL 只是一串字符串字面量，并不能直接定位到 Controller。这些字符串字面量经过 HandlerMapping 处理后返回给 DispatherServlet 的执行链才是 Controller 真正的地址。</p>
</li>
</ul>
</li>
<li>返回执行链给 Controller；</li>
<li>根据执行链调用 Controller 的过程中，请求消息首先会被 HandlerAdapter 接收，再交由 Controller 处理；<ul>
<li>  <em>SpringMVC 中的 HandlerAdapter 是一个接口，Controller 是该接口的实现类。类似于 Service 和 ServiceImpl。</em></li>
</ul>
</li>
<li>HandlerAdapter 调用 Controller，执行业务处理逻辑；</li>
<li>Controller 处理完具体的业务后，将业务的执行结果（也就是 ModelAndView）交给 HandlerAdapter 代为返回；</li>
<li>HandlerAdapter 将 ModelAndView 对象交给 DispatherServlet 统一调度；</li>
<li>DispatherServlet 将 ModelAndView 对象转发给 ViewResolver 进行解析；</li>
<li>ViewResolver 拼接 ModelAndView 中的信息得到物理视图地址，并将视图地址转发给 DispatherServlet 统一调度。（相当于原先只知道一个逻辑地址，在视图解析器中先拼接成一个静态页面物理地址）</li>
<li>在第 9 步中，我们得到了一个静态页面地址，如果这个页面中还有动态数据。根据这个地址，DispatherServlet 还会将 ModelAndView 中的数据信息传递给静态页面，进行页面的渲染；</li>
<li>DispatherServlet 将渲染完成后的页面数据响应给客户端，客户端使用浏览器加载并展示页面。</li>
</ol>
<hr>
<h1 id="SpringMVC中的的组件"><a href="#SpringMVC中的的组件" class="headerlink" title="SpringMVC中的的组件"></a>SpringMVC中的的组件</h1><h2 id="1-DispatherServlet：前端控制器"><a href="#1-DispatherServlet：前端控制器" class="headerlink" title="1 DispatherServlet：前端控制器"></a>1 DispatherServlet：前端控制器</h2><p>DispatherServlet 是客户端和服务器数据传输的中枢，主要负责：</p>
<ul>
<li>  接收客户端的请求，并转发请求给其它组件处理；</li>
<li>  将处理后的响应结果返回给客户端。</li>
</ul>
<p>DispatherServlet 是整个流程的控制中心，由它调用其它组件处理用户的请求。</p>
<p>DispatherServlet 的存在降低了组件间的耦合性。</p>
<blockquote>
<p>  <strong>总结：</strong></p>
<p>  前端控制器就是一个拦截器，如果将拦截的路径设置为 <code>/</code> 的话，所有访问服务器的请求都会被该前端控制器拦截。请求被拦截后由前端控制器负责筛选，将筛选后符合要求的请求转发给 SpringMVC 中的其它组件，继续业务流程。</p>
</blockquote>
<h2 id="2-HandlerMapping：处理器映射器"><a href="#2-HandlerMapping：处理器映射器" class="headerlink" title="2 HandlerMapping：处理器映射器"></a>2 HandlerMapping：处理器映射器</h2><p>DispatherServlet 会把请求消息转发给 HandlerMapping，HandlerMapping 根据请求消息中的 URL 匹配对应的 Controller 的执行链，并返回给 DispatherServlet 。</p>
<p>SpringMVC 提供了不同的映射器实现方式。如：配置文件方式、实现接口方式、注解方式等。</p>
<h2 id="3-HandlerAdapter：处理器适配器"><a href="#3-HandlerAdapter：处理器适配器" class="headerlink" title="3 HandlerAdapter：处理器适配器"></a>3 HandlerAdapter：处理器适配器</h2><p>HandlerAdapter 的设计采用了设计模式中的适配器模式。</p>
<p>HandlerAdapter 可以理解为“接口”，是对很多个 Controller 更高层次的抽象，但程序在真正执行时调用的还是底层的 Controller。</p>
<p>DispatherServlet 知道了要执行哪一个 Controller 后，在将请求转发给 Controller 时，并不会调用“具体”而是会调用“抽象”，这个所谓的抽象就是 HandlerAdapter。举个例子就是：</p>
<ul>
<li>  DispatherServlet 类的代码中会将请求转发给 HandlerAdapter，而代码运行时实际是由 HandlerAdapter 的实现类 Controller 来接收的（就是接口与实现类的关系，用到了多态语法）。</li>
<li>  在 Controller 中执行具体的业务。</li>
<li>  Controller 中的业务代码执行完毕之后，返回一个 ModelAndView 对象。从代码底层来看是由 Controller 返回的，但是从 DispatherServlet 的角度来看是 HandlerAdapter 返回的。</li>
</ul>
<h3 id="为什么要使用处理器适配器？"><a href="#为什么要使用处理器适配器？" class="headerlink" title="为什么要使用处理器适配器？"></a>为什么要使用处理器适配器？</h3><p>在 MVC 框架中，DispatherServlet 负责接收请求消息和响应结果，HandlerMapping 负责找到对应的执行链，HandlerAdapter 规定了 Controller 的编写标准，Controller 负责真正的业务逻辑。</p>
<ul>
<li><p><strong>不使用处理器适配器：</strong></p>
<p>  如果我们不使用 HandlerAdapter，由 Controller 直接接收请求信息，显然耦合度非常高，一旦需求发生改变，我们除了要更改Controller 中的代码，还需要更改 Controller 依赖的和被依赖的一系列的代码，显然耦合度非常高。</p>
</li>
<li><p><strong>使用处理器适配器：</strong></p>
<p>  为了解决这个问题，SpringMVC 定义了一个 HandlerAdapter，我们在调用时候都使用适配器接口，通过多态的方式去调用真正的处理器类。这样，即使处理请求消息的 Controller 发生了变化，我们也无需修改所有的代码，只需要根据适配器接口添加一个新的处理器类即可。</p>
</li>
</ul>
<p>所以说，<strong>HandlerAdapter 是一个接口，Controller 是这个接口的实现类，它们之间是一对多的关系</strong>。</p>
<p><img src="/2020/08/28/SpringMVC/HandlerAdapter.png"></p>
<h2 id="4-Controller-Handler：处理器"><a href="#4-Controller-Handler：处理器" class="headerlink" title="4 Controller/Handler：处理器"></a>4 Controller/Handler：处理器</h2><p>Controller/Handler 的作用是处理业务逻辑。</p>
<h2 id="5-ViewResolver：视图解析器"><a href="#5-ViewResolver：视图解析器" class="headerlink" title="5 ViewResolver：视图解析器"></a>5 ViewResolver：视图解析器</h2><p>DispatherServlet 会把逻辑视图（字符串字面量）发送给视图解析器进行解析，</p>
<ol>
<li>（可选）ViewResolver 首先会把逻辑视图解析为完整的视图地址（一般是拼接前缀、后缀）；</li>
<li>再根据完整的视图地址找到物理视图（View）；</li>
<li>（可选）如果是动态页面，还要根据 ModeAndView 中的数据对 View 进行渲染；</li>
<li>最后将 View 数据转发到 DispatherServlet 统一调度。</li>
</ol>
<h2 id="6-View：视图"><a href="#6-View：视图" class="headerlink" title="6 View：视图"></a>6 View：视图</h2><p>SpringMVC 框架提供了很多的 View 视图类型的支持，包括 jsp、freemarker、Thymeleaf  等。</p>
<p>一般情况下会通过页面标签或页面模板技术将模型数据通过页面展示给用户，需要程序员根据业务需求开发具体的页面。</p>
<h2 id="7-HandlerExceptionResolver：异常处理器"><a href="#7-HandlerExceptionResolver：异常处理器" class="headerlink" title="7 HandlerExceptionResolver：异常处理器"></a>7 HandlerExceptionResolver：异常处理器</h2><h3 id="7-1-理论基础"><a href="#7-1-理论基础" class="headerlink" title="7.1 理论基础"></a>7.1 理论基础</h3><p><img src="/2020/08/28/SpringMVC/SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-1651810035436.png" alt="SpringMVC异常处理"></p>
<p>默认地，应用的 Dao、Service、Controller、DispatcherServlet 中出现异常的解决方案都是向上一级抛出。</p>
<p>这种情况下，如果程序运行的过程中某一步出现了异常，那么最终响应给客户端浏览器的就是将程序报错信息展示在浏览器页面上，这对于用户是十分不友好的。</p>
<p>SpringMVC 中提供了一种异常处理机制：在程序运行过程中出现的异常一路向上抛出，直到到达 DispatcherServlet 时，由 DispatcherServlet 将异常信息交给 HandlerExceptionResolver 来处理，通过 HandlerExceptionResolver 跳转到一个提前写好的、友好的错误提示页面返回给客户端。</p>
<h3 id="7-2-实现步骤"><a href="#7-2-实现步骤" class="headerlink" title="7.2 实现步骤"></a>7.2 实现步骤</h3><img src="/2020/08/28/SpringMVC/SpringMVC%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8.png" style="zoom: 67%;">

<h4 id="1、编写访问页面"><a href="#1、编写访问页面" class="headerlink" title="1、编写访问页面"></a>1、编写访问页面</h4><ul>
<li>index.jsp</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;user/testException&quot;</span>&gt;异常处理&lt;/a&gt;</span><br></pre></td></tr></table></figure>



<h4 id="2、编写控制器Controller"><a href="#2、编写控制器Controller" class="headerlink" title="2、编写控制器Controller"></a>2、编写控制器Controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testException&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testException</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行&quot;</span>)</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;    <span class="comment">// 模拟异常</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在出现异常后，Controller 会自动向上层抛出异常，最后展示给用户的是一个很不友好的错误页面。</li>
<li>为了解决这个问题，我们使用自定义的异常处理器处理异常。</li>
</ul>
<h4 id="3、编写异常类（自定义异常类）"><a href="#3、编写异常类（自定义异常类）" class="headerlink" title="3、编写异常类（自定义异常类）"></a>3、编写异常类（自定义异常类）</h4><p>我们可以使用自定义的“友好的”异常信息来代替原生的“不友好的”异常信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义的异常类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储提示信息的字符串</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4、修改Controller控制器中的代码"><a href="#4、修改Controller控制器中的代码" class="headerlink" title="4、修改Controller控制器中的代码"></a>4、修改Controller控制器中的代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testException&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testException</span><span class="params">()</span> <span class="keyword">throws</span> MyException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;    <span class="comment">// 模拟异常</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// 在控制台打印异常信息</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="comment">// 抛出自定义异常信息(由于定义了异常处理器，此处是抛给异常处理器处理)</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;服务器崩溃了&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="5、自定义异常处理器"><a href="#5、自定义异常处理器" class="headerlink" title="5、自定义异常处理器"></a>5、自定义异常处理器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义异常处理器</span></span><br><span class="line"><span class="comment"> * 异常处理器必须实现`HandlerExceptionResolver`接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyExceptionResolver</span> <span class="keyword">implements</span> <span class="title class_">HandlerExceptionResolver</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理异常的业务逻辑</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpServletRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpServletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e 接收下一级返回的异常信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">resolveException</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取异常对象</span></span><br><span class="line">        <span class="type">MyException</span> <span class="variable">exception</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 如果从Controller中接收异常信息是MyException类型，就直接接收，否则就自定义一个MyException异常类型</span></span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> MyException)&#123;</span><br><span class="line">            exception = (MyException)e;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            exception = <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;系统正在维护&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建ModelAndView对象</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">// 从自定义的异常类中拿到提示信息，并转发到error页面</span></span><br><span class="line">        mv.addObject(<span class="string">&quot;errorMessage&quot;</span>, exception.getMessage());</span><br><span class="line">        mv.setViewName(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 接收从Controller控制器中抛出的异常信息 `Exception e`;</span></span><br><span class="line"><span class="comment">	2. 创建一个返回页面`error.jsp`；</span></span><br><span class="line"><span class="comment">	 并将从Controller控制器中得到的异常信息转发到`error.jsp`中。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h4 id="6、自定义展示给用户的错误信息页面"><a href="#6、自定义展示给用户的错误信息页面" class="headerlink" title="6、自定义展示给用户的错误信息页面"></a>6、自定义展示给用户的错误信息页面</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;错误提示页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    $&#123;errorMessage&#125;		&lt;!--从异常处理器中拿到的错误信息数据--&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="7、注册异常处理器"><a href="#7、注册异常处理器" class="headerlink" title="7、注册异常处理器"></a>7、注册异常处理器</h4><ul>
<li><code>SpringMVC.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置异常处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;MyExceptionResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.exception.MyExceptionResolver&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	启用异常处理器的工作由 &lt;mvc:annotation-driven&gt; 帮助我们完成了</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="7-3-小总结"><a href="#7-3-小总结" class="headerlink" title="7.3 小总结"></a>7.3 小总结</h3><p>如果程序在运行过程中出现了异常，那么异常必然会层层向上抛出，直到到达<strong>前端控制器（DispatherServlet）</strong>，前端控制器如果发现接收的消息中含有异常，就会转发给异常处理器，在异常处理器中，可以改变默认的异常处理逻辑，比如：改变返回给用户的异常信息，也可以转发到一个友好的异常展示页面中去。</p>
<hr>
<h2 id="8-HandlerInterceptor：处理器拦截器"><a href="#8-HandlerInterceptor：处理器拦截器" class="headerlink" title="8 HandlerInterceptor：处理器拦截器"></a>8 HandlerInterceptor：处理器拦截器</h2><h3 id="8-1-拦截器的作用"><a href="#8-1-拦截器的作用" class="headerlink" title="8.1 拦截器的作用"></a>8.1 拦截器的作用</h3><ul>
<li>SpringMVC 中的 HandlerInterceptor 类似于 Servlet 开发中的过滤器 Filter，<strong>用于对请求消息进行预处理，对响应消息进行后处理</strong>。</li>
<li>SpringMVC 支持用户自定义一些拦截器来实现特定的功能。</li>
<li>开发人员自定义的拦截器必须实现 HandlerInterceptor 接口</li>
</ul>
<h4 id="8-1-1-拦截器链"><a href="#8-1-1-拦截器链" class="headerlink" title="8.1.1 拦截器链"></a>8.1.1 拦截器链</h4><p><strong>拦截器链</strong>：拦截器链就是将拦截器按一定的顺序连成一条链。在请求被拦截时，拦截器链中的拦截器就会按照定义的顺序被调用。</p>
<h4 id="8-1-2-拦截器vs-过滤器"><a href="#8-1-2-拦截器vs-过滤器" class="headerlink" title="8.1.2 拦截器vs.过滤器"></a>8.1.2 拦截器vs.过滤器</h4><table>
<thead>
<tr>
<th></th>
<th>过滤器（Filter）</th>
<th>拦截器（HandlerInterceptor）</th>
</tr>
</thead>
<tbody><tr>
<td>使用范围</td>
<td>Filter 是 Servlet 规范中的一部分，在任何JavaWeb 工程中都可以使用。</td>
<td>HandlerInterceptor 是 SpringMVC 框架特有的，只能在 SpringMVC 项目中使用。</td>
</tr>
<tr>
<td>使用规则</td>
<td>Filter 在 <code>url-pattern</code> 中配置了 <code>/*</code> 之后，会拦截访问所有资源的请求。</td>
<td><strong>拦截器只会拦截访问 Controller 的请求</strong>，如果访问的是 jsp、image、js 等静态资源，是不会进行拦截的。</td>
</tr>
</tbody></table>
<hr>
<h3 id="8-2-自定义拦截器的步骤"><a href="#8-2-自定义拦截器的步骤" class="headerlink" title="8.2 自定义拦截器的步骤"></a>8.2 自定义拦截器的步骤</h3><h4 id="1、编写一个可提供访问服务的SpringMVC项目"><a href="#1、编写一个可提供访问服务的SpringMVC项目" class="headerlink" title="1、编写一个可提供访问服务的SpringMVC项目"></a>1、编写一个可提供访问服务的SpringMVC项目</h4><h4 id="2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）"><a href="#2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）" class="headerlink" title="2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）"></a>2、编写一个自定义拦截器类（HandlerInterceptor接口的实现类）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 预处理：返回值为true，表示执行完拦截器中的方法后放行；</span></span><br><span class="line"><span class="comment">     * 返回值为false，表示执行完拦截器中的方法后仍不放行。</span></span><br><span class="line"><span class="comment">     * Tip：预处理、后处理、最终处理拦截器是一次性放行的</span></span><br><span class="line"><span class="comment">     *  	</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;预处理拦截器&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 后处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后处理拦截器&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最终处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;最终处理拦截器&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="3、注册拦截器"><a href="#3、注册拦截器" class="headerlink" title="3、注册拦截器"></a>3、注册拦截器</h4><ul>
<li><code>SpringMVC.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册拦截器链--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>   <span class="comment">&lt;!--配置拦截器要拦截的路径：这里设置拦截所有所有访问Controller的请求--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HandlerInterceptor1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.MyHandlerInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HandlerInterceptor2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.MyHandlerInterceptor2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、结果测试"><a href="#4、结果测试" class="headerlink" title="4、结果测试"></a>4、结果测试</h4><hr>
<h3 id="8-3-拦截器细节"><a href="#8-3-拦截器细节" class="headerlink" title="8.3 拦截器细节"></a>8.3 拦截器细节</h3><ul>
<li>  <strong>拦截器的放行：</strong></li>
</ul>
<p>放行的含义是指，如果有下一个拦截器就执行下一个拦截器，如果该拦截器处于拦截器链上的最后一个，则执行 Controller 中的方法。</p>
<ul>
<li>  <strong>拦截器的作用路径</strong></li>
</ul>
<p>作用路径可以通过在配置文件中设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册拦截器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>   <span class="comment">&lt;!--指定拦截的URL--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;&quot;</span>/&gt;</span>	<span class="comment">&lt;!--指定不拦截的URL--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这2个标签的作用相反，只要写一个即可--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HandlerInterceptor1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.MyHandlerInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>





<hr>
<h2 id="9-Converter：类型转换器"><a href="#9-Converter：类型转换器" class="headerlink" title="9 Converter：类型转换器"></a>9 Converter：类型转换器</h2><blockquote>
<p>  <strong>自定义类型转换器</strong></p>
</blockquote>
<h3 id="1-类型转换器的使用场景"><a href="#1-类型转换器的使用场景" class="headerlink" title="1 类型转换器的使用场景"></a>1 类型转换器的使用场景</h3><p>客户端浏览器向服务器发送的请求中包含一个日期字符串，但是这个字符串格式却不符合 JVM 内置的字符串格式。</p>
<ul>
<li>  如果服务器使用 String 类型来接收这个字符串，自然可以接收成功；</li>
<li>  但是服务器使用 Date 数据类型来接收这个字符串，就会出现<strong>类型转换失败</strong>的情况。</li>
</ul>
<p>如果我们能够在请求到达 Controller 前，将请求消息中的日期格式改为符合 JVM 标准的格式，如 <code>date=2020/07/14</code>，在 Controller 中就可以直接使用 Date 数据类型来接收这个字符串。这就是所谓的“类型转换”。</p>
<p>这种情况下就需要我们手动实现自定义类型转换。</p>
<p>自定义的类型转换器需要实现 Converter 接口，Convert 接口的源码如下所示：</p>
<blockquote>
<p>  Convert接口源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span>	<span class="comment">// 函数式接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Converter</span>&lt;S, T&gt; &#123;	<span class="comment">// 该接口有2个泛型，S表示接收的类型，T表示目标类型</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Convert the source object of type &#123;<span class="doctag">@code</span> S&#125; to target type &#123;<span class="doctag">@code</span> T&#125;.</span></span><br><span class="line"><span class="comment">	 * 实现类型转换的方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    T <span class="title function_">convert</span><span class="params">(S source)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="2-使用步骤"><a href="#2-使用步骤" class="headerlink" title="2 使用步骤"></a>2 使用步骤</h3><ol>
<li><p>客户端浏览器发送请求的代码：<code>index.jsp</code></p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;自定义类型转换器&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/account/deleteAccount?date=2020-07-14&quot;</span>&gt;根据日期删除用户&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>服务器 Controller 层代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller(value = &quot;accountController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;account&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;deleteAccount&quot;)</span></span><br><span class="line">    <span class="comment">// public String deleteAccount(String date)&#123;</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteAccount</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;删除了账户&quot;</span>+date);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  如果使用 String 类型接收客户端传递的 date 变量，可以成功接收。因为 date 在传递过程中就是以字符串格式流转的。</li>
<li>  但是如果使用 Date 类型接收客户端传递的 date 变量会出现 <strong>[400 – Bad Request]</strong> 错误，因为字符串 “2020-07-14” 不能自动转换为 Date 类型。此时，我们需要自定义一个类型转换器，将接收到的 date 字符串转换为 Date 类型的对象。</li>
</ul>
</li>
<li><p>自定义一个 Converter 接口的实现类，重写接口中的 <code>convert(S source)</code> 方法</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringToDateConverter</span> <span class="keyword">implements</span> <span class="title class_">Converter</span>&lt;String, Date&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (source == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>(<span class="string">&quot;请输入要转换的日期！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">DateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">            <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> dateFormat.parse(source);</span><br><span class="line">            <span class="keyword">return</span> date;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在 <code>SpringMVC.xml</code> 配置文件中注册类型转换器</p>
<ul>
<li>  SpringMVC 中，类型转换器（Converter）可以有多个，被一个类型转换器工厂（ConversionServiceFactoryBean）统一管理。</li>
<li>  SpringMVC 配置 Converter 的机制是，将自定义的类型转换器注册（添加）到类型转换工厂维护的的类型转换器服务中。</li>
</ul>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置类型转换器 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1.配置类型转换工厂--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionServiceFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.给工厂注入一个新的类型转换器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;myConverter01&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置自定义类型转换器--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.utils.StringToDateConverter&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	一个类型转换工厂中可以有多个类型转换器</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在<code>SpringMVC.xml</code>配置文件中，使用<code>&lt;annotation-driven&gt;</code>标签启用<code>类型转换器工厂</code>。</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Spring开启注解MVC的支持 + 引用自定义的类型转换器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionServiceFactoryBean&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p> 配置完成，类型转换器生效后。在 Controller 的接口中就可以直接使用 Date 类型的变量来接收 String 类型的日期值了。</p>
</li>
</ol>
<hr>
<h2 id="10-lt-mvc-annotation-driven-gt"><a href="#10-lt-mvc-annotation-driven-gt" class="headerlink" title="10 &lt;mvc:annotation-driven&gt;"></a>10 <code>&lt;mvc:annotation-driven&gt;</code></h2><p>在 SpringMVC 项目中，<strong>HandlerMapping、HandlerAdapter、ViewResolver</strong> 等都是 SpringMVC 特有的组件。</p>
<p>如果在配置文件 <code>SpringMVC.xml</code> 中配置了 <code>&lt;mvc:annotation-driven&gt;</code> 标签，就会默认使用 SpringMVC 源码中定义的HandlerMapping、HandlerAdapter 等组件。</p>
<p>也就是说如果使用了 <code>&lt;mvc:annotation-driven&gt;</code> 标签，如无特殊需求，就无需再手动配置 HandlerMapping、HandlerAdapter 等组件了。</p>
<p>它就相当于在 <code>SpringMVC.xml</code> 中配置了：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">---------------------------------<span class="comment">&lt;!--等价于--&gt;</span>-----------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置处理器映射器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置处理器适配器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置处理器异常解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>







<hr>
<h1 id="请求参数的绑定"><a href="#请求参数的绑定" class="headerlink" title="请求参数的绑定"></a>请求参数的绑定</h1><h2 id="1-绑定说明"><a href="#1-绑定说明" class="headerlink" title="1 绑定说明"></a>1 绑定说明</h2><h3 id="1-1-绑定的机制"><a href="#1-1-绑定的机制" class="headerlink" title="1.1 绑定的机制"></a>1.1 绑定的机制</h3><ol>
<li><p>我们都知道，前端页面中表单的请求参数默认是以 <code>key=value</code> 的格式传输的。</p>
<ul>
<li>  HTML中表单默认的传输数据类型 <code>&lt;form enctype=&quot;application/x-www-form-urlencoded&quot;&gt;</code></li>
</ul>
</li>
<li><p>SpringMVC 中，绑定请求参数就是把表单提交的数据赋值给 Controller 中接口方法的形参。也就是将表单中请求参数的 key 和 Controller 中接口方法的形参名进行映射。</p>
</li>
</ol>
<h3 id="1-2-支持绑定的数据类型"><a href="#1-2-支持绑定的数据类型" class="headerlink" title="1.2 支持绑定的数据类型"></a>1.2 支持绑定的数据类型</h3><ul>
<li>  基本类型 &amp; String 类型</li>
<li>  POJO 类型参数：包括实体类，以及关联的实体类</li>
<li>  数组和集合类型参数：包括List结构和Map结构的集合（包括数组）</li>
</ul>
<hr>
<h2 id="2-自动绑定"><a href="#2-自动绑定" class="headerlink" title="2 自动绑定"></a>2 自动绑定</h2><p>SpringMVC 支持请求参数的自动绑定机制，但前提是请求参数必须 SpringMVC 制定的标准。</p>
<h3 id="2-1-原理"><a href="#2-1-原理" class="headerlink" title="2.1 原理"></a>2.1 原理</h3><ol>
<li><p>如果是<strong>基本类型或 String 类型</strong>：</p>
<ul>
<li>要求我们的请求参数的 key 必须和 Controller 中接口方法的形参名称一致。（严格区分大小写）</li>
</ul>
</li>
<li><p>如果是 <strong>POJO 类型</strong>，或者它的关联对象：</p>
<ul>
<li>要求 Controller 中方法对应的参数类型是 POJO 类型。</li>
<li>并且要求 POJO 类提供公共的 setXxx() 方法。</li>
<li>注意：表单中请求参数的 key 要和 setXxx() 方法中的 xxx 保持一致。</li>
</ul>
</li>
<li><p>如果是<strong>集合类型</strong>，有2种方式：</p>
<ul>
<li><p>第1种：集合类型的请求参数在 POJO 中。</p>
<ul>
<li>此时，要求表单中的请求参数的 key 和 POJO 中集合的 setXxx() 方法中的 xxx 名称相同。</li>
<li>给 List 形式的集合中的元素赋值，使用下标。</li>
<li>给 Map 形式的集合中的元素赋值，使用键值对。</li>
</ul>
</li>
<li><p>第2种：接收的请求参数是 json 格式数据。</p>
<ul>
<li>  接收 json 字符串之后，使用 json 转换工具将 json 字符串转换成对应的 POJO 对象。</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="2-2-代码演示"><a href="#2-2-代码演示" class="headerlink" title="2.2 代码演示"></a>2.2 代码演示</h3><h4 id="1、基本类型-String类型的请求参数"><a href="#1、基本类型-String类型的请求参数" class="headerlink" title="1、基本类型/String类型的请求参数"></a>1、基本类型/String类型的请求参数</h4><ol>
<li><p>客户端请求页面：<code>index.jsp</code></p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交POST请求&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	在index.jsp页面中键入：</span><br><span class="line">		username=zhangsan, password=<span class="number">123456</span></span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Controller</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC： &quot;</span>+username+<span class="string">&quot;=&quot;</span>+password);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	控制台输出：</span></span><br><span class="line"><span class="comment">		Hello SpringMVC： zhangsan=123456</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="2、POJO-类型的请求参数"><a href="#2、POJO-类型的请求参数" class="headerlink" title="2、POJO 类型的请求参数"></a>2、POJO 类型的请求参数</h4><ol>
<li><p>实体类代码</p>
<ul>
<li>  Account类</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 账户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Float money;</span><br><span class="line">    <span class="comment">// 省略 getter、setter、toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  User类</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="keyword">private</span> Account account;	<span class="comment">// 关联的实体类</span></span><br><span class="line">    <span class="comment">// 省略 getter、setter、toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li><p>客户端浏览器<code>index.jsp</code>代码</p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;请求参数的绑定（User类型及关联的Account实体类）&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/saveUser&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        性别：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;gender&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;account.username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;account.password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        余额：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;account.money&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>Controller 层代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;saveUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveAccount</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">执行结果：</span></span><br><span class="line"><span class="comment">	User&#123;name=&#x27;张三&#x27;, gender=&#x27;男&#x27;, age=&#x27;29&#x27;, </span></span><br><span class="line"><span class="comment">		account=Account&#123;username=&#x27;zhangsan@qq.com&#x27;, password=&#x27;123&#x27;, money=666.66&#125;&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="3、POJO类中包含集合类型参数"><a href="#3、POJO类中包含集合类型参数" class="headerlink" title="3、POJO类中包含集合类型参数"></a>3、POJO类中包含集合类型参数</h4><blockquote>
<ol>
<li> 实体类代码</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Account&gt; map;</span><br><span class="line">	<span class="comment">// get&amp;set</span></span><br><span class="line">    <span class="comment">// toString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<ol start="2">
<li> 客户端浏览器<code>index.jsp</code>代码</li>
</ol>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>请求参数的绑定（POJO类中包含集合类型参数）<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/saveUser&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        用户姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        用户性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        用户年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        账户名1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list[0].username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户密码1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list[0].password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户余额1：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;list[0].money&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        账户名2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;map[&#x27;one&#x27;].username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户密码2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;map[&#x27;one&#x27;].password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        账户余额2：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;map[&#x27;one&#x27;].money&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="3">
<li> 控制器代码</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;saveUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveAccount</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">     System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果：</span></span><br><span class="line"><span class="comment">	User&#123;name=&#x27;张三&#x27;, gender=&#x27;男&#x27;, age=&#x27;29&#x27;, </span></span><br><span class="line"><span class="comment">	list=[Account&#123;username=&#x27;zhangsan@qq.com&#x27;, password=&#x27;123&#x27;, money=66.6&#125;], </span></span><br><span class="line"><span class="comment">	map=&#123;one=Account&#123;username=&#x27;zhangsan@163.com&#x27;, password=&#x27;456&#x27;, money=0.63&#125;&#125;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>




<hr>
<h3 id="2-3-请求参数乱码问题"><a href="#2-3-请求参数乱码问题" class="headerlink" title="2.3 请求参数乱码问题"></a>2.3 请求参数乱码问题</h3><h4 id="Q1：POST-请求参数中文乱码的问题"><a href="#Q1：POST-请求参数中文乱码的问题" class="headerlink" title="Q1：POST 请求参数中文乱码的问题"></a>Q1：POST 请求参数中文乱码的问题</h4><blockquote>
<p>  <strong>问题</strong></p>
</blockquote>
<p>当请求参数为中文时，</p>
<ul>
<li>如果使用 GET 请求，不会出现乱码的问题，</li>
<li>但是当我们使用 POST 请求时，则会出现中文乱码的问题。</li>
</ul>
<blockquote>
<p>  <strong>解决思路：</strong></p>
</blockquote>
<ul>
<li>添加一个过滤器 Filter，将所有的请求和响应消息的编码都设置为 UTF-8。</li>
<li>同理，也可以考虑使用 SpringMVC 特有的 HandlerInterceptor 来实现。</li>
</ul>
<blockquote>
<p>  <strong>解决方案：</strong></p>
</blockquote>
<ul>
<li>  在配置文件 web.xml 中添加一个过滤器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册编码过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置CharacterEncodingFilter过滤器中的属性值encoding=utf-8 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 启动过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>setEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>   <span class="comment">&lt;!--过滤所有请求--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>





<hr>
<h3 id="2-4-接收Servlet原生的API作为方法参数"><a href="#2-4-接收Servlet原生的API作为方法参数" class="headerlink" title="2.4 接收Servlet原生的API作为方法参数"></a>2.4 接收Servlet原生的API作为方法参数</h3><p>SpringMVC 还支持使用原生的 Servlet API 对象作为 controller 中接口方法的入参。支持的原生 Servlet API 对象包括：</p>
<ul>
<li>  <code>HttpServletRequest</code></li>
<li>  <code>HttpServletResponse</code></li>
<li>  <code>HttpSession</code></li>
<li>  <code>java.security.Principal</code></li>
<li>  <code>Locale</code></li>
<li>  <code>InputStream</code></li>
<li>  <code>OutputStream</code></li>
<li>  <code>Reader</code></li>
<li>  <code>Writer</code></li>
</ul>
<p>上述对象，都可以直接映射到 Controller 中的方法的同名形参上。</p>
<h4 id="部分示例代码："><a href="#部分示例代码：" class="headerlink" title="部分示例代码："></a>部分示例代码：</h4><ol>
<li><p>客户端浏览器的访问请求代码：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--原始ServletAPI作为控制器参数--&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testServletAPI&quot;</span>&gt;测试访问ServletAPI&lt;/a&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testServletAPI&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testServletAPI</span><span class="params">(HttpServletRequest request, HttpSession session)</span>&#123;</span><br><span class="line">        System.out.println(request);</span><br><span class="line">        System.out.println(session);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">		org.apache.catalina.connector.RequestFacade@2d9079c9</span></span><br><span class="line"><span class="comment">		org.apache.catalina.session.StandardSessionFacade@4be66770</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="3-通过注解绑定"><a href="#3-通过注解绑定" class="headerlink" title="3 通过注解绑定"></a>3 通过注解绑定</h2><p>HTTP 请求中能够携带请求参数的地方无非就三个地方：</p>
<ul>
<li>  在 GET 请求的 URL 中拼接请求参数；</li>
<li>  在 GET 请求中使用占位符携带请求参数；</li>
<li>  在 POST 请求的请求体中携带请求参数。</li>
</ul>
<p>针对这三个地方的请求数据，SpringMVC 分别提供了 @RequestParam、@PathVariable 和 @RequestBody 三个注解进行请求参数的解析。</p>
<h3 id="1-RequestParam"><a href="#1-RequestParam" class="headerlink" title="1 @RequestParam"></a>1 @RequestParam</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li>  <strong>作用</strong>：把 HTTP 请求中指定名称的请求参数赋值给 Controller 中接口方法的形参（此时不强制要求请求参数的名称与 Controller 方法中形参的名称相同）。</li>
<li>属性：<ul>
<li>  <code>value</code>：HTTP 请求消息中参数的 key。</li>
<li>  <code>required</code>：请求参数中是否必须提供此参数（默认为True）。</li>
</ul>
</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--requestParam注解的使用--&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testRequestParam?name=张三&quot;</span>&gt;</span><br><span class="line">    测试RequestParam注解</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;br&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testRequestParam&quot;)</span>		</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;name&quot;)</span> String username)</span>&#123;	<span class="comment">// 将请求参数中的name赋值给本方法的username参数</span></span><br><span class="line">        System.out.println(username);	<span class="comment">// 张三</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li>  如果此时 HTTP 请求的请求参数中没有 key 为 name 的属性，得到的 username 不是 null，而是会直接报错：400 – Bad Request。</li>
<li>  如果想要得到结果为 null，则需要设置：<code>@RequestParam(value = &quot;name&quot;, required = false)</code></li>
</ul>
</li>
</ol>
<hr>
<h3 id="2-RequestBody"><a href="#2-RequestBody" class="headerlink" title="2 @RequestBody"></a>2 @RequestBody</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li><p>作用：</p>
<ul>
<li>  <strong>用于获取 POST 请求消息中请求体的内容，GET 请求方式不适用。</strong></li>
<li>  直接使用得到的是 <code>key=value&amp;key=value......</code> 结构的 String 类型的数据。</li>
</ul>
</li>
<li><p>属性：</p>
<ul>
<li>  <code>required</code>：是否必须有请求体（默认为True）。    -   如果 required=true，GET 请求方式会报错。    -   如果 required=false，GET 请求不会报错，但是 Controller 中接口方法得到数据是 null。</li>
</ul>
</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--RequestBody注解测试--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/testRequestBody&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    用户性别：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;gender&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    用户年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testRequestBody&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody(required = false)</span> String body)</span>&#123;	<span class="comment">// 此处的变量名可以自定义</span></span><br><span class="line">        System.out.println(body);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">		name=zs&amp;gender=nan&amp;age=29</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="3-PathVaribale"><a href="#3-PathVaribale" class="headerlink" title="3 @PathVaribale"></a>3 @PathVaribale</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li>  作用：</li>
<li>用于绑定 HTTP 请求中请求 URL 中的占位符。</li>
<li>例如，<code>$&#123;pageContext.request.contextPath&#125;/delete/&#123;id&#125;</code> 请求 URL 中的 <code>&#123;id&#125;</code> 就是占位符。</li>
<li>URL 占位符是 Spring3.0+ 之后加入的。是 SpringMVC 支持 Restful 风格 URL 的一个重要标志。</li>
<li>  属性：</li>
<li><code>value</code>：用于指定 URL 中占位符名称。</li>
<li><code>required</code>：是否必须提供占位符。</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--PathVariable注解测试--%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testPathVariable/lisi&quot;</span>&gt;测试PathVariable注解&lt;/a&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testPathVariable/&#123;name&#125;&quot;)</span><span class="comment">//从请求URL中截取部分作为请求参数传递</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span>&#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行结果：lisi</span></span><br><span class="line"><span class="comment">* /</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="4-ModelAttribute"><a href="#4-ModelAttribute" class="headerlink" title="4 @ModelAttribute"></a>4 @ModelAttribute</h3><blockquote>
<p>  <strong>使用说明</strong></p>
</blockquote>
<ul>
<li><p>  作用：</p>
</li>
<li><p>该注解是 SpringMVC4.3 版本之后新加入的，它可以用于<strong>修饰方法和参数</strong>。</p>
</li>
<li><p>在方法上使用时，被该注解修饰的方法会先于本该被执行的方法执行。</p>
</li>
<li><p>在参数上使用时，表示使用 HTTP 请求中指定的数据给参数赋值。</p>
</li>
<li><p>  属性：</p>
</li>
<li><p><code>value</code>：用于获取数据的 key。[key可以是POJO的属性名称，也可以是Map结构的key]</p>
</li>
<li><p>  应用场景：</p>
</li>
<li><p>当表单提交的数据不是完整的实体类数据时，可以保证没有提交数据的字段使用数据库对象中原有的数据。</p>
</li>
<li><p>例如：当我们在编辑一个用户时，用户有一个创建信息字段，该字段的值是不被允许修改的。在表单提交数据时，是肯定没有此字段的内容，此时，正常情况下，一旦更新用户数据就会把该字段内容置位 null，这时就可以使用此注解保留原始数据中该字段的内容。</p>
</li>
</ul>
<blockquote>
<p>  <strong>使用示例</strong></p>
</blockquote>
<h4 id="Case1：-ModelAttribute-修饰方法"><a href="#Case1：-ModelAttribute-修饰方法" class="headerlink" title="Case1：@ModelAttribute 修饰方法"></a>Case1：@ModelAttribute 修饰方法</h4><p>需求：要求修改用户信息，但是用户的名不能被修改</p>
<ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ModelAttribute注解测试--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/updateUser&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户编号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    用户性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    用户年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在表单页面键入：id=01，gender=男，age=23。</p>
</li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 该方法会先于本该执行的方法执行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  从数据库中查询到的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ModelAttribute</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">showUser</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        <span class="comment">// 模拟查询数据库</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> findUserById(id);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模拟根据id从数据库中查询数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUserById</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;根据id从数据库中查询数据并返回：&quot;</span>+id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;管理员&quot;</span>);</span><br><span class="line">        user.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        user.setAge(<span class="string">&quot;46&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;updateUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果：User&#123;name=&#x27;管理员&#x27;, gender=&#x27;男&#x27;, age=&#x27;23&#x27;, list=null, map=null&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">分析：</span><br><span class="line">   </span><br><span class="line">   -   在 updateUser 方法中，用户上传的数据只有 `id`、`gender` 和 `age` 字段，但是输出结果中却还有 `name` 字段，是因为 `name` 属性沿用了数据库中的数据。</span><br><span class="line">   -   使用 `@ModelAttribute` 注解提前从数据库中获取 user 对象，然后再将用户新提交的数据赋值给 user 对象，这时新提交的数据将会覆盖原先 user 对象中对应的字段，而剩余的字段将会沿用从数据库中取出的 user 对象中的值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### Case2：@ModelAttribute 修饰参数</span><br><span class="line"></span><br><span class="line">需求：要求修改用户信息，但是用户的用户名不能被修改</span><br><span class="line"></span><br><span class="line">1. 客户端浏览器的请求页面：`index.jsp`</span><br><span class="line"></span><br><span class="line">   ```xml</span><br><span class="line">   &lt;!-- 修改用户信息 --&gt;</span><br><span class="line">   &lt;form action=&quot;$&#123;pageContext.request.contextPath&#125;/user/updateUser&quot; method=&quot;post&quot;&gt;</span><br><span class="line">       用户编号：&lt;input type=&quot;text&quot; name=&quot;id&quot;/&gt;&lt;br&gt;</span><br><span class="line">       用户性别：&lt;input type=&quot;text&quot; name=&quot;gender&quot;/&gt;&lt;br&gt;</span><br><span class="line">       用户年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot;/&gt;&lt;br&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</span><br><span class="line">   &lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;userController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 该方法会先执行,</span></span><br><span class="line"><span class="comment">     * 根据ID从数据库中查询用户，并将用户存入Map集合中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ModelAttribute</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showUser</span><span class="params">(Integer id, Map&lt;String, User&gt; map)</span>&#123;</span><br><span class="line">        <span class="comment">// 模拟查询数据库</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> findUserById(id);</span><br><span class="line">        map.put(<span class="string">&quot;abc&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;updateUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">(<span class="meta">@ModelAttribute(&quot;abc&quot;)</span> User user)</span>&#123; <span class="comment">// 根据Map集合的key获取value，并给user参数赋值</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模拟根据id从数据库中查询数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUserById</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;根据id从数据库中查询数据并返回：&quot;</span>+id);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;管理员&quot;</span>);</span><br><span class="line">        user.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        user.setAge(<span class="string">&quot;46&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h1><h2 id="1-RequestMapping注解"><a href="#1-RequestMapping注解" class="headerlink" title="1 @RequestMapping注解"></a>1 @RequestMapping注解</h2><h3 id="1-1-说明"><a href="#1-1-说明" class="headerlink" title="1.1 说明"></a>1.1 说明</h3><p><strong>作用：</strong>用于建立请求 URL 和处理请求的方法之间的联系。[HandlerMapping 的管辖范围]</p>
<p><strong>使用位置：</strong></p>
<ul>
<li><p>类上</p>
<ul>
<li>  请求 URL 的第一级访问目录。此处不写的话，就相当于 URL 为工程路径下的根目录，写的话需要以 <code>/</code> 开头。</li>
<li>  它出现的目的是为了使我们的 URL 可以按照模块化管理。例如：</li>
</ul>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">账户模块：</span><br><span class="line">	/account/add</span><br><span class="line">	/account/update</span><br><span class="line">	...</span><br><span class="line">订单模块:</span><br><span class="line">	/order/add</span><br><span class="line">	/order/update</span><br><span class="line">	...</span><br><span class="line">......</span><br></pre></td></tr></table></figure></li>
<li><p>  方法上：请求 URL 的第二级访问目录。</p>
</li>
</ul>
<p><strong>属性：</strong></p>
<ul>
<li><p><code>value[]</code>：用于限定请求的 URL，和 <code>path</code> 属性的作用是一样的。只有这一个属性时可以省略 key。</p>
</li>
<li><p><code>path[]</code>：用于限定请求的 URL，和 <code>value</code> 属性的作用是一样的。只有这一个属性时可以省略key。</p>
</li>
<li><p><code>method[]</code>：用于限定请求的方式。</p>
</li>
<li><p><code>params[]</code>：用于限定请求参数。它支持简单的表达式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例如：</span></span><br><span class="line">params = &#123;<span class="string">&quot;username&quot;</span>&#125;	<span class="comment">// 要求参数中必须有`username`。</span></span><br><span class="line">params = &#123;<span class="string">&quot;password != 123&quot;</span>&#125;;	<span class="comment">// 要求参数中必须有`password`，且对应的value不能为`123`。</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>headers</code>：用于限定请求消息的请求头。</p>
</li>
</ul>
<hr>
<h3 id="1-2-示例"><a href="#1-2-示例" class="headerlink" title="1.2 示例"></a>1.2 示例</h3><h4 id="1、value-path-属性测试"><a href="#1、value-path-属性测试" class="headerlink" title="1、value/path 属性测试"></a>1、value/path 属性测试</h4><ul>
<li>控制器代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/the&quot;)</span>                     <span class="comment">// 一级路径</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span>               <span class="comment">// 二级路径</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>客户端浏览器<code>jsp</code>中的代码</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">    </span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;SpringMVC入门案例&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">    &lt;!--第<span class="number">1</span>种查询方式--&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span>&gt;SpringMVC入门案例&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">---------------------------------&lt;!--等价于--&gt;-------------------------------------</span><br><span class="line">	&lt;!--第<span class="number">2</span>种查询方式--&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;the/hello&quot;</span>&gt;SpringMVC入门案例&lt;/a&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">	当我们使用第<span class="number">2</span>种方式配置时，一定不要在URL前面加`/`，否则无法找到资源</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>





<h4 id="2、method属性测试"><a href="#2、method属性测试" class="headerlink" title="2、method属性测试"></a>2、method属性测试</h4><blockquote>
<p>  <strong>源码</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// method的取值类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RequestMethod</span> &#123;</span><br><span class="line">	GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS, TRACE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li><p>控制器代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &amp;quot;/the&amp;quot;, method = &#123;RequestMethod.POST&#125;)</span>	<span class="comment">// 请求方式限定为POST</span></span><br><span class="line"><span class="meta">@Controller(value = &amp;quot;helloController&amp;quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&amp;quot;/hello&amp;quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(&amp;quot;Hello SpringMVC&amp;quot;);</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;success&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  限定了请求方式后，如果继续以 GET 请求的方式请求服务器资源，会出现：<strong>HTTP Status 405 – Method Not Allowed</strong> 错误。表示方法不支持 GET 请求。</li>
</ul>
</li>
</ol>
<p><img src="/2020/08/28/SpringMVC/image-20200713101251171.png" alt="image-20200713101251171"></p>
<ol start="2">
<li> 改造 <code>index.jsp</code> 代码：修改 GET 请求为 POST 请求。</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;SpringMVC入门案例&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;the/hello&quot;</span>&gt;SpringMVC入门案例（GET请求）&lt;/a&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交POST请求&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">	当使用GET请求时，会出现<span class="number">405</span>访问异常；</span><br><span class="line">	当使用POST请求时，可以成功访问到资源</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3、params属性测试"><a href="#3、params属性测试" class="headerlink" title="3、params属性测试"></a>3、params属性测试</h4><ol>
<li><p>控制器的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数中必须有`username`和`password`，且`password`的值不能为`123`；</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;, params = &#123;&quot;username&quot;, &quot;password!=123&quot;&#125;)</span>	</span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>index.jsp</code>的代码</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;入门案例&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交POST请求&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>当我们在<code>index.jsp</code>页面键入<code>username</code>和<code>password</code>后，如果<code>password</code>的值不为<code>123</code>，则可以成功请求到服务器资源。</p>
</li>
<li><p>如果<code>password</code>的值键入<code>123</code>，则会出现下述错误：**<code>400-Bad Request</code>**，</p>
<p><img src="/2020/08/28/SpringMVC/image-20200713102859647.png" alt="image-20200713102859647"></p>
</li>
</ul>
</li>
</ol>
<h4 id="4、headers属性测试"><a href="#4、headers属性测试" class="headerlink" title="4、headers属性测试"></a>4、headers属性测试</h4><ol>
<li><p>HTTP Request Headers Demo</p>
 <figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Request Headers</span><br><span class="line">    Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span><br><span class="line">    Accept-Encoding:gzip, deflate, sdch</span><br><span class="line">    Accept-Language:zh-CN,zh;q=0.8</span><br><span class="line">    Cache-Control:max-age=0</span><br><span class="line">    Connection:keep-alive</span><br><span class="line">    Cookie:JSESSIONID=210075B5E521CWE3CDE938076295A57A</span><br><span class="line">    Host:localhost:8080</span><br><span class="line">    Upgrade-Insecure-Requests:1</span><br><span class="line">    User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93</span><br></pre></td></tr></table></figure></li>
<li><p>Controller中的代码</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span>	</span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="comment">// 限定请求头中的IP信息和端口信息。这里是只接收本机8080端口传来的请求</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;, headers=&quot;Host=localhost:8080&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello SpringMVC&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="2-HiddenHttpMethodFilter"><a href="#2-HiddenHttpMethodFilter" class="headerlink" title="2 HiddenHttpMethodFilter"></a>2 HiddenHttpMethodFilter</h2><p><strong>作用：</strong></p>
<ul>
<li>  由于 HTML 页面的 form 表单只支持 GET 和 POST 请求，并不支持 DELETE、PUT 等提交方式。所以 Spring 在 3.0 版本新增了一个过滤器，这个过滤器的作用就是拦截浏览器的 GET 和 POST 请求，并将请求方式修改写为服务器指定的请求方式（如 Delete、Put 等）后再发送给我们的处理器 Controller。</li>
<li>  <strong>HiddenHttpMethodFilter</strong>：隐藏 HTTP 请求方式的过滤器，就是通过过滤器，将 GET/POST 请求转换为 PUT、DELETE 等请求方式。</li>
</ul>
<hr>
<h2 id="3-RequestHeader"><a href="#3-RequestHeader" class="headerlink" title="3 @RequestHeader"></a>3 @RequestHeader</h2><h3 id="3-1-使用说明"><a href="#3-1-使用说明" class="headerlink" title="3.1 使用说明"></a>3.1 使用说明</h3><ul>
<li>  <strong>作用</strong>：用于获取请求消息中的请求头数据。</li>
<li><strong>属性</strong>：<ul>
<li>  <code>value</code>：提供请求头的 key 名称。</li>
</ul>
</li>
</ul>
<h3 id="3-2-使用示例"><a href="#3-2-使用示例" class="headerlink" title="3.2 使用示例"></a>3.2 使用示例</h3><ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--RequestHeader注解测试--&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testRequestHeader&quot;</span>&gt;测试获取请求消息的请求头&lt;/a&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>控制器中的代码：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testRequestHeader&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@RequestHeader(value = &quot;User-Agent&quot;, required = false)</span> String userAgent)</span>&#123;</span><br><span class="line">        System.out.println(userAgent);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：</span></span><br><span class="line"><span class="comment">		Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="4-CookieValue"><a href="#4-CookieValue" class="headerlink" title="4 @CookieValue"></a>4 @CookieValue</h2><h3 id="4-1-使用说明"><a href="#4-1-使用说明" class="headerlink" title="4.1 使用说明"></a>4.1 使用说明</h3><ul>
<li><p><strong>作用</strong>：客户端在首次访问服务器时，服务器会将一次会话间的共享数据以键值对的形式响应并保存在客户端，这就是 cookie 缓存。在本次会话中，客户端继续向服务器发送请求时，请求头中会携带 cookie 缓存的数据。</p>
<ul>
<li>  <code>@CookieValue</code> 注解的作用就是通过 key 获取 cookie 中的 value。</li>
</ul>
</li>
<li><p><strong>属性</strong>：</p>
<ul>
<li>  <code>value</code>：指定 cookie 的 key 的名称。</li>
<li>  <code>required</code>：是否必须有此 cookie。</li>
</ul>
</li>
</ul>
<h3 id="4-2-使用示例"><a href="#4-2-使用示例" class="headerlink" title="4.2 使用示例"></a>4.2 使用示例</h3><ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--CookieValue注解测试--%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testCookieValue&quot;</span>&gt;</span><br><span class="line">    获取指定键名称的Cookie的值</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;br&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testCookieValue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@CookieValue(value = &quot;JSESSIONID&quot;, required = false)</span> String cookieValue)</span>&#123;</span><br><span class="line">        System.out.println(cookieValue);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	输出结果：6B73CA84FD25F96DA4FA530DC8481550</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-SessionAttribute"><a href="#5-SessionAttribute" class="headerlink" title="5 @SessionAttribute"></a>5 @SessionAttribute</h2><h3 id="5-1-使用说明"><a href="#5-1-使用说明" class="headerlink" title="5.1 使用说明"></a>5.1 使用说明</h3><ul>
<li><p>  <strong>作用</strong>：操作一个 Session 域中共享的数据</p>
</li>
<li><p><strong>属性</strong>：</p>
<ul>
<li>  <code>value</code>：用于指定存入 session 域的属性名称</li>
<li>  <code>type</code>：用于指定存入 session 域的数据类型</li>
</ul>
</li>
</ul>
<h3 id="5-2-使用示例"><a href="#5-2-使用示例" class="headerlink" title="5.2 使用示例"></a>5.2 使用示例</h3><ol>
<li><p>客户端浏览器的请求页面：<code>index.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;SessionAttribute注解测试&lt;/h3&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testPut&quot;</span>&gt;将数据存入Session域中&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testGet&quot;</span>&gt;将数据从Session域中取出&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/the/testClean&quot;</span>&gt;将数据从Session域中删除&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/the&quot;)</span></span><br><span class="line"><span class="meta">@Controller(value = &quot;helloController&quot;)</span></span><br><span class="line"><span class="meta">@SessionAttributes(value = &#123;&quot;username&quot;,&quot;password&quot;&#125;,types = &#123;Integer.class&#125;)</span>	<span class="comment">// 注解中的属性表示存入SessionAttribute中的第1、2个属性名为`username`和`password`，第3个属性的类型为Integer类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 把数据存入SessionAttribute中【即存入Session域中】</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model：Model 是 Spring 提供的一个接口，该接口有一个实现类 ExtendModelMap，该类继承了ModelMap</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testPut&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPut</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">// 将数据保存到SessionAttribute中</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;泰斯特&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;age&quot;</span>,<span class="number">31</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;数据保存成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ModelMap 是 Model 接口的一个实现类，Model 接口中没有get方法，ModelMap 中有get方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> model</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testGet&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testGet</span><span class="params">(ModelMap model)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) model.get(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> (String) model.get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> (Integer) model.get(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        System.out.println(username+<span class="string">&quot;:&quot;</span>+password+<span class="string">&quot;:&quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 清除SessionAttribute中的全部缓存数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sessionStatus</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testClean&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testClean</span><span class="params">(SessionStatus sessionStatus)</span>&#123;</span><br><span class="line">        sessionStatus.setComplete();</span><br><span class="line">        System.out.println(<span class="string">&quot;格式化Session域成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="6-ResponseBody"><a href="#6-ResponseBody" class="headerlink" title="6 @ResponseBody"></a>6 @ResponseBody</h2><ul>
<li>见下一章 <code>@ResponseBody注解</code></li>
</ul>
<hr>
<h1 id="响应数据和结果视图"><a href="#响应数据和结果视图" class="headerlink" title="响应数据和结果视图"></a>响应数据和结果视图</h1><h2 id="1-返回值分类"><a href="#1-返回值分类" class="headerlink" title="1 返回值分类"></a>1 返回值分类</h2><h3 id="1-1-返回值为：字符串"><a href="#1-1-返回值为：字符串" class="headerlink" title="1.1 返回值为：字符串"></a>1.1 返回值为：字符串</h3><p>处理器（Controller）中方法的返回值如果是 String 类型：</p>
<ul>
<li>  可以返回逻辑视图名称，再通过 ViewResolver 视图解析器拼接为物理视图地址。</li>
<li>  可以直接返回 String 字符串字面量给客户端（+<code>@ResponseBody</code>注解即可实现）。</li>
</ul>
<p><strong>测试：</strong></p>
<ol>
<li><p>客户端：<code>index.jsp</code>页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;主页&lt;/h3&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/returnValue/testReturnString&quot;</span>&gt;testReturnString&lt;/a&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>服务器中的 Controller 模块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testReturnString&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testReturnString</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testReturnString方法执行了&quot;</span>);</span><br><span class="line">        <span class="comment">// 模拟从数据库查询数据</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;里番&quot;</span>);</span><br><span class="line">        user.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加到SessionAttribute域</span></span><br><span class="line">        model.addAttribute(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  Controller 方法返回值字符串指定逻辑视图为 <code>success</code>；经过 ViewResolver 解析后的物理视图地址为 <code>/WEB-INF/pages/success.jsp</code>，并将 jsp 页面经 View 渲染后响应给用户。</li>
</ul>
</li>
<li><p>跳转到的页面：<code>success.jsp</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;执行成功&lt;/h3&gt;</span><br><span class="line">    $&#123;user.name&#125;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    $&#123;user.gender&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="1-2-返回值为：void"><a href="#1-2-返回值为：void" class="headerlink" title="1.2 返回值为：void"></a>1.2 返回值为：void</h3><p>我们已经知道 Servlet 原生 API 可以作为控制器 Controller 中方法的参数。当返回值为 void 时，我们可以使用 <code>Request</code> 对象中的转发方法或 <code>Response</code> 对象中的重定向方法给用户响应结果视图。</p>
<ol>
<li><p>客户端：<code>index.jsp</code>页面</p>
<ul>
<li>同上</li>
</ul>
</li>
<li><p>服务器中的 Controller 模块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testReturnVoid&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testReturnVoid</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testReturnVoid方法执行了&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.使用Request对象转发到指定页面</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/pages/success.jsp&quot;</span>).forward(request,response);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.使用Response对象重定向到指定页面【用户无法直接访问WEB-INF目录下的静态资源】</span></span><br><span class="line">        <span class="comment">// response.sendRedirect(&quot;/D02/index.jsp&quot;);		// 或</span></span><br><span class="line">        response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以通过Response对象直接在当前页面展示数据，并响应数据给用户浏览器</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;&lt;h3&gt;你好&lt;/h3&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	以上3种方式同时只能运行一种</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p>跳转到的页面：<code>success.jsp</code></p>
<ul>
<li>同上</li>
</ul>
</li>
</ol>
<hr>
<h3 id="1-3-返回值为：ModelAndView"><a href="#1-3-返回值为：ModelAndView" class="headerlink" title="1.3 返回值为：ModelAndView"></a>1.3 返回值为：ModelAndView</h3><p><code>ModelAndView</code> 是 SpringMVC 提供的一个内置类，该类的实例对象也可以当作控制器方法的返回值。</p>
<ol>
<li><p>客户端：<code>index.jsp</code>页面</p>
<ul>
<li>同上</li>
</ul>
</li>
<li><p>服务器中的Controller模块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;testReturnModelAndView&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">testReturnModelAndView</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testReturnModelAndView方法被执行了&quot;</span>);</span><br><span class="line">        <span class="comment">// 创建ModelAndView对象</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">// 将数据添加到 mv 对象中</span></span><br><span class="line">        mv.addObject(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="comment">// 响应给客户端浏览器视图View的逻辑地址</span></span><br><span class="line">        mv.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>跳转到的页面：<code>success.jsp</code></p>
<ul>
<li>同上</li>
</ul>
</li>
</ol>
<hr>
<h2 id="2-转发和重定向"><a href="#2-转发和重定向" class="headerlink" title="2 转发和重定向"></a>2 转发和重定向</h2><h3 id="2-1-forward转发"><a href="#2-1-forward转发" class="headerlink" title="2.1 forward转发"></a>2.1 forward转发</h3><p>Controller 中的方法在将返回值设置为 String 类型时，默认就是请求转发。当然我们也可以显式声明：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testForward&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testForward</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testForward方法执行了&quot;</span>);</span><br><span class="line"><span class="comment">//        return &quot;success&quot;; // 默认方式</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/WEB-INF/pages/success.jsp&quot;</span>; <span class="comment">// 显式声明</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	需要注意的是：如果用了`forward`；则路径必须写成物理视图的地址，而不能写成逻辑视图名称。</span></span><br><span class="line"><span class="comment">	它相于：</span></span><br><span class="line"><span class="comment">&quot;request.getRequestDispatcher(&quot;/WEBINF/pages/success.jsp&quot;).forward(request,response);&quot;</span></span><br><span class="line"><span class="comment">	使用请求转发，既可以转发到jsp，也可以转发到控制器Controller中的其它方法。	</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意事项：</p>
<ol>
<li>如果使用 <code>forward</code> 关键字显式指定转发；则转发路径必须写成完整的视图地址，而不能写成逻辑视图名称。</li>
<li>使用请求转发，既可以转发到 jsp 页面，也可以转发到 Controller 中的其它方法。</li>
</ol>
</li>
</ul>
<hr>
<h3 id="2-2-Redirect重定向"><a href="#2-2-Redirect重定向" class="headerlink" title="2.2 Redirect重定向"></a>2.2 Redirect重定向</h3><p>Controller 控制器中的方法在将返回值设置为 String 类型时，默认就是请求转发，当然也可以手动将其设置为重定向。</p>
<p>Controller 控制器中的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/returnValue&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReturnValue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testRedirect&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRedirect</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testRedirect方法执行了&quot;</span>);</span><br><span class="line"><span class="comment">//        return &quot;redirect:/index.jsp&quot;;   // 重定向到jsp页面中</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/returnValue/testForward&quot;</span>;	<span class="comment">// 重定向到Controller控制器中的其它方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 它相当于`response.sendRedirect(url)`。</span></span><br><span class="line"><span class="comment">	* 使用返回值关键字进行跳转时，可以不用添加工程路径，因为SpringMVC框架的底层实现已经帮我们添加过了</span></span><br><span class="line"><span class="comment">	* 需要注意的是：如果重定向到jsp页面，则jsp页面不能写在WEB-INF目录中。</span></span><br><span class="line"><span class="comment">    */</span></span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong></p>
<ul>
<li>  使用返回值关键字进行跳转时，可以不用添加工程路径，因为 SpringMVC 框架的底层实现已经帮我们添加过了。</li>
<li>  使用重定向，既可以转发到 jsp 页面中，也可以转发到任意 Controller 中的任意方法。</li>
<li>  如果重定向到 jsp 页面，则 jsp 页面不能写在 WEB-INF 目录中。</li>
</ul>
<hr>
<h2 id="3-ResponseBody注解"><a href="#3-ResponseBody注解" class="headerlink" title="3 @ResponseBody注解"></a>3 @ResponseBody注解</h2><p><strong>作用</strong>：该注解用于将 Controller 控制器中方法的响应信息（即方法的返回值数据），通过 HttpMessageConvert 接口转换为指定格式的数据（如：json字符串、xml字符串等），再添加到 HTTP 的响应消息 Response 中响应给客户端。</p>
<ul>
<li>  step1： JavaBean –&gt;&gt; json字符串</li>
<li>  step2： json字符串 –&gt;&gt; 客户端</li>
</ul>
<h3 id="3-1-使用示例"><a href="#3-1-使用示例" class="headerlink" title="3.1 使用示例"></a>3.1 使用示例</h3><h4 id="1、需求"><a href="#1、需求" class="headerlink" title="1、需求"></a>1、需求</h4><ul>
<li>客户端向服务器发送 Ajax 异步请求；</li>
<li>服务器执行业务逻辑</li>
<li>服务器使用 @ResponseBody 注解实现将 Controller 中方法的返回值转换为 json 字符串，并响应给客户端。</li>
</ul>
<h4 id="2、SpringMVC-配置访问资源白名单"><a href="#2、SpringMVC-配置访问资源白名单" class="headerlink" title="2、SpringMVC 配置访问资源白名单"></a>2、SpringMVC 配置访问资源白名单</h4><ul>
<li>  <code>&lt;mvc:resources&gt;</code> 标签</li>
<li>  功能：配置静态资源在服务器中的目录以及暴露给客户端访问的 URL</li>
<li>属性：<ul>
<li>  <code>location</code>：服务器 webapp 目录下的的资源路径。</li>
<li>  <code>mapping</code>：客户端访问静态资源时的请求 URL。</li>
</ul>
</li>
</ul>
<p><strong>配置访问资源白名单</strong></p>
<p><img src="/2020/08/28/SpringMVC/SpringMVC%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%AD%E5%BC%95%E5%85%A5%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.png"></p>
<ol>
<li><p>前端控制器 DispatcherServlet 拦截了所有访问服务器资源的请求 URL。</p>
</li>
<li><p>有时候，客户端的打开的请求页面(如 jsp 页面)使用了服务器上的静态资源(如 css/js/images等),以 JQuery 为例，如果请求页面是用 JQuery 写的，而 JQuery 依赖的类库又保存在服务器中的 webapp 目录下，这时我们就需要先拿到 JQuery 的类库，然后客户端浏览器才能看懂(解析)请求页面，才能在请求页面上完成后续操作。</p>
</li>
<li><p>所以我们需要设置一些目录白名单来跳过 DispatherServlet 的拦截，让其可以直接请求到服务器中的资源。</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在SpringMVC.xml文件中配置访问资源白名单--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置静态资源路径。</span></span><br><span class="line"><span class="comment">	location表示资源在webapp下的路径，mapping表示客户端的请求路径，**表示该目录下的文件以及子目录的文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/css/&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/css/**&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/**&quot;</span>/&gt;</span>	<span class="comment">&lt;!--工程路径下的js文件夹中的所有子文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/images/&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/images/**&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	配置完成后，需要在请求页面`index.jsp`中导入JQuery类库的URL(或者叫mapping地址)。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line">------------------------------index.jsp------------------------------------------------</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		导入JQuery依赖；</span></span><br><span class="line"><span class="comment">		src是SpringMVC.xml中&lt;mvc:resources&gt;标签中的的 `mapping`属性 </span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4、JSON-字符串与-JavaBean-的转换"><a href="#4、JSON-字符串与-JavaBean-的转换" class="headerlink" title="4、JSON 字符串与 JavaBean 的转换"></a>4、JSON 字符串与 JavaBean 的转换</h4><p>SpringMVC 默认使用 MappingJacksonHttpMessageConvert 接口实现 json 数据与 JavaBean 之间的转换。需要导入其具体实现工具 <code>jackson</code> 的 jar 包。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入以下3个依赖的目的是：让Spring后台自动将客户端传递的json字符串转换为JavaBean对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3、代码演示"><a href="#3、代码演示" class="headerlink" title="3、代码演示"></a>3、代码演示</h4><ol>
<li><p>使用 <code>index.jsp</code> 向服务器发送异步请求。</p>
<ul>
<li>  这里使用 JQuery 向服务器发送 Ajax 异步请求，所以必须导入 JQuery 类库。</li>
<li>  JQuery 是 JS 框架，其类库是静态资源，我们一般把它放在 <code>webapp/js/jquerymin.js</code> 目录下。</li>
</ul>
 <figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">        &lt;!--导入JQuery依赖--&gt;</span><br><span class="line">        &lt;script src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            <span class="comment">// 页面加载，绑定单击事件</span></span><br><span class="line">            <span class="comment">// 页面加载</span></span><br><span class="line">            $(function () &#123;</span><br><span class="line">                <span class="comment">// 绑定单击事件</span></span><br><span class="line">                $(<span class="string">&quot;#btn&quot;</span>).click(function () &#123;</span><br><span class="line">                    <span class="comment">//发送Ajax请求</span></span><br><span class="line">                    $.ajax(&#123;</span><br><span class="line">                        <span class="comment">// 编写json格式的请求</span></span><br><span class="line">                        url:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/testAjax&quot;</span>,</span><br><span class="line">                        contentType:<span class="string">&quot;application/json;charset=utf-8&quot;</span>,</span><br><span class="line">                        data:<span class="string">&#x27;&#123;&quot;name&quot;:&quot;派大星&quot;,&quot;gender&quot;=&quot;男&quot;,&quot;hobby&quot;=&quot;篮球&quot;&#125;&#x27;</span>,</span><br><span class="line">                        type:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">                        success:function (data) &#123;   <span class="comment">// 回调函数，data：服务器响应的json数据</span></span><br><span class="line">                            alert(data);</span><br><span class="line">                            alert(data.username);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;发送Ajax请求,响应json&quot;</span> id=<span class="string">&quot;btn&quot;</span>&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

</li>
<li><p>控制器 Controller 接收用户的请求，并返回响应结果</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(path = &quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/testAjax&quot;)</span></span><br><span class="line"><span class="comment">//    public void testAjax(@RequestBody String body)&#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> User <span class="title function_">testAjax</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        <span class="comment">// 客户端发送ajax的请求，传的是json字符串，@RequestBody把json字符串封装到user对象中</span></span><br><span class="line">        System.out.println(<span class="string">&quot;异步请求&quot;</span>+user);</span><br><span class="line">        user.setHobby(<span class="string">&quot;海绵宝宝&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  <strong>@RequestBody</strong>：负责接收客户端的请求数据的请求体(的字符串格式)</li>
<li>  <strong>@ResponseBody</strong> 注解：负责将控制器 Controller 中的方法的返回值结果转换为 JSON 格式响应给客户端。</li>
<li>  如果在 Maven 工程中引入 <code>Jackson</code> 相关的依赖，就可以自动完成 JSON 字符串和 JavaBean 对象的互相转换。</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/25/MyBatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/25/MyBatis/" class="post-title-link" itemprop="url">MyBatis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-25 10:02:12" itemprop="dateCreated datePublished" datetime="2020-08-25T10:02:12+08:00">2020-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-06-26 11:14:23" itemprop="dateModified" datetime="2022-06-26T11:14:23+08:00">2022-06-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MyBatis/" itemprop="url" rel="index"><span itemprop="name">MyBatis</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis官方操作文档</a></p>
</blockquote>
<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>MyBatis是一款优秀的持久层框架，用于操作数据库的框架。</p>
<p>MyBatis的底层实现是JDBC代码，再往底层就是JDBC的实现类在起作用。</p>
<h2 id="MyBatis如何操作MySql"><a href="#MyBatis如何操作MySql" class="headerlink" title="MyBatis如何操作MySql"></a>MyBatis如何操作MySql</h2><p><img src="/2020/08/25/MyBatis/MyBatis%E5%A6%82%E4%BD%95%E6%93%8D%E4%BD%9CMySql.png"></p>
<h2 id="MyBatis-vs-JDBC"><a href="#MyBatis-vs-JDBC" class="headerlink" title="MyBatis  vs.  JDBC"></a>MyBatis  vs.  JDBC</h2><ol>
<li><p>数据库连接对象Connection创建、释放频繁，造成系统资源浪费从而影响系统性能，如果使用数据库连接池可解决此问题。</p>
<blockquote>
<p>解决：在<code>SqlMapConfig.xml</code>配置文件中配置数据库连接池，使用连接池管理数据库连接。</p>
</blockquote>
</li>
<li><p>SQL语句写在代码中造成代码不容易维护，实际应用中SQL变化的可能较大，SQL变动需要改变Java代码。</p>
<blockquote>
<p>解决：将SQL语句配置在<code>XxxMapper.xml</code>文件中，与Java代码分离。</p>
</blockquote>
</li>
<li><p>向SQL语句传参麻烦，因为SQL语句中的where条件个数不确定，可能多也可能少，占位符需要和参数对应。</p>
<blockquote>
<p>解决：MyBatis自动将Java对象映射至SQL语句，通过Statement中的parameterType定义输入参数的类型。</p>
</blockquote>
</li>
<li><p>对结果集解析麻烦，SQL变化导致解析代码变化，且解析前需要遍历，如果能将数据库记录封装成POJO对象解析比较方便。</p>
<blockquote>
<p>解决：MyBatis自动将SQL执行结果映射至Java对象，通过Statement中的resultType定义输出结果的类型。</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="1-MyBatis快速入门"><a href="#1-MyBatis快速入门" class="headerlink" title="1    MyBatis快速入门"></a>1    MyBatis快速入门</h1><ul>
<li>案例：查询所有用户信息</li>
</ul>
<h2 id="1-0-创建数据库环境"><a href="#1-0-创建数据库环境" class="headerlink" title="1.0    创建数据库环境"></a>1.0    创建数据库环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `db4`;	-- 创建数据库</span><br><span class="line">USE db4;	-- 使用数据库</span><br><span class="line">CREATE TABLE IF NOT EXISTS USER(	-- 创建user表</span><br><span class="line">	id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">	NAME VARCHAR(20) NOT NULL,</span><br><span class="line">	gender VARCHAR(10) NOT NULL,</span><br><span class="line">	age INT(5),</span><br><span class="line">	address VARCHAR(32),</span><br><span class="line">	qq VARCHAR(32),</span><br><span class="line">	email VARCHAR(50),</span><br><span class="line">	username VARCHAR(20),</span><br><span class="line">	PASSWORD VARCHAR(32)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM USER;	-- 查询user表中的所有信息</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS USER;  -- 删除user表</span><br><span class="line"></span><br><span class="line">-- 插入数据</span><br><span class="line">INSERT INTO USER (id, NAME, gender, age, address, qq, email, username, PASSWORD) </span><br><span class="line">VALUES</span><br><span class="line">-- (2, &quot;李四&quot;, &quot;男&quot;, 24, &quot;湖南&quot;, &quot;9878521&quot;, &quot;9878521@qq.com&quot;,&quot;lsi&quot;, &quot;654321&quot;)</span><br><span class="line">(1, &quot;张三&quot;, &quot;男&quot;, 23, &quot;湖北&quot;, &quot;9875412&quot;, &quot;9875412@qq.com&quot;,&quot;zhangsan&quot;, &quot;123456&quot;)</span><br></pre></td></tr></table></figure>





<h2 id="1-1-搭建MyBatis开发环境"><a href="#1-1-搭建MyBatis开发环境" class="headerlink" title="1.1    搭建MyBatis开发环境"></a>1.1    搭建MyBatis开发环境</h2><h3 id="1-1-1-步骤："><a href="#1-1-1-步骤：" class="headerlink" title="1.1.1    步骤："></a>1.1.1    步骤：</h3><ol>
<li><p>创建Maven工程并导入坐标。</p>
</li>
<li><p>创建实体类和Dao接口。</p>
</li>
<li><p>创建MyBatis的主配置文件。<code>src/main/resource/sqlMapConfig.xml</code></p>
<ul>
<li><code>SqlMapConfig.xml</code></li>
</ul>
</li>
<li><p>创建映射配置文件。<code>cn/xsyu/dao/UserDao.xml</code></p>
<ul>
<li><code>UserDao.xml</code></li>
</ul>
<hr>
</li>
<li><p>主配置文件<code>SqlMapConfig.xml</code>的约束</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span>  </span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>映射配置文件<code>UserMapper.xml</code>的约束</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span>  </span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>  </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="1-创建maven工程并导入坐标"><a href="#1-创建maven工程并导入坐标" class="headerlink" title="1.    创建maven工程并导入坐标"></a>1.    创建maven工程并导入坐标</h4><ul>
<li><strong><code>pom.xml</code></strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-创建实体类"><a href="#2-创建实体类" class="headerlink" title="2.    创建实体类"></a>2.    创建实体类</h4><ul>
<li><p><strong><code>src/main/java/cn/xsyu/domain/User.java</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">	<span class="comment">// 此处属性名与数据库中的列名相同</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String qq;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    </span><br><span class="line">    get/set方法;</span><br><span class="line">    toString方法;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3、创建Dao接口"><a href="#3、创建Dao接口" class="headerlink" title="3、创建Dao接口"></a>3、创建Dao接口</h4><ul>
<li><p><strong><code>src/main/java/cn/xsyu/dao/UserDao.interface</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询数据库中的所有用户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="4-创建映射配置文件"><a href="#4-创建映射配置文件" class="headerlink" title="4.    创建映射配置文件"></a>4.    创建映射配置文件</h4><ul>
<li><p><strong><code>src/main/resource/cn/xsyu/dao/UserDao.xml</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置查询所有--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-创建MyBatis的主配置文件"><a href="#5-创建MyBatis的主配置文件" class="headerlink" title="5.    创建MyBatis的主配置文件"></a>5.    创建MyBatis的主配置文件</h4><ul>
<li><p><strong><code>src/main/resource/SqlMapConfig.xml</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--MyBatis的主配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql01&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置mysql环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql01&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置事务的类型--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置数据源（连接池）--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置数据库的4个基本信息--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db4&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置映射配置文件的位置，映射配置文件是每个Dao接口对应的具体操作SQL语句--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper resource=&quot;cn.xsyu.dao.UserDao.xml&quot;&gt;&lt;/mapper&gt;--&gt;</span><span class="comment">&lt;!--错误写法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/xsyu/dao/UserDao.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span><span class="comment">&lt;!--注意此处不能以点隔开--&gt;</span>	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-1-2-环境搭建的注意事项"><a href="#1-1-2-环境搭建的注意事项" class="headerlink" title="1.1.2    环境搭建的注意事项"></a>1.1.2    环境搭建的注意事项</h3><ol>
<li><p>MyBatis中，<code>resource</code>目录下的<code>映射配置文件</code>必须和<code>src</code>目录下<code>dao接口</code>的包结构相同。</p>
</li>
<li><p>映射配置文件中的<code>&lt;mapper&gt;标签的namespace属性</code>的取值必须是<code>dao接口的全限定类名</code>。【目的是为了将映射文件和dao接口关联起来】</p>
</li>
<li><p>映射配置文件中<code>&lt;mapper&gt;</code>标签中的<code>CRUD标签</code>中的<code>id</code>属性的取值必须是dao接口中的方法名。</p>
<p><code>mapper.xml</code>中的<code>&lt;mapper&gt;</code>标签中的<code>CRUD标签</code>的内容就是真实的SQL语句，只不过这些SQL语句在编译期不生效，在运行期会通过<code>代理模式</code>动态的增强绑定的方法。</p>
</li>
</ol>
<ul>
<li>当我们遵从了以上3点之后，我们在开发中就无须再写dao的实现类。</li>
</ul>
<h3 id="1-1-3-MyBatis入门案例"><a href="#1-1-3-MyBatis入门案例" class="headerlink" title="1.1.3    MyBatis入门案例"></a>1.1.3    MyBatis入门案例</h3><ol>
<li>读取主配置文件<code>SqlMapConfig.xml</code></li>
<li>创建<code>SqlSessionFactory</code>工厂 [使用<code>构建者模式</code>]<ul>
<li><code>sqlSessionFactory</code>是一个接口，无构造方法不能直接初始化，而<code>SqlSessionFactoryBuilder</code>是一个普通类可以直接初始化，并且该对象可以创建<code>sqlSessionFactory</code>的实现类对象。</li>
</ul>
</li>
<li>创建<code>SqlSession</code>对象[<code>工厂模式</code>]</li>
<li>创建<code>Dao</code>接口的代理对象。[<code>代理模式</code>]</li>
<li>使用代理对象执行<code>Dao</code>接口中的方法</li>
<li>释放资源</li>
</ol>
<ul>
<li><p>注意事项：</p>
<ol>
<li>不要忘记在映射配置文件<code>UserDao.xml</code>中告知MyBatis查询结果要封装到哪个实体类中。</li>
<li>配置方式：指定实体类的全限定类名。</li>
</ol>
<hr>
</li>
<li><p><strong><code>test/java/cn/xsyu/test/MyBatisTest.java</code></strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MyBatis入门案例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.读取主配置文件SqlMapConfig.xml</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.创建SqlSessionFactory工厂</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(inputStream);</span><br><span class="line">        <span class="comment">// 3.使用工厂生产SqlSession对象</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="comment">// 4.使用SqlSession创建Dao接口的代理对象</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line">        <span class="comment">// 5.使用代理对象执行方法</span></span><br><span class="line">        List&lt;User&gt; users = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 6.释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>代码分析：</p>
<ol>
<li><p><code>Resources</code>类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyBatis官方提供的一个封装好的类</span></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"></span><br><span class="line">------------------------------------源码------------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A class to simplify access to resources through the classloader.</span></span><br><span class="line"><span class="comment"> * 功能：简化`通过类加载器（ClassLoader）访问资源`代码。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 底层实现仍然是类加载器那一套，但是被MyBatis封装成了一个简单的类，也就是Resources类。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Resources</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-------------------------------------静态方法------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * getResourceAsStream(&quot;SqlMapConfig.xml&quot;)</span></span><br><span class="line"><span class="comment"> * 功能：读取当前项目下的配置文件并转换为字节输入流。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p><code>SqlSessionFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyBatis官方提供的一个封装好的类</span></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line">------------------------------------源码------------------------------------------------------</span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates an &#123;<span class="doctag">@link</span> SqlSession&#125; out of a connection or a DataSource</span></span><br><span class="line"><span class="comment"> * 功能：创建一个Connection连接对象或DataSource连接池。[使用接口中的openSession方法]</span></span><br><span class="line"><span class="comment"> * 		</span></span><br><span class="line"><span class="comment"> * 分析：创建DataSource的最终目的也是创建Connection，</span></span><br><span class="line"><span class="comment"> * 		无论是创建Connection还是DataSource，都需要数据库的连接信息。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SqlSessionFactory</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line">-------------------------------------方法------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * factory.openSession()</span></span><br><span class="line"><span class="comment"> * 创建一个Connection连接对象或DataSource连接池。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h4 id="附1：Mybatis基于注解的入门案例"><a href="#附1：Mybatis基于注解的入门案例" class="headerlink" title="附1：Mybatis基于注解的入门案例"></a>附1：Mybatis基于注解的入门案例</h4><ul>
<li><p>把<code>UserDao.xml</code>删除。</p>
</li>
<li><p>在<code>UserDao接口</code>的<strong>方法上</strong>使用<code>@Select注解</code>，并指定SQL语句。</p>
</li>
<li><p>同时还需要修改主配置文件<code>SqlMapConfig.xml</code>中的<code>mapper标签</code>的<code>class属性</code>为<code>dao接口的全限定类名</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="附2：入门案例中的设计模式分析"><a href="#附2：入门案例中的设计模式分析" class="headerlink" title="附2：入门案例中的设计模式分析"></a>附2：入门案例中的设计模式分析</h4><h5 id="1-读取配置文件"><a href="#1-读取配置文件" class="headerlink" title="1.读取配置文件"></a>1.读取配置文件</h5><blockquote>
<ul>
<li>不常用方法：<ol>
<li>使用绝对路径：耦合度高，实际开发中使用少</li>
<li>使用相对路径：耦合度高，实际开发中使用少</li>
</ol>
</li>
<li>常用方法：<ol>
<li>使用类加载器，读取指定位置的资源，返回输入流。在MyBatis中默认<strong>读取类路径下的配置文件</strong>。</li>
<li>使用ServletContext对象的<code>getRealPath()</code></li>
</ol>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.读取主配置文件SqlMapConfig.xml</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br></pre></td></tr></table></figure>


<h5 id="2-构建者模式"><a href="#2-构建者模式" class="headerlink" title="2.构建者模式"></a>2.构建者模式</h5><blockquote>
<ul>
<li>创建MyBatis工厂时使用了<strong>构建者模式</strong>。</li>
<li>隐藏对象的创建细节，对使用者的要求降低</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.创建SqlSessionFactory工厂</span></span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(inputStream);</span><br></pre></td></tr></table></figure>





<h5 id="3-工厂模式"><a href="#3-工厂模式" class="headerlink" title="3.工厂模式"></a>3.工厂模式</h5><blockquote>
<ul>
<li>生产SqlSession使用了<strong>工厂模式</strong></li>
<li>降低了类之间的依赖关系。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.使用工厂生产SqlSession对象</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br></pre></td></tr></table></figure>



<h5 id="4-代理模式"><a href="#4-代理模式" class="headerlink" title="4.代理模式"></a>4.代理模式</h5><blockquote>
<ul>
<li>Dao接口中只定义了方法声明而无方法实现，</li>
<li>配置文件<code>mapper.xml</code>中配置了<code>通知</code>（即增强的内容，在这里是具体的SQL语句）。</li>
<li>代理对象中有具体的方法实现。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.使用SqlSession创建Dao接口的代理对象</span></span><br><span class="line"><span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>优点</strong>：</p>
<ul>
<li>不修改源码的基础上对已有方法增强。</li>
<li>将编译期的依赖转移到了运行时依赖。</li>
</ul>
</blockquote>
<hr>
<h1 id="2-自定义MyBatis框架"><a href="#2-自定义MyBatis框架" class="headerlink" title="2    自定义MyBatis框架"></a>2    自定义MyBatis框架</h1><h2 id="2-1-完成一次数据库调用的分析"><a href="#2-1-完成一次数据库调用的分析" class="headerlink" title="2.1    完成一次数据库调用的分析"></a>2.1    完成一次数据库调用的分析</h2><p><img src="/2020/08/25/MyBatis/%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E5%88%86%E6%9E%90.png"></p>
<h2 id="2-2-自定义MyBatis分析"><a href="#2-2-自定义MyBatis分析" class="headerlink" title="2.2    自定义MyBatis分析"></a>2.2    自定义MyBatis分析</h2><ul>
<li>MyBatis在使用代理Dao对象的方式实现CRUD时做什么事情呢？</li>
<li>只有两件事：<ol>
<li>创建代理对象</li>
<li>在代理对象中调用selectList()方法</li>
</ol>
</li>
</ul>
<p><img src="/2020/08/25/MyBatis/%E8%87%AA%E5%AE%9A%E4%B9%89Mybatis%E5%88%86%E6%9E%90.png"></p>
<h3 id="2-3-1-自定义MyBatis涉及的类"><a href="#2-3-1-自定义MyBatis涉及的类" class="headerlink" title="2.3.1.自定义MyBatis涉及的类"></a>2.3.1.自定义MyBatis涉及的类</h3><ul>
<li><code>Class Resources</code></li>
<li><code>Class SqlSessionFactoryBuilder</code></li>
<li><code>Interface SqlSessionFactory</code></li>
<li><code>Interface SqlSession</code></li>
</ul>
<h2 id="2-9-自定义流程总结"><a href="#2-9-自定义流程总结" class="headerlink" title="2.9    自定义流程总结"></a>2.9    自定义流程总结</h2><p><img src="/2020/08/25/MyBatis/%E8%87%AA%E5%AE%9A%E4%B9%89MyBatis%E6%B5%81%E7%A8%8B%E5%9B%BE.png"></p>
<ul>
<li><p>总结：</p>
<ol>
<li><p>通过以上流程不难看出，无论是让MyBatis帮我们创建代理对象还是直接使用MyBatis提供的CRUD方法，其本质都是得到JDBC的Connection对象，执行对应的SQL语句，最终封装结果集。</p>
</li>
<li><p>只是注解和XML配置文件两种开发模式在传递SQL语句和返回值类型的方式上有所差异而已。</p>
<p><img src="/2020/08/25/MyBatis/MyBatis%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91&XML%E5%BC%80%E5%8F%91.png" alt="image-20200717213023271"></p>
</li>
</ol>
</li>
</ul>
<hr>
<h1 id="3-MyBatis的CRUD-基于代理Dao"><a href="#3-MyBatis的CRUD-基于代理Dao" class="headerlink" title="3    MyBatis的CRUD(基于代理Dao)"></a>3    MyBatis的CRUD(基于代理Dao)</h1><h2 id="3-0-准备工作"><a href="#3-0-准备工作" class="headerlink" title="3.0    准备工作"></a>3.0    准备工作</h2><h3 id="3-0-1-MyBatis环境搭建"><a href="#3-0-1-MyBatis环境搭建" class="headerlink" title="3.0.1    MyBatis环境搭建"></a>3.0.1    MyBatis环境搭建</h3><ol>
<li>创建Maven工程</li>
<li>导入坐标</li>
<li>编写实体类和持久层接口</li>
<li>编写<code>SqlMapConfig.xml</code></li>
<li>编写映射配置文件</li>
</ol>
<h3 id="3-0-2-使用要求"><a href="#3-0-2-使用要求" class="headerlink" title="3.0.2    使用要求"></a>3.0.2    使用要求</h3><ol>
<li>持久层接口和持久层接口的映射配置文件必须在相同的包下；</li>
<li>持久层接口的映射配置文件中<code>&lt;mapper&gt;</code>标签的<code>namespace</code>属性必须是持久层接口的全限定类名；</li>
<li>SQL语句的配置标签<code>&lt;select&gt;、&lt;insert&gt;、&lt;delete&gt;、&lt;update&gt;</code>的<code>id</code>属性必须和持久层接口中的方法名相同。</li>
</ol>
<h2 id="3-1-CRUD"><a href="#3-1-CRUD" class="headerlink" title="3.1    CRUD"></a>3.1    CRUD</h2><h4 id="1、根据ID查询"><a href="#1、根据ID查询" class="headerlink" title="1、根据ID查询"></a>1、根据ID查询</h4><h4 id="2、保存操作"><a href="#2、保存操作" class="headerlink" title="2、保存操作"></a>2、保存操作</h4><h4 id="3、用户更新"><a href="#3、用户更新" class="headerlink" title="3、用户更新"></a>3、用户更新</h4><h4 id="4、用户删除"><a href="#4、用户删除" class="headerlink" title="4、用户删除"></a>4、用户删除</h4><h4 id="5、-用户模糊查询"><a href="#5、-用户模糊查询" class="headerlink" title="5、 用户模糊查询"></a>5、 用户模糊查询</h4><h4 id="6、查询使用聚合函数"><a href="#6、查询使用聚合函数" class="headerlink" title="6、查询使用聚合函数"></a>6、查询使用聚合函数</h4><h2 id="3-2-总结"><a href="#3-2-总结" class="headerlink" title="3.2    总结"></a>3.2    总结</h2><h3 id="3-2-1-持久层的映射配置文件中的属性细节"><a href="#3-2-1-持久层的映射配置文件中的属性细节" class="headerlink" title="3.2.1    持久层的映射配置文件中的属性细节"></a>3.2.1    持久层的映射配置文件中的属性细节</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--根据id查询数据库中的数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">    select * from USER where id=#&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">&lt;!--保存数据到数据库中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;saveUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user(username, gender, hobby) values (#&#123;username&#125;, #&#123;gender&#125;,#&#123;hobby&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p><strong><code>#&#123;&#125; </code></strong> </p>
<ul>
<li>在MyBatis的配置文件中，使用<code>#&#123;&#125;</code>表示SQL语句中的占位符</li>
</ul>
<p><strong><code>ognl表达式</code></strong></p>
<ul>
<li><p>它是Apache提供的一种表达式语言，全称是：<code>Object Graphic Navigation Language</code>，对象导航语言。</p>
</li>
<li><p>它是按照一定的语法格式来获取数据的，语法格式就是使用<code>#&#123;对象.属性&#125;</code>的方式。</p>
</li>
<li><p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#&#123;user.username&#125;</span><br><span class="line">	* 它会先去找user对象，然后在user对象中找到`username`属性，并调用`getUsername()`方法把值取出来。</span><br><span class="line">	* 但是由于我们在 `parameterType` 属性中指定了实体类的名称，所以可以省略user，而直接写`username`。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>&lt;selectKey&gt;</code></strong></p>
<blockquote>
<p>需求：</p>
<ul>
<li><p>向数据库中新增用户后，同时还要返回当前新增用户的id值；</p>
<p>由于id值在数据库中设置为自动增长的，所以我们要<strong>在数据库添加了新用户之后获取自增长的<code>auto_increment</code>的值</strong>并返回。</p>
</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--保存数据到数据库中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;saveUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--查询并返回新增用户的id值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyColumn</span>=<span class="string">&quot;id&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select last_insert_id();</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    insert into user(username, gender, hobby)</span><br><span class="line">    values (#&#123;username&#125;, #&#123;gender&#125;,#&#123;hobby&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>keyColumn</code>：数据库中自增长列的名称；</li>
<li><code>keyProperty</code>：JavaBean对象中对应的名称。</li>
</ul>
</li>
<li><p><strong><code>$&#123;value&#125;</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!--配置模糊查询的方式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span>&gt;</span></span><br><span class="line">        select * from user where username like &#x27;%$&#123;value&#125;%&#x27;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	* 我们在上面使用的`#&#123;&#125;`占位符，改成了&#x27;$&#123;value&#125;&#x27;。</span></span><br><span class="line"><span class="comment">	* 注意：如果使用这种模糊查询的写法，那么&#x27;$&#123;value&#125;&#x27;的写法就是固定的，不能改其它名字。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong><code>#&#123;&#125;</code>和<code>$&#123;&#125;</code>的区别</strong></p>
<table>
<thead>
<tr>
<th align="center">#{}</th>
<th align="center">${}</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>#&#123;&#125;</code>表示一个占位符号，通过<code>#&#123;&#125;</code>可以实现PreparedStatement向占位符中设置值，并自动进行Java类型和JDBC类型转换；</td>
<td align="center"><code>$&#123;&#125;</code>表示拼接SQL字符串，通过<code>$&#123;&#125;</code>可以将parameterType传入的内容拼接在SQL中且不进行JDBC类型转换</td>
</tr>
<tr>
<td align="center"><code>#&#123;&#125;</code>可以有效防止SQL注入</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>#&#123;&#125;</code>可以接收简单类型值或POJO属性值，如果parameterType传输单个简单类型值，<code>#&#123;&#125;</code>括号中可以是<code>value</code>或者其它名称。</td>
<td align="center"><code>$&#123;&#125;</code>可以接收简单类型的值或POJO属性值。如果parameterType传输单个简单类型值，<code>$&#123;&#125;</code>括号中只能是<code>value</code>。</td>
</tr>
</tbody></table>
</li>
</ol>
<hr>
<h1 id="4-MyBatis中的参数深入"><a href="#4-MyBatis中的参数深入" class="headerlink" title="4    MyBatis中的参数深入"></a>4    MyBatis中的参数深入</h1><h2 id="4-1-parameterType"><a href="#4-1-parameterType" class="headerlink" title="4.1     parameterType"></a>4.1     parameterType</h2><blockquote>
<ul>
<li><p><code>parameterType</code>是<code>mapper.xml</code>文件中<code>&lt;mapper&gt;</code>标签的子标签<code>&lt;insert&gt;&lt;delete&gt;&lt;update&gt;&lt;select&gt;</code>的一个属性；</p>
</li>
<li><p>对于需要手动传入参数的SQL语句，可以使用<code>parameterType</code>属性指定待传入参数的数据类型。</p>
</li>
<li><p>该属性的类型可以是基本类型、String类型、还可以是实体类类型（POJO类）、基本类型的包装类型。</p>
</li>
<li><p>除了基本数据类型（包括包装类）和String类型，其它类型必须写全限定类名。基本数据类型和String可以直接写类名，也可以使用全限定类名，如：<code>java.lang.String</code>。</p>
<p><em>原因是：MyBatis在加载时就已经把常用的数据类型注册了别名，从而我们在使用时可以不写包名，而我们的实体类并没有注册别名，所以必须写全限定类名。</em></p>
</li>
</ul>
</blockquote>
<hr>
<h2 id="4-2-resultType"><a href="#4-2-resultType" class="headerlink" title="4.2    resultType"></a>4.2    resultType</h2><blockquote>
<ul>
<li><code>resultType</code>是<code>mapper.xml</code>文件中<code>&lt;mapper&gt;</code>标签的子标签<code>&lt;insert&gt;&lt;delete&gt;&lt;update&gt;&lt;select&gt;</code>的一个属性；</li>
<li>用于将从数据库中查询到的结果集封装为<code>JavaBean</code>对象，它支持基本类型和实体类型。</li>
<li>同<code>parameterType</code>一样，如果类注册过别名，可以直接使用别名，没有注册过的必须使用全限定类名。</li>
<li><strong>如果使用<code>resultType</code>属性封装数据库的查询结果，要求实体类中的属性名称必须和数据库中表的列名一致，否则无法完成封装。</strong></li>
</ul>
</blockquote>
<hr>
<h2 id="4-3-resultMap"><a href="#4-3-resultMap" class="headerlink" title="4.3    resultMap"></a>4.3    resultMap</h2><blockquote>
<ul>
<li><code>resultMap</code>是<code>mapper.xml</code>文件中<code>&lt;mapper&gt;</code>标签的子标签<code>&lt;insert&gt;&lt;delete&gt;&lt;update&gt;&lt;select&gt;</code>的一个属性；</li>
<li><strong><code>&lt;resultMap&gt;</code>标签也是用于将数据库的查询结果封装为<code>JavaBean</code>对象，与<code>&lt;resultType&gt;</code>不同的是，它会新建立一个数据库列名和Java实体类属性名的映射关系，所以该标签不强制要求实例类属性与数据库表的列名一一映射。</strong></li>
<li><em>在一个<code>&lt;mapper&gt;</code>标签的<code>&lt;select&gt;</code>子标签中，<code>resultMap</code>和<code>resultType</code>属性选择使用一个即可。但是在使用<code>&lt;resultMap&gt;</code>时必须事先在配置文件中建立好数据库列和实体类属性的映射关系。</em></li>
<li><strong>同时<code>&lt;resultMap&gt;</code>可以实现将查询结果映射为复杂类型的<code>POJO</code>，比如在查询结果映射对象中包含<code>POJO</code>和 <code>List</code>实现一对一查询和一对多查询。</strong></li>
</ul>
</blockquote>
<h3 id="4-3-1-定义resultMap"><a href="#4-3-1-定义resultMap" class="headerlink" title="4.3.1   定义resultMap"></a>4.3.1   定义resultMap</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--建立User实体类和数据库表的对应关系</span></span><br><span class="line"><span class="comment">	id：resultMap的唯一标识；</span></span><br><span class="line"><span class="comment">	type：指定实体类的全限定类名。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span>/&gt;</span>     <span class="comment">&lt;!--MySQL主键与User实体类的对应【特殊，需要单独写出来】--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userGender&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userHobby&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>标签：用于指定主键字段；</span><br><span class="line"><span class="tag">&lt;<span class="name">result</span>&gt;</span>标签：用于指定非主键字段；</span><br><span class="line">	`column`属性：用于指定数据库的列名；</span><br><span class="line">    `property`属性：用于指定实体类属性的名称。</span><br></pre></td></tr></table></figure>







<hr>
<h1 id="5-主配置文件-SqlMapConfig-xml"><a href="#5-主配置文件-SqlMapConfig-xml" class="headerlink" title="5    主配置文件  SqlMapConfig.xml"></a>5    主配置文件  SqlMapConfig.xml</h1><h2 id="5-1-MyBatis中2个配置文件与Mapper接口的关系"><a href="#5-1-MyBatis中2个配置文件与Mapper接口的关系" class="headerlink" title="5.1    MyBatis中2个配置文件与Mapper接口的关系"></a>5.1    MyBatis中2个配置文件与Mapper接口的关系</h2><p><img src="/2020/08/25/MyBatis/MyBatis%E4%B8%AD2%E4%B8%AA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%85%B3%E7%B3%BB.png"></p>
<ol>
<li><code>SqlMapConfig.xml</code>中保存着数据库连接信息；[通过<code>反射机制</code>加载到内存中]</li>
<li><code>Mapper.xml</code>中包含着要去到数据库中执行的SQL语句；[通过<code>代理模式</code>被代理]</li>
<li><code>Dao</code>接口是执行SQL语句的实例对象[被代理的对象]</li>
</ol>
<p>​    <em>MyBatis中，我们只会读取一次配置文件，读取的配置文件就是<code>SqlMapConfig.xml</code>，而没有读取<code>mapper.xml</code>配置文件，那么我们是如何得到<code>mapper.xml</code>配置文件中的信息的呢？</em></p>
<p>​    <em>Java中要想获取配置文件中的内容只有通过IO流才可以，显然通过<code>dao</code>接口无法读取<code>mapper.xml</code>配置文件。而我们通过<code>SqlMapConfig.xml</code>配置文件中的<code>&lt;mapper&gt;</code>标签，建立<code>mapper.xml</code>和<code>SqlMapConfig.xml</code>的映射关系，这样只需读取一次<code>SqlMapConfig.xml</code>文件，就能将2个配置文件中的信息全部加载到内存中去。    而只有加载到内存中的数据，才能和<code>dao</code>接口产生联系，如果是硬盘上的静态资源是无法和Java对象产生关联的。</em></p>
<p>​    <em><code>mapper.xml</code>配置文件被加载到内存中后，通过<code>namespace</code>和<code>id</code>属性找到对应的<code>Dao</code>接口对象，最后使用代理对象执行SQL语句。</em></p>
<h2 id="5-2-SqlMapConfig-xml-配置文件中的内容和顺序"><a href="#5-2-SqlMapConfig-xml-配置文件中的内容和顺序" class="headerlink" title="5.2    SqlMapConfig.xml  配置文件中的内容和顺序"></a>5.2    SqlMapConfig.xml  配置文件中的内容和顺序</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	约束</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    -----------------------------------Part1:属性[主要是数据库连接属性]--------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part2:全局配置参数------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part3:类型别名----------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAliase</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAliase</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part4:类型处理器--------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part5:对象工厂----------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">objectFactory</span>&gt;</span><span class="tag">&lt;/<span class="name">objectFactory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part6:插件-------------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part7:环境集合属性对象---------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span>&gt;</span>	(环境子属性对象)</span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span>	（事务管理）</span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span>&gt;</span><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span>	（数据源）</span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part8:映射器-----------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="常用的标签"><a href="#常用的标签" class="headerlink" title="常用的标签"></a>常用的标签</h4><ul>
<li><code>&lt;properties&gt;</code></li>
<li><code>&lt;typeAliases&gt;</code></li>
<li><code>&lt;environments&gt;</code></li>
<li><code>&lt;mappers&gt;</code></li>
<li>最外层是一个<code>&lt;configuration&gt;</code>标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;properties resource=&quot;db.properties&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/db5&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/properties&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--单个定义别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;bieming&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--批量自动定义别名，把整个包目录下的类自动定义别名，别名为类名（首字母大写或小写都可以）--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.domain&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--如果两个定义别名的方法都用，则两个方法都能生效--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--MyBatis在初始化时，会根据&lt;dataSource&gt;的type属性来创建相应类型的数据源DataSource--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/xsyu/dao/UserMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="5-3-properties（属性）"><a href="#5-3-properties（属性）" class="headerlink" title="5.3    properties（属性）"></a>5.3    properties（属性）</h2><ul>
<li>在使用<code>&lt;properties&gt;</code>标签时，我们可以使用2种方式指定属性配置。</li>
</ul>
<h3 id="5-3-1-第1种"><a href="#5-3-1-第1种" class="headerlink" title="5.3.1    第1种"></a>5.3.1    第1种</h3><ul>
<li>在当前配置文件的<code>&lt;configuration&gt;</code>标签中前定义<code>&lt;property&gt;</code>属性</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span>--&gt;</span><br></pre></td></tr></table></figure>



<h3 id="5-3-2-第2种"><a href="#5-3-2-第2种" class="headerlink" title="5.3.2    第2种"></a>5.3.2    第2种</h3><ol>
<li><p>在<code>classpath</code>下定义一个<code>db.properties</code>文件，编写配置信息；</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/db5</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure></li>
<li><p>并在<code>&lt;properties&gt;</code>标签中引入外部配置文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;properties&gt;标签中的属性：</span></span><br><span class="line"><span class="comment">		1. resource：用于指定properties配置文件的位置，要求配置文件必须在类路径下。</span></span><br><span class="line"><span class="comment">		2. url：用于指定配置文件的URL。</span></span><br><span class="line"><span class="comment">			协议  主机  端口  URI</span></span><br><span class="line"><span class="comment">		如： file:///D:/work/test/db.properties</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">url</span>=<span class="string">&quot;file:///D:/work/test/db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span>	(不常用)</span><br></pre></td></tr></table></figure></li>
<li><p>此时，<code>SqlMapConfig.xml</code>中<code>&lt;environments&gt;</code>的子标签<code>&lt;dataSource&gt;</code>就可以直接引用<code>&lt;properties&gt;</code>中的配置信息。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
</li>
</ol>
<h2 id="5-4-typeAliases（类型别名）"><a href="#5-4-typeAliases（类型别名）" class="headerlink" title="5.4    typeAliases（类型别名）"></a>5.4    typeAliases（类型别名）</h2><h3 id="5-4-1-自定义别名"><a href="#5-4-1-自定义别名" class="headerlink" title="5.4.1    自定义别名"></a>5.4.1    自定义别名</h3><ul>
<li><p>在<code>SqlMapConfig.xml</code>中配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--为单个类定义别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;bieming&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--批量定义别名，为整个包目录下的类自动定义别名，别名为类名（不区分大小写）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--如果两个定义别名的方法都用，则两个方法都能生效--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
</li>
</ul>
<h2 id="5-5-mappers（映射器）"><a href="#5-5-mappers（映射器）" class="headerlink" title="5.5    mappers（映射器）"></a>5.5    mappers（映射器）</h2><blockquote>
<p>映射<code>mapper.xml</code>文件中的配置信息，这样使用反射机制加载<code>SqlMapConfig.xml</code>文件中的信息到内存中时，会一次性把<code>mapper.xml</code>文件中的信息一起加载到内存中。</p>
</blockquote>
<h3 id="1、-lt-mapper-resource-quot-quot-gt"><a href="#1、-lt-mapper-resource-quot-quot-gt" class="headerlink" title="1、&lt;mapper  resource=&quot;&quot;/&gt;"></a>1、<code>&lt;mapper  resource=&quot;&quot;/&gt;</code></h3><ul>
<li><p>使用<strong>相对于类路径</strong>的资源</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/xsyu/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2、-lt-mapper-class-quot-quot-gt"><a href="#2、-lt-mapper-class-quot-quot-gt" class="headerlink" title="2、&lt;mapper  class=&quot;&quot;/&gt;"></a>2、<code>&lt;mapper  class=&quot;&quot;/&gt;</code></h3><ul>
<li><p>使用mapper接口路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.dao.UserMapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	此种方法要求mapper接口名称和mapper映射文件名称相同，且放在同一个目录中。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3、-lt-package-name-quot-quot-gt"><a href="#3、-lt-package-name-quot-quot-gt" class="headerlink" title="3、&lt;package name=&quot;&quot;/&gt;"></a>3、<code>&lt;package name=&quot;&quot;/&gt;</code></h3><ul>
<li><p>注册指定包下所有的mapper接口</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	此种方法要求mapper接口名称和mapper映射文件名称相同，且放在同一个目录中。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="6-MyBatis的数据库连接池技术"><a href="#6-MyBatis的数据库连接池技术" class="headerlink" title="6    MyBatis的数据库连接池技术"></a>6    MyBatis的数据库连接池技术</h1><blockquote>
<ul>
<li>MyBatis采用的是<strong>自己实现的数据库连接池技术</strong>。</li>
<li>在<code>SqlMapConfig.xml</code>配置文件中，通过<code>&lt;dataSource type=&quot;POOLED&quot;&gt;</code>开启数据库连接池。</li>
</ul>
</blockquote>
<h2 id="6-1-数据库连接池分类"><a href="#6-1-数据库连接池分类" class="headerlink" title="6.1    数据库连接池分类"></a>6.1    数据库连接池分类</h2><blockquote>
<p>在MyBatis中<code>&lt;DataSource&gt;</code>标签有3个选项：</p>
<ol>
<li><code>UNPOOLED</code>        不使用连接池的数据源</li>
<li><code>POOLED</code>        使用连接池的数据源</li>
<li><code>JNDI</code>        使用JNDI实现的数据源</li>
</ol>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;UNPOOLED&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;JNDI&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">MyBatis在初始化时，会根据&lt;dataSource&gt;的type属性来创建对应的数据源，即：</span></span><br><span class="line"><span class="comment">    type=&quot;POOLED&quot;，MyBatis会创建PooledDataSource实例；</span></span><br><span class="line"><span class="comment">    type=&quot;UNPOOLED&quot;，MyBatis会创建UnpooledDataSource实例；</span></span><br><span class="line"><span class="comment">    type=&quot;JNDI&quot;，MyBatis会从JNDI服务上查找DataSource实例，然后返回使用。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>




<h2 id="6-2-配置DataSource的连接信息"><a href="#6-2-配置DataSource的连接信息" class="headerlink" title="6.2    配置DataSource的连接信息"></a>6.2    配置DataSource的连接信息</h2><blockquote>
<p>DataSource的连接信息可以：</p>
<ol>
<li>直接与<code>&lt;property&gt;</code>标签的<code>value</code>属性绑定，如<code>&lt;property name=&quot;username&quot; value=&quot;zhangsan&quot;/&gt;</code>。</li>
<li>保存在<code>SqlMapConfig.xml</code>中的<code>&lt;properties&gt;</code>标签中，<code>&lt;property&gt;</code>标签的<code>value</code>属性与EL表达式绑定。</li>
<li>保存在类路径下的<code>xx.properties</code>文件中，先使用<code>&lt;properties&gt;</code>标签读取配置文件，再用EL表达式与<code>&lt;property&gt;</code>标签的<code>value</code>属性绑定。</li>
</ol>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>






<h2 id="6-3-DataSource的获取"><a href="#6-3-DataSource的获取" class="headerlink" title="6.3    DataSource的获取"></a>6.3    DataSource的获取</h2><ul>
<li><p>MyBatis是通过<strong>工厂模式</strong>来创建数据源DataSource对象的。</p>
</li>
<li><p>MyBatis定义了抽象的工厂接口：<code>org.apache.ibatis.datasource.DataSourceFactory</code>，通过该接口中的<code>getDataSource();</code>方法获取数据源<code>DataSource</code>。</p>
</li>
<li><p>源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataSourceFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties props)</span>;</span><br><span class="line"></span><br><span class="line">  DataSource <span class="title function_">getDataSource</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	MyBatis创建了DataSource实例之后，会将其方法Configuration对象中的Environment对象中，供以后使用。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6-4-MyBatis中连接的获取过程分析"><a href="#6-4-MyBatis中连接的获取过程分析" class="headerlink" title="6.4    MyBatis中连接的获取过程分析"></a>6.4    MyBatis中连接的获取过程分析</h2><ul>
<li>当我们需要创建<code>SqlSession</code>对象并需要执行SQL语句时，这时MyBatis才会去调用DataSource对象来创建<code>java.sql.connection</code>对象，也就是说，<code>java.sql.connection</code>对象的创建一直延迟到执行SQL语句的时候。</li>
</ul>
<hr>
<h1 id="7-MyBatis的事务控制"><a href="#7-MyBatis的事务控制" class="headerlink" title="7    MyBatis的事务控制"></a>7    MyBatis的事务控制</h1><blockquote>
<ul>
<li><p>我们常使用的数据库MySql每次执行SQL语句后默认自动提交，Oracle则默认要手动提交。</p>
</li>
<li><p>在JDBC中我们使用<code>setAutoCommit()</code>方法来控制事务的提交方式（手动提交或自动提交）。</p>
</li>
<li><p>MyBatis框架的底层实现就是JDBC，所以MyBatis中事务的提交方式，本质上就是调用JDBC的<code>setAutoCommit()</code>方法来设置事务提交方式的。</p>
<p>并且MyBatis默认<code>connection.setAutoCommit(false)</code>，将自动提交关闭。这样我们就必须使用<code>SqlSession.commit()</code>方法进行手动提交。[相当于JDBC中的<code>connection.commit()</code>]</p>
</li>
</ul>
</blockquote>
<ul>
<li><p><strong>设置自动提交事务</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在通过SqlSessionFactory工厂获取SqlSession对象时，设置`autoCommit=true`。即可实现事务自动提交。</span></span><br><span class="line">sqlSession = factory.openSession(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="8-MyBatis的动态SQL语句"><a href="#8-MyBatis的动态SQL语句" class="headerlink" title="8    MyBatis的动态SQL语句"></a>8    MyBatis的动态SQL语句</h1><p>​    MyBatis的映射文件中，前面学习的SQL语句都是比较简单的，有时候业务逻辑比较复杂时，简单SQL语句不能满足需求，就需要使用动态SQL语句了。</p>
<ul>
<li><code>&lt;if&gt;</code></li>
<li><code>&lt;choose&gt;</code></li>
<li><code>&lt;trim&gt;</code></li>
<li><code>&lt;foreach&gt;</code></li>
</ul>
<h2 id="8-1-lt-if-gt-标签-amp-lt-Where-gt-标签"><a href="#8-1-lt-if-gt-标签-amp-lt-Where-gt-标签" class="headerlink" title="8.1    &lt;if&gt;标签  &amp;  &lt;Where&gt;标签"></a>8.1    <code>&lt;if&gt;</code>标签  &amp;  <code>&lt;Where&gt;</code>标签</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName!=null and userName!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and username like #&#123;userName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userHobby!=null&quot;</span>&gt;</span></span><br><span class="line">            and hobby like #&#123;userHobby&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;if&gt;标签中的test属性与JavaBean对象的属性名映射，如果JavaBean的类中还包含另一个POJO对象，则要使用OGNL表达式的写法。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="8-2-lt-foreach-gt-标签"><a href="#8-2-lt-foreach-gt-标签" class="headerlink" title="8.2    &lt;foreach&gt;标签"></a>8.2    <code>&lt;foreach&gt;</code>标签</h2><ul>
<li>如果查询的信息被封装在一个集合中，就需要把这个集合中的每个数据都拿到然后传递给数据库进行查询。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findInList&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.xsyu.domain.QueryVo&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;list!=null and list.size()&gt;0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">                #&#123;uid&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">select * from user where id in(uid1, uid2, .....)	</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;foreach&gt;标签用于遍历集合，它的属性：</span></span><br><span class="line"><span class="comment">		collection：代表要遍历的集合对象，注意编写时不要写#&#123;&#125;，但它仍然是一个OGNL表达式；</span></span><br><span class="line"><span class="comment">		open：代表语句的开始部分；</span></span><br><span class="line"><span class="comment">		close：代表语句的结束部分;</span></span><br><span class="line"><span class="comment">		item：代表遍历集合的每个元素生成的变量名；</span></span><br><span class="line"><span class="comment">		sperator：代表分隔符。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>





<h2 id="8-3-MyBatis中简化编写的SQL片段"><a href="#8-3-MyBatis中简化编写的SQL片段" class="headerlink" title="8.3    MyBatis中简化编写的SQL片段"></a>8.3    MyBatis中简化编写的SQL片段</h2><blockquote>
<p>可以将SQL语句中重复的SQL片段提取出来，使用时引用<code>&lt;include&gt;</code>即可，最终达到SQL重用的目的。</p>
</blockquote>
<ol>
<li>定义SQL代码片段</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--抽取重复的SQL语句片段--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;defaultSql&quot;</span>&gt;</span></span><br><span class="line">    select * from user	</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>引用SQL代码片段</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置查询所有操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;defaultSql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置根据id查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;defaultSql&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName!=null and userName!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and username like #&#123;userName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userHobby!=null&quot;</span>&gt;</span></span><br><span class="line">            and hobby like #&#123;userHobby&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>





<hr>
<h1 id="9-MyBatis多表查询"><a href="#9-MyBatis多表查询" class="headerlink" title="9    MyBatis多表查询"></a>9    MyBatis多表查询</h1><blockquote>
<p>案例：用户和账户模型。</p>
<ul>
<li>用户表为User表；</li>
<li>账户表为Account表；</li>
<li>一个用户可以有多个账户。</li>
</ul>
</blockquote>
<h2 id="9-1-多表查询：一对一"><a href="#9-1-多表查询：一对一" class="headerlink" title="9.1    多表查询：一对一"></a>9.1    多表查询：一对一</h2><blockquote>
<p>需求：</p>
<ul>
<li>查询所有账户信息，关联查询账户对应的用户信息。</li>
</ul>
<p>注意：</p>
<ul>
<li>因为一个账户的信息只能供一个用户使用，所以从查询账户信息出发关联查询用户信息是一对一查询。</li>
<li>如果从用户信息出发查询用户下的账户信息则为一对多查询，因为一个用户可以有多个账户。</li>
</ul>
</blockquote>
<h3 id="9-1-1、方式1"><a href="#9-1-1、方式1" class="headerlink" title="9.1.1、方式1"></a>9.1.1、方式1</h3><ol>
<li>定义Account实体类</li>
<li>编写SQL语句<ul>
<li>查询账户信息的同时查询账户所对应的用户信息。</li>
</ul>
</li>
<li>定义AccountUser类<ul>
<li>为了能够封装上面SQL语句的查询结果，定义<code>AccountUser</code>类，既要包含账户信息，同时还要包含用户信息，所以我们在定义AccountUser类时可以继承Account类。</li>
</ul>
</li>
<li>定义账户的持久层Dao接口</li>
<li>定义AccountDao.xml配置文件中的配置信息</li>
<li>创建AccountTest测试类</li>
</ol>
<h3 id="9-1-2、方式2"><a href="#9-1-2、方式2" class="headerlink" title="9.1.2、方式2"></a>9.1.2、方式2</h3><blockquote>
<ul>
<li>我们可以在Account类中加入一个User类的对象来表示这个账户所属的用户。</li>
<li>在<code>mapper.xml</code>中定义<code>resultMap</code>用于映射一对一查询结果。</li>
</ul>
</blockquote>
<ol>
<li><p>修改Account类</p>
<ul>
<li>在Account类中加入User类的对象作为Account类的一个属性。</li>
</ul>
</li>
<li><p>修改AccountDao接口中的方法</p>
</li>
<li><p>重新定义AccountDao.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.IAccountDao&quot;</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;accountMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--用于指定类中引入的另一个实体类对象--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hobby&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在AccountTest类中加入测试方法</p>
</li>
</ol>
<h2 id="9-2-一对多查询"><a href="#9-2-一对多查询" class="headerlink" title="9.2    一对多查询"></a>9.2    一对多查询</h2><blockquote>
<p>需求：</p>
<ul>
<li>查询用户信息以及用户所关联的全部账号信息。</li>
</ul>
<p>分析：</p>
<ul>
<li>用户信息和账号信息是一对多关系，并且查询过程中如果有用户没有账户信息，此时也要将用户信息查询出来，这时候采用左外连接查询比较合适。</li>
</ul>
</blockquote>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><ol>
<li><p>编写SQL语句</p>
</li>
<li><p>User类中加入<code>List&lt;Account&gt;</code></p>
</li>
<li><p>用户持久层Dao接口中加入查询方法</p>
</li>
<li><p>用户持久层Dao映射配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.IUserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			collection用于建立一对多集合属性的对应关系，</span></span><br><span class="line"><span class="comment">			ofType用于指定集合元素的数据类型。</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;accounts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;aid&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line">collection：</span><br><span class="line">	定义了用户关联的账户信息，表示关联查询结果集。</span><br><span class="line">property=&quot;accounts&quot;:</span><br><span class="line">	关联查询的结果集存储在User对象的哪个属性上；</span><br><span class="line">ofType=&quot;account&quot;:</span><br><span class="line">	指定关联查询的结果集中的对象类型，即accounts列表中对象的类型。</span><br><span class="line">	此处可以使用别名，也可以使用全限定类名。</span><br></pre></td></tr></table></figure></li>
<li><p>测试方法</p>
</li>
</ol>
<hr>
<h2 id="9-2-多表查询：多对多"><a href="#9-2-多表查询：多对多" class="headerlink" title="9.2    多表查询：多对多"></a>9.2    多表查询：多对多</h2><blockquote>
<p>用户和角色关系模型：</p>
<ul>
<li>用户类：User</li>
<li>角色类：Role</li>
</ul>
<p>每个用户都要扮演多个角色，每个角色都对应多个用户。</p>
</blockquote>
<h3 id="9-2-2-业务要求及及实现SQL"><a href="#9-2-2-业务要求及及实现SQL" class="headerlink" title="9.2.2    业务要求及及实现SQL"></a>9.2.2    业务要求及及实现SQL</h3><blockquote>
<p>需求：</p>
<ul>
<li>实现查询所有对象并加载每个对象扮演的角色信息。</li>
</ul>
<p>分析：</p>
<ul>
<li>查询角色需要Role表，但是通过Role表并不能直接找到对应的User的全部信息，而是要通过中间表(User_Role表)才能关联到用户信息。</li>
</ul>
</blockquote>
<h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><ol>
<li>编写Role实体类<ul>
<li>Role实体类中包含<code>List&lt;user&gt; users</code>属性</li>
</ul>
</li>
<li>编写Role持久层接口</li>
<li>编写映射文件</li>
<li>编写测试类</li>
</ol>
<hr>
<h1 id="10-MyBatis延迟加载"><a href="#10-MyBatis延迟加载" class="headerlink" title="10    MyBatis延迟加载"></a>10    MyBatis延迟加载</h1><blockquote>
<p><strong>问</strong>：在一对多关系中，假设我们有一个用户，他有100个账户。</p>
<ol>
<li>当我们查询用户信息的时候，要不要把关联的账户查询出来？</li>
<li>当我们查询账户信息时，要不要把关联的用户查询出来？</li>
</ol>
<p><strong>答</strong>：</p>
<pre><code> 1. 在查询用户时，用户名下的账户信息，应该是什么时候使用，什么时候再加载的；
 2. 在查询账户时，账户所属的用户信息应该是随着查询账户一起加载出来的。
</code></pre>
</blockquote>
<blockquote>
<ul>
<li><p><strong>延迟加载</strong>：在真正使用数据的时候才发起查询，不用的时候不查询。按需加载（<strong>懒加载</strong>）</p>
<p><strong>缺点</strong>：因为只有当需要用到数据的时候，才会进行数据库查询，这样在大批量查询数据时，因为查询工作也要消耗时间，所以可能造成用户等待时间变长，造成用户体验下降。</p>
<p><strong>懒加载是针对级联使用的。</strong></p>
</li>
<li><p><strong>立即加载</strong>：不管是否使用，只要调用方法，立即进行查询。</p>
</li>
</ul>
</blockquote>
<p>在4种表关系中：</p>
<table>
<thead>
<tr>
<th align="center">表关系</th>
<th align="center">加载方式</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>一对多、多对多</code></td>
<td align="center">延迟加载</td>
</tr>
<tr>
<td align="center"><code>一对一、多对一</code></td>
<td align="center">立即加载</td>
</tr>
</tbody></table>
<h2 id="延迟加载案例"><a href="#延迟加载案例" class="headerlink" title="延迟加载案例"></a>延迟加载案例</h2><h3 id="1、需求"><a href="#1、需求" class="headerlink" title="1、需求"></a>1、需求</h3><blockquote>
<p>查询用户（User）信息，并且关联查询账户（Account）信息。</p>
<ul>
<li>如果先查询用户（User）信息即可满足要求，当我们需要使用账户（Account）信息时再查询账户信息。把对账户（Account）信息按需查询就是延迟加载。</li>
<li>MyBatis在实现多表操作时，我们使用了<code>association</code>、<code>collection</code>实现一对一、一对多映射。<code>association</code>、<code>collection</code>具备延迟加载的功能。</li>
</ul>
</blockquote>
<h3 id="2、使用assocation实现延迟加载"><a href="#2、使用assocation实现延迟加载" class="headerlink" title="2、使用assocation实现延迟加载"></a>2、使用assocation实现延迟加载</h3><h4 id="1、准备数据库"><a href="#1、准备数据库" class="headerlink" title="1、准备数据库"></a>1、准备数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">-- 创建数据库</span><br><span class="line">CREATE DATABASE mybatis;</span><br><span class="line">-- 使用数据库</span><br><span class="line">USE mybatis;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 创建user表[主表]</span><br><span class="line">CREATE TABLE IF NOT EXISTS USER(</span><br><span class="line">	id 	INT(16) 	NOT NULL AUTO_INCREMENT PRIMARY KEY,  -- ID（主键）</span><br><span class="line">	NAME	VARCHAR(16) 	NOT NULL,				-- 用户姓名</span><br><span class="line">	gender 	VARCHAR(8)						-- 用户性别</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 创建Account表[从表]</span><br><span class="line">CREATE TABLE IF NOT EXISTS account(</span><br><span class="line">	id INT(32) PRIMARY KEY AUTO_INCREMENT,		-- 账户编号</span><br><span class="line">	username VARCHAR(32) UNIQUE,			-- 账户名</span><br><span class="line">	PASSWORD VARCHAR(32) NOT NULL,			-- 账户密码</span><br><span class="line">	money DOUBLE, 					-- 账户余额 </span><br><span class="line">	uid INT(32) NOT NULL, 				-- 用户ID（外键）</span><br><span class="line">	FOREIGN KEY(uid) REFERENCES USER(id) 		-- 配置外键		</span><br><span class="line">	 		</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 向user表中插入数据（主表）</span><br><span class="line">INSERT INTO USER (NAME, gender) VALUES (&quot;里番&quot;,&quot;男&quot;);</span><br><span class="line">INSERT INTO USER (NAME, gender) VALUES (&quot;刘玉豪&quot;,&quot;男&quot;);</span><br><span class="line">INSERT INTO USER (NAME, gender) VALUES (&quot;谭思雨&quot;,&quot;男&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 向account表中插入数据（从表）[此时主表中只有三个id值（1，2，3）]</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;农业银行_lf&quot;,&quot;lf123&quot;,999,1);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;交通银行_lf&quot;,&quot;lf123&quot;,666,1);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;交通银行_llh&quot;,&quot;lyh123&quot;,1001,2);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;交通银行_tsy&quot;,&quot;tsy123&quot;,888,3);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;建设银行_tsy&quot;,&quot;tsy123&quot;,1666,3);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;工商银行_tsy&quot;,&quot;tsy123&quot;,0.9,3);</span><br><span class="line"></span><br><span class="line">-- 查询account表的同时查询到每个account关联的user信息</span><br><span class="line">SELECT * FROM account,USER</span><br><span class="line">WHERE account.uid = user.id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 删除account表</span><br><span class="line">DROP TABLE IF EXISTS account ;</span><br><span class="line">-- 删除user表</span><br><span class="line">DROP TABLE IF EXISTS USER;</span><br><span class="line"></span><br><span class="line">-- 查询user表</span><br><span class="line">SELECT * FROM USER;</span><br><span class="line">-- 查询account表</span><br><span class="line">SELECT * FROM account;</span><br><span class="line"></span><br><span class="line">-- 删除account表中的数据</span><br><span class="line">TRUNCATE account;</span><br></pre></td></tr></table></figure>

<h4 id="2、创建Maven工程，导入依赖坐标"><a href="#2、创建Maven工程，导入依赖坐标" class="headerlink" title="2、创建Maven工程，导入依赖坐标"></a>2、创建Maven工程，导入依赖坐标</h4><h4 id="3、编写SqlMapConfig-xml配置文件"><a href="#3、编写SqlMapConfig-xml配置文件" class="headerlink" title="3、编写SqlMapConfig.xml配置文件"></a>3、编写SqlMapConfig.xml配置文件</h4><p>进入MyBatis官网，找到<code>settings</code>的说明信息：</p>
<table>
<thead>
<tr>
<th align="center">设置名</th>
<th align="center">描述</th>
<th align="center">有效值</th>
<th align="center">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>lazyLoadingEnabled</code></td>
<td align="center">延迟加载的全局开关。当开启时，所有的关联对象都会延迟加载。 如果需要指定特定关联关系中可通过设置 <code>fetchType</code> 属性来覆盖延迟加载的开关状态。</td>
<td align="center">true/false</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center"><code>aggressiveLazyLoading</code></td>
<td align="center">积极的懒加载，开启时，任一方法的调用都会加载该对象的所有延迟加载属性。 否则，每个延迟加载属性会按需加载。</td>
<td align="center">true/false</td>
<td align="center">false</td>
</tr>
</tbody></table>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--MyBatis的主配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--开启延迟加载的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置映射文件的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper resource=&quot;cn/xsyu/dao/AccountDao.xml&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、编写实体类"><a href="#4、编写实体类" class="headerlink" title="4、编写实体类"></a>4、编写实体类</h4><h4 id="5、编写Dao层接口"><a href="#5、编写Dao层接口" class="headerlink" title="5、编写Dao层接口"></a>5、编写Dao层接口</h4><h4 id="6、编写映射配置文件"><a href="#6、编写映射配置文件" class="headerlink" title="6、编写映射配置文件"></a>6、编写映射配置文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.AccountDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--建立POJO中属性与数据库表中字段的映射关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;accountMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.Account&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;uid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入自定义实体类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">javaType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;accountMap&quot;</span>&gt;</span></span><br><span class="line">        SELECT * FROM account,USER WHERE account.uid = user.id;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7、编写测试类"><a href="#7、编写测试类" class="headerlink" title="7、编写测试类"></a>7、编写测试类</h4><hr>
<h3 id="3、使用Collection实现延迟加载"><a href="#3、使用Collection实现延迟加载" class="headerlink" title="3、使用Collection实现延迟加载"></a>3、使用Collection实现延迟加载</h3><h4 id="1、改造实体类User，添加一个List-lt-Account-gt-属性"><a href="#1、改造实体类User，添加一个List-lt-Account-gt-属性" class="headerlink" title="1、改造实体类User，添加一个List&lt;Account&gt;属性"></a>1、改造实体类User，添加一个<code>List&lt;Account&gt;</code>属性</h4><h4 id="2、编写Dao层接口"><a href="#2、编写Dao层接口" class="headerlink" title="2、编写Dao层接口"></a>2、编写Dao层接口</h4><h4 id="3、新增一个持久层映射配置文件User-xml"><a href="#3、新增一个持久层映射配置文件User-xml" class="headerlink" title="3、新增一个持久层映射配置文件User.xml"></a>3、新增一个持久层映射配置文件User.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置一对多--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;accounts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;cn.xsyu.domain.Account&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;uid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置findAll--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">        select * from USER,account where user.id=account.uid;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3、修改SqlMapConfig中的映射配置文件为包扫描"><a href="#3、修改SqlMapConfig中的映射配置文件为包扫描" class="headerlink" title="3、修改SqlMapConfig中的映射配置文件为包扫描"></a>3、修改SqlMapConfig中的映射配置文件为包扫描</h4><h4 id="4、编写测试类"><a href="#4、编写测试类" class="headerlink" title="4、编写测试类"></a>4、编写测试类</h4><h1 id="11-MyBatis中的缓存"><a href="#11-MyBatis中的缓存" class="headerlink" title="11    MyBatis中的缓存"></a>11    MyBatis中的缓存</h1><blockquote>
<ol>
<li><p><strong>什么是缓存？</strong></p>
<ul>
<li>存在于内存中的临时数据。</li>
</ul>
</li>
<li><p><strong>为什么使用缓存？</strong></p>
<ul>
<li>减少和数据库的交互次数，提高执行效率。</li>
</ul>
</li>
<li><p><strong>什么样的数据建议使用缓存，什么样的数据不建议使用缓存？</strong></p>
<ul>
<li>经常查询</li>
<li>不经常改变</li>
<li>数据的正确与否对最终结果影响不大</li>
</ul>
</li>
<li><p><strong>MyBatis中的一级缓存和二级缓存</strong></p>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>一级缓存</strong>：</p>
<ul>
<li>* </li>
</ul>
<p>二级缓存</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">它指的是MyBatis中的SqlSessionFactory对象的缓存。	</span><br><span class="line">由同一个SqlSessionFactory对象创建的SqlSession共享其缓存。</span><br><span class="line">	</span><br><span class="line">二级缓存的使用步骤：</span><br><span class="line">	step1：让MyBatis框架支持二级缓存（在SqlMapConfig.xml中配置）</span><br><span class="line">	step2：让当前的映射文件支持二级缓存（在UserDao.xml中配置）</span><br><span class="line">	step3：让当前的操作支持二级缓存（在&lt;select&gt;标签中配置）</span><br></pre></td></tr></table></figure>







<h2 id="11-1-MyBatis一级缓存"><a href="#11-1-MyBatis一级缓存" class="headerlink" title="11.1    MyBatis一级缓存"></a>11.1    MyBatis一级缓存</h2><blockquote>
<ul>
<li><p>一级缓存是SqlSession级别的缓存</p>
<blockquote>
<p>我们在Dao层调用数据库查询之后，得到的查询结果除了返回给service层使用，同时也会存入到SqlSession对象的一块内存区域中。    </p>
<ul>
<li>该区域的结构是一个Map。</li>
<li>当我们再次查询同样的数据时，MyBatis会先去SqlSession的缓存区查询结果是否存在，若存在则直接拿出来使用；</li>
<li>当SqlSession对象消失时，MyBatis的一级缓存也就消失了。</li>
</ul>
</blockquote>
</li>
<li><p>一级缓存是自动运行的，默认是一直开启的。</p>
</li>
</ul>
</blockquote>
<h3 id="11-1-1-证明一级缓存的存在"><a href="#11-1-1-证明一级缓存的存在" class="headerlink" title="11.1.1    证明一级缓存的存在"></a>11.1.1    证明一级缓存的存在</h3><ol>
<li>创建Maven工程，导入依赖</li>
<li>编写实体类</li>
<li>编写Dao层接口</li>
<li>编写主配置文件</li>
<li>编写映射配置文件</li>
<li>编写测试类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 1. 读取配置文件，获取配置文件信息</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 2. 根据配置文件，创建SqlSessionFactory工厂</span></span><br><span class="line">    <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(in);</span><br><span class="line">    <span class="comment">// 3.根据SqlSessionFactory工厂创建SqlSession核心对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">    <span class="comment">// 4.创建代理对象</span></span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.执行方法，输出结果</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> userDao.findById(<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;第一次查询的用户&quot;</span>+user1);</span><br><span class="line"></span><br><span class="line">    sqlSession.clearCache();    <span class="comment">// 清空缓存[若清空缓存，则最终输出结果为false，反之则为true]</span></span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userDao.findById(<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;第一次查询的用户&quot;</span>+user2);</span><br><span class="line">    System.out.println(user1==user2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.释放资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">    in.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*	  可以发现，虽然在上面的代码中我们查询了2次数据库，但是最后只执行了一次数据库操作。</span></span><br><span class="line"><span class="comment">*	这就是MyBatis中的一级缓存起作用了。因为一级缓存的存在，导致第2次查询id=2的记录时，并没有向数据库发送请求，而* 	是直接从一级缓存中查询数据。</span></span><br><span class="line"><span class="comment">/</span></span><br></pre></td></tr></table></figure>



<h3 id="11-1-2-一级缓存的分析"><a href="#11-1-2-一级缓存的分析" class="headerlink" title="11.1.2    一级缓存的分析"></a>11.1.2    一级缓存的分析</h3><blockquote>
<p>一级缓存是SqlSession级别的缓存，当调用SqlSession的<code>修改、添加、删除、commit()、close()、clearCache()</code>等方法时，就会清空一级缓存。</p>
</blockquote>
<p><img src="/2020/08/25/MyBatis/MyBatis%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98.png"></p>
<blockquote>
<ol>
<li><p>第一次查询id为1的用户信息，先去找缓存中是否有id为1的用户信息，如果没有，再从数据库中查询用户信息；并将查到的用户信息存储到一级缓存中。</p>
</li>
<li><p>**[可选]**如果SqlSession执行了增删改(没有查)操作、清空缓存操作、事务相关操作等，则会清空SqlSession中的一级缓存，这样做的目的是为了让缓存中存储的是最新的信息，避免脏读。</p>
</li>
<li><p>第二次查询id为1的用户信息，先去找缓存中是否有id为1的用户信息，如果有，直接从缓存中获取用户信息。</p>
</li>
</ol>
</blockquote>
<h2 id="11-2-MyBatis二级缓存"><a href="#11-2-MyBatis二级缓存" class="headerlink" title="11.2    MyBatis二级缓存"></a>11.2    MyBatis二级缓存</h2><h3 id="11-2-1-二级缓存的分析"><a href="#11-2-1-二级缓存的分析" class="headerlink" title="11.2.1    二级缓存的分析"></a>11.2.1    二级缓存的分析</h3><blockquote>
<ul>
<li><p>二级缓存是<code>SqlSessionFactory级别</code>的缓存，</p>
</li>
<li><p>SqlSessionFactory对象在其内存中创建一个共享域保存从数据库查到的数据    </p>
</li>
</ul>
</blockquote>
<p><img src="/2020/08/25/MyBatis/MyBatis%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98.png"></p>
<blockquote>
<p>在开启MyBatis二级缓存的前提下：</p>
<ol>
<li>SqlSession1对象去查询id为1的用户信息，查询到的用户信息存储在二级缓存中；</li>
<li>**[可选]**如果同一工厂对象SqlSessionFactory生产的SqlSession3对象执行增删改或事务相关方法，将会清空该二级缓存中区域中的数据。</li>
<li>SqlSession2对象去查询id为1的用户信息，首先会去二级缓存中找是否存在数据，如果存在则直接从缓存中取出数据。</li>
</ol>
</blockquote>
<h3 id="11-2-2-二级缓存的开启"><a href="#11-2-2-二级缓存的开启" class="headerlink" title="11.2.2    二级缓存的开启"></a>11.2.2    二级缓存的开启</h3><ol>
<li>在SqlMapConfig.xml文件中开启二级缓存</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--因为cacheEnabled默认取值就是true，所以这一步可以省略不写--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>配置相关的Mapper映射文件</p>
<blockquote>
<ul>
<li><code>&lt;cacha&gt;</code>标签标志着当前这个<code>&lt;mapper&gt;</code>映射将使用二级缓存；</li>
<li>区分的标准就看<code>&lt;mapper&gt;</code>的<code>namespace</code>值。</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;cache/&gt;标签开启二级缓存针对的是某一个Dao接口；</span></span><br><span class="line"><span class="comment">	而对于Dao接口中具体的方法是否开启二级缓存则需要根据 statement上的 useCache 属性来设置。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置statement上的useCache属性</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置findById--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">useCache</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	设置UserDao.xml映射文件中的&lt;select&gt;标签中的属性为  usecache=&quot;true&quot;  ；</span></span><br><span class="line"><span class="comment">	标示当前这个statement要使用二级缓存，如果不使用则设置为false；</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	注意：</span></span><br><span class="line"><span class="comment">		如果每次查询都需要得到数据库中最新的状态，即不需要二级缓存，则设置 usecache=&quot;false&quot;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="11-2-3-二级缓存的注意事项"><a href="#11-2-3-二级缓存的注意事项" class="headerlink" title="11.2.3    二级缓存的注意事项"></a>11.2.3    二级缓存的注意事项</h3><blockquote>
<p>我们在使用二级缓存时，所缓存的类一定要实现<code>java.io.Serializable</code>接口，再这样就可以使用序列化方式来保存对象。</p>
</blockquote>
<hr>
<h1 id="12-MyBatis注解开发"><a href="#12-MyBatis注解开发" class="headerlink" title="12    MyBatis注解开发"></a>12    MyBatis注解开发</h1><blockquote>
<ul>
<li>环境搭建</li>
<li>单表CRUD</li>
<li>多表查询操作</li>
<li>缓存的配置 </li>
</ul>
</blockquote>
<h2 id="12-1-MyBatis的常用注解说明"><a href="#12-1-MyBatis的常用注解说明" class="headerlink" title="12.1    MyBatis的常用注解说明"></a>12.1    MyBatis的常用注解说明</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Insert	：	增加语句</span><br><span class="line">@Update	：	更新语句</span><br><span class="line">@Delete	：	删除语句</span><br><span class="line">@Select	：	查询语句</span><br><span class="line">@Result ：	类似于注解中的resultType</span><br><span class="line">@Results ：	类似于注解中的resultMap，完成对数据库表的列与JavaBean对象属性的映射</span><br><span class="line">@ResultMap ：	调用@Results封装好的映射关系</span><br><span class="line">@One ：	实现一对一结果集封装</span><br><span class="line">@Many ：	实现一对多结果集封装</span><br><span class="line">@SelectProvider ：	实现动态SQL映射</span><br><span class="line">@CacheNamespace ：	实现注解二级缓存的使用</span><br></pre></td></tr></table></figure>



<h2 id="12-2-MyBatis的CRUD（注解实现）"><a href="#12-2-MyBatis的CRUD（注解实现）" class="headerlink" title="12.2    MyBatis的CRUD（注解实现）"></a>12.2    MyBatis的CRUD（注解实现）</h2><ol>
<li><p>创建Maven工程，导入坐标</p>
</li>
<li><p>编写实体类</p>
</li>
<li><p>使用注解的方式编写Dao层接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id = &quot;userMap&quot;,value = &#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true, column = &quot;id&quot;, property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(id = false, column = &quot;name&quot;, property = &quot;name&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;gender&quot;, property = &quot;gender&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据ID查询用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResultMap(value = &quot;userMap&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user(name, gender) values(#&#123;name&#125;, #&#123;gender&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">add</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Update(&quot;update user set name=#&#123;name&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 聚合函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;Select count(*) from user&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">findCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模糊查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where name like #&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findLike</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>配置SqlMapConfig.xml配置文件</p>
</li>
<li><p>编写测试方法</p>
</li>
</ol>
<h2 id="12-3-使用注解实现复杂关系的映射开发"><a href="#12-3-使用注解实现复杂关系的映射开发" class="headerlink" title="12.3    使用注解实现复杂关系的映射开发"></a>12.3    使用注解实现复杂关系的映射开发</h2><blockquote>
<ol>
<li>在配置文件中配置复杂查询时，可以通过<code>&lt;resultMap&gt;标签</code>来实现，</li>
<li>在使用注解时我们需要借助 <code>@Results注解、@Result注解、@ResultMap注解、@One注解、@Many注解</code>。</li>
</ol>
</blockquote>
<h3 id="12-3-1-复杂关系映射的注解说明"><a href="#12-3-1-复杂关系映射的注解说明" class="headerlink" title="12.3.1    复杂关系映射的注解说明"></a>12.3.1    复杂关系映射的注解说明</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Results注解</span><br><span class="line">	* 代替的是&lt;resultMap&gt;标签</span><br><span class="line">	* 该注解中可以使用单个 @Result注解，也可以使用 @Result集合</span><br><span class="line">	* @Results(&#123;@Result(), @Result()&#125;) 或 @Results(@Result())</span><br><span class="line">	</span><br><span class="line">@Result注解</span><br><span class="line">	* 代替了 &lt;id&gt;标签和&lt;result&gt;标签</span><br><span class="line">	* 属性：</span><br><span class="line">		+ id ：	是否为主键字段</span><br><span class="line">		+ column ：	数据库的列名</span><br><span class="line">		+ property ：	POJO中映射的属性名</span><br><span class="line">		+ one ：	需要使用的 @One 注解。[@Result(one=@One)()]</span><br><span class="line">		+ many :	需要使用的 @Many 注解。[(@Result(many=@Many)())]</span><br><span class="line">        </span><br><span class="line">@One注解（一对一）</span><br><span class="line">	* 代替了&lt;assocation&gt;标签，是多表查询的关键，在注解中用来指定子查询返回单一对象</span><br><span class="line">	* 属性：</span><br><span class="line">		+ select ： 代表将要执行的SQL语句</span><br><span class="line">		+ fetchType ： 代表加载方式[延迟加载、立即加载] lazyLoadingEnabled</span><br><span class="line">     * 使用格式：</span><br><span class="line">     	+ @Result(column=&quot;&quot;, property=&quot;&quot;, one=@One(select=&quot;&quot;))</span><br><span class="line">     	</span><br><span class="line">@Many注解（多对一）</span><br><span class="line">	* 代替了&lt;Collection&gt;标签，是多表查询的关键，在注解中用来指定子查询返回的对象集合。</span><br><span class="line">	* 注意：</span><br><span class="line">	* 使用格式：</span><br><span class="line">		+ @Result(column=&quot;&quot;, property=&quot;&quot;, many=@Many(select=&quot;&quot;))</span><br></pre></td></tr></table></figure>







<hr>
<h2 id="12-4-MyBatis的二级缓存（注解方式）"><a href="#12-4-MyBatis的二级缓存（注解方式）" class="headerlink" title="12.4    MyBatis的二级缓存（注解方式）"></a>12.4    MyBatis的二级缓存（注解方式）</h2><ol>
<li><p>在SqlMapConfig.xml中开启二级缓存的支持</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置二级缓存--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在持久层接口中使用注解配置二级缓存</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheNamespace(block=true)</span>		<span class="comment">// MyBatis基于注解方式实现二级缓存</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span>()&#123;</span><br><span class="line">    <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/22/JavaSE%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/22/JavaSE%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84API/" class="post-title-link" itemprop="url">JavaSE中常见的API</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-22 21:01:10" itemprop="dateCreated datePublished" datetime="2020-08-22T21:01:10+08:00">2020-08-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-11-05 21:56:38" itemprop="dateModified" datetime="2020-11-05T21:56:38+08:00">2020-11-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><blockquote>
<ul>
<li><strong>API</strong>（Application Programming Interface）：应用程序编程接口</li>
</ul>
<p>API就是接口，接口中预先定义了一些方法声明，而没有具体的方法逻辑。所有实现了接口的实现类必须重写接口中的抽象方法，定义具体的方法逻辑。</p>
</blockquote>
<hr>
<h1 id="Object"><a href="#Object" class="headerlink" title="*    Object"></a>*    Object</h1><h2 id="1-包"><a href="#1-包" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object;	<span class="comment">// Class</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明"><a href="#2-解释说明" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><blockquote>
<ol>
<li>是Java语言的根类，</li>
<li>是所有类的父类,其中的非私有、非静态方法被所有类公用。</li>
<li>在对象实例化的时候，最终找的父类就是Object。</li>
<li>如果一个类没有特别指定父类，则默认继承自Object。</li>
</ol>
</blockquote>
<h2 id="3-成员方法"><a href="#3-成员方法" class="headerlink" title="3    成员方法"></a>3    成员方法</h2><blockquote>
<p><strong><code>Object</code>类中包含的成员方法有9个</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>clone()</code></td>
<td align="center"><code>Object</code></td>
<td align="center">创建并返回此对象的一个副本</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>equals(Object obj)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">指示其他某个对象是否与此对象“相等”。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>getClass()</code></td>
<td align="center"><code>Class</code></td>
<td align="center">返回此Object的运行时类</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>hashCode()</code></td>
<td align="center"><code>int</code></td>
<td align="center">返回该对象的Hash码值</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>toString()</code></td>
<td align="center"><code>String</code></td>
<td align="center">返回此对象的字符串表示</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>多线程</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>wait()</code></td>
<td align="center"><code>void</code></td>
<td align="center">在其他线程调用此对象的<code>notify()</code>或<code>notifyAll()</code>方法前，使当前线程等待。</td>
</tr>
<tr>
<td align="center">重载</td>
<td align="center"><code>wait(long time)</code></td>
<td align="center"><code>void</code></td>
<td align="center">在其他线程调用此对象的<code>notify()</code>或<code>notifyAll()</code>方法前，或者超过指定的时间量前，使当前线程等待。</td>
</tr>
<tr>
<td align="center">重载</td>
<td align="center"><code>wait(long time, int nanos)</code></td>
<td align="center"><code>void</code></td>
<td align="center">在其他线程调用此对象的<code>notify()</code>或<code>notifyAll()</code>方法前，或者超过指定的时间量前，或者其他某个线程中断当前线程，使当前线程等待。</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>notify()</code></td>
<td align="center"><code>void</code></td>
<td align="center">唤醒在此对象监视器上等待的单个进程</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>notifyAll()</code></td>
<td align="center"><code>void</code></td>
<td align="center">唤醒在此对象监视器上等待的所有线程</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>finalize()</code></td>
<td align="center"><code>void</code></td>
<td align="center">当垃圾回收器确定不存在对该对象的更多引用时，由对象的垃圾回收器调用此方法。</td>
</tr>
</tbody></table>
<h3 id="1-toString"><a href="#1-toString" class="headerlink" title="1.    toString()"></a>1.    toString()</h3><ul>
<li><code>toString()</code>方法，返回该对象的字符串表示。</li>
<li>缺省的<code>toString()</code>方法返回的字符串内容就是 <strong>对象的类型+@+内存地址值</strong>。</li>
<li>一般情况下，开发过程中都会重写<code>toString()</code>方法。</li>
</ul>
<h3 id="2-equals"><a href="#2-equals" class="headerlink" title="2.    equals()"></a>2.    equals()</h3><ul>
<li><code>equals(Object obj)</code>方法，指示其它某个对象是否与此对象“相等”。</li>
<li>缺省的<code>equals(Object obj)</code>方法，<strong>默认进行对象地址比较</strong>。只要不是一个对象，结果必然为false。</li>
<li>如果希望对对象的内容进行比较，则可以重写<code>equals(Object obj)</code>方法。</li>
</ul>
<hr>
<h1 id="Objects"><a href="#Objects" class="headerlink" title="*  Objects"></a>*  Objects</h1><h2 id="1、包"><a href="#1、包" class="headerlink" title="1、包"></a>1、包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Objects;</span><br></pre></td></tr></table></figure>

<h2 id="2、解释说明"><a href="#2、解释说明" class="headerlink" title="2、解释说明"></a>2、解释说明</h2><blockquote>
<ol>
<li>一个工具类，提供了一些静态方法来操作对象</li>
<li>Objects类中的方法是 null-save（空指针安全的） 或 null-tolerant（容忍空指针的）。</li>
<li>用于计算对象的hashCode、返回对象的字符串表示形式、比较两个对象等。</li>
</ol>
</blockquote>
<ol>
<li><p>在比较两个对象时，Object类中的equals()方法容易抛出空指针异常，而Objects类中的equals()方法就优化了这个问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断2个对象是否相等</span></span><br><span class="line">Objects.equals(Object a, Object b)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="System"><a href="#System" class="headerlink" title="*    System"></a>*    System</h1><h2 id="1-包-1"><a href="#1-包-1" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.lang.System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">System</span> <span class="keyword">extends</span> <span class="title class_">Object</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-1"><a href="#2-解释说明-1" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><blockquote>
<p>System类中提供了大量的静态方法，可以获取与系统相关的信息或系统级操作。</p>
</blockquote>
<h2 id="3-成员方法-1"><a href="#3-成员方法-1" class="headerlink" title="3    成员方法"></a>3    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>currentTimeMillis()</code></td>
<td align="center"><code>long</code></td>
<td align="center">返回当前时间的毫秒值表现形式</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>arraycopy(Object src, int srcPos, Object dest, int destPos, int length)</code></td>
<td align="center"><code>void</code></td>
<td align="center">将数组中指定的数据拷贝到另一个数组中的指定位置上</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="4-练习"><a href="#4-练习" class="headerlink" title="4    练习"></a>4    练习</h2><ol>
<li><p>验证for循环打印数字1~9999所需要的时间（毫秒）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    验证for循环打印数字1~9999所需要的时间（毫秒）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 计时开始</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.循环打印1~9999</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">9999</span>; i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 计时结束</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 计算时间差(ms)</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">temp</span> <span class="operator">=</span> end - start;</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>将src数组中的前3个元素，复制到dest数组的前3个位置上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    验证for循环打印数字1~9999所需要的时间（毫秒）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建src数组和dest数组</span></span><br><span class="line">        <span class="type">int</span>[] src = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">       <span class="type">int</span>[] dest = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.复制</span></span><br><span class="line">        System.arraycopy(src,<span class="number">0</span>, dest, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 展示</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> e : src) &#123;</span><br><span class="line">            System.out.println(e);  <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d : dest) &#123;</span><br><span class="line">            System.out.println(d);  <span class="comment">// [1,2,3,9,10]</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="包装类"><a href="#包装类" class="headerlink" title="*    包装类"></a>*    包装类</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1    概述"></a>1    概述</h2><blockquote>
<ul>
<li>Java中的数据类型可分为2类：基本类型 与 引用类型。</li>
<li>基本类型的优点是效率高，然而在很多情况下还是会创建对象使用，因为对象可以实现更多的功能。</li>
<li>如果想要让基本类型像对象一样操作，就可以使用基本类型对应的包装类。</li>
</ul>
</blockquote>
<h2 id="2-装箱与拆箱"><a href="#2-装箱与拆箱" class="headerlink" title="2    装箱与拆箱"></a>2    装箱与拆箱</h2><h3 id="2-1-装箱"><a href="#2-1-装箱" class="headerlink" title="2.1    装箱"></a>2.1    装箱</h3><ol>
<li>使用构造函数装箱</li>
<li>使用包装类中的<code>valueOf()</code>方法装箱。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用构造函数装箱</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">69</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用包装类中的`valueOf()`静态方法装箱。</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> Integer.valueOf(<span class="number">69</span>);</span><br></pre></td></tr></table></figure>



<h3 id="2-2-拆箱"><a href="#2-2-拆箱" class="headerlink" title="2.2    拆箱"></a>2.2    拆箱</h3><ul>
<li>使用<code>intValue()</code>方法拆箱</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> i.intValue();</span><br></pre></td></tr></table></figure>



<h3 id="2-3-自动装箱和自动拆箱"><a href="#2-3-自动装箱和自动拆箱" class="headerlink" title="2.3    自动装箱和自动拆箱"></a>2.3    自动装箱和自动拆箱</h3><ul>
<li>由于我们经常要做基本类型与包装类之间的转换，从JDK1.5之后，基本类型与包装类型的装箱、拆箱可以自动完成。</li>
</ul>
<h2 id="3-基本类型-与-字符串-之间的转换"><a href="#3-基本类型-与-字符串-之间的转换" class="headerlink" title="3    基本类型 与 字符串 之间的转换"></a>3    基本类型 与 字符串 之间的转换</h2><h3 id="3-1-基本类型–-gt-字符串"><a href="#3-1-基本类型–-gt-字符串" class="headerlink" title="3.1    基本类型–&gt;字符串"></a>3.1    基本类型–&gt;字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	基本类型--&gt;字符串：总共有3种方式。</span></span><br><span class="line"><span class="comment">	  1. 基本类型直接与字符串&quot;&quot;相连即可</span></span><br><span class="line"><span class="comment">	  2. toString()方法</span></span><br><span class="line"><span class="comment">	  3. String类中的静态方法valueOf()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="3-2-字符串–-gt-基本类型"><a href="#3-2-字符串–-gt-基本类型" class="headerlink" title="3.2    字符串–&gt; 基本类型"></a>3.2    字符串–&gt; 基本类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	String类型 --&gt; 基本类型：</span></span><br><span class="line"><span class="comment">	  除了Character类之外，其它所有的包装类都具有parseXxx静态方法可以将字符串参数转换为对应的基本类型。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>parseByte(String s)</code></td>
<td align="center"><code>byte</code></td>
<td align="center">将字符串参数转换为对应的byte基本类型</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>parseShort(String s)</code></td>
<td align="center"><code>short</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>parseInt(String s)</code></td>
<td align="center"><code>int</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>parseLong(String s)</code></td>
<td align="center"><code>long</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>parseFloat(String s)</code></td>
<td align="center"><code>float</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>parseDouble(String s)</code></td>
<td align="center"><code>double</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>parseBoolean(String s)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>如果字符串参数的内容无法正确转换为对应的基本类型，则会抛出<code>java.lang.NumberFormatException</code>。</li>
</ul>
<hr>
<h1 id="Sacnner"><a href="#Sacnner" class="headerlink" title="*    Sacnner"></a>*    Sacnner</h1><h2 id="1-包-2"><a href="#1-包-2" class="headerlink" title="1.    包"></a>1.    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util.Scanner</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Scanner</span> <span class="keyword">extends</span> <span class="title class_">Object</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;String&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-解释说明-2"><a href="#2-解释说明-2" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h2><ul>
<li>一个可以使用正则表达式来解析基本类型和字符串的<strong>简单文本扫描器</strong>。 </li>
</ul>
<h2 id="3-构造方法"><a href="#3-构造方法" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h2><table>
<thead>
<tr>
<th align="center">构造方法摘要</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>Scanner(File source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定文件扫描的。</td>
</tr>
<tr>
<td align="center"><code>Scanner(File source, String charsetName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(InputStream source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定的输入流扫描的。</td>
</tr>
<tr>
<td align="center"><code>Scanner(InputStream source, String charsetName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(Readable source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定源扫描的。</td>
</tr>
<tr>
<td align="center"><code>Scanner(ReadableByteChannel source)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(ReadableByteChannel source, String charsetName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(String source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定字符串扫描的。</td>
</tr>
</tbody></table>
<ul>
<li><strong>System.in</strong>代表通过键盘录入数据。</li>
</ul>
<h2 id="4-成员方法"><a href="#4-成员方法" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h2><table>
<thead>
<tr>
<th align="center">编号</th>
<th align="center">方法</th>
<th align="center">返回值类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>hasNext()</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>hasNextInt()</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>next()</code></td>
<td align="center">String</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>nextInt()</code></td>
<td align="center">int</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>...</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="5-练习"><a href="#5-练习" class="headerlink" title="5. 练习"></a>5. 练习</h2><ol>
<li><p>键盘录入两个数据并求和。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建Scanner实例</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.键盘录入2个数据</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第1个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第2个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.求和</span></span><br><span class="line">        System.out.println(num1+num2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>键盘录入三个数据并获取最大值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建Scanner实例</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.键盘录入3个数据</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第1个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第2个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第3个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num3</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.求最大值</span></span><br><span class="line">        <span class="type">int</span> max;</span><br><span class="line">        <span class="keyword">if</span> (num1&gt;=num2)&#123;</span><br><span class="line">            max = num1&gt;=num3?num1:num3;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            max = num2&gt;=num3?num2:num3;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(max);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Random"><a href="#Random" class="headerlink" title="*    Random"></a>*    Random</h1><h2 id="1-包-3"><a href="#1-包-3" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util.Random</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Random</span> <span class="keyword">extends</span> <span class="title class_">Object</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-3"><a href="#2-解释说明-3" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><ul>
<li>此类的实例用于生成伪随机数流。</li>
</ul>
<h2 id="3-构造方法-1"><a href="#3-构造方法-1" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><table>
<thead>
<tr>
<th align="center"><code>Random()</code></th>
<th align="center">创建一个新的随机数生成器。</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>Random(long seed)</code></td>
<td align="center">使用单个 <code>long</code> 种子创建一个新的随机数生成器。</td>
</tr>
</tbody></table>
<h2 id="4-成员方法-1"><a href="#4-成员方法-1" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>nextInt()</code></td>
<td align="center">int</td>
<td align="center">返回下一个伪随机数</td>
</tr>
<tr>
<td align="center"><code>next(int bits)</code></td>
<td align="center">int</td>
<td align="center">生成下一个伪随机数。</td>
</tr>
<tr>
<td align="center"><code>nextInt(int n)</code></td>
<td align="center">int</td>
<td align="center">返回一个伪随机数，范围是<code>[0,n)</code></td>
</tr>
<tr>
<td align="center"><code>nextDouble()</code></td>
<td align="center">double</td>
<td align="center">返回下一个伪随机数，范围是<code>[0.0, 1.0]</code></td>
</tr>
<tr>
<td align="center"><code>...</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="5-练习-1"><a href="#5-练习-1" class="headerlink" title="5    练习"></a>5    练习</h2><ol>
<li><p>获取1~n之间的随机数，包含n。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取1~n之间的随机数，包含n。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建Random类的实例</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.获取随机数[包含n]</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> random.nextInt(n+<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>猜数字小游戏。</p>
<ul>
<li>游戏开始时，会生成一个1~100之间的整数<code>number</code>。</li>
<li>玩家猜测一个数字<code>guessNumber</code>，会与<code>number</code>作比较，系统提示大了或者小了。</li>
<li>直到玩家猜中，游戏结束。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      猜数字小游戏。</span></span><br><span class="line"><span class="comment">        - 游戏开始时，会生成一个1~100之间的整数`number`。</span></span><br><span class="line"><span class="comment">        - 玩家猜测一个数字`guessNumber`，会与`number`作比较，系统提示大了或者小了。</span></span><br><span class="line"><span class="comment">        - 直到玩家猜中，游戏结束。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建Random类的实例,生成一个1~100之间的整数`number`</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> random.nextInt(<span class="number">101</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.1 创建Scanner类的实例，用于接收用户输入的数字</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 比较，提示</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 2.2 键盘录入玩家输入的数字`guessNumber`</span></span><br><span class="line">            System.out.println(<span class="string">&quot;请输入整数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">guessNumber</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (number&gt;guessNumber)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;猜小了&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (number&lt;guessNumber)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;猜大了&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;恭喜你猜中了！&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="String类"><a href="#String类" class="headerlink" title="*    String类"></a>*    String类</h1><h2 id="1-包-4"><a href="#1-包-4" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.String</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Comparable&lt;String&gt;, CharSequence</span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-4"><a href="#2-解释说明-4" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><ul>
<li><code>String</code> 类代表字符串。Java 程序中的所有字符串字面值（如 <code>&quot;abc&quot;</code> ）都作为此类的实例对象。</li>
</ul>
<h2 id="3-构造方法-2"><a href="#3-构造方法-2" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 无参构造</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 通过字符数组构造</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 通过字节数组构造</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(&#123;<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//......</span></span><br></pre></td></tr></table></figure>



<h2 id="4-特点"><a href="#4-特点" class="headerlink" title="4    特点"></a>4    特点</h2><ol>
<li><p><strong>字符串不可变</strong>；字符串的值在创建之后不能更改。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">s1 += <span class="string">&quot;d&quot;</span>;</span><br><span class="line">System.out.println(s1);	<span class="comment">// abcd</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	内存中有 “abc”， “abcd”两个对象，s1从指向 “abc” 变为了指向“abcd”</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
<li><p>因为String对象是不可变的，所以它们可以被共享。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	内存中只有一个&quot;abc&quot;对象被创建，同时被s1和s2z共享</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>&quot;abc&quot;</code>等效于<code>char[] data=&#123;&#39;a&#39;, &#39;b&#39;, &#39;c&#39;&#125;</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 等效于： </span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> data[] = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(data);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-成员方法-2"><a href="#4-成员方法-2" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>equals(Object anotherObj)</code></td>
<td align="center">boolean</td>
<td align="center">继承自Object</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>equalsIgnoreCase(String anotherStr)</code></td>
<td align="center">boolean</td>
<td align="center">将此字符串与指定字符串对象进行比较，忽略大小写</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>length()</code></td>
<td align="center">int</td>
<td align="center">返回字符串的长度</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>concat(String str)</code></td>
<td align="center">String</td>
<td align="center">拼接字符串，返回拼接结果</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>charAt(int index)</code></td>
<td align="center">char</td>
<td align="center">返回指定索引处的char值</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>indexOf(String str)</code></td>
<td align="center">int</td>
<td align="center">返回指定子字符串第一次出现在该字符串内的索引</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>subString(int beginIndex, int endIndex)</code></td>
<td align="center">String</td>
<td align="center">返回一个子字符串，<code>[beginIndex, endIndex)</code></td>
</tr>
<tr>
<td align="center">重载</td>
<td align="center"><code>subString(int beginIndex)</code></td>
<td align="center">String</td>
<td align="center">返回一个子字符串，<code>[beginIndex, ending]</code></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>toCharArray()</code></td>
<td align="center">char[]</td>
<td align="center">将此字符串转换为新的字符数组</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>getBytes()</code></td>
<td align="center">byte[]</td>
<td align="center">使用平台默认字符集将String字符串转换为字节数组</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>replace(CharSequence target, CharSequence replacement)</code></td>
<td align="center">String</td>
<td align="center">将与target匹配的字符串使用replacement字符串替换</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>split(String regex)</code></td>
<td align="center">String[]</td>
<td align="center">按regex拆分字符串，返回拆分后的字符串数组</td>
</tr>
</tbody></table>
<h2 id="5-练习-2"><a href="#5-练习-2" class="headerlink" title="5    练习"></a>5    练习</h2><h3 id="1-拼接字符串"><a href="#1-拼接字符串" class="headerlink" title="1.    拼接字符串"></a>1.    拼接字符串</h3><ul>
<li>定义一个方法，把数组<code>&#123;1,2,3&#125;</code>按照指定格式拼接成一个字符串。</li>
<li>格式参照如下：<code>[word1#word2#word3]</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    - 定义一个方法，把数组`&#123;1,2,3&#125;`按照指定格式拼接成一个字符串。</span></span><br><span class="line"><span class="comment">    - 格式参照如下：`[word1#word2#word3]`</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> arrToString(arr);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">arrToString</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;[&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 拼接字符串</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> e : arr) &#123;</span><br><span class="line">            str = str+e+<span class="string">&quot;#&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        str+=<span class="string">&quot;]&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="2-统计字符个数"><a href="#2-统计字符个数" class="headerlink" title="2    统计字符个数"></a>2    统计字符个数</h3><ul>
<li>键盘录入一个字符，统计字符串中大小写字母及数字字符的个数。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    键盘录入一个字符，统计字符串中大小写字母及数字字符的个数。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 键盘录入字符</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入一个字符&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> scanner.next();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 统计字符串中的大小写字母及数字字符的个数</span></span><br><span class="line">            <span class="comment">// 1&gt; 将字符串s转换为字符数组chars[]</span></span><br><span class="line">        <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">countNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">countUpper</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">countDown</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2&gt; 遍历字符数组，得到每一个字符</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;chars.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (chars[i]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; chars[i]&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                countNum++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(chars[i]&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; chars[i]&lt;=<span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">                countDown++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(chars[i]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; chars[i]&lt;=<span class="string">&#x27;Z&#x27;</span>)&#123;</span><br><span class="line">                countUpper++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(countNum);</span><br><span class="line">        System.out.println(countDown);</span><br><span class="line">        System.out.println(countUpper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<hr>
<h1 id="StringBuilder类"><a href="#StringBuilder类" class="headerlink" title="*    StringBuilder类"></a>*    StringBuilder类</h1><h2 id="1-包-5"><a href="#1-包-5" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.lang.StringBuilder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. StringBuilder又称为可变字符序列，它是一个类似于String的字符串缓冲区，通过某些方法调用可以改变该序列的长	   度和内容。</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	2. StringBuilder是一个字符串缓冲区，它是一个容器。容器中可以装很多字符串，并且能够对其中的字符串进行各种操		作。</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	3. StringBuilder的内部拥有一个数组用来存放字符串内容，进行字符串拼接时，直接在数组中加入新内容。		   		StringBuilder会自动位数数组的扩容。【StringBuilder对象是可变的】</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">StringBuilder</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, CharSequence</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-5"><a href="#2-解释说明-5" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><h3 id="2-1-字符串拼接问题"><a href="#2-1-字符串拼接问题" class="headerlink" title="2.1    字符串拼接问题"></a>2.1    字符串拼接问题</h3><ul>
<li><p>由于String类的实例对象的内容不可改变，所以每当进行字符串拼接时，总是会在内存中创建一个新的对象用于存储拼接后的字符串。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">s += <span class="string">&quot; world&quot;</span>;</span><br><span class="line">System.out.println(s);	<span class="comment">// abcd</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	以上代码共产生了3个字符串。</span></span><br><span class="line"><span class="comment">        hello</span></span><br><span class="line"><span class="comment">         world</span></span><br><span class="line"><span class="comment">        hello world</span></span><br><span class="line"><span class="comment">    引用变量s首先指向hello对象，最终指向拼接出来的新字符串对象 hello world</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	  由此可知，如果对字符串进行拼接操作，每次拼接，都会构建一个新的String对象，既耗时、又浪费空间。</span></span><br><span class="line"><span class="comment">	为了解决这一问题，可以使用 java.lang.StringBuilder 类。</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-构造方法-3"><a href="#3-构造方法-3" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>StringBuilder()</code></td>
<td align="center">构造一个空的StringBuilder容器，初始容量为16个字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>StringBuilder(String str)</code></td>
<td align="center">构造一个字符串生成器，并初始化为指定的字符串内容。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建StringBuilder对象【容器】</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();    <span class="comment">// 容器为空</span></span><br><span class="line">        System.out.println(builder1);</span><br><span class="line"></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(builder2);   <span class="comment">// 容器中包含 &quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-成员方法-3"><a href="#4-成员方法-3" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>append(...)</code></td>
<td align="center"><code>StringBuilder</code></td>
<td align="center">添加<strong>任意类型数据</strong>的字符串形式，并返回当前对象自身。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>toString()</code></td>
<td align="center"><code>String</code></td>
<td align="center">将当前StringBuilder对象转换为String对象</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="1-append"><a href="#1-append" class="headerlink" title="1.    append()"></a>1.    append()</h4><ul>
<li><code>append()</code>方法具有多种重载形式，可以接收任意类型的参数。</li>
<li>任何数据作为参数都会将对应的字符串内容添加到StringBuilder容器中。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建StringBuilder对象【容器】</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();    <span class="comment">// 容器为空</span></span><br><span class="line">        <span class="comment">// 2. 调用append()方法</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder1</span> <span class="operator">=</span> builder.append(<span class="literal">true</span>).append(<span class="number">100</span>).append(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(builder==builder1);  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-toString"><a href="#2-toString" class="headerlink" title="2.    toString()"></a>2.    toString()</h4><ul>
<li>通过<code>toString()</code>方法，StringBuilder对象将会转换成为不可变的String对象。</li>
</ul>
<h2 id="5-练习-3"><a href="#5-练习-3" class="headerlink" title="5    练习"></a>5    练习</h2><h1 id="Math类"><a href="#Math类" class="headerlink" title="*    Math类"></a>*    Math类</h1><h2 id="1-包-6"><a href="#1-包-6" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Math</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Math</span> <span class="keyword">extends</span> <span class="title class_">Object</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	Math 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数。 </span></span><br><span class="line"><span class="comment">	其中所有的方法均为静态方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-6"><a href="#2-解释说明-6" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><h2 id="3-构造方法-4"><a href="#3-构造方法-4" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><h2 id="4-成员方法-4"><a href="#4-成员方法-4" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>abs(double a)</code></td>
<td align="center">double</td>
<td align="center">返回double值的绝对值</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>ceil(double a)</code></td>
<td align="center">double</td>
<td align="center">向上取整</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>floor(double a)</code></td>
<td align="center">double</td>
<td align="center">向下取整</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>round(double a)</code></td>
<td align="center">double</td>
<td align="center">四舍五入</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="5-练习-4"><a href="#5-练习-4" class="headerlink" title="5    练习"></a>5    练习</h2><ol>
<li><p>计算在<code>-10.8~5.9</code>之间，绝对值大于<code>6</code>或者小于<code>2.1</code>的整数有多少个？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    计算在`-10.8~5.9`之间，绝对值大于`6`或者小于`2.1`的整数有多少个？</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.定义最值</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">5.9</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">min</span> <span class="operator">=</span> -<span class="number">10.8</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 在范围内循环</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">// 定义计数器</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">double</span> i=Math.ceil(min); i&lt;=max; i++)&#123;</span><br><span class="line">            <span class="comment">// 获取绝对值并判断</span></span><br><span class="line">            <span class="keyword">if</span> ((Math.abs(i)&gt;<span class="number">6</span>)||(Math.abs(i))&lt;<span class="number">2.1</span>)&#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.输出</span></span><br><span class="line">        System.out.println(count);  <span class="comment">// 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id><a href="#" class="headerlink" title></a></h2><h1 id="时间日期类"><a href="#时间日期类" class="headerlink" title="* 时间日期类"></a>* 时间日期类</h1><h2 id="1-Date类"><a href="#1-Date类" class="headerlink" title="1.    Date类"></a>1.    Date类</h2><h3 id="1-包-7"><a href="#1-包-7" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	表示特定的瞬间，精确到毫秒。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Date</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Cloneable, Comparable&lt;Date&gt;;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-7"><a href="#2-解释说明-7" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-5"><a href="#3-构造方法-5" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>Date()</code></td>
<td align="center">分配 <code>Date</code> 对象并初始化此对象，返回当前系统时间。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Date(long date)</code></td>
<td align="center">分配 <code>Date</code> 对象并初始化此对象，返回从基准时间起经过指定毫秒数的时间。</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        System.out.println(date);   <span class="comment">// Sun Jun 21 11:34:02 CST 2020</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">100000</span>);</span><br><span class="line">        System.out.println(date2);  <span class="comment">// Thu Jan 01 08:01:40 CST 1970</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 在使用println()方法时，会自动调用Date类中的toString()方法。</span></span><br><span class="line"><span class="comment">	2. Date类对Object类中的toString()方法进行了覆盖重写，所以结果为指定的字符串。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="4-成员方法-5"><a href="#4-成员方法-5" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>getTime()</code></td>
<td align="center"><code>long</code></td>
<td align="center">把日期对象转换为对应的时间毫秒值</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>toString()</code></td>
<td align="center"><code>String</code></td>
<td align="center">把此 <code>Date</code> 对象转换为以下形式的 <code>String</code>： dow mon dd hh:mm:ss zzz  yyyy         【 <code>dow</code> 是一周中的某一天】【Date默认重写<code>toString()</code>方法】</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-5"><a href="#5-练习-5" class="headerlink" title="5    练习"></a>5    练习</h3><hr>
<h2 id="2-DateFormat类"><a href="#2-DateFormat类" class="headerlink" title="2.    DateFormat类"></a>2.    DateFormat类</h2><h3 id="1-包-8"><a href="#1-包-8" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.text.Format</span><br><span class="line">      继承者 java.text.DateFormat		[<span class="keyword">abstract</span>]</span><br><span class="line">    	继承者 java.text.SimpleDateFormat	</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 通过这个类可以帮助我们完成日期和文本之间的转换。</span></span><br><span class="line"><span class="comment">	2. 也就是可以在`Date对象`和`String对象`之间进行来回转换。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">DateFormat</span> <span class="keyword">extends</span> <span class="title class_">Format</span>;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-8"><a href="#2-解释说明-8" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="2-1-格式化"><a href="#2-1-格式化" class="headerlink" title="2.1    格式化"></a>2.1    格式化</h3><ul>
<li>按照指定的格式，从<code>Date</code>对象转换为<code>String</code>对象。</li>
</ul>
<h3 id="2-2-解析"><a href="#2-2-解析" class="headerlink" title="2.2    解析"></a>2.2    解析</h3><ul>
<li>按照指定的格式，从<code>String</code>对象转换为<code>Date</code>对象。</li>
</ul>
<h3 id="3-构造方法-6"><a href="#3-构造方法-6" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><ul>
<li><p>由于DateFormat为抽象类，不能直接使用，所以需要常用的子类：</p>
<p><code>java.text.SimpleDateFormat</code></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>SimpleDateFormat()</code></td>
<td align="center">默认格式的构造器。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>SimpleDateFormat(String pattern)</code></td>
<td align="center">指定格式的构造器类。</td>
</tr>
</tbody></table>
<h3 id="4-成员方法-6"><a href="#4-成员方法-6" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>format(Date date)</code></td>
<td align="center"><code>String</code></td>
<td align="center">将Date对象格式化为字符串</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>prase(String source)</code></td>
<td align="center"><code>Date</code></td>
<td align="center">将字符串解析为Date对象</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-6"><a href="#5-练习-6" class="headerlink" title="5    练习"></a>5    练习</h3><ol>
<li><p>请使用日期相关的API，计算出一个人已经出生了多少天？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    请使用日期相关的API，计算出一个人已经出生了多少天？</span></span><br><span class="line"><span class="comment">    已知：</span></span><br><span class="line"><span class="comment">        用户甲的出生日期为：1994年10月1日</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException &#123;</span><br><span class="line">        <span class="comment">// 1.已知用户甲的出生日期为：1994年10月1日</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">birthday</span> <span class="operator">=</span> <span class="string">&quot;1994年10月1日&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.将出生日期的字符串格式转换为Date类型。并获取出生日期的毫秒值</span></span><br><span class="line">        <span class="type">DateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy年MM月dd日&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date_bir</span> <span class="operator">=</span> df.parse(birthday);</span><br><span class="line">        <span class="type">long</span> <span class="variable">date_birTime</span> <span class="operator">=</span> date_bir.getTime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.获取当前日期的毫秒值，</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">nowTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.求差，并转换为天数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">tempTime</span> <span class="operator">=</span> nowTime - date_birTime;</span><br><span class="line">        <span class="type">long</span> <span class="variable">days</span> <span class="operator">=</span> tempTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br><span class="line">        System.out.println(days);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-Calendar类"><a href="#2-Calendar类" class="headerlink" title="2.    Calendar类"></a>2.    Calendar类</h2><h3 id="1-包-9"><a href="#1-包-9" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.util.Calendar	[<span class="keyword">abstract</span>]</span><br><span class="line">      继承者 java.util.GregorianCalendar;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	日历类。</span></span><br><span class="line"><span class="comment">	1. Calendar为抽象类。</span></span><br><span class="line"><span class="comment">	2. 由于语言敏感性，Calendar类在创建对象时并非用new创建，而是通过静态方法创建。如下：</span></span><br><span class="line"><span class="comment">		public static Calendar getInstance()</span></span><br><span class="line"><span class="comment">		 - 使用默认时区和语言环境获得一个日历</span></span><br><span class="line"><span class="comment">*/</span>    </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Calendar</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Cloneable, Comparable&lt;Calendar&gt;;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-9"><a href="#2-解释说明-9" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-7"><a href="#3-构造方法-7" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-7"><a href="#4-成员方法-7" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>get(int field)</code></td>
<td align="center"><code>int</code></td>
<td align="center">返回给定日历字段的值</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>set(int field, int value)</code></td>
<td align="center"><code>void</code></td>
<td align="center">将给定的日历字段设置为给定值</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>add(int field, int amount)</code></td>
<td align="center"><code>abstract</code></td>
<td align="center">根据日历的规则，为给定的日历字段添加或减去指定的时间量</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>getTime()</code></td>
<td align="center"><code>Date</code></td>
<td align="center">返回一个表示此Calendar时间值的Date对象</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】"><a href="#附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】" class="headerlink" title="附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】"></a>附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】</h4><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">字段值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>YEAR</code></td>
<td align="center">年</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>MONTH</code></td>
<td align="center">月（从0开始，可以+1使用）</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>DAY_OF_MONTH</code></td>
<td align="center">月中的天</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>HOUR</code></td>
<td align="center">时（12小时制）</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>HOUR_OF_DAY</code></td>
<td align="center">时（24小时制）</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>MINUTE</code></td>
<td align="center">分</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>SECOND</code></td>
<td align="center">秒</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>DAY_OF_WEEK</code></td>
<td align="center">周中的天（周日为1，可以-1使用）</td>
</tr>
</tbody></table>
<h3 id="5-练习-7"><a href="#5-练习-7" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="2-DateFormat类-1"><a href="#2-DateFormat类-1" class="headerlink" title="2.    DateFormat类"></a>2.    DateFormat类</h2><h3 id="1-包-10"><a href="#1-包-10" class="headerlink" title="1    包"></a>1    包</h3><h3 id="2-解释说明-10"><a href="#2-解释说明-10" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-8"><a href="#3-构造方法-8" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-8"><a href="#4-成员方法-8" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><h3 id="5-练习-8"><a href="#5-练习-8" class="headerlink" title="5    练习"></a>5    练习</h3><h1 id="容器"><a href="#容器" class="headerlink" title="*    容器"></a>*    容器</h1><p><img src="/2020/08/22/JavaSE%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84API/01JavaSE\课件\image\容器.png"></p>
<h2 id="1-数组"><a href="#1-数组" class="headerlink" title="1    数组"></a>1    数组</h2><h3 id="附1：Arrays类"><a href="#附1：Arrays类" class="headerlink" title="附1：Arrays类"></a>附1：Arrays类</h3><ul>
<li><strong>Arrays类——操作数组的工具类</strong></li>
</ul>
<h4 id="1-包-11"><a href="#1-包-11" class="headerlink" title="1    包"></a>1    包</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.util.Arrays</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Arraysextends</span> Object</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	此类包含用来操作数组（比如排序和搜索）的各种方法。</span></span><br><span class="line"><span class="comment">	其中所有的方法均为静态方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="2-解释说明-11"><a href="#2-解释说明-11" class="headerlink" title="2    解释说明"></a>2    解释说明</h4><h4 id="3-构造方法-9"><a href="#3-构造方法-9" class="headerlink" title="3    构造方法"></a>3    构造方法</h4><h4 id="4-成员方法-9"><a href="#4-成员方法-9" class="headerlink" title="4    成员方法"></a>4    成员方法</h4><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>toString()</code></td>
<td align="center">String</td>
<td align="center">返回指定数组内容的字符串表示形式</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>sort(int[] arr)</code></td>
<td align="center">void</td>
<td align="center">对指定的<code>int[] arr</code>数组升序排序</td>
</tr>
</tbody></table>
<h4 id="5-练习-9"><a href="#5-练习-9" class="headerlink" title="5    练习"></a>5    练习</h4><ol>
<li><p>将一个随机字符串中的所有字符升序排列，并倒序打印。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    将一个字符串中的所有字符升序排列，并倒序打印。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 定义一个字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;ASXcwaff8423&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 将字符串转换为chars数组。</span></span><br><span class="line">        <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 将chars数组中的所有字符升序排列。</span></span><br><span class="line">        Arrays.sort(chars);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 倒序打印</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=chars.length-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            System.out.println(chars[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="附2：集合vs-数组"><a href="#附2：集合vs-数组" class="headerlink" title="附2：集合vs.数组"></a>附2：集合vs.数组</h3><ol>
<li>数组长度是固定的，集合长度是可变的。</li>
<li>数组只能存储基本数据类型的值，集合只能存储对象。</li>
<li>数组只能存储同一类型的元素，集合可以存储不同类型的对象。</li>
</ol>
<h2 id="2-Collection接口"><a href="#2-Collection接口" class="headerlink" title="2    Collection接口"></a>2    Collection接口</h2><h3 id="1-包-12"><a href="#1-包-12" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">java.util </span><br><span class="line">接口 Collection&lt;E&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 单列集合的根接口，用于存储一系列符合某种规则的元素。</span></span><br><span class="line"><span class="comment">	2. 它有两个重要的子接口，分别是：</span></span><br><span class="line"><span class="comment">		java.util.List	元素有序、可重复</span></span><br><span class="line"><span class="comment">		java.util.Set	元素无需、不可重复</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-12"><a href="#2-解释说明-12" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><h3 id="3-构造方法-10"><a href="#3-构造方法-10" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-10"><a href="#4-成员方法-10" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><ul>
<li>Collection接口中常用的共性方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="center"><code>add(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">把给定的对象添加到当前集合中</td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>remove(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">删除集合中指定的元素</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>clear()</code></td>
<td align="center"><code>void</code></td>
<td align="center">清空集合中所有的元素，但不删除集合</td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>size()</code></td>
<td align="center"><code>int</code></td>
<td align="center">返回当前集合元素的个数</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>isEmpty()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断集合是否为空</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>contains(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断集合中是否包含元素e</td>
</tr>
<tr>
<td align="center">其它</td>
<td align="center"><code>toArray()</code></td>
<td align="center"><code>Object[]</code></td>
<td align="center">把集合中的元素存储到数组中</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>       iterator()    </code></td>
<td align="center"><code>Iterator</code></td>
<td align="center">返回在此 collection 集合的迭代器。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-10"><a href="#5-练习-10" class="headerlink" title="5.    练习"></a>5.    练习</h3><h3 id="附1：Collections类"><a href="#附1：Collections类" class="headerlink" title="附1：Collections类"></a>附1：Collections类</h3><ul>
<li><strong>Collections类——操作Collection的工具类</strong></li>
</ul>
<hr>
<h2 id="3-List接口"><a href="#3-List接口" class="headerlink" title="3    List接口"></a>3    List接口</h2><h3 id="1-包-13"><a href="#1-包-13" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java.util.List</span><br><span class="line">    </span><br><span class="line">接口 List&lt;E&gt;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;E&gt;</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-13"><a href="#2-解释说明-13" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><ul>
<li><code>List接口</code>继承自<code>Collection接口</code>，是单列集合的一个重要分支。</li>
<li>我们一般把实现了<code>List接口</code>的对象称为<strong>List集合</strong>。</li>
<li>在List集合中允许出现重复的元素，</li>
<li>所有的元素是以一种线性的方式进行存储的，在程序中可以通过索引来访问集合中的指定元素。</li>
<li>List集合元素有序，即元素的存入顺序和取出顺序一致。</li>
</ul>
<h4 id="1-List接口的特点："><a href="#1-List接口的特点：" class="headerlink" title="1.    List接口的特点："></a>1.    List接口的特点：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 元素有序（存入和取出顺序一致）</span><br><span class="line"><span class="number">2.</span> 元素可重复</span><br><span class="line"><span class="number">3.</span> 带有索引，通过索引就可以操作集合中的元素。</span><br></pre></td></tr></table></figure>



<h3 id="3-构造方法-11"><a href="#3-构造方法-11" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-11"><a href="#4-成员方法-11" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><ul>
<li>List接口中特有的成员方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="center"><code>add(int index，E e)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>remove(int index）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">改</td>
<td align="center"><code>set(int index， E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>get(int index）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-11"><a href="#5-练习-11" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="4-ArrayList类"><a href="#4-ArrayList类" class="headerlink" title="4    ArrayList类"></a>4    ArrayList类</h2><h3 id="1-包-14"><a href="#1-包-14" class="headerlink" title="1.包"></a>1.包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.util.ArrayList&lt;E&gt;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; </span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; </span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, Serializable</span><br></pre></td></tr></table></figure>

<h3 id="2-解释说明-14"><a href="#2-解释说明-14" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h4 id="Part0"><a href="#Part0" class="headerlink" title="Part0:"></a>Part0:</h4><ol>
<li><p>ArrayList集合是List接口的一个实现类</p>
</li>
<li><p>ArrayList集合的特点:</p>
<ul>
<li>数据结构是 数组， </li>
<li>查找快，增删慢</li>
</ul>
</li>
</ol>
<h4 id="Part1"><a href="#Part1" class="headerlink" title="Part1:"></a>Part1:</h4><ul>
<li>我们想存储对象数据，可以选择的容器，可以是数组对象，但是数组的长度是固定的，无法适应数据变化的需求。</li>
<li>为了解决这个问题，Java提供了另一个容器<code>java.util.ArrayList</code>集合类，让我们可以更便捷的存储和操作对象数据</li>
</ul>
<h4 id="Part2"><a href="#Part2" class="headerlink" title="Part2:"></a>Part2:</h4><ul>
<li><code>java.util.ArrayList</code>是大小可变的数组的实现类，存储在内的数据成为元素。</li>
<li>此类提供一些方法类操作内部存储的元素。</li>
<li><code>ArrayList</code>中可不断添加元素，其大小也在自动增长。</li>
</ul>
<h4 id="Part3-ArrayList如何存储基本数据类型"><a href="#Part3-ArrayList如何存储基本数据类型" class="headerlink" title="Part3:  ArrayList如何存储基本数据类型"></a>Part3:  ArrayList如何存储基本数据类型</h4><ul>
<li><code>ArrayList</code>的实例不能存储基本类型数据，只能存储引用类型的数据。</li>
<li>但是存储基本类型的包装类型是可以的。</li>
<li>所以，想要存储基本类型数据，泛型<code>&lt;&gt;</code>中的数据类型，必须转换为包装类型后才能编写。</li>
</ul>
<h3 id="3-构造方法-12"><a href="#3-构造方法-12" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>ArrayList()</code></td>
<td align="center">构造一个初始容量为 10 的空列表</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>ArrayList(Collection&lt;? extends E&gt; c)</code></td>
<td align="center">构造一个包含指定 collection 的元素的列表。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>ArrayList(int initialCapacity)</code></td>
<td align="center">构造一个具有指定初始容量的空列表。</td>
</tr>
</tbody></table>
<h3 id="4-成员方法-12"><a href="#4-成员方法-12" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>add(E e)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的元素添加到此列表的尾部。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>add(int index, E e)</code></td>
<td align="center">void</td>
<td align="center">将指定的元素插入此列表中的指定位置。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>addAll(Collection&lt;? extends E&gt; c)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的集合添加到此列表的尾部。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>addAll(int index, Collection&lt;? extends E&gt; c)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的集合插入此列表中的指定位置。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>clear()</code></td>
<td align="center">void</td>
<td align="center">移除此列表中的所有元素。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>clone()</code></td>
<td align="center">Object</td>
<td align="center">返回此 <code>ArrayList</code> 实例浅拷贝</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>contains(Object o)</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>get(int index)</code></td>
<td align="center">E</td>
<td align="center">返回此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>indexOf(Object o)</code></td>
<td align="center">int</td>
<td align="center">返回此列表中首次出现的指定元素的索引，或如果此列表不包含元素，则返回 -1。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>lastIndexOf(Object o)</code></td>
<td align="center">int</td>
<td align="center">返回此列表中最后一次出现的指定元素的索引，或如果此列表不包含元素，则返回 -1。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>set(int index, E e)</code></td>
<td align="center">E</td>
<td align="center">用指定的元素替代此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>isEmpty()</code></td>
<td align="center">boolean</td>
<td align="center">如果此列表中没有元素，则返回 <code>true</code></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>remove(int index)</code></td>
<td align="center">E</td>
<td align="center">移除此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>remove(Object o)</code></td>
<td align="center">boolean</td>
<td align="center">移除此列表中首次出现的指定元素（如果存在）。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>removeRange(int fromIndex, int toIndex)</code></td>
<td align="center">void</td>
<td align="center">移除列表中索引在 <code>[fromIndex，toIndex)</code>之间的所有元素。</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>size()</code></td>
<td align="center">int</td>
<td align="center">返回此列表中的元素数。</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><code>toArray()</code></td>
<td align="center">Object[]</td>
<td align="center">返回包含此列表中所有元素的数组</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>toArray(T[] a)</code></td>
<td align="center">T[]</td>
<td align="center">返回包含此列表中所有元素的数组；返回数组的运行时类型是指定数组的运行时类型。</td>
</tr>
</tbody></table>
<h3 id="5-练习-12"><a href="#5-练习-12" class="headerlink" title="5    练习"></a>5    练习</h3><ol>
<li><p>生成6个1~33之间的随机整数，添加到集合，并遍历。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    生成6个1~33之间的随机整数，添加到集合，并遍历。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.生成6个1~33之间的随机整数,并添加到集合</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randNum</span> <span class="operator">=</span> random.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            list.add(randNum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 遍历集合</span></span><br><span class="line">        <span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义所有获取偶数元素集合的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定义所有获取偶数元素集合的方法.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.生成10个0~100之间的随机整数,并添加到集合list中</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randNum</span> <span class="operator">=</span> random.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            list.add(randNum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 获取集合中的所有偶数,添加到子集合subList中</span></span><br><span class="line">        ArrayList&lt;Integer&gt; subList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                subList.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.遍历subList子集合</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;subList.size(); i++)&#123;</span><br><span class="line">            System.out.println(subList.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="5-LinkedList类"><a href="#5-LinkedList类" class="headerlink" title="5    LinkedList类"></a>5    LinkedList类</h2><h3 id="1-包-15"><a href="#1-包-15" class="headerlink" title="1.包"></a>1.包</h3><h3 id="2-解释说明-15"><a href="#2-解释说明-15" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><ol>
<li>LinkedList集合是List接口的一个实现类.</li>
<li>LinkedList集合的特点：<ul>
<li>数据结构是 链表， </li>
<li>查找慢，增删快</li>
</ul>
</li>
</ol>
<h3 id="3-构造方法-13"><a href="#3-构造方法-13" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-13"><a href="#4-成员方法-13" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><ul>
<li>LinkedList中特有的成员方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">整</td>
<td align="center"><code>addFirst（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>addLast（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>push（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>removeFirst（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>removeLast（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>pop（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>getFirst（E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>getLast（E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-13"><a href="#5-练习-13" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="6-Set接口"><a href="#6-Set接口" class="headerlink" title="6    Set接口"></a>6    Set接口</h2><h3 id="1-包-16"><a href="#1-包-16" class="headerlink" title="1.包"></a>1.包</h3><h3 id="2-解释说明-16"><a href="#2-解释说明-16" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><h4 id="1-Set接口的特点"><a href="#1-Set接口的特点" class="headerlink" title="1.    Set接口的特点"></a>1.    Set接口的特点</h4><ol>
<li>元素无序</li>
<li>元素不可重复</li>
</ol>
<h3 id="3-构造方法-14"><a href="#3-构造方法-14" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-14"><a href="#4-成员方法-14" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><h3 id="5-练习-14"><a href="#5-练习-14" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="7-HashSet"><a href="#7-HashSet" class="headerlink" title="7    HashSet"></a>7    HashSet</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="8-TreeSet"><a href="#8-TreeSet" class="headerlink" title="8    TreeSet"></a>8    TreeSet</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="9-Map"><a href="#9-Map" class="headerlink" title="9    Map"></a>9    Map</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="10-HashMap"><a href="#10-HashMap" class="headerlink" title="10    HashMap"></a>10    HashMap</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="11-LinkedHashMap"><a href="#11-LinkedHashMap" class="headerlink" title="11    LinkedHashMap"></a>11    LinkedHashMap</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="12-Collections"><a href="#12-Collections" class="headerlink" title="12    Collections"></a>12    Collections</h2><h2 id="15-集合综合案例"><a href="#15-集合综合案例" class="headerlink" title="15    集合综合案例"></a>15    集合综合案例</h2><h3 id="1-需求"><a href="#1-需求" class="headerlink" title="1.    需求"></a>1.    需求</h3><ul>
<li><p>按照斗地主规则，完成洗牌、发牌的动作。</p>
</li>
<li><p>具体规则：</p>
<p>​    使用54张牌打乱顺序，三个玩家参与游戏，三人交替摸牌，每人17张牌，最后3张留作底牌。</p>
</li>
</ul>
<h3 id="2-分析"><a href="#2-分析" class="headerlink" title="2    分析"></a>2    分析</h3><ul>
<li>准备牌<ul>
<li>牌可以设计为一个ArrayList，每个字符串为一张牌。</li>
<li>每张牌由花色和数字两部分组成，我们可以使用花色集合与数字集合嵌套迭代完成每张牌的组装。</li>
<li>牌由Collections类的shuffle()方法进行随机排序。</li>
</ul>
</li>
<li>发牌<ul>
<li>将每个人的手牌以及底牌设计为ArrayList，将最后3张牌直接存放于底牌，剩余牌通过对3取模分别发给3个玩家。</li>
</ul>
</li>
<li>看牌<ul>
<li>直接打印每个集合。</li>
</ul>
</li>
</ul>
<h3 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3    代码实现"></a>3    代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    - 按照斗地主规则，完成洗牌、发牌的动作。</span></span><br><span class="line"><span class="comment">    - 具体规则：</span></span><br><span class="line"><span class="comment">        使用54张牌打乱顺序，三个玩家参与游戏，三人交替摸牌，每人17张牌，最后3张留作底牌。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 准备牌</span></span><br><span class="line">        List&lt;String&gt; poke = ready();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.发牌</span></span><br><span class="line">        send(poke);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">(List&lt;String&gt; poke)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 准备4个集合，分别用于存储四份牌</span></span><br><span class="line">        ArrayList&lt;String&gt; player1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; player2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; player3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; dipai = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 发牌(0~53)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;poke.size(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (i&gt;=<span class="number">51</span>)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">one</span> <span class="operator">=</span> poke.get(i);</span><br><span class="line">                dipai.add(one);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i&lt;<span class="number">51</span> &amp;&amp; i%<span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                player1.add(poke.get(i));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i&lt;<span class="number">51</span> &amp;&amp; i%<span class="number">3</span>==<span class="number">1</span>)&#123;</span><br><span class="line">                player2.add(poke.get(i));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i&lt;<span class="number">51</span> &amp;&amp; i%<span class="number">3</span>==<span class="number">2</span>)&#123;</span><br><span class="line">                player3.add(poke.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.看牌</span></span><br><span class="line">        System.out.println(player1);</span><br><span class="line">        System.out.println(player2);</span><br><span class="line">        System.out.println(player3);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">ready</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.创建一个集合，用于存储一副扑克牌</span></span><br><span class="line">        ArrayList&lt;String&gt; poke = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 2.把54张扑克牌分别添加到poke集合中</span></span><br><span class="line">        String[] colors = &#123;<span class="string">&quot;♡&quot;</span>,<span class="string">&quot;♤&quot;</span>,<span class="string">&quot;♣&quot;</span>,<span class="string">&quot;♢&quot;</span>&#125;;</span><br><span class="line">        String[] numbers = &#123;<span class="string">&quot;A&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;10&quot;</span>,<span class="string">&quot;J&quot;</span>,<span class="string">&quot;Q&quot;</span>,<span class="string">&quot;K&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String color : colors) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String number : numbers) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">one</span> <span class="operator">=</span> color+number;</span><br><span class="line">                poke.add(one);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        poke.add(<span class="string">&quot;小王&quot;</span>);</span><br><span class="line">        poke.add(<span class="string">&quot;大王&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 洗牌（打乱顺序）</span></span><br><span class="line">        Collections.shuffle(poke);</span><br><span class="line">        <span class="keyword">return</span> poke;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="Iterator接口"><a href="#Iterator接口" class="headerlink" title="*    Iterator接口"></a>*    Iterator接口</h1><h2 id="1-包-17"><a href="#1-包-17" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.util.Iterator&lt;E&gt;;	<span class="comment">// 接口</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	对 Collection集合 进行迭代的迭代器。</span></span><br><span class="line"><span class="comment">	  1. 想要遍历Collection结合，就要获取该集合的迭代器完成迭代操作。</span></span><br><span class="line"><span class="comment">	  2. 获取迭代器的方法：Collection接口中存在`public Iterator iterator()方法`</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;E&gt;</span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-17"><a href="#2-解释说明-17" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><ul>
<li><strong>迭代</strong>：即Collection集合中元素的通用获取方式。<ol>
<li>在去除原宿之前要先判断集合中有没有元素，如果有，就把这个元素取出来，</li>
<li>继续判断下一个，如果有就再取出来。一直把集合中的所有元素全部取出来。</li>
</ol>
</li>
</ul>
<h3 id="2-1-增强for循环"><a href="#2-1-增强for循环" class="headerlink" title="2.1    增强for循环"></a>2.1    增强for循环</h3><ul>
<li><code>增强for</code>循环（也称<code>for...each循环</code>）是JDK1.5++推出的一个高级for循环，<strong>专门用来遍历集合和数组</strong>的。</li>
<li>它的*<em>内部原理其实是一个Iterator迭代器</em>***，所以在遍历的过程中，不能对集合中的元素进行增删操作。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(元素的数据类型 变量名 : Collection集合or数组)&#123;</span><br><span class="line">    <span class="comment">// 操作代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="3-构造方法-15"><a href="#3-构造方法-15" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><h2 id="4-成员方法-15"><a href="#4-成员方法-15" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取迭代器</span></span><br><span class="line">Iterator&lt;E&gt; it = Collection对象.iterator()</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>hasNext()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">如果仍有元素可以迭代，则返回 <code>true</code></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>next()</code></td>
<td align="center"><code>E</code></td>
<td align="center">返回迭代的下一个元素</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>remove()</code></td>
<td align="center"><code>void</code></td>
<td align="center">从迭代器指向的 collection 中移除迭代器返回的最后一个元素（可选操作）</td>
</tr>
</tbody></table>
<h2 id="5-练习-15"><a href="#5-练习-15" class="headerlink" title="5    练习"></a>5    练习</h2><h1 id="线程"><a href="#线程" class="headerlink" title="*    线程"></a>*    线程</h1><h2 id="1-Thread类"><a href="#1-Thread类" class="headerlink" title="1.    Thread类"></a>1.    Thread类</h2><h3 id="1-包-18"><a href="#1-包-18" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.lang.Thread;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-18"><a href="#2-解释说明-18" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><ul>
<li>在Java中，每次程序运行至少启动2个线程，一个是<code>main线程</code>，一个是<code>垃圾回收线程</code>。</li>
<li>每当使用Java命令执行一个类的时候，就会启动一个JVM，每一个JVM其实就是在操作系统中启动了一个进程。</li>
</ul>
<h4 id="1-使用步骤"><a href="#1-使用步骤" class="headerlink" title="1.    使用步骤"></a>1.    使用步骤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 定义Thread类的子类，并重写该类的run()方法，该run()方法的方法体就代表了线程需要完成的任务，因此把run()方	 法称为线程执行体。</span><br><span class="line"><span class="number">2.</span> 创建Thread子类的实例，即创建了线程对象。</span><br><span class="line"><span class="number">3.</span> 调用线程对象的start()方法来启动该线程。</span><br></pre></td></tr></table></figure>



<h4 id="2-代码演示"><a href="#2-代码演示" class="headerlink" title="2.    代码演示"></a>2.    代码演示</h4><ul>
<li>定义Thread类的子类MyThread</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;线程1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义测试方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.定义新线程</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="comment">// 2.开启新线程</span></span><br><span class="line">        myThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="3-构造方法-16"><a href="#3-构造方法-16" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>Thread()</code></td>
<td align="center">分配一个新的线程对象</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Thread(String name)</code></td>
<td align="center">分配一个指定名字的新的线程对象</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>Thread(Runnable target)</code></td>
<td align="center">分配一个带有指定目标的新的线程对象</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>Thread(Runnable target, String name)</code></td>
<td align="center">分配一个带有指定目标的新的线程对象并指定名字</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="4-成员方法-16"><a href="#4-成员方法-16" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>getName()</code></td>
<td align="center"><code>String</code></td>
<td align="center">获取当前线程的名称</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>start()</code></td>
<td align="center"><code>void</code></td>
<td align="center">使当前线程开始执行，即JVM虚拟机开始调用此线程的<code>run()</code>方法</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>run()</code></td>
<td align="center"><code>void</code></td>
<td align="center">此线程要执行的任务代码</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>sleep(long millis)[static]</code></td>
<td align="center"><code>void</code></td>
<td align="center">使当前正在执行的线程暂停x毫秒</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>currentThread()[static]</code></td>
<td align="center"><code>Thread</code></td>
<td align="center">返回当前正在执行的线程对象的引用（地址）</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-16"><a href="#5-练习-16" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="2-Runnable接口"><a href="#2-Runnable接口" class="headerlink" title="2.    Runnable接口"></a>2.    Runnable接口</h2><ul>
<li>创建线程的方式总共有2种，一种是继承Thread类方式，一种是实现Runnable接口方式。</li>
</ul>
<h3 id="1-包-19"><a href="#1-包-19" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Runnable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Runnable</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-19"><a href="#2-解释说明-19" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><h4 id="1-使用步骤-1"><a href="#1-使用步骤-1" class="headerlink" title="1.    使用步骤"></a>1.    使用步骤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 定义Runnable接口的实现类，并重写该接口中的run()方法，该run()方法同样是该线程的线程执行体；</span><br><span class="line"><span class="number">2.</span> 创建Runnable接口实现类的实例，并以此作为Thread类的target来创建Thread对象，该Thread对象才是真正的线程对象；</span><br><span class="line"><span class="number">3.</span> 调用线程对象的start()方法来启动线程。</span><br></pre></td></tr></table></figure>



<h4 id="2-演示代码"><a href="#2-演示代码" class="headerlink" title="2.    演示代码"></a>2.    演示代码</h4><ul>
<li>定义Runnable接口的实现类RunnableImpl</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RunnableImpl</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;线程执行体，子线程1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义测试方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.创建线程对象</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">RunnableImpl</span>(), <span class="string">&quot;子线程1&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.开启子线程</span></span><br><span class="line">        thread1.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-构造方法-17"><a href="#3-构造方法-17" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-17"><a href="#4-成员方法-17" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><h3 id="5-练习-17"><a href="#5-练习-17" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="3-Thread和Runnable的区别"><a href="#3-Thread和Runnable的区别" class="headerlink" title="3    Thread和Runnable的区别"></a>3    Thread和Runnable的区别</h2><h3 id="3-1-实现Runnable接口比继承Thread类所具有的的优势"><a href="#3-1-实现Runnable接口比继承Thread类所具有的的优势" class="headerlink" title="3.1    实现Runnable接口比继承Thread类所具有的的优势"></a>3.1    实现Runnable接口比继承Thread类所具有的的优势</h3><ol>
<li>适合多个相同的程序代码的线程共享同一个资源。</li>
<li>可以避免Java中单继承的局限性。</li>
<li>增加程序的健壮性、实现解耦操作，代码可被多个线程共享，代码和线程独立。</li>
<li>线程池只能放入实现Runnable或Callable类线程，不能直接放入继承Thread的类。</li>
</ol>
<hr>
<h1 id="I-O系统"><a href="#I-O系统" class="headerlink" title="*    I/O系统"></a>*    I/O系统</h1><h2 id="1-File类"><a href="#1-File类" class="headerlink" title="1    File类"></a>1    File类</h2><h3 id="1-包-20"><a href="#1-包-20" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 文件和目录路径名的抽象表示形式。</span></span><br><span class="line"><span class="comment">	2. 主要用于文件和目录的创建、查找和删除等操作。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">File</span>;</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span>;</span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Comparable&lt;File&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-20"><a href="#2-解释说明-20" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="2-1-绝对路径和相对路径"><a href="#2-1-绝对路径和相对路径" class="headerlink" title="2.1    绝对路径和相对路径"></a>2.1    绝对路径和相对路径</h3><ul>
<li><strong>绝对路径</strong>：从盘符开始的路径。</li>
<li><strong>相对路径</strong>：相对于项目的路径。</li>
</ul>
<h3 id="3-构造方法-18"><a href="#3-构造方法-18" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>File(File parent, String child)</code></td>
<td align="center">根据 parent 抽象路径名和 child 路径名字符串创建一个新 <code>File</code> 实例。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>File(String parent, String child)</code></td>
<td align="center">根据 parent 路径名字符串和 child 路径名字符串创建一个新 <code>File</code> 实例</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>File(String pathname)</code></td>
<td align="center">通过将给定路径名字符串转换为抽象路径名来创建一个新 <code>File</code> 实例。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>File(URL uri)</code></td>
<td align="center">通过将给定的 <code>file:</code> URI 转换为一个抽象路径名来创建一个新的 <code>File</code> 实例</td>
</tr>
</tbody></table>
<ul>
<li>每一个File对象代表硬盘中真实存在的一个<strong>文件或目录</strong>。</li>
</ul>
<h3 id="4-成员方法-18"><a href="#4-成员方法-18" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>获取功能：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">1</td>
<td align="center"><code>getAbsolutePath()</code></td>
<td align="center"><code>String</code></td>
<td align="center">返回此File的绝对路径字符串</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>getPath()</code></td>
<td align="center"><code>String</code></td>
<td align="center">将此File转换为路径名字符串</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>getName()</code></td>
<td align="center"><code>String</code></td>
<td align="center">返回此File表示的文件或目录名称。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>length()</code></td>
<td align="center"><code>long</code></td>
<td align="center">返回此File表示的文件的长度[字节]。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>判断功能：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>exists()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断此File表示的文件或目录是否存在</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>isDirectory()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断此File表示的是否为目录。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>isFile()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断此File表示的是否为文件</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>创建/删除功能</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>createNewFile()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">当且仅当具有该名称的文件尚不存在时，创建一个新的文件。</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>delete()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">删除此File表示的文件或目录。【如果此File表示目录，则目录必须为空才能被删除】</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>mkdir()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">创建此File表示的目录</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><code>mkdirs()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">创建此File表示的目录，包括任何必需但不存在的父目录。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>目录的遍历</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center"><code>list()</code></td>
<td align="center"><code>String[]</code></td>
<td align="center">返回一个String数组，返回该File目录中的所有子文件或目录。</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center"><code>listFiles()</code></td>
<td align="center"><code>File[]</code></td>
<td align="center">返回一个File数组，表示该File目录中的所有子文件或目录。</td>
</tr>
</tbody></table>
<h3 id="5-练习-18"><a href="#5-练习-18" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="2-OutputStream类"><a href="#2-OutputStream类" class="headerlink" title="2    OutputStream类"></a>2    OutputStream类</h2><ul>
<li><strong>OutputStream——字节输出流</strong></li>
</ul>
<h3 id="1-包-21"><a href="#1-包-21" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.OutputStream</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. java.io.OutputStream抽象类 是表示字节输出流的所有类的超类。</span></span><br><span class="line"><span class="comment">	2. 将指定的字节信息写出到目的地。</span></span><br><span class="line"><span class="comment">	3. 它定义了字节输出流的基本的公共的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">OutputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">OutputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-21"><a href="#2-解释说明-21" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><ul>
<li>一切文件数据（文本、图片、视频等）在存储时，都是以二进制数字的形式保存，都是一个个的字节【1B=8bit】。</li>
<li>所以，字节流可以传输任意文件数据。</li>
<li>在操作流的时候，我们要时刻明确，无论使用什么样的流对象，底层传输的始终为二进制数据。</li>
</ul>
<h3 id="3-构造方法-19"><a href="#3-构造方法-19" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-19"><a href="#4-成员方法-19" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center">关闭此输出流并释放与此流相关的任何系统资源</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>flush()</code></td>
<td align="center"><code>void</code></td>
<td align="center">刷新此输出流并强制任何缓冲的输出字节流被写出。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>write(byte[] b)</code></td>
<td align="center"><code>void</code></td>
<td align="center">将<code>b.length</code>字节从指定的字节数组写入此输出流。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>write(byte[] b, int off, int len)</code></td>
<td align="center"><code>void</code></td>
<td align="center">从指定的字节数组写入len字节，从偏移量off开始输出到此输出流</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>write()[abstract]</code></td>
<td align="center"><code>void</code></td>
<td align="center">将该字节输出流写出到目的地。</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-19"><a href="#5-练习-19" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="3-FileOutputStream类"><a href="#3-FileOutputStream类" class="headerlink" title="3.    FileOutputStream类"></a>3.    FileOutputStream类</h2><h3 id="1-包-22"><a href="#1-包-22" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.OutputStream</span><br><span class="line">      继承者 java.io.FileOutputStream;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. FileOutputStream类是文件输出流，用于将数据写出到文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileOutputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">OutputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-22"><a href="#2-解释说明-22" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-20"><a href="#3-构造方法-20" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileOutputStream(File file)</code></td>
<td align="center">创建文件输出流，并指定写出的目标文件。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileOutputStream(String name)</code></td>
<td align="center">创建文件输出流，并指定写出的目标地址。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>FileOutputStream(File file, boolean append)</code></td>
<td align="center">数据可追加续写</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>FileOutputStream(String name, boolean append)</code></td>
<td align="center">数据可追加续写</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>当你创建一个流对象时，必须传入一个文件路径。</li>
<li>该路径下，如果没有这个文件，会自动创建该文件。</li>
<li>如果有这个文件，会清空这个文件的数据。</li>
</ul>
<h3 id="4-成员方法-20"><a href="#4-成员方法-20" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>写出字节数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">1</td>
<td align="center"><code>write(int b)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>write(byte[] b)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>write(byte[] b, int off, int len)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><strong>数据的追加续写</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-20"><a href="#5-练习-20" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="4-InputStream类"><a href="#4-InputStream类" class="headerlink" title="4    InputStream类"></a>4    InputStream类</h2><h3 id="1-包-23"><a href="#1-包-23" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.InputStream</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. java.io.InputStream抽象类 是表示字节输入流的所有类的超类。</span></span><br><span class="line"><span class="comment">	2. 可以读取字节信息到内存中。</span></span><br><span class="line"><span class="comment">	3. 它定义了字节输入流的基本的公共的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">InputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">InputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-23"><a href="#2-解释说明-23" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-21"><a href="#3-构造方法-21" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-21"><a href="#4-成员方法-21" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center">关闭流，释放相关资源</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>read()[abstract]</code></td>
<td align="center"><code>int</code></td>
<td align="center">从输入流中读取数据的下一个字节</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>read(byte[] b)</code></td>
<td align="center"><code>int</code></td>
<td align="center">从输入流中读取一些字节数，并把它们存储到字节数组b中</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-21"><a href="#5-练习-21" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-FileInputStream类"><a href="#5-FileInputStream类" class="headerlink" title="5    FileInputStream类"></a>5    FileInputStream类</h2><h3 id="1-包-24"><a href="#1-包-24" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.InputStream</span><br><span class="line">      继承者 java.io.FileInputStream;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. FileInputStream类是文件输入流，用于从文件中读取字节。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">InputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-24"><a href="#2-解释说明-24" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-22"><a href="#3-构造方法-22" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileInputStream(File file)</code></td>
<td align="center">通过打开与实际文件的连接来创建一个FileInputStream</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileInputStream(String name)</code></td>
<td align="center">通过打开与实际文件的连接来创建一个FileInputStream</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>当你创建一个FileInputStream流对象时，必须传入一个文件路径。</li>
<li>该路径下，如果没有该文件，会抛出<code>FileNotFoundException</code></li>
</ul>
<h3 id="4-成员方法-22"><a href="#4-成员方法-22" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><strong>读取字节数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>read()</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次可以读取一个字节的数据，提升为int类型，读取到文件末尾，返回-1</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>read(byte[] b)</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次读取<code>b.length</code>个长度的字节到数组中，返回读取到的有效字节<strong>个数</strong>，读取到末尾时，返回-1</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-22"><a href="#5-练习-22" class="headerlink" title="5    练习"></a>5    练习</h3><ol>
<li><p>图片复制</p>
<p>从已有文件中读取字节，将该字节写出到另一个文件中。</p>
</li>
<li><p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    图片复制</span></span><br><span class="line"><span class="comment">    分析：先读后写</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.读</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;E:\\u盘\\CZ\\福蛋蛋.jpg&quot;</span>);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;./福蛋蛋.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">66</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(b)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// 2.写</span></span><br><span class="line">            outputStream.write(b);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3.释放资源</span></span><br><span class="line">        outputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="5-Reader"><a href="#5-Reader" class="headerlink" title="5    Reader"></a>5    Reader</h2><h3 id="1-包-25"><a href="#1-包-25" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.Reader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. java.io.Reader 抽象类是所有读取字符流类的超类。可以读取字符信息到内存中。</span></span><br><span class="line"><span class="comment">	2. 它定义了字符输入流的共性方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Reader</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Readable</span>, Closeable</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-25"><a href="#2-解释说明-25" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><ul>
<li>当使用字节流读取文本文件时，可能会出现一个小问题。</li>
<li>那就是遇到中文字符时，可能不会显示完整的字符。因为一个中文字符可能占用多个字节存储。</li>
<li>以Java提供一些字符流类，以字符为单位读写数据，专门用于处理文本文件。</li>
</ul>
<h3 id="3-构造方法-23"><a href="#3-构造方法-23" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-23"><a href="#4-成员方法-23" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>read()</code></td>
<td align="center"><code>int</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>read(char[] cbuf)</code></td>
<td align="center"><code>int</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-23"><a href="#5-练习-23" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-FileReader类"><a href="#5-FileReader类" class="headerlink" title="5    FileReader类"></a>5    FileReader类</h2><h3 id="1-包-26"><a href="#1-包-26" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.Reader</span><br><span class="line">      继承者 java.io.InputStreamReader</span><br><span class="line">          继承者 java.io.FileReader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 构造时使用系统默认的字符编码和默认字节缓冲区。</span></span><br><span class="line"><span class="comment">	2. 字符编码：字节与字符的对应规则。Windows系统的中文编码默认是GBK编码表。</span></span><br><span class="line"><span class="comment">	3. 字节缓冲区：一个字节数组，用来临时存储字节数据。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReader</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">InputStreamReader</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-26"><a href="#2-解释说明-26" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-24"><a href="#3-构造方法-24" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileReader(File file)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileReader(String fileName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>当你创建一个流对象时，必须传图一个文件路径。</li>
</ul>
<h3 id="4-成员方法-24"><a href="#4-成员方法-24" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>读取字符数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>read()</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次读取一个字符的数据，提升为int型，读到文件末尾返回-1</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>read(char[], cbuf)</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次读取<code>cbuf.length</code>个字符到数组中，返回读取到的字符个数，读取到末尾时返回-1.</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-24"><a href="#5-练习-24" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-Writer类"><a href="#5-Writer类" class="headerlink" title="5    Writer类"></a>5    Writer类</h2><h3 id="1-包-27"><a href="#1-包-27" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.Writer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 所有写出字符流的超类。将指定的字符信息写出到目的地。</span></span><br><span class="line"><span class="comment">	2. 定义了字符输出流的基本的共性的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Writer</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Appendable</span>, Closeable, Flushable</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-27"><a href="#2-解释说明-27" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-25"><a href="#3-构造方法-25" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-25"><a href="#4-成员方法-25" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>write()</code></td>
<td align="center"><code>void</code></td>
<td align="center">写入单个字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>write(char[] cbuf)</code></td>
<td align="center"><code>void</code></td>
<td align="center">写入字符数组</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>write(char[] cbuf, int off, int len)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>write(String str)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>write(String str, int off, int len)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>flush()</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-25"><a href="#5-练习-25" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-FileWriter类"><a href="#5-FileWriter类" class="headerlink" title="5    FileWriter类"></a>5    FileWriter类</h2><h3 id="1-包-28"><a href="#1-包-28" class="headerlink" title="1    包"></a>1    包</h3><h3 id="2-解释说明-28"><a href="#2-解释说明-28" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-26"><a href="#3-构造方法-26" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileWriter(File file)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileWriter(String fileName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>FileWriter(File file, boolean append)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>FileWriter(String fileName, boolean append)</code></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="4-成员方法-26"><a href="#4-成员方法-26" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>写出数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(int b)</code></td>
<td align="center"></td>
<td align="center">每次可以写出一个字符数据</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(char[] cbuf)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(char[] cbuf, int off, int len)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(String str)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(String str, int off, int len)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>关闭和刷新</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>flush()</code></td>
<td align="center"></td>
<td align="center">刷新缓冲区，流对象可以继续使用</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>close()</code></td>
<td align="center"></td>
<td align="center">先刷新缓冲区，然后通知系统释放资源</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-26"><a href="#5-练习-26" class="headerlink" title="5    练习"></a>5    练习</h3><h3 id="-1"><a href="#-1" class="headerlink" title></a></h3><h3 id="-2"><a href="#-2" class="headerlink" title></a></h3><hr>
<h1 id="属性集"><a href="#属性集" class="headerlink" title="*    属性集"></a>*    属性集</h1><h2 id="1-Properties类"><a href="#1-Properties类" class="headerlink" title="1    Properties类"></a>1    Properties类</h2><h3 id="1-包-29"><a href="#1-包-29" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.util.Dictionary&lt;K,V&gt;</span><br><span class="line">      继承者 java.util.Hashtable&lt;Object,Object&gt;</span><br><span class="line">          继承者 java.util.Properties;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. Properties类表示一个持久的属性集。</span></span><br><span class="line"><span class="comment">	2. 它使用键值对结构存储数据，每个键及其对应的值都是一个字符串。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Properties</span>;</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Hashtable</span>&lt;Object,Object&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-29"><a href="#2-解释说明-29" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-27"><a href="#3-构造方法-27" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>Properties()</code></td>
<td align="center">创建一个空的属性列表</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Properties(Properties default)</code></td>
<td align="center">创建一个带有指定默认值的空属性列表</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="4-成员方法-27"><a href="#4-成员方法-27" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>setProperties(String key, String value)</code></td>
<td align="center"><code>Object</code></td>
<td align="center">保存一对属性</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>getProperties(String key)</code></td>
<td align="center"><code>String</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>stringPropertyNames()</code></td>
<td align="center"><code>Set&lt;String&gt;</code></td>
<td align="center">获取所有键的名称的集合</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>load(InputStream inStream)</code></td>
<td align="center"><code>void</code></td>
<td align="center">从字节输入流中获取键值对</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">`</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-27"><a href="#5-练习-27" class="headerlink" title="5    练习"></a>5    练习</h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/20/%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/20/%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url">反射</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-20 10:08:25" itemprop="dateCreated datePublished" datetime="2020-08-20T10:08:25+08:00">2020-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-06-27 16:36:20" itemprop="dateModified" datetime="2022-06-27T16:36:20+08:00">2022-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-类的加载、连接和初始化"><a href="#1-类的加载、连接和初始化" class="headerlink" title="1    类的加载、连接和初始化"></a>1    类的加载、连接和初始化</h1><p><strong>类加载的时机</strong></p>
<p>应用程序（进程）可以在第一次使用某个类时加载该类，也可以使用预加载机制提前加载某个类。</p>
<h2 id="1-1-JVM和类"><a href="#1-1-JVM和类" class="headerlink" title="1.1    JVM和类"></a>1.1    JVM和类</h2><p>运行某个Java程序时会启动一个Java虚拟机<strong>进程</strong>，不管该Java进程有多么复杂，该进程启动了多少个<strong>线程</strong>，它们都处于Java虚拟机进程里。也就是说，同一个JVM的所有线程、所有变量都处于同一个进程里，它们都使用<strong>该JVM进程的内存区</strong>。当系统出现以下几种情况时，JVM进程将被终止：</p>
<ul>
<li>程序运行到最后正常结束。</li>
<li>程序执行过程中遇到了未捕获的异常或错误而结束。</li>
<li>程序运行到使用了<code>System.exit()</code>或<code>Runtime.getRuntime().exit()</code>方法的代码处结束程序。</li>
<li>程序所在的平台强制结束了JVM进程。</li>
</ul>
<p>从上面的介绍可以看出，当Java程序运行结束时，JVM进程结束，该程序在内存中的状态将会丢失。下面以类的静态变量来说明这个问题。</p>
<ol>
<li>先定义一个包含静态变量的类。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">7</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>定义一个类：创建A类实例，并访问A对象的静态变量a。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ATest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        a.a++;</span><br><span class="line">        System.out.println(a.a);	<span class="comment">// 8</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>下面程序也创建A对象，并访问其变量a的值</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ATest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        System.out.println(b.a);	<span class="comment">// 7</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在ATest1.java程序中创建了A类的实例，并让该实例的静态变量a的值自增1，程序输出的结果为8，这是显而易见的。关键是运行第2个程序ATest2时，程序再次创建了A对象，并输出A对象静态变量a的值，此时a的值是多少呢？</p>
<p>相信很多读者会毫不犹豫的认为是8，因为A类里面的a变量是静态变量，同一个类的所有实例的静态变量共享同一块内存区，因为第一次运行时改变了第一个A实例的a变量，所以第二次运行时第二个A实例的a变量也将受到影响。</p>
<p>实际上结果依然是7，而不是8。这是因为ATest1和Atest2是两次运行JVM进程，第一次运行JVM结束后，它对A类所做的修改将全部丢失——第2次运行JVM时将再次重新初始化A类。两次运行的JVM程序处于两个不同的JVM进程中，两个JVM之间并不会共享数据。</p>
<h2 id="1-2-类的加载"><a href="#1-2-类的加载" class="headerlink" title="1.2    类的加载"></a>1.2    类的加载</h2><p>当程序主动使用某个类时，如果该类还未被加载到内存中，则系统会通过<strong>加载、链接、初始化</strong>三个步骤将该类加载到内存中。正常情况下，JVM 会连续完成这三个步骤，所以有时候也把这三个步骤统称为类加载或类初始化。</p>
<p>实际上，<strong>类加载</strong>指的是将磁盘上的 <code>.class</code> 文件读入 JVM 内存，并为之创建一个<code>java.lang.Class</code>对象。也就是说，运行中的程序中在使用任何类时，JVM 内存中一定会存在一个该类的<code>java.lang.Class</code>对象。</p>
<p>类的加载由类加载器完成，类加载器通常由 JVM 提供。当然，Java 也支持通过继承 ClassLoader 类来创建自定义类加载器。类加载器是所有程序运行的基础（将二进制文件加载进内存形成 Class 对象）。</p>
<p>使用不同的类加载器，可以从不同的数据源加载类的二进制数据。通常有如下几种来源：</p>
<ul>
<li>从开发人员编写的本地项目文件中加载 <code>.class</code> 文件。</li>
<li>从引入的 JAR 包中加载 <code>.class</code> 文件（这其实也是从本地加载 <code>.class</code> 文件）。</li>
<li>通过网络加载 class 文件。</li>
</ul>
<p><strong>类加载器可以无需等到“首次使用某个类时才加载该类，Java虚拟机允许预先加载某些类。</strong></p>
<hr>
<h2 id="1-3-类的链接"><a href="#1-3-类的链接" class="headerlink" title="1.3    类的链接"></a>1.3    类的链接</h2><p>当类被加载进 JVM 内存后，虚拟机会通过一系列步骤为其生成对应的 Class 对象，接着会进入链接阶段。链接阶段负责把类的二进制数据合并到 JRE 中。类连接又可以分为如下3个阶段：</p>
<ol>
<li>验证：验证阶段用于检验被加载的类是否有正确的内部结构，是否和其它类协调一致。</li>
<li>准备：类准备阶段则负责为类的静态变量分配内存，并设置默认初始值。</li>
<li>解析：将类的二进制数据中的符号引用替换成直接引用。</li>
</ol>
<hr>
<h2 id="1-4-类的初始化"><a href="#1-4-类的初始化" class="headerlink" title="1.4    类的初始化"></a>1.4    类的初始化</h2><p>类的初始化阶段，主要就是对类中的静态变量进行<strong>显式初始化</strong>。为类中的静态变量指定初始化值的方式有2种：</p>
<ol>
<li>声明静态变量时指定初始值。</li>
<li>使用静态代码块为静态变量指定初始值。</li>
</ol>
<p>如果不为静态变量指定初始值，JVM 会采用对应数据类型的默认零值作为该静态变量的初始值。</p>
<p>JVM初始化一个类包含如下几个步骤：</p>
<ol>
<li><p>若这个类还没有被加载和链接，则执行加载和链接步骤。</p>
</li>
<li><p>若该类的父类还没有被初始化，则先初始化其父类，以此类推。所以 JVM 最先初始化的总是<code>java.lang.Object</code> 类。</p>
</li>
<li><p>假设类中有初始化语句，则系统一次执行这些初始化语句。（如赋初始值等）</p>
</li>
</ol>
<h3 id="1-4-1-类的初始化时机"><a href="#1-4-1-类的初始化时机" class="headerlink" title="1.4.1    类的初始化时机"></a>1.4.1    类的初始化时机</h3><p>当 Java 程序首次通过如下方式来使用某个类（或接口）时，虚拟机就会初始化该类（或接口）。</p>
<ol>
<li>创建类的实例。包括：<ul>
<li>使用new创建实例。</li>
<li>通过反射来创建实例</li>
<li>通过反序列化来创建实例</li>
</ul>
</li>
<li>调用某个类的静态方法。</li>
<li>访问某个类（或接口）的静态变量，或为该静态变量赋值。</li>
<li>使用反射方式来创建某个类（或接口）对应的<code>java.lang.Class</code>对象。</li>
<li>初始化某个类的子类。</li>
</ol>
<blockquote>
<p>  <strong>Tip</strong></p>
</blockquote>
<p><strong>case1：</strong>对 于一个 final 修饰的静态变量，该变量的值在编译时就可以确定下来，那么这个变量就相当于一个“常量”。Java 编译器会在编译时直接把这个变量出现的地方替换成常量值，<strong>因此即使程序访问该变量，也不会导致该类的初始化</strong>。如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;HelloWord&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(Test1.str);	<span class="comment">// 访问被 final static 修饰的变量不会导致类初始化（就相当于访问一个常量，自然不会导致类初始化了）</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="2-初识反射"><a href="#2-初识反射" class="headerlink" title="2 初识反射"></a>2 初识反射</h1><h2 id="2-1-编译时类型-amp-运行时类型"><a href="#2-1-编译时类型-amp-运行时类型" class="headerlink" title="2.1 编译时类型 &amp; 运行时类型"></a>2.1 编译时类型 &amp; 运行时类型</h2><p><strong>编译时类型</strong>和<strong>运行时类型</strong>是Java“多态”语法的一种体现。比如下面这行代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br></pre></td></tr></table></figure>

<p>这行代码会创建一个实例对象 person，该对象的编译时类型为 Person ，运行时类型为 Student。</p>
<p>还有更极端的情况，程序中的某些方法在运行时会收到外部传入的一个对象，该对象的编译时类型是 Object ，但在运行时又需要调用对象区分于 Object 类中的某些方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">    <span class="comment">// obj.setUsername(&quot;张三&quot;); // false</span></span><br><span class="line">    ((Person)obj).setUsername(<span class="string">&quot;张三&quot;</span>); <span class="comment">// OK</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在我们的程序中，这种“一个对象表现出两种类型”的情况非常多。那么，虚拟机是如何在程序运行时发现对象的真真实类型的呢？解决这个问题的思路主要有两种：</p>
<ul>
<li><p>第一种思路就是：让程序在编译时就能知道对象的真实类型。这时在虚拟机内存中创建的对象的类型就是最终需要使用的类型。比如在编译时通过类型强制转换声明对象的最终类型。</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">    ((Person)obj).setUsername(<span class="string">&quot;张三&quot;</span>); <span class="comment">// 类型强制转换</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>  第二种思路就是：<strong>编译时根本无法知道某个对象的最终类型，程序只能在运行时通过调用某些方法来获取对象的真实类型。</strong>这就必须使用反射。</p>
</li>
</ul>
<h2 id="2-2-什么是反射"><a href="#2-2-什么是反射" class="headerlink" title="2.2    什么是反射"></a>2.2    什么是反射</h2><blockquote>
<p><strong>定义：</strong></p>
</blockquote>
<p>Reflection（反射）是一门语言是否是动态语言的关键点。</p>
<p><strong>反射机制允许程序在运行时借助于 Reflection API 取得任何类的元数据信息，并能直接操作任意对象的内部属性及方法。</strong></p>
<p>Java 中反射相关的 API 都保存在 <code>java.lang.reflect</code> 包下。</p>
<blockquote>
<p><strong>解释：</strong></p>
</blockquote>
<p>Java 中的反射就是：在 Java 程序运行的过程中：</p>
<ul>
<li>对于任意一个类，都能知道这个类的所有属性和方法；</li>
<li>对于任意一个对象，都能调用它的属性和方法</li>
</ul>
<p>这种<strong>动态获取类信息</strong>和<strong>动态调用对象方法</strong>的功能称为 Java 的反射机制。之所以强调属性和方法是因为这是开发者最为关注的2个部分，实际上通过反射，不仅仅可以获取类的属性、方法，还可以获取类的父类、接口、包等信息。</p>
<blockquote>
<p>  <strong>静态调用和动态调用：</strong></p>
</blockquote>
<ul>
<li><strong>静态调用</strong>：在<code>.java</code>文件中<strong>显式调用</strong>对象方法或获取类的信息。</li>
<li><strong>动态调用</strong>：在 JVM 运行时期，通过反射机制调用类/对象中的方法或获取类的信息。</li>
<li>  动态调用的好处：将编译期异常转移到运行期异常，降低耦合度。</li>
</ul>
<hr>
<h2 id="2-3-反射机制能提供的功能"><a href="#2-3-反射机制能提供的功能" class="headerlink" title="2.3    反射机制能提供的功能"></a>2.3    反射机制能提供的功能</h2><ul>
<li>在运行时判断任意一个对象所属的类（包括它的最终类类型和父类类型）</li>
<li>在运行时构造任意一个类的实例对象</li>
<li>在运行时判断任意一个类所具有的成员变量和方法</li>
<li>在运行时获取泛型信息</li>
<li>在运行时调用任意一个对象的成员变量和方法</li>
<li>在运行时处理注解</li>
<li>生成动态代理。</li>
</ul>
<h2 id="2-4-相关-API"><a href="#2-4-相关-API" class="headerlink" title="2.4    相关 API"></a>2.4    相关 API</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Class: <span class="comment">// 反射的源头</span></span><br><span class="line">java.lang.reflect.Method</span><br><span class="line">java.lang.reflect.Field</span><br><span class="line">java.lang.reflect.Constructor</span><br><span class="line">....</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="3-Java代码在计算机中经历的三个阶段"><a href="#3-Java代码在计算机中经历的三个阶段" class="headerlink" title="3    Java代码在计算机中经历的三个阶段"></a>3    Java代码在计算机中经历的三个阶段</h1><p><img src="/2020/08/20/%E5%8F%8D%E5%B0%84/Java%E4%BB%A3%E7%A0%81%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5.bmp"></p>
<p><strong>一、源代码阶段（.java/.class）</strong></p>
<p>这一阶段数据都保存在本地磁盘上。我们编写好代码之后，运行 <code>javac</code> 命令将 <code>Person.java</code> 文件编译为 <code>Person.class</code> 二进制文件，这两个文件都保存在本地磁盘上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 1、成员变量：</span></span><br><span class="line">    <span class="keyword">private</span> String name;	</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">// 2、构造方法：</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;.....&#125;</span><br><span class="line">    <span class="comment">// 3、普通方法： </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 4、其它</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>二、Class 类对象阶段[反射]</strong></p>
<blockquote>
<p><strong>Class 类对象阶段正是执行反射操作的阶段，因为运行时程序使用的一般都是某个类的对象实例，而 Class 类对象阶段可以理解为一个类成为实例对象前的一个准备阶段。所以在这个阶段还可以对要创建的实例对象进行一系列修改或增强。</strong></p>
</blockquote>
<p><code>Person.class</code> 字节码文件会被 ClassLoader 加载到虚拟机内存中，形成一个 Class 对象（同时会先将 Person 类的所有父类 Class 对象加载到内存中），该对象中保存了 Person 类的所有信息。比如：</p>
<ul>
<li>  将 Person 类的每个成员变量封装为 <strong>Field 对象</strong>，并存入 Field[] 数组中。</li>
<li>  将 Person 类的每个普通方法封装为 <strong>Method 对象</strong>，并存入 Method[] 数组中。</li>
<li>  将 Person 类的每个构造方法封装为 <strong>Constructor 对象</strong>，并存入 Constructor[] 数组中。</li>
<li>  ……</li>
</ul>
<p>这一阶段 Person 的 Class 对象整体仍然是一个对象，但是其中的成员变量、成员方法、普通方法等也分别被封装成了一个个的对象。</p>
<p>这一阶段是在<strong>虚拟机内存</strong>中进行的。</p>
<blockquote>
<p>  与 Java 反射相关的类：</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">类名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Class</code></td>
<td align="left">代表类对象，在运行的Java程序中表示类或接口</td>
</tr>
<tr>
<td align="left"><code>Field</code></td>
<td align="left">代表类的属性</td>
</tr>
<tr>
<td align="left"><code>Method</code></td>
<td align="left">代表类中的普通方法</td>
</tr>
<tr>
<td align="left"><code>Constructor</code></td>
<td align="left">代表类中的构造方法</td>
</tr>
</tbody></table>
<hr>
<p><strong>三、运行时阶段（Runtime）</strong></p>
<ul>
<li>运行时阶段（Runtime）的主要功能就是：将 Class 类转换为实例对象。</li>
<li>这一阶段也在内存中进行。</li>
</ul>
<hr>
<h1 id="4-常用方法"><a href="#4-常用方法" class="headerlink" title="4 常用方法"></a>4 常用方法</h1><h2 id="4-1-获取Class类对象的方法"><a href="#4-1-获取Class类对象的方法" class="headerlink" title="4.1 获取Class类对象的方法"></a>4.1 获取Class类对象的方法</h2><ul>
<li>获取的是内存中的 <strong>Class类对象</strong></li>
<li>同一个字节码文件，即 <code>.class</code> 文件，在一次程序运行的过程中，只会被加载一次。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>Class.forName(&quot;全限定类名&quot;)</code></td>
<td align="left">将字节码文件加载进内存，返回Class类对象</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>类名.class</code></td>
<td align="left">通过类名获取Class对象</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><code>对象名.getClass()</code></td>
<td align="left"><code>getClass()</code>方法是Object根类中的方法</td>
</tr>
</tbody></table>
<h2 id="4-2-Class类对象中的方法"><a href="#4-2-Class类对象中的方法" class="headerlink" title="4.2 Class类对象中的方法"></a>4.2 Class类对象中的方法</h2><p><strong>获取成员变量对象</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getFields()</code></td>
<td align="left"><code>Filed[]</code></td>
<td align="left">获取所有public修饰的成员变量对象</td>
</tr>
<tr>
<td align="left"><code>getfield(String name)</code></td>
<td align="left"><code>Field</code></td>
<td align="left">根据名称获取被public修饰的成员变量对象</td>
</tr>
<tr>
<td align="left"><code>getDeclaredFields()</code></td>
<td align="left"><code>Filed[]</code></td>
<td align="left">获取所有的成员变量对象，不考虑修饰符</td>
</tr>
<tr>
<td align="left"><code>getDeclaredField(String name)</code></td>
<td align="left"><code>Field</code></td>
<td align="left">获取指定名称的成员变量对象</td>
</tr>
</tbody></table>
<p><strong>获取构造方法对象</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getConstructors()</code></td>
<td align="left"><code>Constructor&lt;?&gt;[]</code></td>
<td align="left">获取public修饰的所有构造函数对象</td>
</tr>
<tr>
<td align="left"><code>Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Constructor&lt;T&gt;</code></td>
<td align="left">根据构造函数的入参类型获取public修饰的构造函数对象</td>
</tr>
<tr>
<td align="left"><code>getDeclaredConstructors()</code></td>
<td align="left"><code>Constructor&lt;?&gt;[]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Constructor&lt;T&gt;</code></td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>获取成员方法对象</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getMethods()</code></td>
<td align="left"><code>Method[]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Method</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getDeclaredMethods()</code></td>
<td align="left"><code>Method[]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Method</code></td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>其它</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getName()</code></td>
<td align="left"><code>String</code></td>
<td align="left">获取全限定类名</td>
</tr>
<tr>
<td align="left"><code>newInstance()</code></td>
<td align="left"><strong>Object</strong></td>
<td align="left">创建一个空参对象</td>
</tr>
<tr>
<td align="left"><code>getClassLoader()</code></td>
<td align="left"><code>ClassLoader</code></td>
<td align="left">返回该类的类加载器</td>
</tr>
</tbody></table>
<hr>
<h2 id="4-3-Field-Constructor-Method-对象中的方法"><a href="#4-3-Field-Constructor-Method-对象中的方法" class="headerlink" title="4.3 Field/Constructor/Method 对象中的方法"></a>4.3 Field/Constructor/Method 对象中的方法</h2><h3 id="Field对象"><a href="#Field对象" class="headerlink" title="Field对象"></a>Field对象</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>set(Object obj, Object value)</code></td>
<td align="left">void</td>
<td align="left">设置值</td>
</tr>
<tr>
<td align="left"><code>get(Object obj)</code></td>
<td align="left">Object</td>
<td align="left">获取值</td>
</tr>
<tr>
<td align="left"><code>setAccessible(true)</code></td>
<td align="left">void</td>
<td align="left">忽略访问权限修饰符的安全检查【暴力反射】</td>
</tr>
</tbody></table>
<h3 id="Constructor对象"><a href="#Constructor对象" class="headerlink" title="Constructor对象"></a>Constructor对象</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>newInstance(Object... initargs)</code></td>
<td align="left"><code>T</code></td>
<td align="left">创建对象</td>
</tr>
</tbody></table>
<h3 id="Method对象"><a href="#Method对象" class="headerlink" title="Method对象"></a>Method对象</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>invoke(Object obj, Object... args)</code></td>
<td align="left"><code>Object</code></td>
<td align="left">调用方法</td>
</tr>
<tr>
<td align="left"><code>getName()</code></td>
<td align="left"><code>String</code></td>
<td align="left">获取方法名</td>
</tr>
</tbody></table>
<h2 id="4-4-ClassLoader中的方法"><a href="#4-4-ClassLoader中的方法" class="headerlink" title="4.4    ClassLoader中的方法"></a>4.4    ClassLoader中的方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getResourceAsStream(String name)		<span class="comment">// 读取指定资源，返回输入流</span></span><br></pre></td></tr></table></figure>

<h2 id="4-5-代码演示"><a href="#4-5-代码演示" class="headerlink" title="4.5 代码演示"></a>4.5 代码演示</h2><h3 id="基本方法演示"><a href="#基本方法演示" class="headerlink" title="基本方法演示"></a>基本方法演示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz=Person.class;</span><br><span class="line">    <span class="comment">// 1.通过反射创建Person类的对象</span></span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">cons</span> <span class="operator">=</span> clazz.getConstructor(String.class, <span class="type">int</span>.class); <span class="comment">// 获取指定参数类型的构造器</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> cons.newInstance(<span class="string">&quot;Tom&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> (Person)obj;</span><br><span class="line">    System.out.println(p.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.通过反射，调用对象指定的属性、方法</span></span><br><span class="line">    <span class="comment">// 2.1 调用属性</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">age</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">    age.set(p, <span class="number">10</span>);	<span class="comment">// 设置对象p的属性age</span></span><br><span class="line">    System.out.println(p.toString());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.2 调用方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">show</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    show.invoke(p); <span class="comment">// 调用对象p的方法show</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.3 通过反射调用Person类的私有结构。比如：私构造器、方法、属性</span></span><br><span class="line">    <span class="comment">// 2.3.1 调用私构造器</span></span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">colns1</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class);</span><br><span class="line">    colns1.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> (Person) colns1.newInstance(<span class="string">&quot;Jerry&quot;</span>);</span><br><span class="line">    System.out.println(p1.toString());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.3.2 调用私属性</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">name</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    name.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    name.set(p1, <span class="string">&quot;jenny&quot;</span>);</span><br><span class="line">    System.out.println(p1);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.3.3 调用私方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">showNation</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;showNation&quot;</span>, String.class);</span><br><span class="line">    showNation.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj1</span> <span class="operator">=</span> showNation.invoke(p, <span class="string">&quot;中国&quot;</span>);</span><br><span class="line">    String nation1=(String) obj1;</span><br><span class="line">    System.out.println(nation1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="获取-Class-类对象的四种方式"><a href="#获取-Class-类对象的四种方式" class="headerlink" title="获取 Class 类对象的四种方式"></a>获取 Class 类对象的四种方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;<span class="comment">//3.获取class实例的方式</span></span><br><span class="line">    <span class="comment">// 方式一：调用运行时类的属性：.class</span></span><br><span class="line">    Class&lt;Person&gt; clas = Person.class;</span><br><span class="line">    System.out.println(clas);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方式二：通过运行时类的对象，调用getClass()</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass</span> <span class="operator">=</span> p1.getClass();</span><br><span class="line">    System.out.println(aClass);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//方式三：调用Class的静态方法：forName(String classPath)</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.item.java.reflection.Person&quot;</span> );</span><br><span class="line">    System.out.println(aClass1);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方式四：使用类的加载器：ClassLoader</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ReflectionTest.class.getClassLoader();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass2</span> <span class="operator">=</span> classLoader.loadClass(<span class="string">&quot;com.item.java.reflection.Person&quot;</span>);</span><br><span class="line">    System.out.println(aClass2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="体会反射机制的“动态性”"><a href="#体会反射机制的“动态性”" class="headerlink" title="体会反射机制的“动态性”"></a>体会反射机制的“动态性”</h3><ul>
<li>  通过反射得到的对象实例其具体类型是不确定的，所以一般声明为最高的抽象类型。</li>
<li>  想要调用某些子类方法时，必须在代码中手动向下转型为具体子类对象。</li>
<li>  在调用某个方法时，必须要声明是通过哪个对象调用的，要不然就有可能调用到父类的方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">3</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">classPath</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span>(num)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                classPath = <span class="string">&quot;java.util.Date&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                classPath = <span class="string">&quot;java.lang.Object&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                classPath = <span class="string">&quot;cn.xsyu.java.Person&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> getInstance(classPath);</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="使用-Classloader-加载-src-目录下的配置文件"><a href="#使用-Classloader-加载-src-目录下的配置文件" class="headerlink" title="使用 Classloader 加载 src 目录下的配置文件"></a>使用 Classloader 加载 src 目录下的配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">pros</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">// 此时的文件默认在当前的module下。</span></span><br><span class="line">    <span class="comment">// 读取配置文件的方式一：</span></span><br><span class="line"><span class="comment">//        FileInputStream fis = new FileInputStream(&quot;jdbc.properties&quot;);</span></span><br><span class="line"><span class="comment">//        FileInputStream fis = new FileInputStream(&quot;src\\jdbc1.properties&quot;);</span></span><br><span class="line"><span class="comment">//        pros.load(fis);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取配置文件的方式二：使用ClassLoader</span></span><br><span class="line">    <span class="comment">// 配置文件默认识别为：当前module的src下</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ClassLoaderTest.class.getClassLoader();</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> classLoader.getResourceAsStream(<span class="string">&quot;jdbc1.properties&quot;</span>);</span><br><span class="line">    pros.load(is);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;user = &quot;</span> + user + <span class="string">&quot;,password = &quot;</span> + password);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h1><blockquote>
<p>  <strong>代理模式原理：</strong></p>
</blockquote>
<p>使用一个代理将对象包装起来, 然后用该代理对象取代原始对象。任何对原始对象的调用都要通过代理。代理对象决定是否以及何时将方法调用转到原始对象上。 </p>
<h2 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h2><blockquote>
<p>  <strong>举例：</strong>实现Runnable接口的方法创建多线程。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Class MyThread <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;&#125; <span class="comment">//相当于被代理类</span></span><br><span class="line">Class Thread <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;&#125; <span class="comment">//相当于代理类</span></span><br><span class="line">main()&#123;</span><br><span class="line">    <span class="type">MyThread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t);</span><br><span class="line">    thread.start();<span class="comment">//启动线程；调用线程的run()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/20/JDBC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/20/JDBC/" class="post-title-link" itemprop="url">JDBC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-20 09:44:29" itemprop="dateCreated datePublished" datetime="2020-08-20T09:44:29+08:00">2020-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-10-30 21:55:44" itemprop="dateModified" datetime="2020-10-30T21:55:44+08:00">2020-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-什么是JDBC"><a href="#1-什么是JDBC" class="headerlink" title="1    什么是JDBC"></a>1    什么是JDBC</h1><ol>
<li><code>Java Database Connectivity</code>，Java数据库连接[规范]。</li>
<li>JDBC规范就是Java语言内置一套接口，包含了CRUD等方法，用来访问数据库应用程序。</li>
</ol>
<p><img src="/2020/08/20/JDBC/JDBC%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、程序员通过JDBC接口操作对应数据库的实现类；[多态]</span><br><span class="line">---&gt;&gt;</span><br><span class="line"><span class="number">2</span>、实现类完成调用数据库并返回结果的过程。</span><br></pre></td></tr></table></figure>





<h3 id="1-1-1-JDBC的作用"><a href="#1-1-1-JDBC的作用" class="headerlink" title="1.1.1    JDBC的作用"></a>1.1.1    JDBC的作用</h3><ol>
<li>JDBC是一个<strong>接口</strong>，这个接口的作用是：<ul>
<li>定义了一套使用Java语言操作关系型数据的的规范；</li>
<li>但是这些规范的实现类不是存在于JDK中，而是由各大数据库厂商提供的；</li>
<li>所以使用JDBC操作数据库时，必须要导入各大数据库厂商提供的实现类。</li>
</ul>
</li>
</ol>
<h3 id="1-1-2-JDBC的优势"><a href="#1-1-2-JDBC的优势" class="headerlink" title="1.1.2    JDBC的优势"></a>1.1.2    JDBC的优势</h3><ol>
<li>开发人员可以通过一套固定的Java代码操作所有关系型数据库。</li>
</ol>
<hr>
<h1 id="2-JDBC的实现"><a href="#2-JDBC的实现" class="headerlink" title="2    JDBC的实现"></a>2    JDBC的实现</h1><h2 id="2-1-JDBC快速入门"><a href="#2-1-JDBC快速入门" class="headerlink" title="2.1    JDBC快速入门"></a>2.1    JDBC快速入门</h2><ol>
<li><p><strong>导入相关数据库的依赖jar包</strong>[实际上就是JDBC接口的实现类]</p>
<ul>
<li><p>JDBC只是一个数据库接口API，却没有具体的实现类。</p>
</li>
<li><p>具体的实现类由各大数据库厂商提供。如果要通过java操作数据库，必须要下载这些厂商对应的jar包并导入到IDE环境中。</p>
</li>
</ul>
</li>
</ol>
<p>   <img src="/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B1.png"></p>
<p>   <img src="/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B2.png"></p>
<ol start="2">
<li><p><strong>加载和注册驱动</strong></p>
<ul>
<li><p>原理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 通过导入具体数据库的驱动jar包，我们已经得到了数据库厂商编写的实现类的字节码文件;</span><br><span class="line"><span class="number">2.</span> 通过反射机制，将实现类的字节码文件加载进内存，得到字节码文件对应的`Class类对象`;</span><br><span class="line">	* 字节码文件整体及其中每个成员变量、成员方法、构造方法等都是一个独立的`Class类对象`。</span><br></pre></td></tr></table></figure></li>
<li><p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	格式：</span></span><br><span class="line"><span class="comment">		Class.forName(数据库驱动的实现类的全类名)</span></span><br><span class="line"><span class="comment">		通过&quot;全类名&quot;将字节码文件加载进内存，得到对应类的Class对象。</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">    	反射机制，将字节码文件加载进内存，获得字节码文件中的所有`Class类对象`。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>)	<span class="comment">// 加载和注册mysql数据库，获取Driver的Class类对象</span></span><br></pre></td></tr></table></figure></li>
<li><p>分析：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`Class.forName()`方法的原理和`import xxx`导包的原理相类似，不同的是:</span><br><span class="line">	1. import导入的是`.java`文件，得到的是类，在使用时要先根据类创建对象才能使用；</span><br><span class="line">	2. Class.forName()导入的是`.class`文件，得到的是 Class类对象 ，使用时要先根据Class类对象创建实例对象才能使用。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取数据库连接对象Connection</strong></p>
<ul>
<li><p><code>DriverManger</code>类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DriverManager</span>;</span><br><span class="line">	<span class="number">1.</span> 是Java内部提供的类</span><br><span class="line">	<span class="number">2.</span> 作用是管理 JDBC 驱动程序的基本服务。</span><br><span class="line"></span><br><span class="line">类中的静态方法：</span><br><span class="line">	<span class="number">1.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, String username, String password)</span>;</span><br><span class="line">	<span class="number">2.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, Properties info)</span>;</span><br><span class="line">	<span class="number">3.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url)</span>;</span><br><span class="line">	作用：建立与指定数据库的连接，返回一个连接对象。</span><br><span class="line">	参数：</span><br><span class="line">		* url：不同数据库的url是不同的，</span><br><span class="line">		  	   MySQL的是：jdbc:mysql:<span class="comment">//localhost:3306/demo[?参数名=参数值]</span></span><br><span class="line">		 	   格式：协议名:子协议:<span class="comment">//服务器名或IP地址:端口号/数据库名?参数=参数值</span></span><br><span class="line">		* username：登录MySQL的用户名</span><br><span class="line">		* password：登录MySQL的密码	</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取执行SQL语句的对象<code>Statement</code></strong></p>
<ul>
<li><p><code>Connection</code>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Connection</span>;</span><br><span class="line">	Connection接口，代表一个连接对象,具体的实现类由数据库厂商实现。</span><br><span class="line">        </span><br><span class="line">Connection接口中的方法：</span><br><span class="line">	Statement <span class="title function_">createStatement</span><span class="params">()</span>;	创建一个 Statement 对象用于将 SQL 语句发送到数据库。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>执行SQL语句，返回结果</strong>。</p>
<ul>
<li><p>使用<code>Statement</code>对象中的<code>executeXxx()方法</code>执行SQL语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Statement对象的作用：</span><br><span class="line">    * java中执行SQL语句的对象，用于发送SQL语句给数据库，并接收数据库返回的执行的结果。</span><br><span class="line">    </span><br><span class="line">Statement接口中的方法：</span><br><span class="line">    * <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql)</span>	</span><br><span class="line">    	用于发送DML语句，增删改的操作，insert、update、delete</span><br><span class="line">    	参数：String类型的SQL语句</span><br><span class="line">    	返回值：返回对数据库影响的行数</span><br><span class="line">    </span><br><span class="line">    * ResultSet <span class="title function_">executeQuery</span><span class="params">(String sql)</span></span><br><span class="line">    	用于发送DQL语句，查询的操作，select</span><br><span class="line">    	参数：SQL语句</span><br><span class="line">    	返回值：查询的结果集</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>释放资源</strong></p>
<ul>
<li>需要释放资源的对象：<code>ResultSet结果集</code>、<code>Statement语句对象</code>、<code>Connection连接对象</code></li>
<li>释放原则：栈式原则</li>
<li>释放资源的步骤放在哪个代码块中：finally代码块中。</li>
</ul>
</li>
<li><p><strong>流程图</strong>：</p>
<p><img src="/2020/08/20/JDBC/JDBC%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png"></p>
<ul>
<li><p><strong><code>Connection</code>：建立连接通道</strong></p>
</li>
<li><p><strong><code>Statement</code>：一个容器，携带SQL语句从Java发送给MySQL处理。</strong></p>
</li>
<li><p><strong><code>ResultSet</code>：一个容器，携带MySQL的处理结果返回给Java。</strong></p>
</li>
</ul>
</li>
<li><p><strong>快速入门</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.导入驱动jar包。</span></span><br><span class="line"><span class="comment">    2.加载和注册驱动</span></span><br><span class="line"><span class="comment">    3.获取数据库连接对象Connection</span></span><br><span class="line"><span class="comment">    4.获取执行sql语句的对象Statement</span></span><br><span class="line"><span class="comment">    5.执行sql并处理结果</span></span><br><span class="line"><span class="comment">    6.释放资源</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// 1. 导入驱动jar包</span></span><br><span class="line">        <span class="comment">// 2. 注册数据库驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. 获取数据库连接对象</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// 4. 获取执行sql语句的对象Statement</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update watertiger set name = &#x27;李四&#x27; where id = 36&quot;</span>;</span><br><span class="line">        <span class="comment">// 5.执行sql语句（java-&gt;mysql） 并 返回执行结果（mysql—&gt;java）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">executeUpdate</span> <span class="operator">=</span> statement.executeUpdate(sql);  </span><br><span class="line">        System.out.println(executeUpdate);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 释放资源</span></span><br><span class="line">        connection.close();</span><br><span class="line">        statement.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-2-各个对象详解"><a href="#2-2-各个对象详解" class="headerlink" title="2.2    各个对象详解"></a>2.2    各个对象详解</h2><h3 id="1-驱动管理类——DriverManger"><a href="#1-驱动管理类——DriverManger" class="headerlink" title="1    驱动管理类——DriverManger"></a>1    驱动管理类——DriverManger</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>注册驱动。</p>
<p><em>[静态代码块的特点：随着类的加载而执行，且只执行一次。]</em></p>
<p>利用反射机制，将<code>Driver</code>字节码文件加载进内存，此时会执行类中的静态代码块，即创建Driver实例对象并使用DriverManager类中的静态方法注册该驱动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 利用反射机制，将字节码文件加载进内存，获得Driver类的Class类对象</span></span><br><span class="line">  class.forName(com.mysql.jdbc.Driver)	<span class="comment">// 驱动jar包的com.mysql.jdbc目录中有一个Driver类.</span></span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">  <span class="comment">// 通过查看源码发现：在 com.mysql.jdbc.Driver 类中存在静态代码块</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Driver</span> <span class="keyword">extends</span> <span class="title class_">NonRegisteringDriver</span> <span class="keyword">implements</span> <span class="title class_">java</span>.sql.Driver &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Driver</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">static</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              DriverManager.registerDriver(<span class="keyword">new</span> <span class="title class_">Driver</span>());</span><br><span class="line">          &#125; <span class="keyword">catch</span> (SQLException var1) &#123;</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Can&#x27;t register driver!&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 注意：MySQL5.0+之后的驱动jar包可以省略注册驱动的过程。</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>DriverManager</code>类中的<strong>静态方法</strong>获取数据库连接对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, String user, String password)</span>;</span><br><span class="line"><span class="comment">/* 参数：</span></span><br><span class="line"><span class="comment">	url：指定连接的路径</span></span><br><span class="line"><span class="comment">		语法：jdbc:mysql://ip地址(域名):端口号/数据库名称</span></span><br><span class="line"><span class="comment">		例子：jdbc:mysql://localhset:3306/db1</span></span><br><span class="line"><span class="comment">		细节：如果连接的是本机的mysql服务器，并且默认服务器端口号是3306，</span></span><br><span class="line"><span class="comment">			 则url可简写为：jdbc:mysql://db1</span></span><br><span class="line"><span class="comment">	user：用户名</span></span><br><span class="line"><span class="comment">	password:密码</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="2-数据库连接对象——Connection"><a href="#2-数据库连接对象——Connection" class="headerlink" title="2    数据库连接对象——Connection"></a>2    数据库连接对象——Connection</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>获取执行SQL的对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：</span></span><br><span class="line">Statement <span class="title function_">createStatement</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 方法2：</span></span><br><span class="line">PreparedStatement <span class="title function_">createPreparedStatement</span><span class="params">(String sql)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>管理事务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.开启事务</span></span><br><span class="line">setAutoCommit(<span class="type">boolean</span> autoCommit);	<span class="comment">// 调用该方法设置参数为false，即可开启事务</span></span><br><span class="line"><span class="comment">// 2.提交事务</span></span><br><span class="line">commit();</span><br><span class="line"><span class="comment">// 3.回滚事务</span></span><br><span class="line">rollback();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="3-执行SQL的对象——Statement"><a href="#3-执行SQL的对象——Statement" class="headerlink" title="3    执行SQL的对象——Statement"></a>3    执行SQL的对象——Statement</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>执行SQL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.可以执行任意SQL语句(了解)</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">execute</span><span class="params">(String sql)</span>;	 </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.执行DML(insert、delete、update)语句，DDL(create、drop、alter)语句</span></span><br><span class="line"><span class="comment">// 返回值:影响的行数。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql)</span>;	 </span><br><span class="line">						  </span><br><span class="line"><span class="comment">// 3.执行DQL（select）语句</span></span><br><span class="line"><span class="comment">// 返回值：ResultSet结果集</span></span><br><span class="line">ResultSet <span class="title function_">executeQuery</span><span class="params">(String sql)</span>;	</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="4-结果集对象——ResultSet"><a href="#4-结果集对象——ResultSet" class="headerlink" title="4    结果集对象——ResultSet"></a>4    结果集对象——ResultSet</h3><ul>
<li><p>功能：封装查询结果</p>
<ol>
<li><p>ResultSet对象中的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ResultSet结果集对象的结构是一个虚拟表，可以是多行多列的，如果要得到其中某行某列的数据还需要逐行读取。</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 1.游标向下移动一行，判断当前行是否是最后一行末尾（是否有数据），如果是返回false，如果不是返回true。</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.获取数据</span></span><br><span class="line">xxx <span class="title function_">getXxx</span><span class="params">(参数)</span>;</span><br><span class="line">	返回值类型：</span><br><span class="line">        Xxx代表查询结果的返回值类型。	如： <span class="type">int</span> <span class="title function_">getInt</span><span class="params">()</span>;	String <span class="title function_">getString</span><span class="params">()</span></span><br><span class="line">     参数：</span><br><span class="line">        <span class="number">1.</span> <span class="type">int</span>: 代表列的编号,从<span class="number">1</span>开始。表示按照列的编号查询数据。	如： getString(<span class="number">1</span>);</span><br><span class="line">        <span class="number">2.</span> String: 代表列的名称。表示按照列的名称查询数据。	如： getDouble(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">	</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用步骤：</span></span><br><span class="line"><span class="comment">	  1.游标向下移动一行，并判断是否有数据</span></span><br><span class="line"><span class="comment">	  2.如果有，获取数据；</span></span><br><span class="line"><span class="comment">	  	如果没有，结束。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="5-执行SQL的对象2——PreparedStatement"><a href="#5-执行SQL的对象2——PreparedStatement" class="headerlink" title="5    执行SQL的对象2——PreparedStatement"></a>5    执行SQL的对象2——PreparedStatement</h3><h4 id="1、SQL注入"><a href="#1、SQL注入" class="headerlink" title="1、SQL注入"></a>1、SQL注入</h4><ul>
<li><p>在拼接SQL时，有一些特殊的关键字参与字符串的拼接，会造成安全性问题。</p>
</li>
<li><p>如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在用户登录案例中：</span><br><span class="line">    用户名和密码随便输入xxx，只要在最后的输入位置加上：	<span class="keyword">or</span> <span class="string">&#x27;a&#x27;</span><span class="operator">=</span>a;</span><br><span class="line"></span><br><span class="line">那么整个<span class="keyword">sql</span>语句就变成了：</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">and</span> password<span class="operator">=</span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;a&#x27;</span><span class="operator">=</span>a</span><br><span class="line">	即使前面的账户名和密码错误，但是整个<span class="keyword">sql</span>语句传入到mysql后再执行，所以必定能得到<span class="keyword">sql</span>数据库，返回值也为<span class="literal">true</span>，可以正常登录，这显然是不安全的</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2、PreparedStatement"><a href="#2、PreparedStatement" class="headerlink" title="2、PreparedStatement"></a>2、PreparedStatement</h4><ul>
<li>使用<code>PreparedStatement</code>对象执行SQL语句可以解决SQL注入问题；</li>
<li>因为<code>PreparedStatement</code>执行的是预编译的SQL语句，使用<code>?</code>作为参数的占位符；</li>
<li>这时传递的SQL语句的结构是确定的，只能填充占位符上的空值，而不能修改SQL语句的整体结构。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">步骤:</span><br><span class="line">	<span class="number">1.</span>导入驱动jar包</span><br><span class="line">	<span class="number">2.</span>注册驱动</span><br><span class="line">	<span class="number">3.</span>获取数据库连接对象Connection</span><br><span class="line">	<span class="number">4.</span>定义SQL语句：使用？作为占位符。		如： select * from user where name=? and password=?；</span><br><span class="line">	<span class="number">5.</span>获取SQL执行语句对象PreparedStatement。</span><br><span class="line">		connection.PreparedStatement(String sql)	<span class="comment">// 该对象需要直接把SQL语句作为参数传递进去</span></span><br><span class="line">  	<span class="number">6.</span>给占位符？赋值</span><br><span class="line">  	  方法：</span><br><span class="line">  		setXxx(参数<span class="number">1</span>，参数<span class="number">2</span>)</span><br><span class="line">  		  * 参数<span class="number">1</span>：？的位置序号，从<span class="number">1</span>开始【第几个？】</span><br><span class="line">  		  * 参数<span class="number">2</span>：？的值</span><br><span class="line">  	<span class="number">7.</span>执行sql语句</span><br><span class="line">  	<span class="number">8.</span>处理结果</span><br><span class="line">  	<span class="number">9.</span>释放资源</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-JDBCUtils"><a href="#3-JDBCUtils" class="headerlink" title="3    JDBCUtils"></a>3    JDBCUtils</h1><h2 id="3-1-工具类"><a href="#3-1-工具类" class="headerlink" title="3.1    工具类"></a>3.1    工具类</h2><ul>
<li><p>什么时候自己创建工具类？</p>
</li>
<li><p>如果一个功能经常用到，那么我们建议把这个功能做成一个工具类，可以在不同的地方重用。</p>
</li>
<li><p>目的：简化书写</p>
<ul>
<li>根据之前学过的知识，通过Java操作数据库时，每创建一个类都要注册驱动、获取连接对象、获取执行SQL语句的对象、释放资源等。这些代码在不同的类中大体上都是相同的。所以JDBCUtils的作用就是把这些相同的代码抽取出来封装到一个静态的类JDBCUtils中，这样我们就可以通过JDBCUtils完成驱动注册、资源释放等操作，简化了代码的书写。</li>
</ul>
</li>
</ul>
<h2 id="3-2-抽取JDBC工具类：JDBCUtils"><a href="#3-2-抽取JDBC工具类：JDBCUtils" class="headerlink" title="3.2    抽取JDBC工具类：JDBCUtils"></a>3.2    抽取JDBC工具类：JDBCUtils</h2><ul>
<li>抽取JDBC工具类：JDBCUtils</li>
</ul>
<h3 id="3-2-1-步骤"><a href="#3-2-1-步骤" class="headerlink" title="3.2.1    步骤"></a>3.2.1    步骤</h3><ol>
<li><p>注册驱动的代码：每个类都要使用，可以抽取。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>获取连接对象的代码：每个类都要使用，可以抽取。</p>
<ul>
<li>把登录数据库，以及注册驱动的代码放到配置文件<code>jdbc.properties</code>中。如果要连接的数据库发生改变，或者使用了不同厂商的数据库，那么我们直接修改配置文件即可。JDBCUtils类内的代码完全不用改变</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	需求：1.不想传递参数，</span></span><br><span class="line"><span class="comment">		 2.还要保证代码的耦合性低。</span></span><br><span class="line"><span class="comment">	解决：使用配置文件</span></span><br><span class="line"><span class="comment">		jdbc.properties</span></span><br><span class="line"><span class="comment">			url=jdbc:mysql://localhost:3306/db1</span></span><br><span class="line"><span class="comment">			uesr=root</span></span><br><span class="line"><span class="comment">			password=root</span></span><br><span class="line"><span class="comment">			driver=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  </span><br><span class="line">-------------------------------------------------------------------------------------------------</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用配置文件需要把配置文件中的数据加载到内存中供JDBCUtils工具类使用：</span></span><br><span class="line"><span class="comment">		获取src目录下文件路径的方法：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">JDBCUtils.class.getClassLoader().getResource(<span class="string">&quot;jdbc.properties&quot;</span>).getPath();</span><br><span class="line">properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 	</span></span><br><span class="line"><span class="comment">	1. JDBCUtils.class;	根据类名获取Class类对象[将字节码文件加载进内存，返回Class类对象]</span></span><br><span class="line"><span class="comment">	2. getClassLoader();	返回该类的类加载器</span></span><br><span class="line"><span class="comment">	3. getResource(&quot;jdbc.properties&quot;);	根据完整的文件名获取资源的URL</span></span><br><span class="line"><span class="comment">	4. getPath();	根据URL获取路径的字符串形式</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
<li><p>释放资源的代码：每个类都要使用，可以抽取。</p>
<ul>
<li>释放资源的代码需要重载2个，因为<ul>
<li>DQL语句返回一个ResultSet集合，需要释放</li>
<li>而其他语句的返回值是int类型的，不需要释放。</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 下面4个参数声明为全局变量，为了防止try...catch之外的代码访问不到</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 注册驱动不是每个类中都必须使用的，所以可以放入静态代码块中，在需要时再修改</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.创建Properties集合类,准备接收 jdbc.properties 配置文件的数据</span></span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            <span class="comment">// 2.获取src路径下的文件的方式：ClassLoader【类加载器】</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> JDBCUtils.class.getClassLoader().getResource(<span class="string">&quot;jdbc.properties&quot;</span>).getPath();</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line">            <span class="comment">// 3.获取properties对象中的数据【properties对象中存的就是properties配置文件的数据】</span></span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="comment">// 4.注册驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,user,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Statement statement, Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源（重载方法）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultSet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(ResultSet resultSet, Statement statement, Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-2-2-反射之读取配置文件"><a href="#3-2-2-反射之读取配置文件" class="headerlink" title="3.2.2    反射之读取配置文件"></a>3.2.2    反射之读取配置文件</h3><p><img src="/2020/08/20/JDBC/%E5%8F%8D%E5%B0%84%E4%B9%8B%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png"></p>
<ol>
<li><p>需求：</p>
<ul>
<li>读取配置文件中的配置信息到当前类中。</li>
</ul>
</li>
<li><p>分析：</p>
<ul>
<li>每个类对应有一个Class类对象；</li>
<li>每个Class类对象对应有一个ClassLoader类加载器；</li>
<li>类加载器中有一个读取本地文件转化为输入流的方法；</li>
<li>然后原路返回，当前类A即可获得配置文件信息的输入流格式。</li>
</ul>
</li>
<li><p>步骤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">    </span><br><span class="line">    Class&lt;A&gt; aClass = A.class;</span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">acl</span> <span class="operator">=</span>aClass.getClassLoader();</span><br><span class="line">    <span class="type">inputStream</span> <span class="variable">in</span> <span class="operator">=</span>acl.getResourceAsStream(xxx.properties);</span><br><span class="line">    <span class="comment">// 创建Properties对象,用于接收 jdbc.properties 配置文件的字节输入流数据</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    properties.load(in);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="4-JDBC事务操作"><a href="#4-JDBC事务操作" class="headerlink" title="4    JDBC事务操作"></a>4    JDBC事务操作</h1><hr>
<ol>
<li><p>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这多个步骤要么同时成功，要么同时失败。</p>
</li>
<li><p>操作：</p>
<ul>
<li>开启事务</li>
<li>提交事务</li>
<li>回滚事务</li>
</ul>
</li>
<li><p>使用Connection对象来管理事务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.开启事务</span></span><br><span class="line">setAutoCommit(<span class="type">boolean</span> atuoCommit)  <span class="comment">// 调用该方法时设置参数为false，即为开启事务【在执行SQL之前开启事务】</span></span><br><span class="line"><span class="comment">// 2.提交事务</span></span><br><span class="line">commit()	<span class="comment">// 当所有sql都执行完之后提交事务</span></span><br><span class="line"><span class="comment">// 3.回滚事务</span></span><br><span class="line">rollback()	<span class="comment">// 在try...catch的catch代码块中回滚事务。             </span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="5-数据库连接池"><a href="#5-数据库连接池" class="headerlink" title="5    数据库连接池"></a>5    数据库连接池</h1><h2 id="5-1-数据库连接池概述"><a href="#5-1-数据库连接池概述" class="headerlink" title="5.1    数据库连接池概述"></a>5.1    数据库连接池概述</h2><hr>
<ol>
<li><p>概念：本质上就是一个容器（集合），存放数据库连接对象的容器。</p>
<ul>
<li>当系统初始化好之后，数据库连接池就会被创建，这个容器会申请一些连接对象，当用户访问数据库时，可以从数据库连接池中获取连接对象，当用户访问完数据库之后，会把连接对象归还给数据库连接池。</li>
</ul>
</li>
<li><p>优点：</p>
<ul>
<li><p>节约资源</p>
</li>
<li><p>访问高效。</p>
<p><img src="/2020/08/20/JDBC/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0.bmp"></p>
</li>
</ul>
</li>
<li><p>不使用数据库连接池的情况：</p>
<ul>
<li>每次访问数据库都需要创建一个新的数据库连接对象，这个对象在访问结束后就被释放了。</li>
</ul>
</li>
<li><p>使用数据库连接池的情况：</p>
<ul>
<li>程序初始化完成后就会创建一个数据库连接池，客户端访问数据库时无需创建<code>Connection</code>，直接从数据库连接池中拿出一个<code>Connection</code>对象使用即可。使用完毕后也不用释放资源，只需要把<code>Connection</code>对象归还即可。</li>
<li>实现了数据库连接对象的复用。</li>
</ul>
</li>
<li><p>实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">javax.sql.DataSource</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataSource</span>;		<span class="comment">// [接口,JDK中定义的规范]</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 方法</span><br><span class="line">    * getConnection()		<span class="comment">// 获取连接对象;</span></span><br><span class="line">    * connection.close()	<span class="comment">// 归还连接对象;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果连接对象Connection是从数据库连接池中获取的，那么调用<code>Connection.close()</code>方法就不是释放资源了，而是归还数据连接对象。</p>
</li>
<li><p>一般情况下，我们不去实现这个接口，而是交给数据库厂商来实现，我们只需要使用它们提供的jar包即可：</p>
<ol>
<li><code>C3p0</code>：数据库连接池实现技术</li>
<li><code>Druid</code>：数据库连接池实现技术，由阿里巴巴提供的。</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="5-2-数据库连接池技术——C3p0"><a href="#5-2-数据库连接池技术——C3p0" class="headerlink" title="5.2    数据库连接池技术——C3p0"></a>5.2    数据库连接池技术——C3p0</h2><ol>
<li><p>使用步骤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 导入jar包(<span class="number">2</span>个).	 </span><br><span class="line">    * c3p0-<span class="number">0.9</span><span class="number">.5</span><span class="number">.2</span>.jar；	</span><br><span class="line">    * mchange-commons-java-<span class="number">0.2</span><span class="number">.12</span>.jar</span><br><span class="line">    * 不要忘记导入数据库驱动jar包</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span> 定义配置文件：</span><br><span class="line">    * 名称:c3p0.properties	或者	  c3p0-config.xml</span><br><span class="line">        * 路径：直接将文件放在src目录下即可。</span><br><span class="line">        * 配置文件名称是写死的，因为程序默认自动扫描src目录下的c3p0.properties或者c3p0-config.xml文件</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 创建数据库连接池对象：</span><br><span class="line">    * <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>()</span><br><span class="line">        </span><br><span class="line"><span class="number">4.</span>获取数据库连接对象：</span><br><span class="line">    * getConnection()</span><br></pre></td></tr></table></figure></li>
<li><p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建数据库连接池对象</span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line"><span class="comment">// 获取数据库连接对象</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> ds.getConnection();</span><br></pre></td></tr></table></figure></li>
<li><p>配置文件</p>
<ul>
<li><code>c3p0-config.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用默认的配置读取连接池对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  连接参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/db1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池参数 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池初始化数据连接对象个数  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池最大数据连接对象个数  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 创建数据库连接池对象的超时响应时间  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>3000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--创建多个DataBase--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;otherc3p0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  连接参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/db2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 连接池参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-3-数据库连接池技术——Druid"><a href="#5-3-数据库连接池技术——Druid" class="headerlink" title="5.3    数据库连接池技术——Druid"></a>5.3    数据库连接池技术——Druid</h2><ol>
<li><p><strong>使用步骤</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入jar包</span><br><span class="line">	* druid-<span class="number">1.0</span><span class="number">.9</span>.jar</span><br><span class="line">    * 数据库驱动jar包</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>定义配置文件</span><br><span class="line">	* 文件格式：Xxx.properties</span><br><span class="line">	* 可以任意命名，可以放在任意目录下。【最终通过字节码文件找到其绝对路径】</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span>加载配置文件。</span><br><span class="line">    </span><br><span class="line"><span class="number">4.</span>获取数据库连接池对象</span><br><span class="line">	* 通过工厂来获取：DruidDataSourceFactory</span><br><span class="line">    </span><br><span class="line"><span class="number">5.</span>获取数据库连接对象</span><br><span class="line">	* getConnection()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><strong>代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.加载配置文件</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">pro</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span>DruidDemo.class.getClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br><span class="line">pro.load(is);	<span class="comment">// load()方法中的参数是字符输入流或字节输入流</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.获取数据库连接池对象</span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line"><span class="comment">// 5.获取数据库连接对象</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> ds.getConnection();</span><br></pre></td></tr></table></figure></li>
<li><p><strong>配置文件</strong></p>
<ul>
<li><code>druid.properties</code></li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/db1</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">3000</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>定义工具类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.定义一个类JDBCUtils</span></span><br><span class="line"><span class="comment">	2.提供静态代码块加载配置文件，初始化连接池对象</span></span><br><span class="line"><span class="comment">	3.提供方法：</span></span><br><span class="line"><span class="comment">		* 获取连接方法</span></span><br><span class="line"><span class="comment">		* 释放资源</span></span><br><span class="line"><span class="comment">		* 获取连接池方法</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-4-Spring-JDBC"><a href="#5-4-Spring-JDBC" class="headerlink" title="5.4    Spring_JDBC"></a>5.4    Spring_JDBC</h2><hr>
<ol>
<li><p>Spring框架对JDBC做了简单的封装。提供了一个<code>JDBCTemplate</code>对象简化JDBC的开发。</p>
</li>
<li><p>使用步骤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入jar包</span><br><span class="line"><span class="number">2.</span>创建JDBCTemplate对象。依赖于数据源（数据库连接池）DataSource。[所以仍需要c3p0或druid数据库连接池]</span><br><span class="line">	* <span class="type">JdbcTemplate</span> <span class="variable">jt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(DataSource ds);</span><br><span class="line"><span class="number">3.</span>调用JDBCTemplate对象中的方法来完成CRUD。</span><br><span class="line">	* update()	</span><br><span class="line">		+ 执行DML语句，增删改语句</span><br><span class="line">	* queryForMap()	</span><br><span class="line">		+ 将查询的结果集封装为Map集合，用列名作为key，值作为Value，将这条记录封装为一个Map集合。</span><br><span class="line">		  注意：这个方法查询的结果集长度只能为<span class="number">1.</span></span><br><span class="line">	* queryForList()	</span><br><span class="line">		+ 将查询的结果集封装为List集合。</span><br><span class="line">		  注意：本质上是先将每一条记录封装为一个Map集合，在将多个Map集合装载到List集合中</span><br><span class="line">	</span><br><span class="line">	* query()</span><br><span class="line">		+ 将查询结果封装为javaBean对象</span><br><span class="line">		+ query的参数<span class="number">2</span>：RowMapper</span><br><span class="line">		  - 一般我们使用BeanPropertyRowMapper实现类。可以完成JavaBean的自动封装。</span><br><span class="line">		  - <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;类型&gt;(类型.class)</span><br><span class="line">		  </span><br><span class="line">	* queryForObject(sql,*.class)		【*代表查询结果的数据类型】</span><br><span class="line">		+ 将查询结果封装为对象</span><br><span class="line">		+ 一般用于聚合函数的查询</span><br></pre></td></tr></table></figure></li>
<li><p>分析：</p>
<p><img src="/2020/08/20/JDBC/JDBC%E6%A0%B8%E5%BF%83.png"></p>
<ul>
<li>JDBC的核心就是<code>Connection</code>连接对象，<code>Connection</code>对象可以自己创建，也可以从数据库连接池中获取。</li>
<li><code>JdbcTemplate</code>对象：<ol>
<li><code>JdbcTemplate</code>首先从<code>DataSource</code>中获取<code>Connection</code>连接对象；</li>
<li>然后，在<code>JdbcTemplate</code>中集成了<code>JDBC</code>中原本使用<code>Connection、PreparedStatement、ResultSet</code>对象；</li>
<li>并对具体的步骤做了封装，让我们可以只关心SQL语句，而不用关心JDBC的具体执行步骤；</li>
<li>可以使用<code>JdbcTemplate</code>对象中的简单的方法完成对数据库的CRUD操作。</li>
</ol>
</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/19/Servlet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/19/Servlet/" class="post-title-link" itemprop="url">Servlet</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-19 09:07:15" itemprop="dateCreated datePublished" datetime="2020-08-19T09:07:15+08:00">2020-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-04 23:22:10" itemprop="dateModified" datetime="2022-05-04T23:22:10+08:00">2022-05-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基础理论"><a href="#基础理论" class="headerlink" title="基础理论"></a>基础理论</h1><h2 id="1、Servlet是什么？"><a href="#1、Servlet是什么？" class="headerlink" title="1、Servlet是什么？"></a>1、Servlet是什么？</h2><p><img src="/2020/08/19/Servlet/Servlet%E6%A6%82%E5%BF%B5.png"></p>
<p>Servlet 是 JavaEE 的规范之一，规范就是接口。</p>
<p>Servlet 是 <code>javax.servlet</code> 包下的一个顶级接口，接口中定义了所有 Servlet 子类都必须实现的方法。该接口中包含一个<code>service()</code>方法，用于编写处理请求的业务逻辑。</p>
<p>Servlet 是运行在 Web 服务器上的一个小型 Java 程序，<strong>通过 HTTP 接收客户端发送过来的请求，处理后响应结果给客户端</strong>。</p>
<p>Servlet 是 JavaWeb 三大组件之一。三大组件分别是：</p>
<ul>
<li>  Servlet 程序</li>
<li>  Fliter 过滤器</li>
<li>  Listener 监听器</li>
</ul>
<h2 id="2、Servlet中路径的写法"><a href="#2、Servlet中路径的写法" class="headerlink" title="2、Servlet中路径的写法"></a>2、Servlet中路径的写法</h2><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><ul>
<li><p>  特点：不以 <code>/</code> 开头，以 <code>.</code> 开头。如：<code>./index.heml</code></p>
</li>
<li><p>  通过相对路径不能确定唯一的资源</p>
</li>
<li><p>规则：</p>
<ul>
<li>  <code>./</code> ：当前目录（<code>./</code>可以省略，同样表示当前目录）</li>
<li>  <code>../</code>：上一级目录</li>
</ul>
</li>
</ul>
<h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><ul>
<li><p>  特点：以 <code>/</code> 开头的路径</p>
</li>
<li><p>  通过绝对路径可以确定唯一的资源</p>
</li>
<li><p>格式：<code>协议名://IP地址:端口号/工程路径/资源路径</code></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 例子</span><br><span class="line">http://localhost:3306/day15/responseDemo2</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="绝对路径中-的使用规则"><a href="#绝对路径中-的使用规则" class="headerlink" title="绝对路径中/的使用规则"></a>绝对路径中<code>/</code>的使用规则</h3><p>在 Web 项目中，斜杠（“<code>/</code>”）是一种绝对路径</p>
<ul>
<li><p>  <code>/</code> 如果被客户端解析，得到的地址是：<code>http:ip:port/</code></p>
</li>
<li><p>  <code>/</code> 如果被服务器端解析，得到的地址是：<code>http://ip:port/工程路径</code></p>
</li>
<li><p>特殊情况：重定向。重定向是服务端把 “<code>/</code>” 发送给客户端浏览器解析，所以可以将其视作 <a href="http://ip:port/">http://ip:port/</a></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务端把 “/” 发送给客户端浏览器解析</span></span><br><span class="line">response.sendRediect(<span class="string">&quot;/&quot;</span>);		</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="绝对-相对路径实战"><a href="#绝对-相对路径实战" class="headerlink" title="绝对/相对路径实战"></a>绝对/相对路径实战</h3><h4 id="在客户端（浏览器）使用时，需要手动加工程路径"><a href="#在客户端（浏览器）使用时，需要手动加工程路径" class="headerlink" title="在客户端（浏览器）使用时，需要手动加工程路径"></a>在客户端（浏览器）使用时，需要手动加工程路径</h4><ul>
<li><p>示例：<code>/day15/responseDemo2</code></p>
</li>
<li><p>建议动态获取工程路径，避免程序硬解码带来的的耦合度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsp中动态获取工程路径的方法</span></span><br><span class="line">request.getContextPath();</span><br></pre></td></tr></table></figure></li>
<li><p>访问网络上的资源需要使用资源的绝对路径。在客户端浏览器上，<code>/</code> 代表了 <code>http:ip:port/</code>，所以还需要加上<code>day15/responseDemo2</code> 就可以构成一个完整的 URL 了。</p>
</li>
<li><p>使用场景：重定向、超链接、表单提交等。</p>
</li>
</ul>
<h4 id="在服务器端使用时，不需要加工程路径"><a href="#在服务器端使用时，不需要加工程路径" class="headerlink" title="在服务器端使用时，不需要加工程路径"></a>在服务器端使用时，不需要加工程路径</h4><ul>
<li>示例：<code>/responseDemo2</code></li>
<li>同理，此时 <code>/</code> 代表 <code>http:ip:port/day15/</code>，只需要需要加上 <code>responseDemo2</code> 可以构成一个完整的 URL 了。</li>
<li>使用场景：请求转发（请求转发的全流程都在服务器端完成）</li>
</ul>
<hr>
<h1 id="Servlet快速入门"><a href="#Servlet快速入门" class="headerlink" title="Servlet快速入门"></a>Servlet快速入门</h1><h2 id="1、项目结构"><a href="#1、项目结构" class="headerlink" title="1、项目结构"></a>1、项目结构</h2><p><img src="/2020/08/19/Servlet/image-20200514203012448.png"></p>
<blockquote>
<ul>
<li>  <strong>src</strong>：src目录用于存放开发人员编写的java源代码</li>
<li><strong>web</strong>：web目录一般用来存放web工程使用到的资源文件。比如 html、css、js、jar包等文件。<ul>
<li><strong>WEB-INF</strong>：WEB-INF是一个受服务器保护的目录，浏览器无法直接访问到此目录中的内容。<ul>
<li>  <strong>lib</strong>：lib目录用来存放第三方的jar包（Maven工程中无此目录）。</li>
<li>  <strong>web.xml</strong>：web.xml是整个web工程的配置文件，可以在这里配置诸多web工程的组件。比如：Servlet程序、Filter过滤器、Listener监听器、Session超时等。</li>
</ul>
</li>
<li>  <strong>index.jsp</strong>：web服务器的默认首页</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="2、Servlet应用的实现步骤"><a href="#2、Servlet应用的实现步骤" class="headerlink" title="2、Servlet应用的实现步骤"></a>2、Servlet应用的实现步骤</h2><h3 id="2-1-配置文件方式"><a href="#2-1-配置文件方式" class="headerlink" title="2.1 配置文件方式"></a>2.1 配置文件方式</h3><ol>
<li>创建一个 Servlet 接口的实现类。</li>
<li>重写接口中的 <code>service()</code> 方法，在该方法中编写业务逻辑。</li>
<li>在配置文件 <code>web.xml</code> 中配置 servlet 项目对外暴露的访问 URL。</li>
</ol>
<blockquote>
<p>  web.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Servlet应用的访问地址--&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--在&lt;web-app&gt;标签中添加以下内容--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--服务端资源（Servlet实现类）的路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>	</span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>     <span class="comment">&lt;!--实现类的别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.web.servlet.Demo01_Servlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>    <span class="comment">&lt;!--实现类的全限定类名--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--服务端资源对外暴露的访问路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> <span class="comment">&lt;!--实现类的别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  <span class="comment">&lt;!--配置访问路径--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        `/` 表示绝对路径，在服务器解析的时候，表示的地址为：IP地址:port/工程路径/</span></span><br><span class="line"><span class="comment">        所以 `/demo01` 就等价于：IP地址:port/工程路径/cn.web.servlet.Demo01_Servlet</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  设置工程路径</li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200515231635912-1589555959099.png" alt="image-20200515231635912"></p>
<hr>
<h3 id="2-2-注解方式（Servlet3-0-）"><a href="#2-2-注解方式（Servlet3-0-）" class="headerlink" title="2.2 注解方式（Servlet3.0+）"></a>2.2 注解方式（Servlet3.0+）</h3><p>注解配置用于替换配置文件配置<code>web.xml</code> 。</p>
<h4 id="1、创建Web应用（注解方式）"><a href="#1、创建Web应用（注解方式）" class="headerlink" title="1、创建Web应用（注解方式）"></a>1、创建Web应用（注解方式）</h4><ol>
<li><p>创建 Web 项目，选择 Servlet3.0 以上的版本，选择不创建web.xml。</p>
<p><img src="/2020/08/19/Servlet/image-20200509183119002.png" alt="image-20200509183119002"></p>
</li>
<li><p>创建一个 Servlet 接口的实现类，重写 Servlet 接口中的抽象方法</p>
</li>
<li><p>在实现类上使用 <strong>@WebServlet</strong> 注解配置当前类的访问路径。（下图是3种等价写法）</p>
<ul>
<li><p><code>@WebServlet(urlPatterns = &quot;/demo01&quot;)</code>    </p>
<p><img src="/2020/08/19/Servlet/Servlet%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE1.png"></p>
</li>
<li><p><code>@WebServlet(value = &quot;/demo01&quot;)</code></p>
</li>
</ul>
<p><img src="/2020/08/19/Servlet/Servlet%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE2.png"></p>
<ul>
<li><code>@WebServlet(&quot;/demo01&quot;)</code>【简化版】</li>
</ul>
<p><img src="/2020/08/19/Servlet/Servlet%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE3.png"></p>
</li>
</ol>
<h4 id="2、配置-Servlet-应用中类的访问路径"><a href="#2、配置-Servlet-应用中类的访问路径" class="headerlink" title="2、配置 Servlet 应用中类的访问路径"></a>2、配置 Servlet 应用中类的访问路径</h4><ul>
<li><code>url-partten</code>：Servlet 应用中某个类的的访问路径</li>
</ul>
<ol>
<li><p>Servlet 应用中一个类可以设置多个访问路径，通过多个路径都能访问到目标程序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&#123;&quot;/demo1&quot;,&quot;/demo2&quot;,&quot;/demo3&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Servlet</span> <span class="keyword">implements</span> <span class="title class_">Servler</span> &#123;</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>一个 Servlet 程序可以定义多层的访问路径，定义规则：</p>
<table>
<thead>
<tr>
<th align="center">格式</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>/xx</code></td>
<td align="center">单层路径匹配</td>
</tr>
<tr>
<td align="center"><code>/xx/xx</code></td>
<td align="center">多层路径匹配</td>
</tr>
<tr>
<td align="center"><code>*.xx</code></td>
<td align="center">正则匹配</td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h2 id="3、原理分析"><a href="#3、原理分析" class="headerlink" title="3、原理分析"></a>3、原理分析</h2><p>服务器是本质上是一台<strong>安装了服务器软件</strong>的<strong>高性能计算机</strong>。</p>
<ul>
<li><p>  计算机：有唯一的IP地址</p>
</li>
<li><p>安装了服务器软件：如 TomCat，TomCat 默认占用的端口号是8080</p>
</li>
</ul>
<p>一个服务器中可以部署多个工程，每个工程都有唯一的<strong>工程路径</strong>。</p>
<p>每个工程中又拥有多个资源文件（Servlet的实现类 &amp; WEB目录下的静态资源文件），每个资源文件又有唯一的访问路径。</p>
<ul>
<li>Servlet 实现类通过类上的 @WebServlet 注解配置。</li>
<li>WEB 目录下的静态资源文件直接通过『<code>ip:port/工程路径/资源文件名称</code>』访问。</li>
</ul>
<p>以客户端（浏览器）访问本地服务器（Tomcat）中的资源（HelloServlet 类）为例，其访问原理如下图所示：</p>
<p><img src="/2020/08/19/Servlet/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AETomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B5%84%E6%BA%90%E5%8E%9F%E7%90%86%E5%9B%BE.svg" alt="浏览器访问Tomcat服务器资源原理图"></p>
<h3 id="服务器端完成的工作："><a href="#服务器端完成的工作：" class="headerlink" title="服务器端完成的工作："></a>服务器端完成的工作：</h3><ol>
<li>使用 8080 端口启动了一个 Tomcat 进程。</li>
<li>Tomcat 进程加载了一段 Servlet 程序：创建了一个 Servlet 接口的实现类 HelloServlet，并重写了 service() 方法作为业务逻辑的处理方法。</li>
<li>在配置文件 <code>web/WEB-INF/web.xml</code> 中配置 HelloServlet 程序对外暴露的访问 URL。</li>
<li>现在 HelloServlet 就作为一个程序被挂在服务器上了，通过对外暴露的访问 URL，所有的客户端都可以访问这个程序。</li>
<li>如果客户端成功访问到了 HelloServlet 程序，该程序中的 service() 方法就会被执行。</li>
</ol>
<h3 id="客户端完成的工作："><a href="#客户端完成的工作：" class="headerlink" title="客户端完成的工作："></a>客户端完成的工作：</h3><ol>
<li>客户端（浏览器）通过 HelloServlet 类对外暴露的访问 URL 就可以访问服务器上的 HelloServlet 程序了。</li>
</ol>
<h3 id="执行原理："><a href="#执行原理：" class="headerlink" title="执行原理："></a>执行原理：</h3><p><strong>客户端发送请求：</strong></p>
<ul>
<li><p>  客户端浏览器发送以下请求：<a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo01/hello">http://localhost:8080/servlet_demo01/hello</a></p>
</li>
<li><p>  客户端浏览器（携带请求信息）–&gt; 根据Servlet程序对外暴露的访问URL访问服务器中的Servlet程序(协议+IP+端口号+工程路径+Servlet类访问路径) –&gt; 服务器响应</p>
</li>
<li><p>分析：</p>
<table>
<thead>
<tr>
<th></th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>http://</td>
<td>协议名称</td>
</tr>
<tr>
<td>localhost</td>
<td>服务器的IP地址</td>
</tr>
<tr>
<td>8080</td>
<td>Tomcat进程占用的端口号</td>
</tr>
<tr>
<td>servlet_demo01</td>
<td>工程路径（支持自定义）</td>
</tr>
<tr>
<td>demo01</td>
<td>资源的访问路径（<code>&lt;url-pattern&gt;</code>）</td>
</tr>
</tbody></table>
<ol>
<li> 首先，Web 应用启动后会自动扫描工程路径下的 WEB-INF/web.xml 配置文件。</li>
<li> 并在配置文件中找到所有的 <code>&lt;url-pattern&gt;</code> 标签，逐一与 <code>/hello</code> 进行匹配（Servlet实现类的访问URL）。</li>
<li> 如果匹配成功，继续查找 <code>/hello</code> 对应的 <code>&lt;servlet-name&gt;</code> 标签（别名）。</li>
<li> 最后关联到对应的 <code>&lt;servlet-class&gt;</code> 标签，这个标签保存了服务器中 Servlet 实现类的全限定类名。</li>
<li> 核心就是通过 url-pattern 找到服务器中对应的处理程序。</li>
</ol>
</li>
</ul>
<p><strong>服务端处理请求：</strong></p>
<p>服务器端收到请求消息后，在 service() 方法中处理请求，并原路返回响应信息。</p>
<p>Tomcat 监听到请求消息后自动进行：</p>
<ol>
<li>Tomcat 将 <code>全限定类名.java</code> 对应的 <code>.class</code> 字节码文件加载进内存。【<code>Class.forName()</code>】     </li>
<li>通过反射机制在内存中创建实例对象；【<code>class.newInstance()</code>】        </li>
<li>调用对象中的 <code>service()</code> 方法，执行方法中定义的业务逻辑。</li>
</ol>
<p><strong>结论：</strong> </p>
<ul>
<li>通过客户端可以访问服务器端的 Servlet 程序。</li>
</ul>
<h2 id="4、实战：IDEA中TomCat的相关配置"><a href="#4、实战：IDEA中TomCat的相关配置" class="headerlink" title="4、实战：IDEA中TomCat的相关配置"></a>4、实战：IDEA中TomCat的相关配置</h2><ol>
<li><p>IDEA 会为 TomCat 部署每一个的项目单独建立一份配置文件。</p>
<ul>
<li>查看配置文件的路径：控制台日志信息 <code>Using CATALINA_BASE</code></li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200509184656771.png" alt="image-20200509184656771"></p>
</li>
<li><p>工作项目 和 TomCat 部署的 web 项目</p>
<ul>
<li>工作项目是存储我们编写的代码的目录。</li>
<li>客户端真正访问的是“TomCat部署的web项目”，“TomCat部署的web项目”与“工作空间项目”的web项目目录下的所有资源一一映射。</li>
</ul>
</li>
<li><p>TomCat重新部署web项目（重新将工作项目打成war包）</p>
<p><img src="/2020/08/19/Servlet/image-20200518180904346-1597651978164.png" alt="image-20200518180904346"></p>
<p><img src="/2020/08/19/Servlet/image-20200518181231222-1597651978166.png" alt="image-20200518181231222"></p>
</li>
</ol>
<hr>
<h1 id="Servlet体系结构"><a href="#Servlet体系结构" class="headerlink" title="Servlet体系结构"></a>Servlet体系结构</h1><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><img src="/2020/08/19/Servlet/Servlet%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png" alt="Servlet体系结构" style="zoom: 50%;">

<h3 id="GenericServlet"><a href="#GenericServlet" class="headerlink" title="GenericServlet"></a>GenericServlet</h3><p>GenericServlet 是一个抽象类，它对 Servlet 接口中的部分抽象方法做了空实现，只保留了 service() 仍是一个抽象方法。</p>
<p>相比于实现 Servlet 接口，如果我们自定义的类直接继承了 GenericServlet 抽象类，那么就可以无需重写 Servlet 接口中很多不常用的抽象方法，比如 init()、destroy() 等，只需要重写最常用的 service() 方法即可。</p>
<p>非常用方法只在有需要时重写即可，简化了代码书写。</p>
<h3 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a>HttpServlet</h3><p>HttpServlet 类继承了 GenericServlet 类。对 HTTP 协议中的 GET/POST 提交方式默认做了分发处理，简化了代码的书写。</p>
<p>好处：</p>
<ul>
<li>  自定义的 Servlet 类只需继承 HttpServlet 抽象类即可。</li>
<li>  只需要重写对应的 <code>doGet()</code> 或 <code>doPost()</code> 方法即可。【<code>doGet()/doPost()</code>方法等价于<code>service()</code> 方法】</li>
<li>  对应客户端浏览器两种最常见的提交方式 GET/POST。</li>
</ul>
<h2 id="Servlet-的请求分发处理"><a href="#Servlet-的请求分发处理" class="headerlink" title="Servlet 的请求分发处理"></a>Servlet 的请求分发处理</h2><p>Servlet 程序最主要的功能就是<strong>接收客户端发送的请求，处理请求并响应处理结果给客户端</strong>。</p>
<p>在开发中使用最广泛的数据传输协议就是 HTTP 协议，HTTP协议中常用的数据提交方式有2种：GET 和 POST。</p>
<p>在 Servlet 程序中，虽然使用 service() 方法可以接收任意请求方式提交的请求信息，但在实际应用中为了降低耦合度和具体的业务需求，我们一般会分别处理 GET 和 POST 方式的请求。</p>
<h3 id="1、直接实现Servlet接口，手动进行请求分发处理"><a href="#1、直接实现Servlet接口，手动进行请求分发处理" class="headerlink" title="1、直接实现Servlet接口，手动进行请求分发处理"></a>1、直接实现Servlet接口，手动进行请求分发处理</h3><p>HttpServletRequest 类中有一个方法 getMethod()，通过方法的可以获得请求方式的字符串形式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_2_Servlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ServletRequest中没有getMethod()方法，它的子类HttpServletRequest中有getMethod()方法</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest)servletRequest;</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> httpServletRequest.getMethod();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;GET&quot;</span>.equals(method))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;GET请求&quot;</span>);</span><br><span class="line">            doGET();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(method))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;POST请求&quot;</span>);</span><br><span class="line">            doPOST();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理Get请求</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理Post请求</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="2、继承HttpServlet类，自动进行请求分发处理"><a href="#2、继承HttpServlet类，自动进行请求分发处理" class="headerlink" title="2、继承HttpServlet类，自动进行请求分发处理"></a>2、继承HttpServlet类，自动进行请求分发处理</h3><p>HttpServlet 类已经帮我们实现了请求分发处理的逻辑，我们只需直接继承 HttpServlet 类就可以实现上面的功能。</p>
<p>具体流程为：</p>
<ol>
<li>创建 HttpServlet 的子类。</li>
<li>根据请求方式重写 doGet() 或 doPost() 方法。</li>
<li>到配置文件 web.xml 中去配置 Servlet 程序的访问 URL。</li>
</ol>
<hr>
<h1 id="Servlet接口分析"><a href="#Servlet接口分析" class="headerlink" title="Servlet接口分析"></a>Servlet接口分析</h1><h2 id="Servlet的生命周期"><a href="#Servlet的生命周期" class="headerlink" title="Servlet的生命周期"></a>Servlet的生命周期</h2><ol>
<li>执行Servlet实现类的构造方法</li>
<li>执行<code>init()</code>初始化方法</li>
<li>执行<code>service()</code>方法</li>
<li>……</li>
<li>执行<code>destroy()</code>销毁方法</li>
</ol>
<blockquote>
<p>  Servlet 接口源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置方法：每个Servlet实例对应一个ServletConfig实例</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 服务方法[专门用来处理请求和响应的]</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span></span><br><span class="line">        <span class="keyword">throws</span> ServletException, IOException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取相关信息的方法</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h2><p>顾名思义，<code>ServletConfig</code> 就是 Servlet 应用的配置类。</p>
<p>既然是配置类，自然与配置文件 <code>web.xml</code> 息息相关。该类可以获取 <code>web.xml</code> 中的所有配置信息。</p>
<blockquote>
<p>  ServletConfig 类源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletName</span><span class="params">()</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 每个ServletConfig实例都可以获取全局的ServletContext实例</span></span><br><span class="line">    <span class="keyword">public</span> ServletContext <span class="title function_">getServletContext</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInitParameter</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getInitParameterNames</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h3 id="1、获取-ServletConfig-的几种方式"><a href="#1、获取-ServletConfig-的几种方式" class="headerlink" title="1、获取 ServletConfig 的几种方式"></a>1、获取 ServletConfig 的几种方式</h3><h4 id="case1："><a href="#case1：" class="headerlink" title="case1："></a>case1：</h4><p><code>ServletConfig</code> 是初始化方法 <code>init()</code> 的入参，自然可以在在 <code>init()</code> 方法内使用该对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 	如果需要在自定义的Servlet实现类中重写init()方法，</span></span><br><span class="line"><span class="comment">* 一定记得使用super调用父类的init()方法，以保证初始</span></span><br><span class="line"><span class="comment">* 化能正常进行。因为需要在父类的init()方法中加载配置</span></span><br><span class="line"><span class="comment">* 文件的数据。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Servlet_HttpServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="built_in">super</span>.init(config);		<span class="comment">// 很重要</span></span><br><span class="line">        System.out.println(<span class="string">&quot;重写了init方法，做了一些扩展&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="Case2："><a href="#Case2：" class="headerlink" title="Case2："></a>Case2：</h4><p>通过 <code>this.getServletConfig()</code> 的方式，也可以获得 <code>ServletConfig </code>对象。</p>
<h4 id="Case3："><a href="#Case3：" class="headerlink" title="Case3："></a>Case3：</h4><p>直接使用。Servlet实现类对象和ServletConfig对象都是由TomCat创建的，在Servlet类中可直接使用。</p>
<ul>
<li>  Servlet 实现类的对象实例是在服务器中 Servlet 类第一次被访问时创建的。</li>
<li>  每个 Servlet 实现类都拥有一个对应的 ServletConfig 对象。在每个 Servlet 实现类初始化时，就会创建一个对应的 ServletConfig 对象。</li>
<li>  也就是说，一个 Web 应用中，存在多个 Servlet 实现类的实例对象，也存在多个 ServletConfig 实例对象。</li>
</ul>
<hr>
<h3 id="2、ServletConfig类的三大作用"><a href="#2、ServletConfig类的三大作用" class="headerlink" title="2、ServletConfig类的三大作用"></a>2、ServletConfig类的三大作用</h3><ol>
<li><p>可以获取Servlet实现类在配置文件中的名称（id），即 <code>&lt;servlet-name&gt;</code> 标签的值。</p>
</li>
<li><p>获取初始化参数<code>&lt;init-param&gt;</code>。[配置文件中]</p>
</li>
</ol>
<ul>
<li><code>&lt;init-param&gt;</code>是初始化参数。<ul>
<li><code>&lt;init-param&gt;</code>定义在<code>&lt;servlet&gt;</code>标签中，一个<code>&lt;servlet&gt;</code>标签中可以保存多个<code>&lt;init-param&gt;</code>键值对</li>
<li><code>&lt;init-param&gt;</code>中保存的是<code>&lt;param-name&gt;</code>和<code>&lt;param-value&gt;</code>的键值对， ServletConfig实例可以通过键获取值</li>
</ul>
</li>
</ul>
<ol start="3">
<li>获取 <code>ServletContext</code> 对象。</li>
</ol>
<blockquote>
<p>  <code>web.xml</code>配置文件</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&lt;context-param&gt;是上下文参数（它作用于整个WEB工程）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>context<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>987654<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>     <span class="comment">&lt;!--别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>javaweb.tomcat.Demo01_TomCat<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span> 	<span class="comment">&lt;!--Servlet实现类的全限定名--&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">&lt;!--初始化参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--初始化参数的key--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--初始化参数的value--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>zhangsan<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>	<span class="comment">&lt;!--Servlet的访问路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>测试</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Servlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  1. 可以获取Servlet实现类的别名，即`&lt;servlet-name&gt;`的值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">servletName</span> <span class="operator">=</span> servletConfig.getServletName();	</span><br><span class="line">        System.out.println(servletName);	<span class="comment">// demo01</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//  2. 获取初始化参数`&lt;init-param&gt;`</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">initParameter1</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">initParameter2</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(initParameter1+<span class="string">&quot;:&quot;</span>+initParameter2);	<span class="comment">// zhangsan:123456</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//  3. 获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletConfig.getServletContext();</span><br><span class="line">        System.out.println(servletContext);		<span class="comment">//org.apache.catalina.core.ApplicationContextFacade@7a589846</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h2><blockquote>
<p>  <strong>ServletContext；Servlet上下文对象；单例</strong></p>
</blockquote>
<ul>
<li>  与 ServletConfig 实例不同，一个 Web 工程中只能有一个 ServletContext 实例。</li>
<li>  <code>ServletContext</code> 实例在 web 工程启动时自动创建，在 web 工程停止时自动销毁。</li>
<li>  <code>ServletContext</code> 是一个<strong>域对象</strong>，它被整个 web 工程共享。</li>
</ul>
<h3 id="1、域对象（共享数据）"><a href="#1、域对象（共享数据）" class="headerlink" title="1、域对象（共享数据）"></a>1、域对象（共享数据）</h3><p>域对象就是一个容器，类似于Map集合，可以存取数据。</p>
<table>
<thead>
<tr>
<th align="center">分类</th>
<th align="center">存数据</th>
<th align="center">取数据</th>
<th align="center">删除数据</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Map</td>
<td align="center"><code>put()</code></td>
<td align="center"><code>get()</code></td>
<td align="center"><code>remove()</code></td>
</tr>
<tr>
<td align="center">域对象</td>
<td align="center"><code>setAttribute()</code></td>
<td align="center"><code>getAttribute()</code></td>
<td align="center"><code>removeAttribute()</code></td>
</tr>
</tbody></table>
<p><strong>测试：</strong>在一个 Web 工程中创建 2 个 Servlet 实现类，因为在一个 web 工程中只能有一个 <code>ServletContext</code> 对象实例，所以在该 web 工程中任意一个 Servlet 实现类实例都可以对 <code>ServletContext</code> 对象进行增、删、取数据的操作。</p>
<ul>
<li>  Servlet 实例1：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo04_ServletContext</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line"> 		<span class="comment">//一个web工程中只能有一个ServletContext对象实例，所以在同一web工程的任意一个Servlet实现类中都可以执行以下操作：</span></span><br><span class="line">        <span class="comment">// 1.获取Context对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">// 2.往域对象中存数据</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  Servlet 实例2：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05_ServletContext</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取Context对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">// 2.从域对象中取数据</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> servletContext.getAttribute(<span class="string">&quot;k1&quot;</span>);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        <span class="comment">// 3.删除域对象中的数据</span></span><br><span class="line">        servletContext.removeAttribute(<span class="string">&quot;k1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h3 id="2、如何获取ServletContext？"><a href="#2、如何获取ServletContext？" class="headerlink" title="2、如何获取ServletContext？"></a>2、如何获取ServletContext？</h3><table>
<thead>
<tr>
<th align="left">说明</th>
<th>方法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">通过 request 对象获取</td>
<td><code>request.getServletContext()</code></td>
</tr>
<tr>
<td align="left">通过 HttpServlet 对象直接获取</td>
<td><code>[this.]getServletContext()</code></td>
</tr>
<tr>
<td align="left">通过 ServletConfig 对象获取</td>
<td><code>servletConfig.getServletContext()</code></td>
</tr>
</tbody></table>
<h3 id="3、ServletContext的作用"><a href="#3、ServletContext的作用" class="headerlink" title="3、ServletContext的作用"></a>3、ServletContext的作用</h3><blockquote>
<p>  ServletContext 类源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletContext</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TEMPDIR</span> <span class="operator">=</span> <span class="string">&quot;javax.servlet.context.tempdir&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ORDERED_LIBS</span> <span class="operator">=</span> <span class="string">&quot;javax.servlet.context.orderedLibs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContextPath</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletContext <span class="title function_">getContext</span><span class="params">(String uripath)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMajorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getEffectiveMajorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getEffectiveMinorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMimeType</span><span class="params">(String file)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">getResourcePaths</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> URL <span class="title function_">getResource</span><span class="params">(String path)</span> <span class="keyword">throws</span> MalformedURLException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> InputStream <span class="title function_">getResourceAsStream</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RequestDispatcher <span class="title function_">getRequestDispatcher</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RequestDispatcher <span class="title function_">getNamedDispatcher</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> Servlet <span class="title function_">getServlet</span><span class="params">(String name)</span> <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;Servlet&gt; <span class="title function_">getServlets</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getServletNames</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(Exception exception, String msg)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message, Throwable throwable)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRealPath</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServerInfo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInitParameter</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getInitParameterNames</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">setInitParameter</span><span class="params">(String name, String value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getAttribute</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getAttributeNames</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAttribute</span><span class="params">(String name, Object object)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeAttribute</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletContextName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addServlet</span><span class="params">(String servletName, String className)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addServlet</span><span class="params">(String servletName, Servlet servlet)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addServlet</span><span class="params">(String servletName,</span></span><br><span class="line"><span class="params">            Class&lt;? extends Servlet&gt; servletClass)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addJspFile</span><span class="params">(String jspName, String jspFile)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Servlet</span>&gt; T <span class="title function_">createServlet</span><span class="params">(Class&lt;T&gt; c)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration <span class="title function_">getServletRegistration</span><span class="params">(String servletName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, ? <span class="keyword">extends</span> <span class="title class_">ServletRegistration</span>&gt; getServletRegistrations();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration.Dynamic <span class="title function_">addFilter</span><span class="params">(String filterName, String className)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration.Dynamic <span class="title function_">addFilter</span><span class="params">(String filterName, Filter filter)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration.Dynamic <span class="title function_">addFilter</span><span class="params">(String filterName,</span></span><br><span class="line"><span class="params">            Class&lt;? extends Filter&gt; filterClass)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Filter</span>&gt; T <span class="title function_">createFilter</span><span class="params">(Class&lt;T&gt; c)</span> <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration <span class="title function_">getFilterRegistration</span><span class="params">(String filterName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, ? <span class="keyword">extends</span> <span class="title class_">FilterRegistration</span>&gt; getFilterRegistrations();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> SessionCookieConfig <span class="title function_">getSessionCookieConfig</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSessionTrackingModes</span><span class="params">(</span></span><br><span class="line"><span class="params">            Set&lt;SessionTrackingMode&gt; sessionTrackingModes)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;SessionTrackingMode&gt; <span class="title function_">getDefaultSessionTrackingModes</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;SessionTrackingMode&gt; <span class="title function_">getEffectiveSessionTrackingModes</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(String className)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">EventListener</span>&gt; <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(T t)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(Class&lt;? extends EventListener&gt; listenerClass)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">EventListener</span>&gt; T <span class="title function_">createListener</span><span class="params">(Class&lt;T&gt; c)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> JspConfigDescriptor <span class="title function_">getJspConfigDescriptor</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ClassLoader <span class="title function_">getClassLoader</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">declareRoles</span><span class="params">(String... roleNames)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getVirtualServerName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSessionTimeout</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSessionTimeout</span><span class="params">(<span class="type">int</span> sessionTimeout)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRequestCharacterEncoding</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRequestCharacterEncoding</span><span class="params">(String encoding)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getResponseCharacterEncoding</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setResponseCharacterEncoding</span><span class="params">(String encoding)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th align="left">作用</th>
<th align="left">方法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">获取MIME类型</td>
<td align="left"><code>String getMimeType(String file)</code></td>
</tr>
<tr>
<td align="left">获取<code>web.xml</code>中配置的上下文参数<code>&lt;context-param&gt;</code>。</td>
<td align="left"><code>String getContextParameter(String key)</code></td>
</tr>
<tr>
<td align="left">获取当前WEB项目的工程路径</td>
<td align="left"><code>String getContextPath()</code></td>
</tr>
<tr>
<td align="left">获取WEB项目的绝对路径(war包所在路径)</td>
<td align="left"><code>String getRealPath(String path)</code></td>
</tr>
</tbody></table>
<ul>
<li><code>&lt;context-param&gt;</code><ul>
<li><code>&lt;context-param&gt;</code> 是上下文参数（它作用于整个WEB工程）</li>
<li><code>&lt;context-param&gt;</code> 在配置文件web.xml中的位置在最前面的<code>&lt;servlet&gt;</code>之外（上）</li>
</ul>
</li>
<li>工程路径：我们自己编写的代码所在的路径，绝对路径是我们编写的代码部署在服务器上之后的路径。</li>
<li>绝对路径：<ul>
<li>获取绝对路径时需要在 <code>getRealPath(&#39;/&#39;)</code> 中加一个斜杠，表示绝对路径</li>
<li>这个绝对路径是你写的项目被打成的war包所在的路径。[<code>协议 + IP地址 + 端口号 + war包路径</code>]</li>
</ul>
</li>
</ul>
<p><strong>测试：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Servlet_Context</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	TomCat自动创建的对象调用：getServletConfig()</span></span><br><span class="line"><span class="comment">        	servletConfig对象实例调用：getServletContext()</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletConfig.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 获取`web.xml`中配置的上下文参数`&lt;context-param&gt;`。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username_value</span> <span class="operator">=</span> servletContext.getContextParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password_value</span> <span class="operator">=</span> servletContext.getContextParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username_value+<span class="string">&quot;:&quot;</span>+password_value);	<span class="comment">// context:987654</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 获取当前的工程路径：`/工程路径`。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> servletContext.getContextPath();</span><br><span class="line">        System.out.println(contextPath);	<span class="comment">// /D1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 获取工程部署后在服务器上的绝对路径。[这个绝对路径是你写的项目被打成的war包所在的路径]</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        <span class="comment">// F:\03JavaWeb\code2\out\artifacts\D1_TomCat_war_exploded\</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="附：MIME类型说明"><a href="#附：MIME类型说明" class="headerlink" title="附：MIME类型说明"></a>附：MIME类型说明</h3><p>MIME 类型是互联网通信过程中定义的一种文件数据类。</p>
<p>MIME（Multipurpose Internet Mail Extensions）：多功能邮件扩充服务。</p>
<p>MIME类型的格式：大类型/小类型，并与某一种文件扩展名相对应。</p>
<ul>
<li><p>常见的MIME类型</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">文件</th>
<th align="center">文件后缀名</th>
<th align="center">MIME类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">超文本标记语言</td>
<td align="center">.html || .htm</td>
<td align="center">text/html</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">普通文本</td>
<td align="center">.txt</td>
<td align="center">text/plain</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">RTF文本（类似于Word文档）</td>
<td align="center">.rtf</td>
<td align="center">application/rtf</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">GIF图形</td>
<td align="center">.gif</td>
<td align="center">image/img</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">JPEG图形</td>
<td align="center">.jpeg || .jpg</td>
<td align="center">image/jpeg</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">au声音文件</td>
<td align="center">.au</td>
<td align="center">auto/basic</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">MIDI音乐文件</td>
<td align="center">.mid || .midi</td>
<td align="center">audio/midi || audio/x-midi</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">RealAudio音乐文件</td>
<td align="center">.ra || .ram</td>
<td align="center">video/mpeg</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">MPEG文件</td>
<td align="center">.mpg || .mpeg</td>
<td align="center">video/mpeg</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">AVI文件</td>
<td align="center">.avi</td>
<td align="center">video/x-msvideo</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">GZIP文件</td>
<td align="center">.gz</td>
<td align="center">application/x-gzip</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">TAR文件</td>
<td align="center">.tar</td>
<td align="center">application/x-tar</td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h1 id="Servlet-中的请求和响应"><a href="#Servlet-中的请求和响应" class="headerlink" title="Servlet 中的请求和响应"></a>Servlet 中的请求和响应</h1><p>Request 对象和 Response 对象是 Tomcat 服务器在监听到请求后由 Servlet 程序自动创建的，我们可以在 Servlet 的实现类中直接使用。</p>
<p>Request 对象是用来获取请求消息的，Response 对象是用来返回响应消息的。</p>
<h2 id="1、Request"><a href="#1、Request" class="headerlink" title="1、Request"></a>1、Request</h2><h3 id="Request对象的继承结构"><a href="#Request对象的继承结构" class="headerlink" title="Request对象的继承结构"></a>Request对象的继承结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ServletRequest		-- 接口</span><br><span class="line">	|</span><br><span class="line">HttpServletRequest		-- 接口</span><br><span class="line">	|</span><br><span class="line">org.apache.catalina.connector.RequestFacade 	--类（TomCat创建的）</span><br></pre></td></tr></table></figure>

<h3 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h3><h4 id="1、HttpServletRequest-有什么作用？"><a href="#1、HttpServletRequest-有什么作用？" class="headerlink" title="1、HttpServletRequest 有什么作用？"></a>1、HttpServletRequest 有什么作用？</h4><ul>
<li>  Tomcat 服务器会一直监听客户端的请求。当监听到请求消息时，就会把请求消息数据封装到 ServletRequest 接口的实现类对象中。</li>
<li>  通过 Servlet 对象的 <code>service()</code>方法（或者 <code>doGet()</code> 和 <code>doPos()</code> 方法）可以获取到这个实现类对象。</li>
<li>  通过 <code>HttpServletRequest</code> 的子类实例，获取到客户端请求消息中包含的信息；</li>
<li>  在 <code>service()</code> 方法中编写处理请的逻辑，并将响应结果封装到 <code>HttpServletResponse</code> 的实现类对象中，返回给客户端。</li>
</ul>
<h4 id="2、HttpServletRequest类中的方法："><a href="#2、HttpServletRequest类中的方法：" class="headerlink" title="2、HttpServletRequest类中的方法："></a>2、HttpServletRequest类中的方法：</h4><h5 id="2-1、获取请求消息中数据的方法"><a href="#2-1、获取请求消息中数据的方法" class="headerlink" title="2.1、获取请求消息中数据的方法"></a>2.1、获取请求消息中数据的方法</h5><h6 id="获取请求行数据："><a href="#获取请求行数据：" class="headerlink" title="获取请求行数据："></a>获取请求行数据：</h6><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">说明</th>
<th align="left">例子</th>
</tr>
</thead>
<tbody><tr>
<td align="left">获取请求方式</td>
<td align="left"><code>String getMethod()</code></td>
<td align="left"><code>GET</code></td>
</tr>
<tr>
<td align="left">获取访问路径(url-pattern)</td>
<td align="left"><code>String getServletPath()</code></td>
<td align="left"><code>/demo01</code></td>
</tr>
<tr>
<td align="left">获取请求参数[只适用于GET请求]</td>
<td align="left"><code>String getQueryString()</code></td>
<td align="left"><code>name=zhangsan</code></td>
</tr>
<tr>
<td align="left">获取URI（统一资源标识符）</td>
<td align="left"><code>String getRequestURI()</code></td>
<td align="left"><code>/day14/demo01</code></td>
</tr>
<tr>
<td align="left">获取URL（统一资源定位符）</td>
<td align="left"><code>StringBuffer getRequestURL()</code></td>
<td align="left"><code>http://localhost/day14/demo01</code></td>
</tr>
<tr>
<td align="left">获取协议及版本信息</td>
<td align="left"><code>String getProtocol()</code></td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">获取客户机的IP地址</td>
<td align="left"><code>String getRemoteHost()</code></td>
<td align="left">-</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>String getRemoteAddr()</code></td>
<td align="left">-</td>
</tr>
</tbody></table>
<ul>
<li><code>ServletRequest</code> 接口中没有定义<code>getMethod()</code>方法，<code>HttpServletRequest</code>接口中才开始定义该方法，所以如果想要使用该方法，自定义的类必须实现 <code>HttpServletRequest</code>接口。</li>
</ul>
<h6 id="获取请求头数据："><a href="#获取请求头数据：" class="headerlink" title="获取请求头数据："></a>获取请求头数据：</h6><table>
<thead>
<tr>
<th align="center"></th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>Enumeration&lt;String&gt; getHeaderNames()</code></td>
<td align="left">获取所有请求头的名称</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>String getHeader(String name)</code></td>
<td align="left">通过请求头的名称获取请求头的值</td>
</tr>
</tbody></table>
<h6 id="获取请求体数据（POST请求专有）"><a href="#获取请求体数据（POST请求专有）" class="headerlink" title="获取请求体数据（POST请求专有）"></a>获取请求体数据（POST请求专有）</h6><p><code>ServletRequest</code> 接口会将 Request 请求消息中的请求体封装到一个<strong>数据流对象</strong>中，只要获得了这个流对象，就可以从流对象中读取到<strong>请求体数据</strong>。所以说获取请求体的数据可分为2步实现：</p>
<ol>
<li>获取数据流对象</li>
<li>从流对象中读取请求体数据</li>
</ol>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="left">获取流对象</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">1</td>
<td align="left"><code>BufferedReader getReader()</code></td>
<td align="left">获取字符输入流</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>ServletInputStream getInputStream()</code></td>
<td align="left">获取字节输入流</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left">从流对象中读取数据</td>
<td align="left">参考File对象</td>
</tr>
</tbody></table>
<h6 id="获取请求参数的通用方法："><a href="#获取请求参数的通用方法：" class="headerlink" title="获取请求参数的通用方法："></a>获取请求参数的通用方法：</h6><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>String getParameter(String name)</code></td>
<td align="center">根据请求参数的key获取value</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>String[] getParameterValues(String name)</code></td>
<td align="center">根据请求参数的key获取value数组</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>Enumeration&lt;String&gt; getParameterNames()</code></td>
<td align="center">获取所有请求参数的key</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>Map&lt;String,String[]&gt; getParameterMap()</code></td>
<td align="center">获取所有参数的Map集合</td>
</tr>
</tbody></table>
<h6 id="其它-☆"><a href="#其它-☆" class="headerlink" title="其它[☆]"></a>其它[☆]</h6><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>getAtrribute(key)</code></td>
<td align="center">获取Request共享域中的数据</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>getRequestDispatcher(String path)</code></td>
<td align="center">获取请求转发对象</td>
</tr>
</tbody></table>
<h5 id="2-2、修改请求消息中数据的方法"><a href="#2-2、修改请求消息中数据的方法" class="headerlink" title="2.2、修改请求消息中数据的方法"></a>2.2、修改请求消息中数据的方法</h5><table>
<thead>
<tr>
<th align="center"></th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>setAttribute(key, value)</code></td>
<td align="left">向Request共享域中添加数据</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>setCharacterEncoding(&quot;utf-8&quot;)</code></td>
<td align="left">设置请求体的编码方式为utf-8</td>
</tr>
</tbody></table>
<h6 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h6><ul>
<li>  GET方式：Tomcat8+ 之后已经将GET提交中文乱码的问题解决了。</li>
<li>  POST方式：在处理请求体数据之前，先通过Request对象设置请求体的编码方式</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.先设置请求体的编码方式为utf-8</span></span><br><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"><span class="comment">// 2.根据参数名称获取参数值</span></span><br><span class="line">String <span class="title function_">getParameter</span><span class="params">(String name)</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Tip：</strong></p>
<p>一定要在获取请求参数之前调用该方法，假如你要获取的请求参数有多个，但是只有最后一个会出现乱码，也必须在获取第一个请求参数之前调用<code>setCharacterEncoding()</code>方法，否则该方法不会生效。</p>
</blockquote>
<h4 id="3、请求转发"><a href="#3、请求转发" class="headerlink" title="3、请求转发"></a>3、请求转发</h4><p><strong>请求转发</strong>指服务器收到请求后，从一个资源跳到另一个资源的操作。</p>
<p>请求转发是一种服务内部的资源跳转方式。</p>
<h5 id="3-1、为什么要使用请求转发（使用场景）？"><a href="#3-1、为什么要使用请求转发（使用场景）？" class="headerlink" title="3.1、为什么要使用请求转发（使用场景）？"></a>3.1、为什么要使用请求转发（使用场景）？</h5><ul>
<li>  客户端通过浏览器访问服务器资源</li>
<li>  在服务器内部，我们希望服务是”高内聚、低耦合”的，尽量让每个类满足单一职责要求。这种情况下，客户端要访问的资源就不可能只存储在一个类中，也就是说客户端一次请求所需要的资源需要在服务器的同一个工程下的多个类中获取。这时候就需要请求转发了；</li>
<li>  请求转发规定了一个范围，范围内的所有数据可以共享。</li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200519150806643-1597652154014.png" alt="image-20200519150806643"></p>
<h5 id="3-2、请求转发的特点"><a href="#3-2、请求转发的特点" class="headerlink" title="3.2、请求转发的特点"></a>3.2、请求转发的特点</h5><ul>
<li>  请求转发是一次请求。</li>
<li>  浏览器的地址栏路径不会发生变化。</li>
<li>  只能转发到当前Web工程的资源中。</li>
<li>  请求转发可以访问到<code>WEB-INF</code>目录下。[<code>WEB-INF</code>是受保护的目录，浏览器不能直接访问到该目录]</li>
</ul>
<h5 id="3-3、Request共享域"><a href="#3-3、Request共享域" class="headerlink" title="3.3、Request共享域"></a>3.3、Request共享域</h5><ul>
<li><p><code>request共享域</code>：代表一次请求的范围，一般用于请求转发的多个资源间共享数据。</p>
</li>
<li><p>共享数据必须被保存到共享域中才能被该共享域中的其它对象访问到。</p>
</li>
</ul>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>void setAttribute(String name, Object obj)</code></td>
<td align="center">添加Map数据到Request共享域中</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Object getAttribute(String name)</code></td>
<td align="center">从Request共享域中通过键获取值</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>void removeAttribute(String name)</code></td>
<td align="center">通过键删除键值对</td>
</tr>
</tbody></table>
<h5 id="3-4、请求转发的步骤"><a href="#3-4、请求转发的步骤" class="headerlink" title="3.4、请求转发的步骤"></a>3.4、请求转发的步骤</h5><ol>
<li><p>通过Request对象获取<em>请求转发器</em>对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RequestDispatcher <span class="title function_">getRequestDispatcher</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// 如：</span></span><br><span class="line">    req.getRequestDispatcher(String path)	<span class="comment">// 参数为要转发的地址的资源路径url-pattern</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	请求转发必须要以 &quot;/&quot; 开头，斜杠表示绝对路径，地址为：</span></span><br><span class="line"><span class="comment">		http://ip:port/工程名/</span></span><br><span class="line"><span class="comment">	映射到IDEA代码的WEB目录</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>RequestDispatcher</code>转发器对象来进行转发：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	请求转发是一次请求，但是要访问多个资源。所有的请求信息都包含在第一次请求中，所有的响应消息都在最后一次请求完毕后返回给用户。</span></span><br><span class="line"><span class="comment">	所以在转发的时候，要把	客户端的 请求和响应 同时转发给下一个服务器资源对象 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">forward(ServletRequest req, Servletresponse resp)</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="3-5、-lt-Base-gt-标签的作用"><a href="#3-5、-lt-Base-gt-标签的作用" class="headerlink" title="3.5、&lt;Base&gt;标签的作用"></a>3.5、<code>&lt;Base&gt;</code>标签的作用</h5><ul>
<li><p><code>&lt;Base&gt;</code>标签可以设置当前页面中所有相对路径的参考路径</p>
</li>
<li><p>我们在WEB目录下新建两个HTML项目</p>
<ol>
<li><p><code>index.html</code>：这是一个首页，可以跳转到<code>c.html</code>，也可以跳转到转发器ForwardC，通过转发器转发到<code>c.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;a/b/c.html&quot;</span>&gt;</span>跳转到网页C<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8080/D1/demo06&quot;</span>&gt;</span>调到转发器，转发器转发到网页C<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>a/b/c.html</code>：这是C页面，可以跳转回首页（<code>index.html</code>）【通过相对路径跳转】</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>这里是C网页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--添加&lt;base&gt;标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8080/D1/a/b/c.html&quot;</span>&gt;</span>	 </span><br><span class="line"><span class="comment">&lt;!--&lt;base href=&quot;http://localhost:8080/D1/a/b/&quot;&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--文件名可以省略，斜杠不能省略。[省略斜杠会让b默认是文件，而不是文件夹]--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../../index.html&quot;</span>&gt;</span>跳转到首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>ForwardC.java</code>：这是一个Java类，里面有一个转发器，跳转到C网页（<code>c.html</code>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo06_ForwardC</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这里是转发器ForwardC&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            WEB目录下的首页 index.html --&gt;&gt; 转发器ForwardC --&gt;&gt; WEB/a/b/c.html</span></span><br><span class="line"><span class="comment">	   */</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;/a/b/c.html&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200519154532869-1597652154015.png" alt="image-20200519154532869"></p>
<ul>
<li><p>如果不使用<code>&lt;base&gt;</code>，经过转发器转发后，<code>c.html</code>返回首页的链接就会以转发器所在的<code>ForwardC.java</code>类的绝对路径为标准进行相对查找，这样找到的路径是不对的。</p>
</li>
<li><p>所以我们必须设置一个具有参考意义的绝对路径，让每次执行跳转到首页的操作时参考该路径，就不会出现转发器转发后路径错误的现象。</p>
</li>
<li><p><code>&lt;Base&gt;</code>标签可以设置当前页面中所有相对路径的参考路径，该参考路径为绝对路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//ip:port/工程路径/[资源路径] </span></span><br><span class="line"><span class="comment">// 资源路径可以省略</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="2、Response"><a href="#2、Response" class="headerlink" title="2、Response"></a>2、Response</h2><h3 id="2-1-HttpServletResopnse"><a href="#2-1-HttpServletResopnse" class="headerlink" title="2.1 HttpServletResopnse"></a>2.1 HttpServletResopnse</h3><p>HttpServletResponse 和 HttpServletRequest 一样是由 Tomcat 负责创建其子类实例的，Tomcat 服务器每次监听到请求消息就会创建一个 Response 子类实例。</p>
<p>HttpServletRequest 实例封装了客户端的请求的信息，HttpServletResponse 实例则封装了服务器发送给客户端的响应信息。</p>
<p>我们可以把响应消息封装到 HttpServletResponse 的子类实例中，Tomcat 服务器会进一步把该实例对象解析并封装到 HTTP 的响应体中，传输给客户端。</p>
<h4 id="1、设置响应行"><a href="#1、设置响应行" class="headerlink" title="1、设置响应行"></a>1、设置响应行</h4><ul>
<li>  响应行格式：</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br></pre></td></tr></table></figure>

<p>在响应行中，协议名称、版本号以及协议状态都不用手动设置，唯一可以设置的只有状态码了。</p>
<ul>
<li>  设置响应状态码</li>
</ul>
<blockquote>
<p>  HttpServletResponse#setStatus 源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HttpServletResponse</span> <span class="keyword">extends</span> <span class="title class_">ServletResponse</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 设置响应行的状态码</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(<span class="type">int</span> sc)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2、设置响应头"><a href="#2、设置响应头" class="headerlink" title="2、设置响应头"></a>2、设置响应头</h4><p>响应头都是一些键值对</p>
<blockquote>
<p>  HttpServletResponse#setHeader/addHeader 源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HttpServletResponse</span> <span class="keyword">extends</span> <span class="title class_">ServletResponse</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 设置响应头信息</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeader</span><span class="params">(String name, String value)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 添加响应头</span></span><br><span class="line"><span class="comment">	*/</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addHeader</span><span class="params">(String name, String value)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3、设置响应体"><a href="#3、设置响应体" class="headerlink" title="3、设置响应体"></a>3、设置响应体</h4><p><strong>设置响应体：</strong></p>
<ol>
<li>先通过<code>resp</code>对象获取<code>输出流对象</code></li>
<li>调用<code>输出流对象</code>中的<code>write(String s)</code>方法可以将字符串<code>s</code>添加到<code>Response缓冲区</code>中，之后Tomcat会将<code>Response缓冲区</code>中的内容封装到响应消息的响应体中返回给客户端浏览器。</li>
</ol>
<ol>
<li><p>通过<code>resp</code>对象获取<em>输出流对象</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.获取输出流对象的方法：</span></span><br><span class="line">PrintWriter <span class="title function_">getWriter</span><span class="params">()</span>;	<span class="comment">// 获取字符输出流</span></span><br><span class="line">ServletOutputStream <span class="title function_">getOutputStream</span><span class="params">()</span>;	<span class="comment">// 获取字节输出流</span></span><br></pre></td></tr></table></figure></li>
<li><p>调用<em>输出流对象</em>中的<code>write()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.使用输出流，将数据输出到客户端浏览器</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="两个输出流的说明"><a href="#两个输出流的说明" class="headerlink" title="两个输出流的说明"></a>两个输出流的说明</h5><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">获取</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">字节流</td>
<td align="center"><code>getOutputStream()</code></td>
<td align="center">常用于下载（传递二进制数据）</td>
</tr>
<tr>
<td align="center">字符流</td>
<td align="center"><code>getWriter()</code></td>
<td align="center">常用于回传字符串</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p>Tip：两个流同时只能使用一个，否则访问服务器时会出现500以上的错误。</p>
</blockquote>
<h4 id="4、如何解决客户端输出到浏览器上的中文数据乱码问题？"><a href="#4、如何解决客户端输出到浏览器上的中文数据乱码问题？" class="headerlink" title="4、如何解决客户端输出到浏览器上的中文数据乱码问题？"></a>4、如何解决客户端输出到浏览器上的中文数据乱码问题？</h4><ol>
<li><strong>乱码产生的原因</strong></li>
</ol>
<blockquote>
<p>乱码问题产生的原因：编码&amp;解码使用的标准不一致。</p>
<ul>
<li>Response缓冲区的默认编码是<code>ISO-8859-1</code>。</li>
<li>如果服务器的响应消息中不告诉用户浏览器使用什么方式解码，那么用户浏览器就会使用默认的解码方式解码【默认解码方式与用户系统一致，比如安装的是中文系统的Windows，那么默认使用GBK编码】</li>
<li>那么拿着ISO-8859-1编码的数据，使用GBK解码，显然会出现乱码的现象。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取输出流对象</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 2.调用输出流对象中的write()方法，将字符串写到Response缓冲区中(并使用ISO编码编译)</span></span><br><span class="line">        writer.write(<span class="string">&quot;你好，世界&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.出现问题，输出到浏览器页面的中文内容无法被解析</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4.查看resp对象的编码类型 【ISO-8859-1】</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encoding</span> <span class="operator">=</span> resp.getCharacterEncoding();</span><br><span class="line">        System.out.println(encoding);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5.原因：浏览器默认使用的GBK编码，TomCat服务器通过resp对象传给浏览器的数据默认是ISO-8859-1编码，是浏览器无法解析的数据类型，所以会出现乱码。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><p><strong>解决方案</strong>（3个方法）：</p>
<ul>
<li><p>1)、在Response获取输出流对象之前，设置该流使用的编码方式与浏览器默认的解码方式一致</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1:</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo03response&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 0.设置TomCat的字符输出流的编码方式与系统相同（GBK）【耦合度高】</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;gbk&quot;</span>);</span><br><span class="line">        <span class="comment">// 1..获取字节/字符输出流对象【通过TomCat创建的resp对象来获取】</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 2.使用输出流，把数据输出到客户端浏览器</span></span><br><span class="line">        pw.write(<span class="string">&quot;&lt;h1&gt;hello 世界&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>2)、服务器在Response消息的响应头Headers中告诉客户端浏览器我使用的编码方式是什么，让浏览器选择对应的解码方式。[我们已知了计算机系统的默认编码方式为GBK，但是如果把这个程序放到默认以UTF-8编码的计算机上以方法1运行仍然会报错，所以我们需要把    设置输出流编码方式  &amp;  告诉浏览器输出流的编码方式  结合起来使用。]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo03response&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 0. 首先要设置服务器中字符输出流的编码格式</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">	   	<span class="comment">// 1.服务器告诉浏览器我使用哪种编码，让浏览器按照对应的码表解码	</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.获取字节/字符输出流【通过TomCat创建的resp对象来获取】</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 2.使用输出流，把数据输出到客户端浏览器</span></span><br><span class="line">        pw.write(<span class="string">&quot;&lt;h1&gt;hello 世界&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>3)、resoponse对象中的<code>setContentType()</code>方法不仅设置了服务器使用utf-8字符集，还设置了响应头中的<code>ContentType</code>的值为<code>&quot;text/html;utf-8&quot;</code>。简化了方法2的书写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo03response&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       </span><br><span class="line">	   	<span class="comment">// 1.同时设置服务器可客户端使用utf-8字符集	</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.获取字节/字符输出流【通过TomCat创建的resp对象来获取】</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 3.使用输出流，把数据输出到客户端浏览器</span></span><br><span class="line">        pw.write(<span class="string">&quot;&lt;h1&gt;hello 世界&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tip：此方法一定要在获取流对象之前调用才有效</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h3 id="2-2-重定向vs-转发"><a href="#2-2-重定向vs-转发" class="headerlink" title="2.2 重定向vs.转发"></a>2.2 重定向vs.转发</h3><blockquote>
<p>  <strong>重定向；redirect</strong></p>
</blockquote>
<h4 id="重定向理论基础"><a href="#重定向理论基础" class="headerlink" title="重定向理论基础"></a>重定向理论基础</h4><p><img src="/2020/08/19/Servlet/%E9%87%8D%E5%AE%9A%E5%90%91.png" alt="重定向"></p>
<p><strong>重定向是一种资源跳转的方式。</strong></p>
<p>它的一个使用场景是：用户希望访问某些资源，这些资源之前一直通过 A 接口获取。但是随着时间的推移和项目的迭代，A 接口慢慢被废弃了，被新的接口 B 所取代。此时，A 接口已经无法实现获取相应资源的服务了。但是，可能还存在一些老的请求一直在调用 A 接口，为了保证项目的兼容性，我们希望通过访问 A 接口的请求最终都被转发到 B 接口中。这就用到了<code>重定向（Redirect）</code>。</p>
<p>客户端先通过 URL 访问到了 A 接口，A 告诉用户我满足不了你的需求，但是我知道 B 接口能满足你的需求，所以 A 在自己的 Response 中包含了 302 的响应状态码以及 B 接口的 URL。让客户端浏览器再次访问 B 接口。在这个过程中，客户端浏览器对 A 和 B 接口都发送了 request 请求，总共是 2 次请求。</p>
<p><strong>重定向的特点：</strong></p>
<ul>
<li>  重定向是两次请求。</li>
<li>  浏览器的地址栏会发生变化。</li>
<li>  重定向可以访问其他站点（服务器）的资源。</li>
<li>  不能共享Request域中的数据。</li>
<li>  不能访问 WEB-INF 目录下的资源</li>
</ul>
<h4 id="请求重定向的2种实现方式"><a href="#请求重定向的2种实现方式" class="headerlink" title="请求重定向的2种实现方式"></a>请求重定向的2种实现方式</h4><h5 id="Case1："><a href="#Case1：" class="headerlink" title="Case1："></a>Case1：</h5><p>方法1：<code>resp.setStatus(302)</code> + <code>resp.setHeader(&quot;location&quot;,&quot;/D4/demo02response&quot;)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo01response&quot;)</span>	<span class="comment">// 当前资源路径</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo01重定向到demo02&quot;</span>);		<span class="comment">// 本路径的资源</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	重定向</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// 1. 给客户端返回302状态码。</span></span><br><span class="line">        resp.setStatus(<span class="number">302</span>);</span><br><span class="line">        <span class="comment">// 2. 给客户端返回跳转的地址【键值对】保存在响应头中返回。</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;location&quot;</span>,<span class="string">&quot;/D4/demo02response&quot;</span>);	<span class="comment">// 第一个斜杠表示绝对地址（给浏览器解析）</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Case2：-1"><a href="#Case2：-1" class="headerlink" title="Case2："></a>Case2：</h5><ul>
<li>方法2(推荐使用)：<code> resp.sendRedirect(&quot;http://www.baidu.com&quot;)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo01response&quot;)</span>	<span class="comment">// 当前资源路径</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo01重定向到demo02&quot;</span>);		<span class="comment">// 本路径的资源	</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	重定向</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">		<span class="comment">// 1.动态的获取[绝对]工程路径</span></span><br><span class="line">     <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> req.getContextPath(	);</span><br><span class="line">        <span class="comment">// 2.调用重定向方法（该方法实现了返回302状态码 &amp; 返回跳转的地址）</span></span><br><span class="line">     <span class="comment">// resp.sendRedirect(contextPath+&quot;/demo02response&quot;);</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;http://www.baidu.com&quot;</span>);     <span class="comment">// 重定向可以访问其它服务器上的资源</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h4 id="转发（forward）"><a href="#转发（forward）" class="headerlink" title="转发（forward）"></a>转发（forward）</h4><ol>
<li>转发时地址栏路径不变</li>
<li>转发只能访问当前服务器下的资源</li>
<li>转发是一次请求，可以共享数据。</li>
</ol>
<h3 id="2-3-访问缓存（304）"><a href="#2-3-访问缓存（304）" class="headerlink" title="2.3 访问缓存（304）"></a>2.3 访问缓存（304）</h3><p>用户浏览器会把用户机暂时访问过的部分资源缓存到客户机中，未清空缓存的情况下，用户再次访问该资源时，客户端会自动检测到这些缓存的存在，就会给用户浏览器返回 304 响应状态码，让用户使用缓存的资源。从而节省了传输时间，减轻了服务器的压力。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="post-title-link" itemprop="url">Hexo+Gitee/GitHub搭建个人博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-18 11:05:31" itemprop="dateCreated datePublished" datetime="2020-08-18T11:05:31+08:00">2020-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-30 22:36:36" itemprop="dateModified" datetime="2022-05-30T22:36:36+08:00">2022-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%B6%E5%AE%83/" itemprop="url" rel="index"><span itemprop="name">其它</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="一、安装Git"><a href="#一、安装Git" class="headerlink" title="一、安装Git"></a>一、安装Git</h2><ul>
<li>全局安装Git。</li>
<li><a target="_blank" rel="noopener" href="https://npm.taobao.org/mirrors/git-for-windows">Git淘宝镜像下载地址</a> </li>
</ul>
<hr>
<h2 id="二、安装-node-js"><a href="#二、安装-node-js" class="headerlink" title="二、安装 node.js"></a>二、安装 node.js</h2><ol>
<li><p>全局安装Node.js；</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://npm.taobao.org/mirrors/node">Node.js 镜像地址</a></li>
</ul>
</li>
<li><p>安装完成后在控制台输出<code>node-v</code>查看版本信息；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v			# node -version</span><br></pre></td></tr></table></figure></li>
<li><p>Node中包含了NPM，在控制台输入<code>npm -v</code>查看版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure></li>
<li><p>npm默认的仓库地址是在国外网站，网速较慢。在这里推荐安装一款切换镜像的工具：<code>nrm</code>。首先安装<code>nrm</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install nrm -g		# g：global，表示全局安装</span><br></pre></td></tr></table></figure></li>
<li><p>安装完成后使用<code>nrm ls</code>查看npm的仓库列表，带*的就是当前选中的镜像仓库。使用<code>nrm use taobao</code>来指定要使用的镜像源。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nrm ls				# ls：list，展示nrm的仓库列表</span><br><span class="line">nrm use taobao	 	# 切换到taobao镜像源</span><br><span class="line">nrm test npm		# 可以使用该命令来测试网络速度</span><br></pre></td></tr></table></figure></li>
<li><p>当然也可以使用<code>cnpm</code>命令来使用cnpm命令，但是这种方法有时候会出现bug，不推荐使用！！！</p>
</li>
</ol>
<hr>
<h2 id="三、安装hexo"><a href="#三、安装hexo" class="headerlink" title="三、安装hexo"></a>三、安装hexo</h2><ol start="2">
<li><p>全局安装Hexo框架</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li>
<li><p>查看Hexo版本，验证是否安装成功。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure></li>
<li><p>在你的电脑中任意目录下创建一个任意名字的文件夹（比如：<code>E:/blog</code>）</p>
</li>
<li><p>在blog文件夹进入命令行窗口，执行Hexo的初始化命令。初始化完成后，该文件夹中会出现许多文件/文件夹。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></li>
<li><p>启动Hexo服务，即可在本地服务器上访问Hexo。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s		# s：server，启动Hexo服务</span><br></pre></td></tr></table></figure>

<p>启动完成后，会在命令窗口中给出一个本地网址：localhost：4000，进入该网址即可访问博客了。</p>
</li>
</ol>
<hr>
<h2 id="四、将博客部署到GitHub上"><a href="#四、将博客部署到GitHub上" class="headerlink" title="四、将博客部署到GitHub上"></a>四、将博客部署到GitHub上</h2><ol>
<li><p>进入GitHub官网，注册/使用账户，记住自己的用户名称，之后会用到。</p>
<ol>
<li>在GitHub中新建一个仓库，注意仓库名称一定要是<code>&#123;用户名称&#125;.github.io</code>，仓库名也就是你之后的博客网站地址。</li>
</ol>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20200818100633901.png" alt="image-20200818100633901"></p>
</li>
<li><p>在命令行窗口安装一个将Hexo部署到远端的工具。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save	# 局部安装</span><br></pre></td></tr></table></figure></li>
<li><p>在<code>E:/bolg</code>目录下找到<code>blog_config.yml</code>配置文件，修改/添加以下参数后，保存并退出。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span>	</span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>		<span class="comment"># 远端仓库的类型</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/LvNengDong/LvNengDong.github.io</span>		<span class="comment"># 远端仓库的地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span>	<span class="comment"># 分支名称</span></span><br></pre></td></tr></table></figure></li>
<li><p>将Hexo博客部署到远端仓库。第一次部署过程中要输入GitHub的账号和密码，正确输入即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d 			# d：deploy，部署到远端仓库</span><br></pre></td></tr></table></figure></li>
<li><p>上传成功后会在GitHub仓库中多出来一些文件，这些文件正是你本地博客中的内容。</p>
</li>
<li><p>这时候使用<code>&#123;用户名称&#125;.github.io</code>即可访问到你的博客了。</p>
</li>
<li><p>由于网速原因，可能会出现一切配置无误时，访问博客仍然会出现404错误，这个时间从几秒到几个小时不等。</p>
</li>
</ol>
<hr>
<h2 id="五、将博客部署到gitee上"><a href="#五、将博客部署到gitee上" class="headerlink" title="五、将博客部署到gitee上"></a>五、将博客部署到gitee上</h2><p>Gitee是一个静态网页托管服务器，托管后就可在任意网络设备上访问你的博客了。</p>
<ol>
<li><p>进入Gitee官网，注册账号。</p>
</li>
<li><p>在个人主页中找到新建仓库，建立一个新的仓库。</p>
</li>
<li><p>在命令行窗口安装一个将Hexo部署到远端的工具。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li>
<li><p>修改<code>blog_config.yml</code>配置文件中的部分参数。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">	<span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">	<span class="attr">repo:</span> <span class="string">https://gitee.com/lv_neng_dong/study.git</span>  	</span><br><span class="line">	<span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">1. 上传文件到gitee仓库。</span><br><span class="line"></span><br><span class="line">   ```shell</span><br><span class="line">   git config --global user.email &quot;注册时的邮箱&quot;</span><br><span class="line">   git config --global user.name &quot;注册时的用户名&quot;</span><br><span class="line">   hexo d 				# 部署到远端仓库</span><br></pre></td></tr></table></figure>

<ol>
<li><p>上传之后在Gitee仓库会看到多出来一些文件。在Gitee仓库中找到右上方的“服务”，打开”Gitee Pages”服务，点击左下方的“更新。之后会在中间部分刷新出一个网址，点击即可访问你的博客</p>
</li>
<li><p>（每次更新博客后都需要重新“更新”！！！）</p>
</li>
</ol>
<hr>
<h2 id="六、常见的问题"><a href="#六、常见的问题" class="headerlink" title="六、常见的问题"></a>六、常见的问题</h2><h3 id="1-使用Gitee部署博客时出现的问题"><a href="#1-使用Gitee部署博客时出现的问题" class="headerlink" title="1    使用Gitee部署博客时出现的问题"></a>1    使用Gitee部署博客时出现的问题</h3><ol>
<li><p>将本地博客部署到Gitee远端时，无法加载主题？</p>
<ul>
<li>修改hexo的站点配置文件<code>_config.yml</code></li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;	</span></span><br><span class="line"><span class="comment">## [如果您的站点放在子目录中，则将url设置为&#x27;http://yoursite.com/child&#x27;，并将root设置为&#x27;/child/&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改前：</span></span><br><span class="line"><span class="comment"># url: https://yoursite.com</span></span><br><span class="line"><span class="comment"># root: /					# 改为  /你的仓库名/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后：</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://yoursite.com</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/study/</span></span><br></pre></td></tr></table></figure></li>
<li><p>只能显示安装当天的博客，第二天更新的博客无法显示。</p>
<ul>
<li>修改hexo的站点配置文件<code>_config.yml</code></li>
</ul>
</li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改前：</span></span><br><span class="line"><span class="comment"># url: https://yoursite.com		# 修改url为你的Gitee地址。</span></span><br><span class="line"><span class="comment"># root: /study/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后：</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://lv_neng_dong.gitee.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/study/</span></span><br></pre></td></tr></table></figure>



<h3 id="2-Hexo博客无法展示图片问题"><a href="#2-Hexo博客无法展示图片问题" class="headerlink" title="2    Hexo博客无法展示图片问题"></a>2    Hexo博客无法展示图片问题</h3><ol>
<li><p>找到Hexo的站点配置文件：<code>E:/blog/_config.yml</code>，修改参数为：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span>		<span class="comment"># 开启 `推送资源所在文件夹`</span></span><br></pre></td></tr></table></figure></li>
<li><p>完成此设置后，使用<code>Hexo new &quot;文件名&quot;</code>新建博客时，会产生一个和文件同名的文件夹，用来存放静态资源文件。</p>
</li>
<li><p>在Hexo的根路径下下载一个插件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure></li>
<li><p>当博客中需要插入图片时，将需要添加的图片放入同名的文件夹中，通过相对路径索引到该图片。</p>
</li>
<li><p>我这里使用的是<code>Typora编辑器</code>，所以直接将图片资源的保存位置设置为了<code>./$&#123;filename&#125;</code>当前目录的同名文件夹下，方便统一管理。</p>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20200818131015829.png" alt="image-20200818131015829"></p>
</li>
</ol>
<hr>
<h2 id="七、用hexo写博客"><a href="#七、用hexo写博客" class="headerlink" title="七、用hexo写博客"></a>七、用hexo写博客</h2><ol>
<li><p>在<code>E:/blog</code>目录下使用命令行窗口创建一篇新的博客。创建的文件未markdown格式，保存在当前文件的<code>./source/_posts</code>目录下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n &quot;My First Blog&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>找到新建的博客，用任一Markdown编辑软件编辑博客内容。</p>
</li>
<li><p>编辑完成后保，在<code>E:/blog</code>的命令行窗口中执行以下命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean 				# 清除记录</span><br><span class="line">hexo g					# g：generate，生成静态网页</span><br><span class="line">hexo s					# 启动hexo[部署到远端时这一步可以省略]</span><br><span class="line">hexo d					# 将本地博客中的内容部署到远端仓库</span><br></pre></td></tr></table></figure>

<p>然后就可以在浏览器中去访问你的博客内容了。</p>
</li>
</ol>
<hr>
<h2 id="八、Hexo常用命令"><a href="#八、Hexo常用命令" class="headerlink" title="八、Hexo常用命令"></a>八、Hexo常用命令</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo new <span class="string">&quot;My New Post&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo server</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo generate</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo deploy</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<hr>
<h2 id="九、Hexo回滚"><a href="#九、Hexo回滚" class="headerlink" title="九、Hexo回滚"></a>九、Hexo回滚</h2><p>我们将代码提交到GitHub上时，经常会出现提交错误。</p>
<p>如果错误的原因是因为本地提交的版本与GitHub上提交成功的版本不一致造成的，可以选择回滚本地版本到与GitHub提交的版本一致来解决。</p>
<ol>
<li><p>进入如下图所示的目录，HEAD文件就是我们提交的日志文件。选择与GitHub提交的版本一致的版本进行回滚</p>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20201228205609039.png" alt="image-20201228205609039"></p>
</li>
<li><p>在<code>./deploy_git</code>目录下进入cmd命令窗口，执行Git命令。</p>
</li>
</ol>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20201228205403601.png" alt="image-20201228205403601"></p>
<h3 id="常见的Git命令"><a href="#常见的Git命令" class="headerlink" title="常见的Git命令"></a>常见的Git命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 git reset HEAD^　　#回退所有内容到上一个版本　　　　　</span><br><span class="line">2 git reset HEAD^　　a.py　#回退a.py这个文件的版本到上一个版本　　　　　</span><br><span class="line">3 git reset –soft　　HEAD~3　#向前回退到第3个版本　　　　　　</span><br><span class="line">4 git reset –hard　　origin/master　#将本地的状态回退到和远程的一样</span><br><span class="line">5 git reset 057d　　#回退到某个版本[版本号只取前4位]　　　　　　</span><br><span class="line">6 git revert HEAD　#回退到上一次提交的状态，按照某一次的commit完全反向的进行一次commit</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/22/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><span class="page-number current">23</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/24/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
