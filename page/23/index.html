<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/23/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/23/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/23/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">231</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">64</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/25/MyBatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/25/MyBatis/" class="post-title-link" itemprop="url">MyBatis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-25 10:02:12" itemprop="dateCreated datePublished" datetime="2020-08-25T10:02:12+08:00">2020-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-06-26 11:14:23" itemprop="dateModified" datetime="2022-06-26T11:14:23+08:00">2022-06-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MyBatis/" itemprop="url" rel="index"><span itemprop="name">MyBatis</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis官方操作文档</a></p>
</blockquote>
<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>MyBatis是一款优秀的持久层框架，用于操作数据库的框架。</p>
<p>MyBatis的底层实现是JDBC代码，再往底层就是JDBC的实现类在起作用。</p>
<h2 id="MyBatis如何操作MySql"><a href="#MyBatis如何操作MySql" class="headerlink" title="MyBatis如何操作MySql"></a>MyBatis如何操作MySql</h2><p><img src="/2020/08/25/MyBatis/MyBatis%E5%A6%82%E4%BD%95%E6%93%8D%E4%BD%9CMySql.png"></p>
<h2 id="MyBatis-vs-JDBC"><a href="#MyBatis-vs-JDBC" class="headerlink" title="MyBatis  vs.  JDBC"></a>MyBatis  vs.  JDBC</h2><ol>
<li><p>数据库连接对象Connection创建、释放频繁，造成系统资源浪费从而影响系统性能，如果使用数据库连接池可解决此问题。</p>
<blockquote>
<p>解决：在<code>SqlMapConfig.xml</code>配置文件中配置数据库连接池，使用连接池管理数据库连接。</p>
</blockquote>
</li>
<li><p>SQL语句写在代码中造成代码不容易维护，实际应用中SQL变化的可能较大，SQL变动需要改变Java代码。</p>
<blockquote>
<p>解决：将SQL语句配置在<code>XxxMapper.xml</code>文件中，与Java代码分离。</p>
</blockquote>
</li>
<li><p>向SQL语句传参麻烦，因为SQL语句中的where条件个数不确定，可能多也可能少，占位符需要和参数对应。</p>
<blockquote>
<p>解决：MyBatis自动将Java对象映射至SQL语句，通过Statement中的parameterType定义输入参数的类型。</p>
</blockquote>
</li>
<li><p>对结果集解析麻烦，SQL变化导致解析代码变化，且解析前需要遍历，如果能将数据库记录封装成POJO对象解析比较方便。</p>
<blockquote>
<p>解决：MyBatis自动将SQL执行结果映射至Java对象，通过Statement中的resultType定义输出结果的类型。</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="1-MyBatis快速入门"><a href="#1-MyBatis快速入门" class="headerlink" title="1    MyBatis快速入门"></a>1    MyBatis快速入门</h1><ul>
<li>案例：查询所有用户信息</li>
</ul>
<h2 id="1-0-创建数据库环境"><a href="#1-0-创建数据库环境" class="headerlink" title="1.0    创建数据库环境"></a>1.0    创建数据库环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `db4`;	-- 创建数据库</span><br><span class="line">USE db4;	-- 使用数据库</span><br><span class="line">CREATE TABLE IF NOT EXISTS USER(	-- 创建user表</span><br><span class="line">	id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">	NAME VARCHAR(20) NOT NULL,</span><br><span class="line">	gender VARCHAR(10) NOT NULL,</span><br><span class="line">	age INT(5),</span><br><span class="line">	address VARCHAR(32),</span><br><span class="line">	qq VARCHAR(32),</span><br><span class="line">	email VARCHAR(50),</span><br><span class="line">	username VARCHAR(20),</span><br><span class="line">	PASSWORD VARCHAR(32)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM USER;	-- 查询user表中的所有信息</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS USER;  -- 删除user表</span><br><span class="line"></span><br><span class="line">-- 插入数据</span><br><span class="line">INSERT INTO USER (id, NAME, gender, age, address, qq, email, username, PASSWORD) </span><br><span class="line">VALUES</span><br><span class="line">-- (2, &quot;李四&quot;, &quot;男&quot;, 24, &quot;湖南&quot;, &quot;9878521&quot;, &quot;9878521@qq.com&quot;,&quot;lsi&quot;, &quot;654321&quot;)</span><br><span class="line">(1, &quot;张三&quot;, &quot;男&quot;, 23, &quot;湖北&quot;, &quot;9875412&quot;, &quot;9875412@qq.com&quot;,&quot;zhangsan&quot;, &quot;123456&quot;)</span><br></pre></td></tr></table></figure>





<h2 id="1-1-搭建MyBatis开发环境"><a href="#1-1-搭建MyBatis开发环境" class="headerlink" title="1.1    搭建MyBatis开发环境"></a>1.1    搭建MyBatis开发环境</h2><h3 id="1-1-1-步骤："><a href="#1-1-1-步骤：" class="headerlink" title="1.1.1    步骤："></a>1.1.1    步骤：</h3><ol>
<li><p>创建Maven工程并导入坐标。</p>
</li>
<li><p>创建实体类和Dao接口。</p>
</li>
<li><p>创建MyBatis的主配置文件。<code>src/main/resource/sqlMapConfig.xml</code></p>
<ul>
<li><code>SqlMapConfig.xml</code></li>
</ul>
</li>
<li><p>创建映射配置文件。<code>cn/xsyu/dao/UserDao.xml</code></p>
<ul>
<li><code>UserDao.xml</code></li>
</ul>
<hr>
</li>
<li><p>主配置文件<code>SqlMapConfig.xml</code>的约束</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span>  </span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>映射配置文件<code>UserMapper.xml</code>的约束</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span>  </span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>  </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="1-创建maven工程并导入坐标"><a href="#1-创建maven工程并导入坐标" class="headerlink" title="1.    创建maven工程并导入坐标"></a>1.    创建maven工程并导入坐标</h4><ul>
<li><strong><code>pom.xml</code></strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-创建实体类"><a href="#2-创建实体类" class="headerlink" title="2.    创建实体类"></a>2.    创建实体类</h4><ul>
<li><p><strong><code>src/main/java/cn/xsyu/domain/User.java</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">	<span class="comment">// 此处属性名与数据库中的列名相同</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String qq;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    </span><br><span class="line">    get/set方法;</span><br><span class="line">    toString方法;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3、创建Dao接口"><a href="#3、创建Dao接口" class="headerlink" title="3、创建Dao接口"></a>3、创建Dao接口</h4><ul>
<li><p><strong><code>src/main/java/cn/xsyu/dao/UserDao.interface</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询数据库中的所有用户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="4-创建映射配置文件"><a href="#4-创建映射配置文件" class="headerlink" title="4.    创建映射配置文件"></a>4.    创建映射配置文件</h4><ul>
<li><p><strong><code>src/main/resource/cn/xsyu/dao/UserDao.xml</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置查询所有--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-创建MyBatis的主配置文件"><a href="#5-创建MyBatis的主配置文件" class="headerlink" title="5.    创建MyBatis的主配置文件"></a>5.    创建MyBatis的主配置文件</h4><ul>
<li><p><strong><code>src/main/resource/SqlMapConfig.xml</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--MyBatis的主配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql01&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置mysql环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql01&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置事务的类型--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置数据源（连接池）--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--配置数据库的4个基本信息--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db4&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置映射配置文件的位置，映射配置文件是每个Dao接口对应的具体操作SQL语句--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper resource=&quot;cn.xsyu.dao.UserDao.xml&quot;&gt;&lt;/mapper&gt;--&gt;</span><span class="comment">&lt;!--错误写法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/xsyu/dao/UserDao.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span><span class="comment">&lt;!--注意此处不能以点隔开--&gt;</span>	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-1-2-环境搭建的注意事项"><a href="#1-1-2-环境搭建的注意事项" class="headerlink" title="1.1.2    环境搭建的注意事项"></a>1.1.2    环境搭建的注意事项</h3><ol>
<li><p>MyBatis中，<code>resource</code>目录下的<code>映射配置文件</code>必须和<code>src</code>目录下<code>dao接口</code>的包结构相同。</p>
</li>
<li><p>映射配置文件中的<code>&lt;mapper&gt;标签的namespace属性</code>的取值必须是<code>dao接口的全限定类名</code>。【目的是为了将映射文件和dao接口关联起来】</p>
</li>
<li><p>映射配置文件中<code>&lt;mapper&gt;</code>标签中的<code>CRUD标签</code>中的<code>id</code>属性的取值必须是dao接口中的方法名。</p>
<p><code>mapper.xml</code>中的<code>&lt;mapper&gt;</code>标签中的<code>CRUD标签</code>的内容就是真实的SQL语句，只不过这些SQL语句在编译期不生效，在运行期会通过<code>代理模式</code>动态的增强绑定的方法。</p>
</li>
</ol>
<ul>
<li>当我们遵从了以上3点之后，我们在开发中就无须再写dao的实现类。</li>
</ul>
<h3 id="1-1-3-MyBatis入门案例"><a href="#1-1-3-MyBatis入门案例" class="headerlink" title="1.1.3    MyBatis入门案例"></a>1.1.3    MyBatis入门案例</h3><ol>
<li>读取主配置文件<code>SqlMapConfig.xml</code></li>
<li>创建<code>SqlSessionFactory</code>工厂 [使用<code>构建者模式</code>]<ul>
<li><code>sqlSessionFactory</code>是一个接口，无构造方法不能直接初始化，而<code>SqlSessionFactoryBuilder</code>是一个普通类可以直接初始化，并且该对象可以创建<code>sqlSessionFactory</code>的实现类对象。</li>
</ul>
</li>
<li>创建<code>SqlSession</code>对象[<code>工厂模式</code>]</li>
<li>创建<code>Dao</code>接口的代理对象。[<code>代理模式</code>]</li>
<li>使用代理对象执行<code>Dao</code>接口中的方法</li>
<li>释放资源</li>
</ol>
<ul>
<li><p>注意事项：</p>
<ol>
<li>不要忘记在映射配置文件<code>UserDao.xml</code>中告知MyBatis查询结果要封装到哪个实体类中。</li>
<li>配置方式：指定实体类的全限定类名。</li>
</ol>
<hr>
</li>
<li><p><strong><code>test/java/cn/xsyu/test/MyBatisTest.java</code></strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MyBatis入门案例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.读取主配置文件SqlMapConfig.xml</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.创建SqlSessionFactory工厂</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(inputStream);</span><br><span class="line">        <span class="comment">// 3.使用工厂生产SqlSession对象</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="comment">// 4.使用SqlSession创建Dao接口的代理对象</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line">        <span class="comment">// 5.使用代理对象执行方法</span></span><br><span class="line">        List&lt;User&gt; users = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 6.释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>代码分析：</p>
<ol>
<li><p><code>Resources</code>类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyBatis官方提供的一个封装好的类</span></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"></span><br><span class="line">------------------------------------源码------------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A class to simplify access to resources through the classloader.</span></span><br><span class="line"><span class="comment"> * 功能：简化`通过类加载器（ClassLoader）访问资源`代码。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 底层实现仍然是类加载器那一套，但是被MyBatis封装成了一个简单的类，也就是Resources类。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Resources</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-------------------------------------静态方法------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * getResourceAsStream(&quot;SqlMapConfig.xml&quot;)</span></span><br><span class="line"><span class="comment"> * 功能：读取当前项目下的配置文件并转换为字节输入流。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p><code>SqlSessionFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyBatis官方提供的一个封装好的类</span></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line">------------------------------------源码------------------------------------------------------</span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates an &#123;<span class="doctag">@link</span> SqlSession&#125; out of a connection or a DataSource</span></span><br><span class="line"><span class="comment"> * 功能：创建一个Connection连接对象或DataSource连接池。[使用接口中的openSession方法]</span></span><br><span class="line"><span class="comment"> * 		</span></span><br><span class="line"><span class="comment"> * 分析：创建DataSource的最终目的也是创建Connection，</span></span><br><span class="line"><span class="comment"> * 		无论是创建Connection还是DataSource，都需要数据库的连接信息。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SqlSessionFactory</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line">-------------------------------------方法------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * factory.openSession()</span></span><br><span class="line"><span class="comment"> * 创建一个Connection连接对象或DataSource连接池。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h4 id="附1：Mybatis基于注解的入门案例"><a href="#附1：Mybatis基于注解的入门案例" class="headerlink" title="附1：Mybatis基于注解的入门案例"></a>附1：Mybatis基于注解的入门案例</h4><ul>
<li><p>把<code>UserDao.xml</code>删除。</p>
</li>
<li><p>在<code>UserDao接口</code>的<strong>方法上</strong>使用<code>@Select注解</code>，并指定SQL语句。</p>
</li>
<li><p>同时还需要修改主配置文件<code>SqlMapConfig.xml</code>中的<code>mapper标签</code>的<code>class属性</code>为<code>dao接口的全限定类名</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="附2：入门案例中的设计模式分析"><a href="#附2：入门案例中的设计模式分析" class="headerlink" title="附2：入门案例中的设计模式分析"></a>附2：入门案例中的设计模式分析</h4><h5 id="1-读取配置文件"><a href="#1-读取配置文件" class="headerlink" title="1.读取配置文件"></a>1.读取配置文件</h5><blockquote>
<ul>
<li>不常用方法：<ol>
<li>使用绝对路径：耦合度高，实际开发中使用少</li>
<li>使用相对路径：耦合度高，实际开发中使用少</li>
</ol>
</li>
<li>常用方法：<ol>
<li>使用类加载器，读取指定位置的资源，返回输入流。在MyBatis中默认<strong>读取类路径下的配置文件</strong>。</li>
<li>使用ServletContext对象的<code>getRealPath()</code></li>
</ol>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.读取主配置文件SqlMapConfig.xml</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br></pre></td></tr></table></figure>


<h5 id="2-构建者模式"><a href="#2-构建者模式" class="headerlink" title="2.构建者模式"></a>2.构建者模式</h5><blockquote>
<ul>
<li>创建MyBatis工厂时使用了<strong>构建者模式</strong>。</li>
<li>隐藏对象的创建细节，对使用者的要求降低</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.创建SqlSessionFactory工厂</span></span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(inputStream);</span><br></pre></td></tr></table></figure>





<h5 id="3-工厂模式"><a href="#3-工厂模式" class="headerlink" title="3.工厂模式"></a>3.工厂模式</h5><blockquote>
<ul>
<li>生产SqlSession使用了<strong>工厂模式</strong></li>
<li>降低了类之间的依赖关系。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.使用工厂生产SqlSession对象</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br></pre></td></tr></table></figure>



<h5 id="4-代理模式"><a href="#4-代理模式" class="headerlink" title="4.代理模式"></a>4.代理模式</h5><blockquote>
<ul>
<li>Dao接口中只定义了方法声明而无方法实现，</li>
<li>配置文件<code>mapper.xml</code>中配置了<code>通知</code>（即增强的内容，在这里是具体的SQL语句）。</li>
<li>代理对象中有具体的方法实现。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.使用SqlSession创建Dao接口的代理对象</span></span><br><span class="line"><span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>优点</strong>：</p>
<ul>
<li>不修改源码的基础上对已有方法增强。</li>
<li>将编译期的依赖转移到了运行时依赖。</li>
</ul>
</blockquote>
<hr>
<h1 id="2-自定义MyBatis框架"><a href="#2-自定义MyBatis框架" class="headerlink" title="2    自定义MyBatis框架"></a>2    自定义MyBatis框架</h1><h2 id="2-1-完成一次数据库调用的分析"><a href="#2-1-完成一次数据库调用的分析" class="headerlink" title="2.1    完成一次数据库调用的分析"></a>2.1    完成一次数据库调用的分析</h2><p><img src="/2020/08/25/MyBatis/%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E5%88%86%E6%9E%90.png"></p>
<h2 id="2-2-自定义MyBatis分析"><a href="#2-2-自定义MyBatis分析" class="headerlink" title="2.2    自定义MyBatis分析"></a>2.2    自定义MyBatis分析</h2><ul>
<li>MyBatis在使用代理Dao对象的方式实现CRUD时做什么事情呢？</li>
<li>只有两件事：<ol>
<li>创建代理对象</li>
<li>在代理对象中调用selectList()方法</li>
</ol>
</li>
</ul>
<p><img src="/2020/08/25/MyBatis/%E8%87%AA%E5%AE%9A%E4%B9%89Mybatis%E5%88%86%E6%9E%90.png"></p>
<h3 id="2-3-1-自定义MyBatis涉及的类"><a href="#2-3-1-自定义MyBatis涉及的类" class="headerlink" title="2.3.1.自定义MyBatis涉及的类"></a>2.3.1.自定义MyBatis涉及的类</h3><ul>
<li><code>Class Resources</code></li>
<li><code>Class SqlSessionFactoryBuilder</code></li>
<li><code>Interface SqlSessionFactory</code></li>
<li><code>Interface SqlSession</code></li>
</ul>
<h2 id="2-9-自定义流程总结"><a href="#2-9-自定义流程总结" class="headerlink" title="2.9    自定义流程总结"></a>2.9    自定义流程总结</h2><p><img src="/2020/08/25/MyBatis/%E8%87%AA%E5%AE%9A%E4%B9%89MyBatis%E6%B5%81%E7%A8%8B%E5%9B%BE.png"></p>
<ul>
<li><p>总结：</p>
<ol>
<li><p>通过以上流程不难看出，无论是让MyBatis帮我们创建代理对象还是直接使用MyBatis提供的CRUD方法，其本质都是得到JDBC的Connection对象，执行对应的SQL语句，最终封装结果集。</p>
</li>
<li><p>只是注解和XML配置文件两种开发模式在传递SQL语句和返回值类型的方式上有所差异而已。</p>
<p><img src="/2020/08/25/MyBatis/MyBatis%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91&XML%E5%BC%80%E5%8F%91.png" alt="image-20200717213023271"></p>
</li>
</ol>
</li>
</ul>
<hr>
<h1 id="3-MyBatis的CRUD-基于代理Dao"><a href="#3-MyBatis的CRUD-基于代理Dao" class="headerlink" title="3    MyBatis的CRUD(基于代理Dao)"></a>3    MyBatis的CRUD(基于代理Dao)</h1><h2 id="3-0-准备工作"><a href="#3-0-准备工作" class="headerlink" title="3.0    准备工作"></a>3.0    准备工作</h2><h3 id="3-0-1-MyBatis环境搭建"><a href="#3-0-1-MyBatis环境搭建" class="headerlink" title="3.0.1    MyBatis环境搭建"></a>3.0.1    MyBatis环境搭建</h3><ol>
<li>创建Maven工程</li>
<li>导入坐标</li>
<li>编写实体类和持久层接口</li>
<li>编写<code>SqlMapConfig.xml</code></li>
<li>编写映射配置文件</li>
</ol>
<h3 id="3-0-2-使用要求"><a href="#3-0-2-使用要求" class="headerlink" title="3.0.2    使用要求"></a>3.0.2    使用要求</h3><ol>
<li>持久层接口和持久层接口的映射配置文件必须在相同的包下；</li>
<li>持久层接口的映射配置文件中<code>&lt;mapper&gt;</code>标签的<code>namespace</code>属性必须是持久层接口的全限定类名；</li>
<li>SQL语句的配置标签<code>&lt;select&gt;、&lt;insert&gt;、&lt;delete&gt;、&lt;update&gt;</code>的<code>id</code>属性必须和持久层接口中的方法名相同。</li>
</ol>
<h2 id="3-1-CRUD"><a href="#3-1-CRUD" class="headerlink" title="3.1    CRUD"></a>3.1    CRUD</h2><h4 id="1、根据ID查询"><a href="#1、根据ID查询" class="headerlink" title="1、根据ID查询"></a>1、根据ID查询</h4><h4 id="2、保存操作"><a href="#2、保存操作" class="headerlink" title="2、保存操作"></a>2、保存操作</h4><h4 id="3、用户更新"><a href="#3、用户更新" class="headerlink" title="3、用户更新"></a>3、用户更新</h4><h4 id="4、用户删除"><a href="#4、用户删除" class="headerlink" title="4、用户删除"></a>4、用户删除</h4><h4 id="5、-用户模糊查询"><a href="#5、-用户模糊查询" class="headerlink" title="5、 用户模糊查询"></a>5、 用户模糊查询</h4><h4 id="6、查询使用聚合函数"><a href="#6、查询使用聚合函数" class="headerlink" title="6、查询使用聚合函数"></a>6、查询使用聚合函数</h4><h2 id="3-2-总结"><a href="#3-2-总结" class="headerlink" title="3.2    总结"></a>3.2    总结</h2><h3 id="3-2-1-持久层的映射配置文件中的属性细节"><a href="#3-2-1-持久层的映射配置文件中的属性细节" class="headerlink" title="3.2.1    持久层的映射配置文件中的属性细节"></a>3.2.1    持久层的映射配置文件中的属性细节</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--根据id查询数据库中的数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">    select * from USER where id=#&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">&lt;!--保存数据到数据库中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;saveUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user(username, gender, hobby) values (#&#123;username&#125;, #&#123;gender&#125;,#&#123;hobby&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p><strong><code>#&#123;&#125; </code></strong> </p>
<ul>
<li>在MyBatis的配置文件中，使用<code>#&#123;&#125;</code>表示SQL语句中的占位符</li>
</ul>
<p><strong><code>ognl表达式</code></strong></p>
<ul>
<li><p>它是Apache提供的一种表达式语言，全称是：<code>Object Graphic Navigation Language</code>，对象导航语言。</p>
</li>
<li><p>它是按照一定的语法格式来获取数据的，语法格式就是使用<code>#&#123;对象.属性&#125;</code>的方式。</p>
</li>
<li><p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#&#123;user.username&#125;</span><br><span class="line">	* 它会先去找user对象，然后在user对象中找到`username`属性，并调用`getUsername()`方法把值取出来。</span><br><span class="line">	* 但是由于我们在 `parameterType` 属性中指定了实体类的名称，所以可以省略user，而直接写`username`。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><code>&lt;selectKey&gt;</code></strong></p>
<blockquote>
<p>需求：</p>
<ul>
<li><p>向数据库中新增用户后，同时还要返回当前新增用户的id值；</p>
<p>由于id值在数据库中设置为自动增长的，所以我们要<strong>在数据库添加了新用户之后获取自增长的<code>auto_increment</code>的值</strong>并返回。</p>
</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--保存数据到数据库中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;saveUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--查询并返回新增用户的id值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyColumn</span>=<span class="string">&quot;id&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select last_insert_id();</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    insert into user(username, gender, hobby)</span><br><span class="line">    values (#&#123;username&#125;, #&#123;gender&#125;,#&#123;hobby&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>keyColumn</code>：数据库中自增长列的名称；</li>
<li><code>keyProperty</code>：JavaBean对象中对应的名称。</li>
</ul>
</li>
<li><p><strong><code>$&#123;value&#125;</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!--配置模糊查询的方式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span>&gt;</span></span><br><span class="line">        select * from user where username like &#x27;%$&#123;value&#125;%&#x27;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	* 我们在上面使用的`#&#123;&#125;`占位符，改成了&#x27;$&#123;value&#125;&#x27;。</span></span><br><span class="line"><span class="comment">	* 注意：如果使用这种模糊查询的写法，那么&#x27;$&#123;value&#125;&#x27;的写法就是固定的，不能改其它名字。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong><code>#&#123;&#125;</code>和<code>$&#123;&#125;</code>的区别</strong></p>
<table>
<thead>
<tr>
<th align="center">#{}</th>
<th align="center">${}</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>#&#123;&#125;</code>表示一个占位符号，通过<code>#&#123;&#125;</code>可以实现PreparedStatement向占位符中设置值，并自动进行Java类型和JDBC类型转换；</td>
<td align="center"><code>$&#123;&#125;</code>表示拼接SQL字符串，通过<code>$&#123;&#125;</code>可以将parameterType传入的内容拼接在SQL中且不进行JDBC类型转换</td>
</tr>
<tr>
<td align="center"><code>#&#123;&#125;</code>可以有效防止SQL注入</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>#&#123;&#125;</code>可以接收简单类型值或POJO属性值，如果parameterType传输单个简单类型值，<code>#&#123;&#125;</code>括号中可以是<code>value</code>或者其它名称。</td>
<td align="center"><code>$&#123;&#125;</code>可以接收简单类型的值或POJO属性值。如果parameterType传输单个简单类型值，<code>$&#123;&#125;</code>括号中只能是<code>value</code>。</td>
</tr>
</tbody></table>
</li>
</ol>
<hr>
<h1 id="4-MyBatis中的参数深入"><a href="#4-MyBatis中的参数深入" class="headerlink" title="4    MyBatis中的参数深入"></a>4    MyBatis中的参数深入</h1><h2 id="4-1-parameterType"><a href="#4-1-parameterType" class="headerlink" title="4.1     parameterType"></a>4.1     parameterType</h2><blockquote>
<ul>
<li><p><code>parameterType</code>是<code>mapper.xml</code>文件中<code>&lt;mapper&gt;</code>标签的子标签<code>&lt;insert&gt;&lt;delete&gt;&lt;update&gt;&lt;select&gt;</code>的一个属性；</p>
</li>
<li><p>对于需要手动传入参数的SQL语句，可以使用<code>parameterType</code>属性指定待传入参数的数据类型。</p>
</li>
<li><p>该属性的类型可以是基本类型、String类型、还可以是实体类类型（POJO类）、基本类型的包装类型。</p>
</li>
<li><p>除了基本数据类型（包括包装类）和String类型，其它类型必须写全限定类名。基本数据类型和String可以直接写类名，也可以使用全限定类名，如：<code>java.lang.String</code>。</p>
<p><em>原因是：MyBatis在加载时就已经把常用的数据类型注册了别名，从而我们在使用时可以不写包名，而我们的实体类并没有注册别名，所以必须写全限定类名。</em></p>
</li>
</ul>
</blockquote>
<hr>
<h2 id="4-2-resultType"><a href="#4-2-resultType" class="headerlink" title="4.2    resultType"></a>4.2    resultType</h2><blockquote>
<ul>
<li><code>resultType</code>是<code>mapper.xml</code>文件中<code>&lt;mapper&gt;</code>标签的子标签<code>&lt;insert&gt;&lt;delete&gt;&lt;update&gt;&lt;select&gt;</code>的一个属性；</li>
<li>用于将从数据库中查询到的结果集封装为<code>JavaBean</code>对象，它支持基本类型和实体类型。</li>
<li>同<code>parameterType</code>一样，如果类注册过别名，可以直接使用别名，没有注册过的必须使用全限定类名。</li>
<li><strong>如果使用<code>resultType</code>属性封装数据库的查询结果，要求实体类中的属性名称必须和数据库中表的列名一致，否则无法完成封装。</strong></li>
</ul>
</blockquote>
<hr>
<h2 id="4-3-resultMap"><a href="#4-3-resultMap" class="headerlink" title="4.3    resultMap"></a>4.3    resultMap</h2><blockquote>
<ul>
<li><code>resultMap</code>是<code>mapper.xml</code>文件中<code>&lt;mapper&gt;</code>标签的子标签<code>&lt;insert&gt;&lt;delete&gt;&lt;update&gt;&lt;select&gt;</code>的一个属性；</li>
<li><strong><code>&lt;resultMap&gt;</code>标签也是用于将数据库的查询结果封装为<code>JavaBean</code>对象，与<code>&lt;resultType&gt;</code>不同的是，它会新建立一个数据库列名和Java实体类属性名的映射关系，所以该标签不强制要求实例类属性与数据库表的列名一一映射。</strong></li>
<li><em>在一个<code>&lt;mapper&gt;</code>标签的<code>&lt;select&gt;</code>子标签中，<code>resultMap</code>和<code>resultType</code>属性选择使用一个即可。但是在使用<code>&lt;resultMap&gt;</code>时必须事先在配置文件中建立好数据库列和实体类属性的映射关系。</em></li>
<li><strong>同时<code>&lt;resultMap&gt;</code>可以实现将查询结果映射为复杂类型的<code>POJO</code>，比如在查询结果映射对象中包含<code>POJO</code>和 <code>List</code>实现一对一查询和一对多查询。</strong></li>
</ul>
</blockquote>
<h3 id="4-3-1-定义resultMap"><a href="#4-3-1-定义resultMap" class="headerlink" title="4.3.1   定义resultMap"></a>4.3.1   定义resultMap</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--建立User实体类和数据库表的对应关系</span></span><br><span class="line"><span class="comment">	id：resultMap的唯一标识；</span></span><br><span class="line"><span class="comment">	type：指定实体类的全限定类名。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span>/&gt;</span>     <span class="comment">&lt;!--MySQL主键与User实体类的对应【特殊，需要单独写出来】--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userGender&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userHobby&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span>&gt;</span>标签：用于指定主键字段；</span><br><span class="line"><span class="tag">&lt;<span class="name">result</span>&gt;</span>标签：用于指定非主键字段；</span><br><span class="line">	`column`属性：用于指定数据库的列名；</span><br><span class="line">    `property`属性：用于指定实体类属性的名称。</span><br></pre></td></tr></table></figure>







<hr>
<h1 id="5-主配置文件-SqlMapConfig-xml"><a href="#5-主配置文件-SqlMapConfig-xml" class="headerlink" title="5    主配置文件  SqlMapConfig.xml"></a>5    主配置文件  SqlMapConfig.xml</h1><h2 id="5-1-MyBatis中2个配置文件与Mapper接口的关系"><a href="#5-1-MyBatis中2个配置文件与Mapper接口的关系" class="headerlink" title="5.1    MyBatis中2个配置文件与Mapper接口的关系"></a>5.1    MyBatis中2个配置文件与Mapper接口的关系</h2><p><img src="/2020/08/25/MyBatis/MyBatis%E4%B8%AD2%E4%B8%AA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%85%B3%E7%B3%BB.png"></p>
<ol>
<li><code>SqlMapConfig.xml</code>中保存着数据库连接信息；[通过<code>反射机制</code>加载到内存中]</li>
<li><code>Mapper.xml</code>中包含着要去到数据库中执行的SQL语句；[通过<code>代理模式</code>被代理]</li>
<li><code>Dao</code>接口是执行SQL语句的实例对象[被代理的对象]</li>
</ol>
<p>​    <em>MyBatis中，我们只会读取一次配置文件，读取的配置文件就是<code>SqlMapConfig.xml</code>，而没有读取<code>mapper.xml</code>配置文件，那么我们是如何得到<code>mapper.xml</code>配置文件中的信息的呢？</em></p>
<p>​    <em>Java中要想获取配置文件中的内容只有通过IO流才可以，显然通过<code>dao</code>接口无法读取<code>mapper.xml</code>配置文件。而我们通过<code>SqlMapConfig.xml</code>配置文件中的<code>&lt;mapper&gt;</code>标签，建立<code>mapper.xml</code>和<code>SqlMapConfig.xml</code>的映射关系，这样只需读取一次<code>SqlMapConfig.xml</code>文件，就能将2个配置文件中的信息全部加载到内存中去。    而只有加载到内存中的数据，才能和<code>dao</code>接口产生联系，如果是硬盘上的静态资源是无法和Java对象产生关联的。</em></p>
<p>​    <em><code>mapper.xml</code>配置文件被加载到内存中后，通过<code>namespace</code>和<code>id</code>属性找到对应的<code>Dao</code>接口对象，最后使用代理对象执行SQL语句。</em></p>
<h2 id="5-2-SqlMapConfig-xml-配置文件中的内容和顺序"><a href="#5-2-SqlMapConfig-xml-配置文件中的内容和顺序" class="headerlink" title="5.2    SqlMapConfig.xml  配置文件中的内容和顺序"></a>5.2    SqlMapConfig.xml  配置文件中的内容和顺序</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	约束</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    -----------------------------------Part1:属性[主要是数据库连接属性]--------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part2:全局配置参数------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part3:类型别名----------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAliase</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAliase</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part4:类型处理器--------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part5:对象工厂----------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">objectFactory</span>&gt;</span><span class="tag">&lt;/<span class="name">objectFactory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part6:插件-------------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part7:环境集合属性对象---------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span>&gt;</span>	(环境子属性对象)</span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span>	（事务管理）</span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span>&gt;</span><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span>	（数据源）</span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    --------------------------------------Part8:映射器-----------------------------------------------</span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="常用的标签"><a href="#常用的标签" class="headerlink" title="常用的标签"></a>常用的标签</h4><ul>
<li><code>&lt;properties&gt;</code></li>
<li><code>&lt;typeAliases&gt;</code></li>
<li><code>&lt;environments&gt;</code></li>
<li><code>&lt;mappers&gt;</code></li>
<li>最外层是一个<code>&lt;configuration&gt;</code>标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;properties resource=&quot;db.properties&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/db5&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/properties&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--单个定义别名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;bieming&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--批量自动定义别名，把整个包目录下的类自动定义别名，别名为类名（首字母大写或小写都可以）--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.domain&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--如果两个定义别名的方法都用，则两个方法都能生效--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--MyBatis在初始化时，会根据&lt;dataSource&gt;的type属性来创建相应类型的数据源DataSource--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/xsyu/dao/UserMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="5-3-properties（属性）"><a href="#5-3-properties（属性）" class="headerlink" title="5.3    properties（属性）"></a>5.3    properties（属性）</h2><ul>
<li>在使用<code>&lt;properties&gt;</code>标签时，我们可以使用2种方式指定属性配置。</li>
</ul>
<h3 id="5-3-1-第1种"><a href="#5-3-1-第1种" class="headerlink" title="5.3.1    第1种"></a>5.3.1    第1种</h3><ul>
<li>在当前配置文件的<code>&lt;configuration&gt;</code>标签中前定义<code>&lt;property&gt;</code>属性</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span>--&gt;</span><br></pre></td></tr></table></figure>



<h3 id="5-3-2-第2种"><a href="#5-3-2-第2种" class="headerlink" title="5.3.2    第2种"></a>5.3.2    第2种</h3><ol>
<li><p>在<code>classpath</code>下定义一个<code>db.properties</code>文件，编写配置信息；</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/db5</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure></li>
<li><p>并在<code>&lt;properties&gt;</code>标签中引入外部配置文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;properties&gt;标签中的属性：</span></span><br><span class="line"><span class="comment">		1. resource：用于指定properties配置文件的位置，要求配置文件必须在类路径下。</span></span><br><span class="line"><span class="comment">		2. url：用于指定配置文件的URL。</span></span><br><span class="line"><span class="comment">			协议  主机  端口  URI</span></span><br><span class="line"><span class="comment">		如： file:///D:/work/test/db.properties</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">url</span>=<span class="string">&quot;file:///D:/work/test/db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span>	(不常用)</span><br></pre></td></tr></table></figure></li>
<li><p>此时，<code>SqlMapConfig.xml</code>中<code>&lt;environments&gt;</code>的子标签<code>&lt;dataSource&gt;</code>就可以直接引用<code>&lt;properties&gt;</code>中的配置信息。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
</li>
</ol>
<h2 id="5-4-typeAliases（类型别名）"><a href="#5-4-typeAliases（类型别名）" class="headerlink" title="5.4    typeAliases（类型别名）"></a>5.4    typeAliases（类型别名）</h2><h3 id="5-4-1-自定义别名"><a href="#5-4-1-自定义别名" class="headerlink" title="5.4.1    自定义别名"></a>5.4.1    自定义别名</h3><ul>
<li><p>在<code>SqlMapConfig.xml</code>中配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--为单个类定义别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;bieming&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--批量定义别名，为整个包目录下的类自动定义别名，别名为类名（不区分大小写）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--如果两个定义别名的方法都用，则两个方法都能生效--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
</li>
</ul>
<h2 id="5-5-mappers（映射器）"><a href="#5-5-mappers（映射器）" class="headerlink" title="5.5    mappers（映射器）"></a>5.5    mappers（映射器）</h2><blockquote>
<p>映射<code>mapper.xml</code>文件中的配置信息，这样使用反射机制加载<code>SqlMapConfig.xml</code>文件中的信息到内存中时，会一次性把<code>mapper.xml</code>文件中的信息一起加载到内存中。</p>
</blockquote>
<h3 id="1、-lt-mapper-resource-quot-quot-gt"><a href="#1、-lt-mapper-resource-quot-quot-gt" class="headerlink" title="1、&lt;mapper  resource=&quot;&quot;/&gt;"></a>1、<code>&lt;mapper  resource=&quot;&quot;/&gt;</code></h3><ul>
<li><p>使用<strong>相对于类路径</strong>的资源</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/xsyu/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2、-lt-mapper-class-quot-quot-gt"><a href="#2、-lt-mapper-class-quot-quot-gt" class="headerlink" title="2、&lt;mapper  class=&quot;&quot;/&gt;"></a>2、<code>&lt;mapper  class=&quot;&quot;/&gt;</code></h3><ul>
<li><p>使用mapper接口路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;cn.xsyu.dao.UserMapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	此种方法要求mapper接口名称和mapper映射文件名称相同，且放在同一个目录中。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3、-lt-package-name-quot-quot-gt"><a href="#3、-lt-package-name-quot-quot-gt" class="headerlink" title="3、&lt;package name=&quot;&quot;/&gt;"></a>3、<code>&lt;package name=&quot;&quot;/&gt;</code></h3><ul>
<li><p>注册指定包下所有的mapper接口</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	此种方法要求mapper接口名称和mapper映射文件名称相同，且放在同一个目录中。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="6-MyBatis的数据库连接池技术"><a href="#6-MyBatis的数据库连接池技术" class="headerlink" title="6    MyBatis的数据库连接池技术"></a>6    MyBatis的数据库连接池技术</h1><blockquote>
<ul>
<li>MyBatis采用的是<strong>自己实现的数据库连接池技术</strong>。</li>
<li>在<code>SqlMapConfig.xml</code>配置文件中，通过<code>&lt;dataSource type=&quot;POOLED&quot;&gt;</code>开启数据库连接池。</li>
</ul>
</blockquote>
<h2 id="6-1-数据库连接池分类"><a href="#6-1-数据库连接池分类" class="headerlink" title="6.1    数据库连接池分类"></a>6.1    数据库连接池分类</h2><blockquote>
<p>在MyBatis中<code>&lt;DataSource&gt;</code>标签有3个选项：</p>
<ol>
<li><code>UNPOOLED</code>        不使用连接池的数据源</li>
<li><code>POOLED</code>        使用连接池的数据源</li>
<li><code>JNDI</code>        使用JNDI实现的数据源</li>
</ol>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;UNPOOLED&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;JNDI&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">MyBatis在初始化时，会根据&lt;dataSource&gt;的type属性来创建对应的数据源，即：</span></span><br><span class="line"><span class="comment">    type=&quot;POOLED&quot;，MyBatis会创建PooledDataSource实例；</span></span><br><span class="line"><span class="comment">    type=&quot;UNPOOLED&quot;，MyBatis会创建UnpooledDataSource实例；</span></span><br><span class="line"><span class="comment">    type=&quot;JNDI&quot;，MyBatis会从JNDI服务上查找DataSource实例，然后返回使用。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>




<h2 id="6-2-配置DataSource的连接信息"><a href="#6-2-配置DataSource的连接信息" class="headerlink" title="6.2    配置DataSource的连接信息"></a>6.2    配置DataSource的连接信息</h2><blockquote>
<p>DataSource的连接信息可以：</p>
<ol>
<li>直接与<code>&lt;property&gt;</code>标签的<code>value</code>属性绑定，如<code>&lt;property name=&quot;username&quot; value=&quot;zhangsan&quot;/&gt;</code>。</li>
<li>保存在<code>SqlMapConfig.xml</code>中的<code>&lt;properties&gt;</code>标签中，<code>&lt;property&gt;</code>标签的<code>value</code>属性与EL表达式绑定。</li>
<li>保存在类路径下的<code>xx.properties</code>文件中，先使用<code>&lt;properties&gt;</code>标签读取配置文件，再用EL表达式与<code>&lt;property&gt;</code>标签的<code>value</code>属性绑定。</li>
</ol>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>






<h2 id="6-3-DataSource的获取"><a href="#6-3-DataSource的获取" class="headerlink" title="6.3    DataSource的获取"></a>6.3    DataSource的获取</h2><ul>
<li><p>MyBatis是通过<strong>工厂模式</strong>来创建数据源DataSource对象的。</p>
</li>
<li><p>MyBatis定义了抽象的工厂接口：<code>org.apache.ibatis.datasource.DataSourceFactory</code>，通过该接口中的<code>getDataSource();</code>方法获取数据源<code>DataSource</code>。</p>
</li>
<li><p>源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataSourceFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties props)</span>;</span><br><span class="line"></span><br><span class="line">  DataSource <span class="title function_">getDataSource</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	MyBatis创建了DataSource实例之后，会将其方法Configuration对象中的Environment对象中，供以后使用。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6-4-MyBatis中连接的获取过程分析"><a href="#6-4-MyBatis中连接的获取过程分析" class="headerlink" title="6.4    MyBatis中连接的获取过程分析"></a>6.4    MyBatis中连接的获取过程分析</h2><ul>
<li>当我们需要创建<code>SqlSession</code>对象并需要执行SQL语句时，这时MyBatis才会去调用DataSource对象来创建<code>java.sql.connection</code>对象，也就是说，<code>java.sql.connection</code>对象的创建一直延迟到执行SQL语句的时候。</li>
</ul>
<hr>
<h1 id="7-MyBatis的事务控制"><a href="#7-MyBatis的事务控制" class="headerlink" title="7    MyBatis的事务控制"></a>7    MyBatis的事务控制</h1><blockquote>
<ul>
<li><p>我们常使用的数据库MySql每次执行SQL语句后默认自动提交，Oracle则默认要手动提交。</p>
</li>
<li><p>在JDBC中我们使用<code>setAutoCommit()</code>方法来控制事务的提交方式（手动提交或自动提交）。</p>
</li>
<li><p>MyBatis框架的底层实现就是JDBC，所以MyBatis中事务的提交方式，本质上就是调用JDBC的<code>setAutoCommit()</code>方法来设置事务提交方式的。</p>
<p>并且MyBatis默认<code>connection.setAutoCommit(false)</code>，将自动提交关闭。这样我们就必须使用<code>SqlSession.commit()</code>方法进行手动提交。[相当于JDBC中的<code>connection.commit()</code>]</p>
</li>
</ul>
</blockquote>
<ul>
<li><p><strong>设置自动提交事务</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在通过SqlSessionFactory工厂获取SqlSession对象时，设置`autoCommit=true`。即可实现事务自动提交。</span></span><br><span class="line">sqlSession = factory.openSession(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="8-MyBatis的动态SQL语句"><a href="#8-MyBatis的动态SQL语句" class="headerlink" title="8    MyBatis的动态SQL语句"></a>8    MyBatis的动态SQL语句</h1><p>​    MyBatis的映射文件中，前面学习的SQL语句都是比较简单的，有时候业务逻辑比较复杂时，简单SQL语句不能满足需求，就需要使用动态SQL语句了。</p>
<ul>
<li><code>&lt;if&gt;</code></li>
<li><code>&lt;choose&gt;</code></li>
<li><code>&lt;trim&gt;</code></li>
<li><code>&lt;foreach&gt;</code></li>
</ul>
<h2 id="8-1-lt-if-gt-标签-amp-lt-Where-gt-标签"><a href="#8-1-lt-if-gt-标签-amp-lt-Where-gt-标签" class="headerlink" title="8.1    &lt;if&gt;标签  &amp;  &lt;Where&gt;标签"></a>8.1    <code>&lt;if&gt;</code>标签  &amp;  <code>&lt;Where&gt;</code>标签</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName!=null and userName!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and username like #&#123;userName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userHobby!=null&quot;</span>&gt;</span></span><br><span class="line">            and hobby like #&#123;userHobby&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;if&gt;标签中的test属性与JavaBean对象的属性名映射，如果JavaBean的类中还包含另一个POJO对象，则要使用OGNL表达式的写法。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="8-2-lt-foreach-gt-标签"><a href="#8-2-lt-foreach-gt-标签" class="headerlink" title="8.2    &lt;foreach&gt;标签"></a>8.2    <code>&lt;foreach&gt;</code>标签</h2><ul>
<li>如果查询的信息被封装在一个集合中，就需要把这个集合中的每个数据都拿到然后传递给数据库进行查询。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findInList&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.xsyu.domain.QueryVo&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;list!=null and list.size()&gt;0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">                #&#123;uid&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">select * from user where id in(uid1, uid2, .....)	</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;foreach&gt;标签用于遍历集合，它的属性：</span></span><br><span class="line"><span class="comment">		collection：代表要遍历的集合对象，注意编写时不要写#&#123;&#125;，但它仍然是一个OGNL表达式；</span></span><br><span class="line"><span class="comment">		open：代表语句的开始部分；</span></span><br><span class="line"><span class="comment">		close：代表语句的结束部分;</span></span><br><span class="line"><span class="comment">		item：代表遍历集合的每个元素生成的变量名；</span></span><br><span class="line"><span class="comment">		sperator：代表分隔符。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>





<h2 id="8-3-MyBatis中简化编写的SQL片段"><a href="#8-3-MyBatis中简化编写的SQL片段" class="headerlink" title="8.3    MyBatis中简化编写的SQL片段"></a>8.3    MyBatis中简化编写的SQL片段</h2><blockquote>
<p>可以将SQL语句中重复的SQL片段提取出来，使用时引用<code>&lt;include&gt;</code>即可，最终达到SQL重用的目的。</p>
</blockquote>
<ol>
<li>定义SQL代码片段</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--抽取重复的SQL语句片段--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;defaultSql&quot;</span>&gt;</span></span><br><span class="line">    select * from user	</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>引用SQL代码片段</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置查询所有操作--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;defaultSql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置根据id查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;defaultSql&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName!=null and userName!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and username like #&#123;userName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userHobby!=null&quot;</span>&gt;</span></span><br><span class="line">            and hobby like #&#123;userHobby&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>





<hr>
<h1 id="9-MyBatis多表查询"><a href="#9-MyBatis多表查询" class="headerlink" title="9    MyBatis多表查询"></a>9    MyBatis多表查询</h1><blockquote>
<p>案例：用户和账户模型。</p>
<ul>
<li>用户表为User表；</li>
<li>账户表为Account表；</li>
<li>一个用户可以有多个账户。</li>
</ul>
</blockquote>
<h2 id="9-1-多表查询：一对一"><a href="#9-1-多表查询：一对一" class="headerlink" title="9.1    多表查询：一对一"></a>9.1    多表查询：一对一</h2><blockquote>
<p>需求：</p>
<ul>
<li>查询所有账户信息，关联查询账户对应的用户信息。</li>
</ul>
<p>注意：</p>
<ul>
<li>因为一个账户的信息只能供一个用户使用，所以从查询账户信息出发关联查询用户信息是一对一查询。</li>
<li>如果从用户信息出发查询用户下的账户信息则为一对多查询，因为一个用户可以有多个账户。</li>
</ul>
</blockquote>
<h3 id="9-1-1、方式1"><a href="#9-1-1、方式1" class="headerlink" title="9.1.1、方式1"></a>9.1.1、方式1</h3><ol>
<li>定义Account实体类</li>
<li>编写SQL语句<ul>
<li>查询账户信息的同时查询账户所对应的用户信息。</li>
</ul>
</li>
<li>定义AccountUser类<ul>
<li>为了能够封装上面SQL语句的查询结果，定义<code>AccountUser</code>类，既要包含账户信息，同时还要包含用户信息，所以我们在定义AccountUser类时可以继承Account类。</li>
</ul>
</li>
<li>定义账户的持久层Dao接口</li>
<li>定义AccountDao.xml配置文件中的配置信息</li>
<li>创建AccountTest测试类</li>
</ol>
<h3 id="9-1-2、方式2"><a href="#9-1-2、方式2" class="headerlink" title="9.1.2、方式2"></a>9.1.2、方式2</h3><blockquote>
<ul>
<li>我们可以在Account类中加入一个User类的对象来表示这个账户所属的用户。</li>
<li>在<code>mapper.xml</code>中定义<code>resultMap</code>用于映射一对一查询结果。</li>
</ul>
</blockquote>
<ol>
<li><p>修改Account类</p>
<ul>
<li>在Account类中加入User类的对象作为Account类的一个属性。</li>
</ul>
</li>
<li><p>修改AccountDao接口中的方法</p>
</li>
<li><p>重新定义AccountDao.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.IAccountDao&quot;</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;accountMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--用于指定类中引入的另一个实体类对象--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hobby&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在AccountTest类中加入测试方法</p>
</li>
</ol>
<h2 id="9-2-一对多查询"><a href="#9-2-一对多查询" class="headerlink" title="9.2    一对多查询"></a>9.2    一对多查询</h2><blockquote>
<p>需求：</p>
<ul>
<li>查询用户信息以及用户所关联的全部账号信息。</li>
</ul>
<p>分析：</p>
<ul>
<li>用户信息和账号信息是一对多关系，并且查询过程中如果有用户没有账户信息，此时也要将用户信息查询出来，这时候采用左外连接查询比较合适。</li>
</ul>
</blockquote>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><ol>
<li><p>编写SQL语句</p>
</li>
<li><p>User类中加入<code>List&lt;Account&gt;</code></p>
</li>
<li><p>用户持久层Dao接口中加入查询方法</p>
</li>
<li><p>用户持久层Dao映射配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.IUserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			collection用于建立一对多集合属性的对应关系，</span></span><br><span class="line"><span class="comment">			ofType用于指定集合元素的数据类型。</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;accounts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;account&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;aid&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line">collection：</span><br><span class="line">	定义了用户关联的账户信息，表示关联查询结果集。</span><br><span class="line">property=&quot;accounts&quot;:</span><br><span class="line">	关联查询的结果集存储在User对象的哪个属性上；</span><br><span class="line">ofType=&quot;account&quot;:</span><br><span class="line">	指定关联查询的结果集中的对象类型，即accounts列表中对象的类型。</span><br><span class="line">	此处可以使用别名，也可以使用全限定类名。</span><br></pre></td></tr></table></figure></li>
<li><p>测试方法</p>
</li>
</ol>
<hr>
<h2 id="9-2-多表查询：多对多"><a href="#9-2-多表查询：多对多" class="headerlink" title="9.2    多表查询：多对多"></a>9.2    多表查询：多对多</h2><blockquote>
<p>用户和角色关系模型：</p>
<ul>
<li>用户类：User</li>
<li>角色类：Role</li>
</ul>
<p>每个用户都要扮演多个角色，每个角色都对应多个用户。</p>
</blockquote>
<h3 id="9-2-2-业务要求及及实现SQL"><a href="#9-2-2-业务要求及及实现SQL" class="headerlink" title="9.2.2    业务要求及及实现SQL"></a>9.2.2    业务要求及及实现SQL</h3><blockquote>
<p>需求：</p>
<ul>
<li>实现查询所有对象并加载每个对象扮演的角色信息。</li>
</ul>
<p>分析：</p>
<ul>
<li>查询角色需要Role表，但是通过Role表并不能直接找到对应的User的全部信息，而是要通过中间表(User_Role表)才能关联到用户信息。</li>
</ul>
</blockquote>
<h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><ol>
<li>编写Role实体类<ul>
<li>Role实体类中包含<code>List&lt;user&gt; users</code>属性</li>
</ul>
</li>
<li>编写Role持久层接口</li>
<li>编写映射文件</li>
<li>编写测试类</li>
</ol>
<hr>
<h1 id="10-MyBatis延迟加载"><a href="#10-MyBatis延迟加载" class="headerlink" title="10    MyBatis延迟加载"></a>10    MyBatis延迟加载</h1><blockquote>
<p><strong>问</strong>：在一对多关系中，假设我们有一个用户，他有100个账户。</p>
<ol>
<li>当我们查询用户信息的时候，要不要把关联的账户查询出来？</li>
<li>当我们查询账户信息时，要不要把关联的用户查询出来？</li>
</ol>
<p><strong>答</strong>：</p>
<pre><code> 1. 在查询用户时，用户名下的账户信息，应该是什么时候使用，什么时候再加载的；
 2. 在查询账户时，账户所属的用户信息应该是随着查询账户一起加载出来的。
</code></pre>
</blockquote>
<blockquote>
<ul>
<li><p><strong>延迟加载</strong>：在真正使用数据的时候才发起查询，不用的时候不查询。按需加载（<strong>懒加载</strong>）</p>
<p><strong>缺点</strong>：因为只有当需要用到数据的时候，才会进行数据库查询，这样在大批量查询数据时，因为查询工作也要消耗时间，所以可能造成用户等待时间变长，造成用户体验下降。</p>
<p><strong>懒加载是针对级联使用的。</strong></p>
</li>
<li><p><strong>立即加载</strong>：不管是否使用，只要调用方法，立即进行查询。</p>
</li>
</ul>
</blockquote>
<p>在4种表关系中：</p>
<table>
<thead>
<tr>
<th align="center">表关系</th>
<th align="center">加载方式</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>一对多、多对多</code></td>
<td align="center">延迟加载</td>
</tr>
<tr>
<td align="center"><code>一对一、多对一</code></td>
<td align="center">立即加载</td>
</tr>
</tbody></table>
<h2 id="延迟加载案例"><a href="#延迟加载案例" class="headerlink" title="延迟加载案例"></a>延迟加载案例</h2><h3 id="1、需求"><a href="#1、需求" class="headerlink" title="1、需求"></a>1、需求</h3><blockquote>
<p>查询用户（User）信息，并且关联查询账户（Account）信息。</p>
<ul>
<li>如果先查询用户（User）信息即可满足要求，当我们需要使用账户（Account）信息时再查询账户信息。把对账户（Account）信息按需查询就是延迟加载。</li>
<li>MyBatis在实现多表操作时，我们使用了<code>association</code>、<code>collection</code>实现一对一、一对多映射。<code>association</code>、<code>collection</code>具备延迟加载的功能。</li>
</ul>
</blockquote>
<h3 id="2、使用assocation实现延迟加载"><a href="#2、使用assocation实现延迟加载" class="headerlink" title="2、使用assocation实现延迟加载"></a>2、使用assocation实现延迟加载</h3><h4 id="1、准备数据库"><a href="#1、准备数据库" class="headerlink" title="1、准备数据库"></a>1、准备数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">-- 创建数据库</span><br><span class="line">CREATE DATABASE mybatis;</span><br><span class="line">-- 使用数据库</span><br><span class="line">USE mybatis;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 创建user表[主表]</span><br><span class="line">CREATE TABLE IF NOT EXISTS USER(</span><br><span class="line">	id 	INT(16) 	NOT NULL AUTO_INCREMENT PRIMARY KEY,  -- ID（主键）</span><br><span class="line">	NAME	VARCHAR(16) 	NOT NULL,				-- 用户姓名</span><br><span class="line">	gender 	VARCHAR(8)						-- 用户性别</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 创建Account表[从表]</span><br><span class="line">CREATE TABLE IF NOT EXISTS account(</span><br><span class="line">	id INT(32) PRIMARY KEY AUTO_INCREMENT,		-- 账户编号</span><br><span class="line">	username VARCHAR(32) UNIQUE,			-- 账户名</span><br><span class="line">	PASSWORD VARCHAR(32) NOT NULL,			-- 账户密码</span><br><span class="line">	money DOUBLE, 					-- 账户余额 </span><br><span class="line">	uid INT(32) NOT NULL, 				-- 用户ID（外键）</span><br><span class="line">	FOREIGN KEY(uid) REFERENCES USER(id) 		-- 配置外键		</span><br><span class="line">	 		</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 向user表中插入数据（主表）</span><br><span class="line">INSERT INTO USER (NAME, gender) VALUES (&quot;里番&quot;,&quot;男&quot;);</span><br><span class="line">INSERT INTO USER (NAME, gender) VALUES (&quot;刘玉豪&quot;,&quot;男&quot;);</span><br><span class="line">INSERT INTO USER (NAME, gender) VALUES (&quot;谭思雨&quot;,&quot;男&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 向account表中插入数据（从表）[此时主表中只有三个id值（1，2，3）]</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;农业银行_lf&quot;,&quot;lf123&quot;,999,1);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;交通银行_lf&quot;,&quot;lf123&quot;,666,1);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;交通银行_llh&quot;,&quot;lyh123&quot;,1001,2);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;交通银行_tsy&quot;,&quot;tsy123&quot;,888,3);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;建设银行_tsy&quot;,&quot;tsy123&quot;,1666,3);</span><br><span class="line">INSERT INTO account (username, PASSWORD, money, uid) VALUES (&quot;工商银行_tsy&quot;,&quot;tsy123&quot;,0.9,3);</span><br><span class="line"></span><br><span class="line">-- 查询account表的同时查询到每个account关联的user信息</span><br><span class="line">SELECT * FROM account,USER</span><br><span class="line">WHERE account.uid = user.id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 删除account表</span><br><span class="line">DROP TABLE IF EXISTS account ;</span><br><span class="line">-- 删除user表</span><br><span class="line">DROP TABLE IF EXISTS USER;</span><br><span class="line"></span><br><span class="line">-- 查询user表</span><br><span class="line">SELECT * FROM USER;</span><br><span class="line">-- 查询account表</span><br><span class="line">SELECT * FROM account;</span><br><span class="line"></span><br><span class="line">-- 删除account表中的数据</span><br><span class="line">TRUNCATE account;</span><br></pre></td></tr></table></figure>

<h4 id="2、创建Maven工程，导入依赖坐标"><a href="#2、创建Maven工程，导入依赖坐标" class="headerlink" title="2、创建Maven工程，导入依赖坐标"></a>2、创建Maven工程，导入依赖坐标</h4><h4 id="3、编写SqlMapConfig-xml配置文件"><a href="#3、编写SqlMapConfig-xml配置文件" class="headerlink" title="3、编写SqlMapConfig.xml配置文件"></a>3、编写SqlMapConfig.xml配置文件</h4><p>进入MyBatis官网，找到<code>settings</code>的说明信息：</p>
<table>
<thead>
<tr>
<th align="center">设置名</th>
<th align="center">描述</th>
<th align="center">有效值</th>
<th align="center">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>lazyLoadingEnabled</code></td>
<td align="center">延迟加载的全局开关。当开启时，所有的关联对象都会延迟加载。 如果需要指定特定关联关系中可通过设置 <code>fetchType</code> 属性来覆盖延迟加载的开关状态。</td>
<td align="center">true/false</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center"><code>aggressiveLazyLoading</code></td>
<td align="center">积极的懒加载，开启时，任一方法的调用都会加载该对象的所有延迟加载属性。 否则，每个延迟加载属性会按需加载。</td>
<td align="center">true/false</td>
<td align="center">false</td>
</tr>
</tbody></table>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--MyBatis的主配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--开启延迟加载的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置映射文件的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper resource=&quot;cn/xsyu/dao/AccountDao.xml&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;cn.xsyu.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、编写实体类"><a href="#4、编写实体类" class="headerlink" title="4、编写实体类"></a>4、编写实体类</h4><h4 id="5、编写Dao层接口"><a href="#5、编写Dao层接口" class="headerlink" title="5、编写Dao层接口"></a>5、编写Dao层接口</h4><h4 id="6、编写映射配置文件"><a href="#6、编写映射配置文件" class="headerlink" title="6、编写映射配置文件"></a>6、编写映射配置文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.AccountDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--建立POJO中属性与数据库表中字段的映射关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;accountMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.Account&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;uid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入自定义实体类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">javaType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;accountMap&quot;</span>&gt;</span></span><br><span class="line">        SELECT * FROM account,USER WHERE account.uid = user.id;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7、编写测试类"><a href="#7、编写测试类" class="headerlink" title="7、编写测试类"></a>7、编写测试类</h4><hr>
<h3 id="3、使用Collection实现延迟加载"><a href="#3、使用Collection实现延迟加载" class="headerlink" title="3、使用Collection实现延迟加载"></a>3、使用Collection实现延迟加载</h3><h4 id="1、改造实体类User，添加一个List-lt-Account-gt-属性"><a href="#1、改造实体类User，添加一个List-lt-Account-gt-属性" class="headerlink" title="1、改造实体类User，添加一个List&lt;Account&gt;属性"></a>1、改造实体类User，添加一个<code>List&lt;Account&gt;</code>属性</h4><h4 id="2、编写Dao层接口"><a href="#2、编写Dao层接口" class="headerlink" title="2、编写Dao层接口"></a>2、编写Dao层接口</h4><h4 id="3、新增一个持久层映射配置文件User-xml"><a href="#3、新增一个持久层映射配置文件User-xml" class="headerlink" title="3、新增一个持久层映射配置文件User.xml"></a>3、新增一个持久层映射配置文件User.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置一对多--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;accounts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;cn.xsyu.domain.Account&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;money&quot;</span> <span class="attr">column</span>=<span class="string">&quot;money&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;uid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置findAll--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">        select * from USER,account where user.id=account.uid;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3、修改SqlMapConfig中的映射配置文件为包扫描"><a href="#3、修改SqlMapConfig中的映射配置文件为包扫描" class="headerlink" title="3、修改SqlMapConfig中的映射配置文件为包扫描"></a>3、修改SqlMapConfig中的映射配置文件为包扫描</h4><h4 id="4、编写测试类"><a href="#4、编写测试类" class="headerlink" title="4、编写测试类"></a>4、编写测试类</h4><h1 id="11-MyBatis中的缓存"><a href="#11-MyBatis中的缓存" class="headerlink" title="11    MyBatis中的缓存"></a>11    MyBatis中的缓存</h1><blockquote>
<ol>
<li><p><strong>什么是缓存？</strong></p>
<ul>
<li>存在于内存中的临时数据。</li>
</ul>
</li>
<li><p><strong>为什么使用缓存？</strong></p>
<ul>
<li>减少和数据库的交互次数，提高执行效率。</li>
</ul>
</li>
<li><p><strong>什么样的数据建议使用缓存，什么样的数据不建议使用缓存？</strong></p>
<ul>
<li>经常查询</li>
<li>不经常改变</li>
<li>数据的正确与否对最终结果影响不大</li>
</ul>
</li>
<li><p><strong>MyBatis中的一级缓存和二级缓存</strong></p>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>一级缓存</strong>：</p>
<ul>
<li>* </li>
</ul>
<p>二级缓存</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">它指的是MyBatis中的SqlSessionFactory对象的缓存。	</span><br><span class="line">由同一个SqlSessionFactory对象创建的SqlSession共享其缓存。</span><br><span class="line">	</span><br><span class="line">二级缓存的使用步骤：</span><br><span class="line">	step1：让MyBatis框架支持二级缓存（在SqlMapConfig.xml中配置）</span><br><span class="line">	step2：让当前的映射文件支持二级缓存（在UserDao.xml中配置）</span><br><span class="line">	step3：让当前的操作支持二级缓存（在&lt;select&gt;标签中配置）</span><br></pre></td></tr></table></figure>







<h2 id="11-1-MyBatis一级缓存"><a href="#11-1-MyBatis一级缓存" class="headerlink" title="11.1    MyBatis一级缓存"></a>11.1    MyBatis一级缓存</h2><blockquote>
<ul>
<li><p>一级缓存是SqlSession级别的缓存</p>
<blockquote>
<p>我们在Dao层调用数据库查询之后，得到的查询结果除了返回给service层使用，同时也会存入到SqlSession对象的一块内存区域中。    </p>
<ul>
<li>该区域的结构是一个Map。</li>
<li>当我们再次查询同样的数据时，MyBatis会先去SqlSession的缓存区查询结果是否存在，若存在则直接拿出来使用；</li>
<li>当SqlSession对象消失时，MyBatis的一级缓存也就消失了。</li>
</ul>
</blockquote>
</li>
<li><p>一级缓存是自动运行的，默认是一直开启的。</p>
</li>
</ul>
</blockquote>
<h3 id="11-1-1-证明一级缓存的存在"><a href="#11-1-1-证明一级缓存的存在" class="headerlink" title="11.1.1    证明一级缓存的存在"></a>11.1.1    证明一级缓存的存在</h3><ol>
<li>创建Maven工程，导入依赖</li>
<li>编写实体类</li>
<li>编写Dao层接口</li>
<li>编写主配置文件</li>
<li>编写映射配置文件</li>
<li>编写测试类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 1. 读取配置文件，获取配置文件信息</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 2. 根据配置文件，创建SqlSessionFactory工厂</span></span><br><span class="line">    <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(in);</span><br><span class="line">    <span class="comment">// 3.根据SqlSessionFactory工厂创建SqlSession核心对象</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">    <span class="comment">// 4.创建代理对象</span></span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.执行方法，输出结果</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> userDao.findById(<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;第一次查询的用户&quot;</span>+user1);</span><br><span class="line"></span><br><span class="line">    sqlSession.clearCache();    <span class="comment">// 清空缓存[若清空缓存，则最终输出结果为false，反之则为true]</span></span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userDao.findById(<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;第一次查询的用户&quot;</span>+user2);</span><br><span class="line">    System.out.println(user1==user2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.释放资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">    in.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*	  可以发现，虽然在上面的代码中我们查询了2次数据库，但是最后只执行了一次数据库操作。</span></span><br><span class="line"><span class="comment">*	这就是MyBatis中的一级缓存起作用了。因为一级缓存的存在，导致第2次查询id=2的记录时，并没有向数据库发送请求，而* 	是直接从一级缓存中查询数据。</span></span><br><span class="line"><span class="comment">/</span></span><br></pre></td></tr></table></figure>



<h3 id="11-1-2-一级缓存的分析"><a href="#11-1-2-一级缓存的分析" class="headerlink" title="11.1.2    一级缓存的分析"></a>11.1.2    一级缓存的分析</h3><blockquote>
<p>一级缓存是SqlSession级别的缓存，当调用SqlSession的<code>修改、添加、删除、commit()、close()、clearCache()</code>等方法时，就会清空一级缓存。</p>
</blockquote>
<p><img src="/2020/08/25/MyBatis/MyBatis%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98.png"></p>
<blockquote>
<ol>
<li><p>第一次查询id为1的用户信息，先去找缓存中是否有id为1的用户信息，如果没有，再从数据库中查询用户信息；并将查到的用户信息存储到一级缓存中。</p>
</li>
<li><p>**[可选]**如果SqlSession执行了增删改(没有查)操作、清空缓存操作、事务相关操作等，则会清空SqlSession中的一级缓存，这样做的目的是为了让缓存中存储的是最新的信息，避免脏读。</p>
</li>
<li><p>第二次查询id为1的用户信息，先去找缓存中是否有id为1的用户信息，如果有，直接从缓存中获取用户信息。</p>
</li>
</ol>
</blockquote>
<h2 id="11-2-MyBatis二级缓存"><a href="#11-2-MyBatis二级缓存" class="headerlink" title="11.2    MyBatis二级缓存"></a>11.2    MyBatis二级缓存</h2><h3 id="11-2-1-二级缓存的分析"><a href="#11-2-1-二级缓存的分析" class="headerlink" title="11.2.1    二级缓存的分析"></a>11.2.1    二级缓存的分析</h3><blockquote>
<ul>
<li><p>二级缓存是<code>SqlSessionFactory级别</code>的缓存，</p>
</li>
<li><p>SqlSessionFactory对象在其内存中创建一个共享域保存从数据库查到的数据    </p>
</li>
</ul>
</blockquote>
<p><img src="/2020/08/25/MyBatis/MyBatis%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98.png"></p>
<blockquote>
<p>在开启MyBatis二级缓存的前提下：</p>
<ol>
<li>SqlSession1对象去查询id为1的用户信息，查询到的用户信息存储在二级缓存中；</li>
<li>**[可选]**如果同一工厂对象SqlSessionFactory生产的SqlSession3对象执行增删改或事务相关方法，将会清空该二级缓存中区域中的数据。</li>
<li>SqlSession2对象去查询id为1的用户信息，首先会去二级缓存中找是否存在数据，如果存在则直接从缓存中取出数据。</li>
</ol>
</blockquote>
<h3 id="11-2-2-二级缓存的开启"><a href="#11-2-2-二级缓存的开启" class="headerlink" title="11.2.2    二级缓存的开启"></a>11.2.2    二级缓存的开启</h3><ol>
<li>在SqlMapConfig.xml文件中开启二级缓存</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--因为cacheEnabled默认取值就是true，所以这一步可以省略不写--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>配置相关的Mapper映射文件</p>
<blockquote>
<ul>
<li><code>&lt;cacha&gt;</code>标签标志着当前这个<code>&lt;mapper&gt;</code>映射将使用二级缓存；</li>
<li>区分的标准就看<code>&lt;mapper&gt;</code>的<code>namespace</code>值。</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	&lt;cache/&gt;标签开启二级缓存针对的是某一个Dao接口；</span></span><br><span class="line"><span class="comment">	而对于Dao接口中具体的方法是否开启二级缓存则需要根据 statement上的 useCache 属性来设置。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置statement上的useCache属性</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.xsyu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置findById--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.xsyu.domain.User&quot;</span> <span class="attr">useCache</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	设置UserDao.xml映射文件中的&lt;select&gt;标签中的属性为  usecache=&quot;true&quot;  ；</span></span><br><span class="line"><span class="comment">	标示当前这个statement要使用二级缓存，如果不使用则设置为false；</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	注意：</span></span><br><span class="line"><span class="comment">		如果每次查询都需要得到数据库中最新的状态，即不需要二级缓存，则设置 usecache=&quot;false&quot;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="11-2-3-二级缓存的注意事项"><a href="#11-2-3-二级缓存的注意事项" class="headerlink" title="11.2.3    二级缓存的注意事项"></a>11.2.3    二级缓存的注意事项</h3><blockquote>
<p>我们在使用二级缓存时，所缓存的类一定要实现<code>java.io.Serializable</code>接口，再这样就可以使用序列化方式来保存对象。</p>
</blockquote>
<hr>
<h1 id="12-MyBatis注解开发"><a href="#12-MyBatis注解开发" class="headerlink" title="12    MyBatis注解开发"></a>12    MyBatis注解开发</h1><blockquote>
<ul>
<li>环境搭建</li>
<li>单表CRUD</li>
<li>多表查询操作</li>
<li>缓存的配置 </li>
</ul>
</blockquote>
<h2 id="12-1-MyBatis的常用注解说明"><a href="#12-1-MyBatis的常用注解说明" class="headerlink" title="12.1    MyBatis的常用注解说明"></a>12.1    MyBatis的常用注解说明</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Insert	：	增加语句</span><br><span class="line">@Update	：	更新语句</span><br><span class="line">@Delete	：	删除语句</span><br><span class="line">@Select	：	查询语句</span><br><span class="line">@Result ：	类似于注解中的resultType</span><br><span class="line">@Results ：	类似于注解中的resultMap，完成对数据库表的列与JavaBean对象属性的映射</span><br><span class="line">@ResultMap ：	调用@Results封装好的映射关系</span><br><span class="line">@One ：	实现一对一结果集封装</span><br><span class="line">@Many ：	实现一对多结果集封装</span><br><span class="line">@SelectProvider ：	实现动态SQL映射</span><br><span class="line">@CacheNamespace ：	实现注解二级缓存的使用</span><br></pre></td></tr></table></figure>



<h2 id="12-2-MyBatis的CRUD（注解实现）"><a href="#12-2-MyBatis的CRUD（注解实现）" class="headerlink" title="12.2    MyBatis的CRUD（注解实现）"></a>12.2    MyBatis的CRUD（注解实现）</h2><ol>
<li><p>创建Maven工程，导入坐标</p>
</li>
<li><p>编写实体类</p>
</li>
<li><p>使用注解的方式编写Dao层接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id = &quot;userMap&quot;,value = &#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true, column = &quot;id&quot;, property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(id = false, column = &quot;name&quot;, property = &quot;name&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;gender&quot;, property = &quot;gender&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据ID查询用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResultMap(value = &quot;userMap&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user(name, gender) values(#&#123;name&#125;, #&#123;gender&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">add</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Update(&quot;update user set name=#&#123;name&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 聚合函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;Select count(*) from user&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">findCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模糊查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where name like #&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findLike</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>配置SqlMapConfig.xml配置文件</p>
</li>
<li><p>编写测试方法</p>
</li>
</ol>
<h2 id="12-3-使用注解实现复杂关系的映射开发"><a href="#12-3-使用注解实现复杂关系的映射开发" class="headerlink" title="12.3    使用注解实现复杂关系的映射开发"></a>12.3    使用注解实现复杂关系的映射开发</h2><blockquote>
<ol>
<li>在配置文件中配置复杂查询时，可以通过<code>&lt;resultMap&gt;标签</code>来实现，</li>
<li>在使用注解时我们需要借助 <code>@Results注解、@Result注解、@ResultMap注解、@One注解、@Many注解</code>。</li>
</ol>
</blockquote>
<h3 id="12-3-1-复杂关系映射的注解说明"><a href="#12-3-1-复杂关系映射的注解说明" class="headerlink" title="12.3.1    复杂关系映射的注解说明"></a>12.3.1    复杂关系映射的注解说明</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Results注解</span><br><span class="line">	* 代替的是&lt;resultMap&gt;标签</span><br><span class="line">	* 该注解中可以使用单个 @Result注解，也可以使用 @Result集合</span><br><span class="line">	* @Results(&#123;@Result(), @Result()&#125;) 或 @Results(@Result())</span><br><span class="line">	</span><br><span class="line">@Result注解</span><br><span class="line">	* 代替了 &lt;id&gt;标签和&lt;result&gt;标签</span><br><span class="line">	* 属性：</span><br><span class="line">		+ id ：	是否为主键字段</span><br><span class="line">		+ column ：	数据库的列名</span><br><span class="line">		+ property ：	POJO中映射的属性名</span><br><span class="line">		+ one ：	需要使用的 @One 注解。[@Result(one=@One)()]</span><br><span class="line">		+ many :	需要使用的 @Many 注解。[(@Result(many=@Many)())]</span><br><span class="line">        </span><br><span class="line">@One注解（一对一）</span><br><span class="line">	* 代替了&lt;assocation&gt;标签，是多表查询的关键，在注解中用来指定子查询返回单一对象</span><br><span class="line">	* 属性：</span><br><span class="line">		+ select ： 代表将要执行的SQL语句</span><br><span class="line">		+ fetchType ： 代表加载方式[延迟加载、立即加载] lazyLoadingEnabled</span><br><span class="line">     * 使用格式：</span><br><span class="line">     	+ @Result(column=&quot;&quot;, property=&quot;&quot;, one=@One(select=&quot;&quot;))</span><br><span class="line">     	</span><br><span class="line">@Many注解（多对一）</span><br><span class="line">	* 代替了&lt;Collection&gt;标签，是多表查询的关键，在注解中用来指定子查询返回的对象集合。</span><br><span class="line">	* 注意：</span><br><span class="line">	* 使用格式：</span><br><span class="line">		+ @Result(column=&quot;&quot;, property=&quot;&quot;, many=@Many(select=&quot;&quot;))</span><br></pre></td></tr></table></figure>







<hr>
<h2 id="12-4-MyBatis的二级缓存（注解方式）"><a href="#12-4-MyBatis的二级缓存（注解方式）" class="headerlink" title="12.4    MyBatis的二级缓存（注解方式）"></a>12.4    MyBatis的二级缓存（注解方式）</h2><ol>
<li><p>在SqlMapConfig.xml中开启二级缓存的支持</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置二级缓存--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--开启二级缓存的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在持久层接口中使用注解配置二级缓存</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheNamespace(block=true)</span>		<span class="comment">// MyBatis基于注解方式实现二级缓存</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span>()&#123;</span><br><span class="line">    <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/22/JavaSE%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/22/JavaSE%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84API/" class="post-title-link" itemprop="url">JavaSE中常见的API</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-22 21:01:10" itemprop="dateCreated datePublished" datetime="2020-08-22T21:01:10+08:00">2020-08-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-11-05 21:56:38" itemprop="dateModified" datetime="2020-11-05T21:56:38+08:00">2020-11-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><blockquote>
<ul>
<li><strong>API</strong>（Application Programming Interface）：应用程序编程接口</li>
</ul>
<p>API就是接口，接口中预先定义了一些方法声明，而没有具体的方法逻辑。所有实现了接口的实现类必须重写接口中的抽象方法，定义具体的方法逻辑。</p>
</blockquote>
<hr>
<h1 id="Object"><a href="#Object" class="headerlink" title="*    Object"></a>*    Object</h1><h2 id="1-包"><a href="#1-包" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object;	<span class="comment">// Class</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明"><a href="#2-解释说明" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><blockquote>
<ol>
<li>是Java语言的根类，</li>
<li>是所有类的父类,其中的非私有、非静态方法被所有类公用。</li>
<li>在对象实例化的时候，最终找的父类就是Object。</li>
<li>如果一个类没有特别指定父类，则默认继承自Object。</li>
</ol>
</blockquote>
<h2 id="3-成员方法"><a href="#3-成员方法" class="headerlink" title="3    成员方法"></a>3    成员方法</h2><blockquote>
<p><strong><code>Object</code>类中包含的成员方法有9个</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>clone()</code></td>
<td align="center"><code>Object</code></td>
<td align="center">创建并返回此对象的一个副本</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>equals(Object obj)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">指示其他某个对象是否与此对象“相等”。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>getClass()</code></td>
<td align="center"><code>Class</code></td>
<td align="center">返回此Object的运行时类</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>hashCode()</code></td>
<td align="center"><code>int</code></td>
<td align="center">返回该对象的Hash码值</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>toString()</code></td>
<td align="center"><code>String</code></td>
<td align="center">返回此对象的字符串表示</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>多线程</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>wait()</code></td>
<td align="center"><code>void</code></td>
<td align="center">在其他线程调用此对象的<code>notify()</code>或<code>notifyAll()</code>方法前，使当前线程等待。</td>
</tr>
<tr>
<td align="center">重载</td>
<td align="center"><code>wait(long time)</code></td>
<td align="center"><code>void</code></td>
<td align="center">在其他线程调用此对象的<code>notify()</code>或<code>notifyAll()</code>方法前，或者超过指定的时间量前，使当前线程等待。</td>
</tr>
<tr>
<td align="center">重载</td>
<td align="center"><code>wait(long time, int nanos)</code></td>
<td align="center"><code>void</code></td>
<td align="center">在其他线程调用此对象的<code>notify()</code>或<code>notifyAll()</code>方法前，或者超过指定的时间量前，或者其他某个线程中断当前线程，使当前线程等待。</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>notify()</code></td>
<td align="center"><code>void</code></td>
<td align="center">唤醒在此对象监视器上等待的单个进程</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>notifyAll()</code></td>
<td align="center"><code>void</code></td>
<td align="center">唤醒在此对象监视器上等待的所有线程</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>finalize()</code></td>
<td align="center"><code>void</code></td>
<td align="center">当垃圾回收器确定不存在对该对象的更多引用时，由对象的垃圾回收器调用此方法。</td>
</tr>
</tbody></table>
<h3 id="1-toString"><a href="#1-toString" class="headerlink" title="1.    toString()"></a>1.    toString()</h3><ul>
<li><code>toString()</code>方法，返回该对象的字符串表示。</li>
<li>缺省的<code>toString()</code>方法返回的字符串内容就是 <strong>对象的类型+@+内存地址值</strong>。</li>
<li>一般情况下，开发过程中都会重写<code>toString()</code>方法。</li>
</ul>
<h3 id="2-equals"><a href="#2-equals" class="headerlink" title="2.    equals()"></a>2.    equals()</h3><ul>
<li><code>equals(Object obj)</code>方法，指示其它某个对象是否与此对象“相等”。</li>
<li>缺省的<code>equals(Object obj)</code>方法，<strong>默认进行对象地址比较</strong>。只要不是一个对象，结果必然为false。</li>
<li>如果希望对对象的内容进行比较，则可以重写<code>equals(Object obj)</code>方法。</li>
</ul>
<hr>
<h1 id="Objects"><a href="#Objects" class="headerlink" title="*  Objects"></a>*  Objects</h1><h2 id="1、包"><a href="#1、包" class="headerlink" title="1、包"></a>1、包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Objects;</span><br></pre></td></tr></table></figure>

<h2 id="2、解释说明"><a href="#2、解释说明" class="headerlink" title="2、解释说明"></a>2、解释说明</h2><blockquote>
<ol>
<li>一个工具类，提供了一些静态方法来操作对象</li>
<li>Objects类中的方法是 null-save（空指针安全的） 或 null-tolerant（容忍空指针的）。</li>
<li>用于计算对象的hashCode、返回对象的字符串表示形式、比较两个对象等。</li>
</ol>
</blockquote>
<ol>
<li><p>在比较两个对象时，Object类中的equals()方法容易抛出空指针异常，而Objects类中的equals()方法就优化了这个问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断2个对象是否相等</span></span><br><span class="line">Objects.equals(Object a, Object b)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="System"><a href="#System" class="headerlink" title="*    System"></a>*    System</h1><h2 id="1-包-1"><a href="#1-包-1" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.lang.System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">System</span> <span class="keyword">extends</span> <span class="title class_">Object</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-1"><a href="#2-解释说明-1" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><blockquote>
<p>System类中提供了大量的静态方法，可以获取与系统相关的信息或系统级操作。</p>
</blockquote>
<h2 id="3-成员方法-1"><a href="#3-成员方法-1" class="headerlink" title="3    成员方法"></a>3    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>currentTimeMillis()</code></td>
<td align="center"><code>long</code></td>
<td align="center">返回当前时间的毫秒值表现形式</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>arraycopy(Object src, int srcPos, Object dest, int destPos, int length)</code></td>
<td align="center"><code>void</code></td>
<td align="center">将数组中指定的数据拷贝到另一个数组中的指定位置上</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="4-练习"><a href="#4-练习" class="headerlink" title="4    练习"></a>4    练习</h2><ol>
<li><p>验证for循环打印数字1~9999所需要的时间（毫秒）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    验证for循环打印数字1~9999所需要的时间（毫秒）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 计时开始</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.循环打印1~9999</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">9999</span>; i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 计时结束</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 计算时间差(ms)</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">temp</span> <span class="operator">=</span> end - start;</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>将src数组中的前3个元素，复制到dest数组的前3个位置上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    验证for循环打印数字1~9999所需要的时间（毫秒）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建src数组和dest数组</span></span><br><span class="line">        <span class="type">int</span>[] src = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">       <span class="type">int</span>[] dest = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.复制</span></span><br><span class="line">        System.arraycopy(src,<span class="number">0</span>, dest, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 展示</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> e : src) &#123;</span><br><span class="line">            System.out.println(e);  <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> d : dest) &#123;</span><br><span class="line">            System.out.println(d);  <span class="comment">// [1,2,3,9,10]</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="包装类"><a href="#包装类" class="headerlink" title="*    包装类"></a>*    包装类</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1    概述"></a>1    概述</h2><blockquote>
<ul>
<li>Java中的数据类型可分为2类：基本类型 与 引用类型。</li>
<li>基本类型的优点是效率高，然而在很多情况下还是会创建对象使用，因为对象可以实现更多的功能。</li>
<li>如果想要让基本类型像对象一样操作，就可以使用基本类型对应的包装类。</li>
</ul>
</blockquote>
<h2 id="2-装箱与拆箱"><a href="#2-装箱与拆箱" class="headerlink" title="2    装箱与拆箱"></a>2    装箱与拆箱</h2><h3 id="2-1-装箱"><a href="#2-1-装箱" class="headerlink" title="2.1    装箱"></a>2.1    装箱</h3><ol>
<li>使用构造函数装箱</li>
<li>使用包装类中的<code>valueOf()</code>方法装箱。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用构造函数装箱</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">69</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用包装类中的`valueOf()`静态方法装箱。</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> Integer.valueOf(<span class="number">69</span>);</span><br></pre></td></tr></table></figure>



<h3 id="2-2-拆箱"><a href="#2-2-拆箱" class="headerlink" title="2.2    拆箱"></a>2.2    拆箱</h3><ul>
<li>使用<code>intValue()</code>方法拆箱</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> i.intValue();</span><br></pre></td></tr></table></figure>



<h3 id="2-3-自动装箱和自动拆箱"><a href="#2-3-自动装箱和自动拆箱" class="headerlink" title="2.3    自动装箱和自动拆箱"></a>2.3    自动装箱和自动拆箱</h3><ul>
<li>由于我们经常要做基本类型与包装类之间的转换，从JDK1.5之后，基本类型与包装类型的装箱、拆箱可以自动完成。</li>
</ul>
<h2 id="3-基本类型-与-字符串-之间的转换"><a href="#3-基本类型-与-字符串-之间的转换" class="headerlink" title="3    基本类型 与 字符串 之间的转换"></a>3    基本类型 与 字符串 之间的转换</h2><h3 id="3-1-基本类型–-gt-字符串"><a href="#3-1-基本类型–-gt-字符串" class="headerlink" title="3.1    基本类型–&gt;字符串"></a>3.1    基本类型–&gt;字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	基本类型--&gt;字符串：总共有3种方式。</span></span><br><span class="line"><span class="comment">	  1. 基本类型直接与字符串&quot;&quot;相连即可</span></span><br><span class="line"><span class="comment">	  2. toString()方法</span></span><br><span class="line"><span class="comment">	  3. String类中的静态方法valueOf()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="3-2-字符串–-gt-基本类型"><a href="#3-2-字符串–-gt-基本类型" class="headerlink" title="3.2    字符串–&gt; 基本类型"></a>3.2    字符串–&gt; 基本类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	String类型 --&gt; 基本类型：</span></span><br><span class="line"><span class="comment">	  除了Character类之外，其它所有的包装类都具有parseXxx静态方法可以将字符串参数转换为对应的基本类型。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>parseByte(String s)</code></td>
<td align="center"><code>byte</code></td>
<td align="center">将字符串参数转换为对应的byte基本类型</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>parseShort(String s)</code></td>
<td align="center"><code>short</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>parseInt(String s)</code></td>
<td align="center"><code>int</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>parseLong(String s)</code></td>
<td align="center"><code>long</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>parseFloat(String s)</code></td>
<td align="center"><code>float</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>parseDouble(String s)</code></td>
<td align="center"><code>double</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>parseBoolean(String s)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>如果字符串参数的内容无法正确转换为对应的基本类型，则会抛出<code>java.lang.NumberFormatException</code>。</li>
</ul>
<hr>
<h1 id="Sacnner"><a href="#Sacnner" class="headerlink" title="*    Sacnner"></a>*    Sacnner</h1><h2 id="1-包-2"><a href="#1-包-2" class="headerlink" title="1.    包"></a>1.    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util.Scanner</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Scanner</span> <span class="keyword">extends</span> <span class="title class_">Object</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;String&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-解释说明-2"><a href="#2-解释说明-2" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h2><ul>
<li>一个可以使用正则表达式来解析基本类型和字符串的<strong>简单文本扫描器</strong>。 </li>
</ul>
<h2 id="3-构造方法"><a href="#3-构造方法" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h2><table>
<thead>
<tr>
<th align="center">构造方法摘要</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>Scanner(File source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定文件扫描的。</td>
</tr>
<tr>
<td align="center"><code>Scanner(File source, String charsetName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(InputStream source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定的输入流扫描的。</td>
</tr>
<tr>
<td align="center"><code>Scanner(InputStream source, String charsetName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(Readable source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定源扫描的。</td>
</tr>
<tr>
<td align="center"><code>Scanner(ReadableByteChannel source)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(ReadableByteChannel source, String charsetName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><code>Scanner(String source)</code></td>
<td align="center">构造一个新的 <code>Scanner</code>，它生成的值是从指定字符串扫描的。</td>
</tr>
</tbody></table>
<ul>
<li><strong>System.in</strong>代表通过键盘录入数据。</li>
</ul>
<h2 id="4-成员方法"><a href="#4-成员方法" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h2><table>
<thead>
<tr>
<th align="center">编号</th>
<th align="center">方法</th>
<th align="center">返回值类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>hasNext()</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>hasNextInt()</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>next()</code></td>
<td align="center">String</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>nextInt()</code></td>
<td align="center">int</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>...</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="5-练习"><a href="#5-练习" class="headerlink" title="5. 练习"></a>5. 练习</h2><ol>
<li><p>键盘录入两个数据并求和。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建Scanner实例</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.键盘录入2个数据</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第1个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第2个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.求和</span></span><br><span class="line">        System.out.println(num1+num2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>键盘录入三个数据并获取最大值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 创建Scanner实例</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.键盘录入3个数据</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第1个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第2个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入第3个数据：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num3</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.求最大值</span></span><br><span class="line">        <span class="type">int</span> max;</span><br><span class="line">        <span class="keyword">if</span> (num1&gt;=num2)&#123;</span><br><span class="line">            max = num1&gt;=num3?num1:num3;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            max = num2&gt;=num3?num2:num3;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(max);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="Random"><a href="#Random" class="headerlink" title="*    Random"></a>*    Random</h1><h2 id="1-包-3"><a href="#1-包-3" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util.Random</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Random</span> <span class="keyword">extends</span> <span class="title class_">Object</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-3"><a href="#2-解释说明-3" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><ul>
<li>此类的实例用于生成伪随机数流。</li>
</ul>
<h2 id="3-构造方法-1"><a href="#3-构造方法-1" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><table>
<thead>
<tr>
<th align="center"><code>Random()</code></th>
<th align="center">创建一个新的随机数生成器。</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>Random(long seed)</code></td>
<td align="center">使用单个 <code>long</code> 种子创建一个新的随机数生成器。</td>
</tr>
</tbody></table>
<h2 id="4-成员方法-1"><a href="#4-成员方法-1" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>nextInt()</code></td>
<td align="center">int</td>
<td align="center">返回下一个伪随机数</td>
</tr>
<tr>
<td align="center"><code>next(int bits)</code></td>
<td align="center">int</td>
<td align="center">生成下一个伪随机数。</td>
</tr>
<tr>
<td align="center"><code>nextInt(int n)</code></td>
<td align="center">int</td>
<td align="center">返回一个伪随机数，范围是<code>[0,n)</code></td>
</tr>
<tr>
<td align="center"><code>nextDouble()</code></td>
<td align="center">double</td>
<td align="center">返回下一个伪随机数，范围是<code>[0.0, 1.0]</code></td>
</tr>
<tr>
<td align="center"><code>...</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="5-练习-1"><a href="#5-练习-1" class="headerlink" title="5    练习"></a>5    练习</h2><ol>
<li><p>获取1~n之间的随机数，包含n。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取1~n之间的随机数，包含n。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建Random类的实例</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.获取随机数[包含n]</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> random.nextInt(n+<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>猜数字小游戏。</p>
<ul>
<li>游戏开始时，会生成一个1~100之间的整数<code>number</code>。</li>
<li>玩家猜测一个数字<code>guessNumber</code>，会与<code>number</code>作比较，系统提示大了或者小了。</li>
<li>直到玩家猜中，游戏结束。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      猜数字小游戏。</span></span><br><span class="line"><span class="comment">        - 游戏开始时，会生成一个1~100之间的整数`number`。</span></span><br><span class="line"><span class="comment">        - 玩家猜测一个数字`guessNumber`，会与`number`作比较，系统提示大了或者小了。</span></span><br><span class="line"><span class="comment">        - 直到玩家猜中，游戏结束。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建Random类的实例,生成一个1~100之间的整数`number`</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> random.nextInt(<span class="number">101</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.1 创建Scanner类的实例，用于接收用户输入的数字</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 比较，提示</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 2.2 键盘录入玩家输入的数字`guessNumber`</span></span><br><span class="line">            System.out.println(<span class="string">&quot;请输入整数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">guessNumber</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (number&gt;guessNumber)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;猜小了&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (number&lt;guessNumber)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;猜大了&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;恭喜你猜中了！&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="String类"><a href="#String类" class="headerlink" title="*    String类"></a>*    String类</h1><h2 id="1-包-4"><a href="#1-包-4" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.String</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Comparable&lt;String&gt;, CharSequence</span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-4"><a href="#2-解释说明-4" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><ul>
<li><code>String</code> 类代表字符串。Java 程序中的所有字符串字面值（如 <code>&quot;abc&quot;</code> ）都作为此类的实例对象。</li>
</ul>
<h2 id="3-构造方法-2"><a href="#3-构造方法-2" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 无参构造</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 通过字符数组构造</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 通过字节数组构造</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(&#123;<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//......</span></span><br></pre></td></tr></table></figure>



<h2 id="4-特点"><a href="#4-特点" class="headerlink" title="4    特点"></a>4    特点</h2><ol>
<li><p><strong>字符串不可变</strong>；字符串的值在创建之后不能更改。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">s1 += <span class="string">&quot;d&quot;</span>;</span><br><span class="line">System.out.println(s1);	<span class="comment">// abcd</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	内存中有 “abc”， “abcd”两个对象，s1从指向 “abc” 变为了指向“abcd”</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
<li><p>因为String对象是不可变的，所以它们可以被共享。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	内存中只有一个&quot;abc&quot;对象被创建，同时被s1和s2z共享</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>&quot;abc&quot;</code>等效于<code>char[] data=&#123;&#39;a&#39;, &#39;b&#39;, &#39;c&#39;&#125;</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 等效于： </span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> data[] = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(data);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-成员方法-2"><a href="#4-成员方法-2" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>equals(Object anotherObj)</code></td>
<td align="center">boolean</td>
<td align="center">继承自Object</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>equalsIgnoreCase(String anotherStr)</code></td>
<td align="center">boolean</td>
<td align="center">将此字符串与指定字符串对象进行比较，忽略大小写</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>length()</code></td>
<td align="center">int</td>
<td align="center">返回字符串的长度</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>concat(String str)</code></td>
<td align="center">String</td>
<td align="center">拼接字符串，返回拼接结果</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>charAt(int index)</code></td>
<td align="center">char</td>
<td align="center">返回指定索引处的char值</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>indexOf(String str)</code></td>
<td align="center">int</td>
<td align="center">返回指定子字符串第一次出现在该字符串内的索引</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>subString(int beginIndex, int endIndex)</code></td>
<td align="center">String</td>
<td align="center">返回一个子字符串，<code>[beginIndex, endIndex)</code></td>
</tr>
<tr>
<td align="center">重载</td>
<td align="center"><code>subString(int beginIndex)</code></td>
<td align="center">String</td>
<td align="center">返回一个子字符串，<code>[beginIndex, ending]</code></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>toCharArray()</code></td>
<td align="center">char[]</td>
<td align="center">将此字符串转换为新的字符数组</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>getBytes()</code></td>
<td align="center">byte[]</td>
<td align="center">使用平台默认字符集将String字符串转换为字节数组</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>replace(CharSequence target, CharSequence replacement)</code></td>
<td align="center">String</td>
<td align="center">将与target匹配的字符串使用replacement字符串替换</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>split(String regex)</code></td>
<td align="center">String[]</td>
<td align="center">按regex拆分字符串，返回拆分后的字符串数组</td>
</tr>
</tbody></table>
<h2 id="5-练习-2"><a href="#5-练习-2" class="headerlink" title="5    练习"></a>5    练习</h2><h3 id="1-拼接字符串"><a href="#1-拼接字符串" class="headerlink" title="1.    拼接字符串"></a>1.    拼接字符串</h3><ul>
<li>定义一个方法，把数组<code>&#123;1,2,3&#125;</code>按照指定格式拼接成一个字符串。</li>
<li>格式参照如下：<code>[word1#word2#word3]</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    - 定义一个方法，把数组`&#123;1,2,3&#125;`按照指定格式拼接成一个字符串。</span></span><br><span class="line"><span class="comment">    - 格式参照如下：`[word1#word2#word3]`</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> arrToString(arr);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">arrToString</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;[&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 拼接字符串</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> e : arr) &#123;</span><br><span class="line">            str = str+e+<span class="string">&quot;#&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        str+=<span class="string">&quot;]&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="2-统计字符个数"><a href="#2-统计字符个数" class="headerlink" title="2    统计字符个数"></a>2    统计字符个数</h3><ul>
<li>键盘录入一个字符，统计字符串中大小写字母及数字字符的个数。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    键盘录入一个字符，统计字符串中大小写字母及数字字符的个数。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 键盘录入字符</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入一个字符&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> scanner.next();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 统计字符串中的大小写字母及数字字符的个数</span></span><br><span class="line">            <span class="comment">// 1&gt; 将字符串s转换为字符数组chars[]</span></span><br><span class="line">        <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">countNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">countUpper</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">countDown</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2&gt; 遍历字符数组，得到每一个字符</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;chars.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (chars[i]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; chars[i]&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                countNum++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(chars[i]&gt;=<span class="string">&#x27;a&#x27;</span> &amp;&amp; chars[i]&lt;=<span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">                countDown++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(chars[i]&gt;=<span class="string">&#x27;A&#x27;</span> &amp;&amp; chars[i]&lt;=<span class="string">&#x27;Z&#x27;</span>)&#123;</span><br><span class="line">                countUpper++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(countNum);</span><br><span class="line">        System.out.println(countDown);</span><br><span class="line">        System.out.println(countUpper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<hr>
<h1 id="StringBuilder类"><a href="#StringBuilder类" class="headerlink" title="*    StringBuilder类"></a>*    StringBuilder类</h1><h2 id="1-包-5"><a href="#1-包-5" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.lang.StringBuilder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. StringBuilder又称为可变字符序列，它是一个类似于String的字符串缓冲区，通过某些方法调用可以改变该序列的长	   度和内容。</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	2. StringBuilder是一个字符串缓冲区，它是一个容器。容器中可以装很多字符串，并且能够对其中的字符串进行各种操		作。</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	3. StringBuilder的内部拥有一个数组用来存放字符串内容，进行字符串拼接时，直接在数组中加入新内容。		   		StringBuilder会自动位数数组的扩容。【StringBuilder对象是可变的】</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">StringBuilder</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, CharSequence</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-5"><a href="#2-解释说明-5" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><h3 id="2-1-字符串拼接问题"><a href="#2-1-字符串拼接问题" class="headerlink" title="2.1    字符串拼接问题"></a>2.1    字符串拼接问题</h3><ul>
<li><p>由于String类的实例对象的内容不可改变，所以每当进行字符串拼接时，总是会在内存中创建一个新的对象用于存储拼接后的字符串。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">s += <span class="string">&quot; world&quot;</span>;</span><br><span class="line">System.out.println(s);	<span class="comment">// abcd</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	以上代码共产生了3个字符串。</span></span><br><span class="line"><span class="comment">        hello</span></span><br><span class="line"><span class="comment">         world</span></span><br><span class="line"><span class="comment">        hello world</span></span><br><span class="line"><span class="comment">    引用变量s首先指向hello对象，最终指向拼接出来的新字符串对象 hello world</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	  由此可知，如果对字符串进行拼接操作，每次拼接，都会构建一个新的String对象，既耗时、又浪费空间。</span></span><br><span class="line"><span class="comment">	为了解决这一问题，可以使用 java.lang.StringBuilder 类。</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-构造方法-3"><a href="#3-构造方法-3" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>StringBuilder()</code></td>
<td align="center">构造一个空的StringBuilder容器，初始容量为16个字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>StringBuilder(String str)</code></td>
<td align="center">构造一个字符串生成器，并初始化为指定的字符串内容。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建StringBuilder对象【容器】</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();    <span class="comment">// 容器为空</span></span><br><span class="line">        System.out.println(builder1);</span><br><span class="line"></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(builder2);   <span class="comment">// 容器中包含 &quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-成员方法-3"><a href="#4-成员方法-3" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>append(...)</code></td>
<td align="center"><code>StringBuilder</code></td>
<td align="center">添加<strong>任意类型数据</strong>的字符串形式，并返回当前对象自身。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>toString()</code></td>
<td align="center"><code>String</code></td>
<td align="center">将当前StringBuilder对象转换为String对象</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="1-append"><a href="#1-append" class="headerlink" title="1.    append()"></a>1.    append()</h4><ul>
<li><code>append()</code>方法具有多种重载形式，可以接收任意类型的参数。</li>
<li>任何数据作为参数都会将对应的字符串内容添加到StringBuilder容器中。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建StringBuilder对象【容器】</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();    <span class="comment">// 容器为空</span></span><br><span class="line">        <span class="comment">// 2. 调用append()方法</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder1</span> <span class="operator">=</span> builder.append(<span class="literal">true</span>).append(<span class="number">100</span>).append(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(builder==builder1);  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-toString"><a href="#2-toString" class="headerlink" title="2.    toString()"></a>2.    toString()</h4><ul>
<li>通过<code>toString()</code>方法，StringBuilder对象将会转换成为不可变的String对象。</li>
</ul>
<h2 id="5-练习-3"><a href="#5-练习-3" class="headerlink" title="5    练习"></a>5    练习</h2><h1 id="Math类"><a href="#Math类" class="headerlink" title="*    Math类"></a>*    Math类</h1><h2 id="1-包-6"><a href="#1-包-6" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Math</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Math</span> <span class="keyword">extends</span> <span class="title class_">Object</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	Math 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数。 </span></span><br><span class="line"><span class="comment">	其中所有的方法均为静态方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-6"><a href="#2-解释说明-6" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><h2 id="3-构造方法-4"><a href="#3-构造方法-4" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><h2 id="4-成员方法-4"><a href="#4-成员方法-4" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>abs(double a)</code></td>
<td align="center">double</td>
<td align="center">返回double值的绝对值</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>ceil(double a)</code></td>
<td align="center">double</td>
<td align="center">向上取整</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>floor(double a)</code></td>
<td align="center">double</td>
<td align="center">向下取整</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>round(double a)</code></td>
<td align="center">double</td>
<td align="center">四舍五入</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="5-练习-4"><a href="#5-练习-4" class="headerlink" title="5    练习"></a>5    练习</h2><ol>
<li><p>计算在<code>-10.8~5.9</code>之间，绝对值大于<code>6</code>或者小于<code>2.1</code>的整数有多少个？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    计算在`-10.8~5.9`之间，绝对值大于`6`或者小于`2.1`的整数有多少个？</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.定义最值</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">5.9</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">min</span> <span class="operator">=</span> -<span class="number">10.8</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 在范围内循环</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">// 定义计数器</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">double</span> i=Math.ceil(min); i&lt;=max; i++)&#123;</span><br><span class="line">            <span class="comment">// 获取绝对值并判断</span></span><br><span class="line">            <span class="keyword">if</span> ((Math.abs(i)&gt;<span class="number">6</span>)||(Math.abs(i))&lt;<span class="number">2.1</span>)&#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.输出</span></span><br><span class="line">        System.out.println(count);  <span class="comment">// 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id><a href="#" class="headerlink" title></a></h2><h1 id="时间日期类"><a href="#时间日期类" class="headerlink" title="* 时间日期类"></a>* 时间日期类</h1><h2 id="1-Date类"><a href="#1-Date类" class="headerlink" title="1.    Date类"></a>1.    Date类</h2><h3 id="1-包-7"><a href="#1-包-7" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	表示特定的瞬间，精确到毫秒。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Date</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Cloneable, Comparable&lt;Date&gt;;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-7"><a href="#2-解释说明-7" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-5"><a href="#3-构造方法-5" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>Date()</code></td>
<td align="center">分配 <code>Date</code> 对象并初始化此对象，返回当前系统时间。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Date(long date)</code></td>
<td align="center">分配 <code>Date</code> 对象并初始化此对象，返回从基准时间起经过指定毫秒数的时间。</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        System.out.println(date);   <span class="comment">// Sun Jun 21 11:34:02 CST 2020</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">100000</span>);</span><br><span class="line">        System.out.println(date2);  <span class="comment">// Thu Jan 01 08:01:40 CST 1970</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 在使用println()方法时，会自动调用Date类中的toString()方法。</span></span><br><span class="line"><span class="comment">	2. Date类对Object类中的toString()方法进行了覆盖重写，所以结果为指定的字符串。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="4-成员方法-5"><a href="#4-成员方法-5" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>getTime()</code></td>
<td align="center"><code>long</code></td>
<td align="center">把日期对象转换为对应的时间毫秒值</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>toString()</code></td>
<td align="center"><code>String</code></td>
<td align="center">把此 <code>Date</code> 对象转换为以下形式的 <code>String</code>： dow mon dd hh:mm:ss zzz  yyyy         【 <code>dow</code> 是一周中的某一天】【Date默认重写<code>toString()</code>方法】</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-5"><a href="#5-练习-5" class="headerlink" title="5    练习"></a>5    练习</h3><hr>
<h2 id="2-DateFormat类"><a href="#2-DateFormat类" class="headerlink" title="2.    DateFormat类"></a>2.    DateFormat类</h2><h3 id="1-包-8"><a href="#1-包-8" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.text.Format</span><br><span class="line">      继承者 java.text.DateFormat		[<span class="keyword">abstract</span>]</span><br><span class="line">    	继承者 java.text.SimpleDateFormat	</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 通过这个类可以帮助我们完成日期和文本之间的转换。</span></span><br><span class="line"><span class="comment">	2. 也就是可以在`Date对象`和`String对象`之间进行来回转换。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">DateFormat</span> <span class="keyword">extends</span> <span class="title class_">Format</span>;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-8"><a href="#2-解释说明-8" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="2-1-格式化"><a href="#2-1-格式化" class="headerlink" title="2.1    格式化"></a>2.1    格式化</h3><ul>
<li>按照指定的格式，从<code>Date</code>对象转换为<code>String</code>对象。</li>
</ul>
<h3 id="2-2-解析"><a href="#2-2-解析" class="headerlink" title="2.2    解析"></a>2.2    解析</h3><ul>
<li>按照指定的格式，从<code>String</code>对象转换为<code>Date</code>对象。</li>
</ul>
<h3 id="3-构造方法-6"><a href="#3-构造方法-6" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><ul>
<li><p>由于DateFormat为抽象类，不能直接使用，所以需要常用的子类：</p>
<p><code>java.text.SimpleDateFormat</code></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>SimpleDateFormat()</code></td>
<td align="center">默认格式的构造器。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>SimpleDateFormat(String pattern)</code></td>
<td align="center">指定格式的构造器类。</td>
</tr>
</tbody></table>
<h3 id="4-成员方法-6"><a href="#4-成员方法-6" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>format(Date date)</code></td>
<td align="center"><code>String</code></td>
<td align="center">将Date对象格式化为字符串</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>prase(String source)</code></td>
<td align="center"><code>Date</code></td>
<td align="center">将字符串解析为Date对象</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-6"><a href="#5-练习-6" class="headerlink" title="5    练习"></a>5    练习</h3><ol>
<li><p>请使用日期相关的API，计算出一个人已经出生了多少天？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    请使用日期相关的API，计算出一个人已经出生了多少天？</span></span><br><span class="line"><span class="comment">    已知：</span></span><br><span class="line"><span class="comment">        用户甲的出生日期为：1994年10月1日</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException &#123;</span><br><span class="line">        <span class="comment">// 1.已知用户甲的出生日期为：1994年10月1日</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">birthday</span> <span class="operator">=</span> <span class="string">&quot;1994年10月1日&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.将出生日期的字符串格式转换为Date类型。并获取出生日期的毫秒值</span></span><br><span class="line">        <span class="type">DateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy年MM月dd日&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date_bir</span> <span class="operator">=</span> df.parse(birthday);</span><br><span class="line">        <span class="type">long</span> <span class="variable">date_birTime</span> <span class="operator">=</span> date_bir.getTime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.获取当前日期的毫秒值，</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">nowTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.求差，并转换为天数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">tempTime</span> <span class="operator">=</span> nowTime - date_birTime;</span><br><span class="line">        <span class="type">long</span> <span class="variable">days</span> <span class="operator">=</span> tempTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br><span class="line">        System.out.println(days);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-Calendar类"><a href="#2-Calendar类" class="headerlink" title="2.    Calendar类"></a>2.    Calendar类</h2><h3 id="1-包-9"><a href="#1-包-9" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.util.Calendar	[<span class="keyword">abstract</span>]</span><br><span class="line">      继承者 java.util.GregorianCalendar;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	日历类。</span></span><br><span class="line"><span class="comment">	1. Calendar为抽象类。</span></span><br><span class="line"><span class="comment">	2. 由于语言敏感性，Calendar类在创建对象时并非用new创建，而是通过静态方法创建。如下：</span></span><br><span class="line"><span class="comment">		public static Calendar getInstance()</span></span><br><span class="line"><span class="comment">		 - 使用默认时区和语言环境获得一个日历</span></span><br><span class="line"><span class="comment">*/</span>    </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Calendar</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Cloneable, Comparable&lt;Calendar&gt;;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-9"><a href="#2-解释说明-9" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-7"><a href="#3-构造方法-7" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-7"><a href="#4-成员方法-7" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>get(int field)</code></td>
<td align="center"><code>int</code></td>
<td align="center">返回给定日历字段的值</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>set(int field, int value)</code></td>
<td align="center"><code>void</code></td>
<td align="center">将给定的日历字段设置为给定值</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>add(int field, int amount)</code></td>
<td align="center"><code>abstract</code></td>
<td align="center">根据日历的规则，为给定的日历字段添加或减去指定的时间量</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>getTime()</code></td>
<td align="center"><code>Date</code></td>
<td align="center">返回一个表示此Calendar时间值的Date对象</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】"><a href="#附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】" class="headerlink" title="附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】"></a>附1：Calendar类中提供很多成员常量，代表给定的日历字段【final】</h4><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">字段值</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>YEAR</code></td>
<td align="center">年</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>MONTH</code></td>
<td align="center">月（从0开始，可以+1使用）</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>DAY_OF_MONTH</code></td>
<td align="center">月中的天</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>HOUR</code></td>
<td align="center">时（12小时制）</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>HOUR_OF_DAY</code></td>
<td align="center">时（24小时制）</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>MINUTE</code></td>
<td align="center">分</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>SECOND</code></td>
<td align="center">秒</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>DAY_OF_WEEK</code></td>
<td align="center">周中的天（周日为1，可以-1使用）</td>
</tr>
</tbody></table>
<h3 id="5-练习-7"><a href="#5-练习-7" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="2-DateFormat类-1"><a href="#2-DateFormat类-1" class="headerlink" title="2.    DateFormat类"></a>2.    DateFormat类</h2><h3 id="1-包-10"><a href="#1-包-10" class="headerlink" title="1    包"></a>1    包</h3><h3 id="2-解释说明-10"><a href="#2-解释说明-10" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-8"><a href="#3-构造方法-8" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-8"><a href="#4-成员方法-8" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><h3 id="5-练习-8"><a href="#5-练习-8" class="headerlink" title="5    练习"></a>5    练习</h3><h1 id="容器"><a href="#容器" class="headerlink" title="*    容器"></a>*    容器</h1><p><img src="/2020/08/22/JavaSE%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84API/01JavaSE\课件\image\容器.png"></p>
<h2 id="1-数组"><a href="#1-数组" class="headerlink" title="1    数组"></a>1    数组</h2><h3 id="附1：Arrays类"><a href="#附1：Arrays类" class="headerlink" title="附1：Arrays类"></a>附1：Arrays类</h3><ul>
<li><strong>Arrays类——操作数组的工具类</strong></li>
</ul>
<h4 id="1-包-11"><a href="#1-包-11" class="headerlink" title="1    包"></a>1    包</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.util.Arrays</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Arraysextends</span> Object</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	此类包含用来操作数组（比如排序和搜索）的各种方法。</span></span><br><span class="line"><span class="comment">	其中所有的方法均为静态方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="2-解释说明-11"><a href="#2-解释说明-11" class="headerlink" title="2    解释说明"></a>2    解释说明</h4><h4 id="3-构造方法-9"><a href="#3-构造方法-9" class="headerlink" title="3    构造方法"></a>3    构造方法</h4><h4 id="4-成员方法-9"><a href="#4-成员方法-9" class="headerlink" title="4    成员方法"></a>4    成员方法</h4><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>toString()</code></td>
<td align="center">String</td>
<td align="center">返回指定数组内容的字符串表示形式</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>sort(int[] arr)</code></td>
<td align="center">void</td>
<td align="center">对指定的<code>int[] arr</code>数组升序排序</td>
</tr>
</tbody></table>
<h4 id="5-练习-9"><a href="#5-练习-9" class="headerlink" title="5    练习"></a>5    练习</h4><ol>
<li><p>将一个随机字符串中的所有字符升序排列，并倒序打印。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    将一个字符串中的所有字符升序排列，并倒序打印。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 定义一个字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;ASXcwaff8423&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 将字符串转换为chars数组。</span></span><br><span class="line">        <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 将chars数组中的所有字符升序排列。</span></span><br><span class="line">        Arrays.sort(chars);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 倒序打印</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=chars.length-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">            System.out.println(chars[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="附2：集合vs-数组"><a href="#附2：集合vs-数组" class="headerlink" title="附2：集合vs.数组"></a>附2：集合vs.数组</h3><ol>
<li>数组长度是固定的，集合长度是可变的。</li>
<li>数组只能存储基本数据类型的值，集合只能存储对象。</li>
<li>数组只能存储同一类型的元素，集合可以存储不同类型的对象。</li>
</ol>
<h2 id="2-Collection接口"><a href="#2-Collection接口" class="headerlink" title="2    Collection接口"></a>2    Collection接口</h2><h3 id="1-包-12"><a href="#1-包-12" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">java.util </span><br><span class="line">接口 Collection&lt;E&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 单列集合的根接口，用于存储一系列符合某种规则的元素。</span></span><br><span class="line"><span class="comment">	2. 它有两个重要的子接口，分别是：</span></span><br><span class="line"><span class="comment">		java.util.List	元素有序、可重复</span></span><br><span class="line"><span class="comment">		java.util.Set	元素无需、不可重复</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-12"><a href="#2-解释说明-12" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><h3 id="3-构造方法-10"><a href="#3-构造方法-10" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-10"><a href="#4-成员方法-10" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><ul>
<li>Collection接口中常用的共性方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="center"><code>add(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">把给定的对象添加到当前集合中</td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>remove(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">删除集合中指定的元素</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>clear()</code></td>
<td align="center"><code>void</code></td>
<td align="center">清空集合中所有的元素，但不删除集合</td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>size()</code></td>
<td align="center"><code>int</code></td>
<td align="center">返回当前集合元素的个数</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>isEmpty()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断集合是否为空</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>contains(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断集合中是否包含元素e</td>
</tr>
<tr>
<td align="center">其它</td>
<td align="center"><code>toArray()</code></td>
<td align="center"><code>Object[]</code></td>
<td align="center">把集合中的元素存储到数组中</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>       iterator()    </code></td>
<td align="center"><code>Iterator</code></td>
<td align="center">返回在此 collection 集合的迭代器。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-10"><a href="#5-练习-10" class="headerlink" title="5.    练习"></a>5.    练习</h3><h3 id="附1：Collections类"><a href="#附1：Collections类" class="headerlink" title="附1：Collections类"></a>附1：Collections类</h3><ul>
<li><strong>Collections类——操作Collection的工具类</strong></li>
</ul>
<hr>
<h2 id="3-List接口"><a href="#3-List接口" class="headerlink" title="3    List接口"></a>3    List接口</h2><h3 id="1-包-13"><a href="#1-包-13" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java.util.List</span><br><span class="line">    </span><br><span class="line">接口 List&lt;E&gt;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;E&gt;</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-13"><a href="#2-解释说明-13" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><ul>
<li><code>List接口</code>继承自<code>Collection接口</code>，是单列集合的一个重要分支。</li>
<li>我们一般把实现了<code>List接口</code>的对象称为<strong>List集合</strong>。</li>
<li>在List集合中允许出现重复的元素，</li>
<li>所有的元素是以一种线性的方式进行存储的，在程序中可以通过索引来访问集合中的指定元素。</li>
<li>List集合元素有序，即元素的存入顺序和取出顺序一致。</li>
</ul>
<h4 id="1-List接口的特点："><a href="#1-List接口的特点：" class="headerlink" title="1.    List接口的特点："></a>1.    List接口的特点：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 元素有序（存入和取出顺序一致）</span><br><span class="line"><span class="number">2.</span> 元素可重复</span><br><span class="line"><span class="number">3.</span> 带有索引，通过索引就可以操作集合中的元素。</span><br></pre></td></tr></table></figure>



<h3 id="3-构造方法-11"><a href="#3-构造方法-11" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-11"><a href="#4-成员方法-11" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><ul>
<li>List接口中特有的成员方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="center"><code>add(int index，E e)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>remove(int index）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">改</td>
<td align="center"><code>set(int index， E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>get(int index）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-11"><a href="#5-练习-11" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="4-ArrayList类"><a href="#4-ArrayList类" class="headerlink" title="4    ArrayList类"></a>4    ArrayList类</h2><h3 id="1-包-14"><a href="#1-包-14" class="headerlink" title="1.包"></a>1.包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.util.ArrayList&lt;E&gt;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; </span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; </span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, Serializable</span><br></pre></td></tr></table></figure>

<h3 id="2-解释说明-14"><a href="#2-解释说明-14" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h4 id="Part0"><a href="#Part0" class="headerlink" title="Part0:"></a>Part0:</h4><ol>
<li><p>ArrayList集合是List接口的一个实现类</p>
</li>
<li><p>ArrayList集合的特点:</p>
<ul>
<li>数据结构是 数组， </li>
<li>查找快，增删慢</li>
</ul>
</li>
</ol>
<h4 id="Part1"><a href="#Part1" class="headerlink" title="Part1:"></a>Part1:</h4><ul>
<li>我们想存储对象数据，可以选择的容器，可以是数组对象，但是数组的长度是固定的，无法适应数据变化的需求。</li>
<li>为了解决这个问题，Java提供了另一个容器<code>java.util.ArrayList</code>集合类，让我们可以更便捷的存储和操作对象数据</li>
</ul>
<h4 id="Part2"><a href="#Part2" class="headerlink" title="Part2:"></a>Part2:</h4><ul>
<li><code>java.util.ArrayList</code>是大小可变的数组的实现类，存储在内的数据成为元素。</li>
<li>此类提供一些方法类操作内部存储的元素。</li>
<li><code>ArrayList</code>中可不断添加元素，其大小也在自动增长。</li>
</ul>
<h4 id="Part3-ArrayList如何存储基本数据类型"><a href="#Part3-ArrayList如何存储基本数据类型" class="headerlink" title="Part3:  ArrayList如何存储基本数据类型"></a>Part3:  ArrayList如何存储基本数据类型</h4><ul>
<li><code>ArrayList</code>的实例不能存储基本类型数据，只能存储引用类型的数据。</li>
<li>但是存储基本类型的包装类型是可以的。</li>
<li>所以，想要存储基本类型数据，泛型<code>&lt;&gt;</code>中的数据类型，必须转换为包装类型后才能编写。</li>
</ul>
<h3 id="3-构造方法-12"><a href="#3-构造方法-12" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>ArrayList()</code></td>
<td align="center">构造一个初始容量为 10 的空列表</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>ArrayList(Collection&lt;? extends E&gt; c)</code></td>
<td align="center">构造一个包含指定 collection 的元素的列表。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>ArrayList(int initialCapacity)</code></td>
<td align="center">构造一个具有指定初始容量的空列表。</td>
</tr>
</tbody></table>
<h3 id="4-成员方法-12"><a href="#4-成员方法-12" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>add(E e)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的元素添加到此列表的尾部。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>add(int index, E e)</code></td>
<td align="center">void</td>
<td align="center">将指定的元素插入此列表中的指定位置。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>addAll(Collection&lt;? extends E&gt; c)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的集合添加到此列表的尾部。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>addAll(int index, Collection&lt;? extends E&gt; c)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的集合插入此列表中的指定位置。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>clear()</code></td>
<td align="center">void</td>
<td align="center">移除此列表中的所有元素。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>clone()</code></td>
<td align="center">Object</td>
<td align="center">返回此 <code>ArrayList</code> 实例浅拷贝</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>contains(Object o)</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>get(int index)</code></td>
<td align="center">E</td>
<td align="center">返回此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>indexOf(Object o)</code></td>
<td align="center">int</td>
<td align="center">返回此列表中首次出现的指定元素的索引，或如果此列表不包含元素，则返回 -1。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>lastIndexOf(Object o)</code></td>
<td align="center">int</td>
<td align="center">返回此列表中最后一次出现的指定元素的索引，或如果此列表不包含元素，则返回 -1。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>set(int index, E e)</code></td>
<td align="center">E</td>
<td align="center">用指定的元素替代此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>isEmpty()</code></td>
<td align="center">boolean</td>
<td align="center">如果此列表中没有元素，则返回 <code>true</code></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>remove(int index)</code></td>
<td align="center">E</td>
<td align="center">移除此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>remove(Object o)</code></td>
<td align="center">boolean</td>
<td align="center">移除此列表中首次出现的指定元素（如果存在）。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>removeRange(int fromIndex, int toIndex)</code></td>
<td align="center">void</td>
<td align="center">移除列表中索引在 <code>[fromIndex，toIndex)</code>之间的所有元素。</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>size()</code></td>
<td align="center">int</td>
<td align="center">返回此列表中的元素数。</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><code>toArray()</code></td>
<td align="center">Object[]</td>
<td align="center">返回包含此列表中所有元素的数组</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>toArray(T[] a)</code></td>
<td align="center">T[]</td>
<td align="center">返回包含此列表中所有元素的数组；返回数组的运行时类型是指定数组的运行时类型。</td>
</tr>
</tbody></table>
<h3 id="5-练习-12"><a href="#5-练习-12" class="headerlink" title="5    练习"></a>5    练习</h3><ol>
<li><p>生成6个1~33之间的随机整数，添加到集合，并遍历。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    生成6个1~33之间的随机整数，添加到集合，并遍历。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.生成6个1~33之间的随机整数,并添加到集合</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randNum</span> <span class="operator">=</span> random.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            list.add(randNum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 遍历集合</span></span><br><span class="line">        <span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义所有获取偶数元素集合的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定义所有获取偶数元素集合的方法.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.生成10个0~100之间的随机整数,并添加到集合list中</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randNum</span> <span class="operator">=</span> random.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            list.add(randNum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 获取集合中的所有偶数,添加到子集合subList中</span></span><br><span class="line">        ArrayList&lt;Integer&gt; subList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                subList.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.遍历subList子集合</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;subList.size(); i++)&#123;</span><br><span class="line">            System.out.println(subList.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="5-LinkedList类"><a href="#5-LinkedList类" class="headerlink" title="5    LinkedList类"></a>5    LinkedList类</h2><h3 id="1-包-15"><a href="#1-包-15" class="headerlink" title="1.包"></a>1.包</h3><h3 id="2-解释说明-15"><a href="#2-解释说明-15" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><ol>
<li>LinkedList集合是List接口的一个实现类.</li>
<li>LinkedList集合的特点：<ul>
<li>数据结构是 链表， </li>
<li>查找慢，增删快</li>
</ul>
</li>
</ol>
<h3 id="3-构造方法-13"><a href="#3-构造方法-13" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-13"><a href="#4-成员方法-13" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><ul>
<li>LinkedList中特有的成员方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">整</td>
<td align="center"><code>addFirst（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>addLast（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>push（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>removeFirst（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>removeLast（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>pop（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>getFirst（E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>getLast（E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-13"><a href="#5-练习-13" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="6-Set接口"><a href="#6-Set接口" class="headerlink" title="6    Set接口"></a>6    Set接口</h2><h3 id="1-包-16"><a href="#1-包-16" class="headerlink" title="1.包"></a>1.包</h3><h3 id="2-解释说明-16"><a href="#2-解释说明-16" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><h4 id="1-Set接口的特点"><a href="#1-Set接口的特点" class="headerlink" title="1.    Set接口的特点"></a>1.    Set接口的特点</h4><ol>
<li>元素无序</li>
<li>元素不可重复</li>
</ol>
<h3 id="3-构造方法-14"><a href="#3-构造方法-14" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-14"><a href="#4-成员方法-14" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><h3 id="5-练习-14"><a href="#5-练习-14" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="7-HashSet"><a href="#7-HashSet" class="headerlink" title="7    HashSet"></a>7    HashSet</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="8-TreeSet"><a href="#8-TreeSet" class="headerlink" title="8    TreeSet"></a>8    TreeSet</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="9-Map"><a href="#9-Map" class="headerlink" title="9    Map"></a>9    Map</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="10-HashMap"><a href="#10-HashMap" class="headerlink" title="10    HashMap"></a>10    HashMap</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="11-LinkedHashMap"><a href="#11-LinkedHashMap" class="headerlink" title="11    LinkedHashMap"></a>11    LinkedHashMap</h2><ol>
<li>包2.    解释说明3.    构造方法4.    成员方法5.    练习</li>
</ol>
<h2 id="12-Collections"><a href="#12-Collections" class="headerlink" title="12    Collections"></a>12    Collections</h2><h2 id="15-集合综合案例"><a href="#15-集合综合案例" class="headerlink" title="15    集合综合案例"></a>15    集合综合案例</h2><h3 id="1-需求"><a href="#1-需求" class="headerlink" title="1.    需求"></a>1.    需求</h3><ul>
<li><p>按照斗地主规则，完成洗牌、发牌的动作。</p>
</li>
<li><p>具体规则：</p>
<p>​    使用54张牌打乱顺序，三个玩家参与游戏，三人交替摸牌，每人17张牌，最后3张留作底牌。</p>
</li>
</ul>
<h3 id="2-分析"><a href="#2-分析" class="headerlink" title="2    分析"></a>2    分析</h3><ul>
<li>准备牌<ul>
<li>牌可以设计为一个ArrayList，每个字符串为一张牌。</li>
<li>每张牌由花色和数字两部分组成，我们可以使用花色集合与数字集合嵌套迭代完成每张牌的组装。</li>
<li>牌由Collections类的shuffle()方法进行随机排序。</li>
</ul>
</li>
<li>发牌<ul>
<li>将每个人的手牌以及底牌设计为ArrayList，将最后3张牌直接存放于底牌，剩余牌通过对3取模分别发给3个玩家。</li>
</ul>
</li>
<li>看牌<ul>
<li>直接打印每个集合。</li>
</ul>
</li>
</ul>
<h3 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3    代码实现"></a>3    代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    - 按照斗地主规则，完成洗牌、发牌的动作。</span></span><br><span class="line"><span class="comment">    - 具体规则：</span></span><br><span class="line"><span class="comment">        使用54张牌打乱顺序，三个玩家参与游戏，三人交替摸牌，每人17张牌，最后3张留作底牌。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 准备牌</span></span><br><span class="line">        List&lt;String&gt; poke = ready();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.发牌</span></span><br><span class="line">        send(poke);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">(List&lt;String&gt; poke)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 准备4个集合，分别用于存储四份牌</span></span><br><span class="line">        ArrayList&lt;String&gt; player1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; player2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; player3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; dipai = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 发牌(0~53)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;poke.size(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (i&gt;=<span class="number">51</span>)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">one</span> <span class="operator">=</span> poke.get(i);</span><br><span class="line">                dipai.add(one);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i&lt;<span class="number">51</span> &amp;&amp; i%<span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                player1.add(poke.get(i));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i&lt;<span class="number">51</span> &amp;&amp; i%<span class="number">3</span>==<span class="number">1</span>)&#123;</span><br><span class="line">                player2.add(poke.get(i));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i&lt;<span class="number">51</span> &amp;&amp; i%<span class="number">3</span>==<span class="number">2</span>)&#123;</span><br><span class="line">                player3.add(poke.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.看牌</span></span><br><span class="line">        System.out.println(player1);</span><br><span class="line">        System.out.println(player2);</span><br><span class="line">        System.out.println(player3);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">ready</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.创建一个集合，用于存储一副扑克牌</span></span><br><span class="line">        ArrayList&lt;String&gt; poke = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 2.把54张扑克牌分别添加到poke集合中</span></span><br><span class="line">        String[] colors = &#123;<span class="string">&quot;♡&quot;</span>,<span class="string">&quot;♤&quot;</span>,<span class="string">&quot;♣&quot;</span>,<span class="string">&quot;♢&quot;</span>&#125;;</span><br><span class="line">        String[] numbers = &#123;<span class="string">&quot;A&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;10&quot;</span>,<span class="string">&quot;J&quot;</span>,<span class="string">&quot;Q&quot;</span>,<span class="string">&quot;K&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String color : colors) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String number : numbers) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">one</span> <span class="operator">=</span> color+number;</span><br><span class="line">                poke.add(one);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        poke.add(<span class="string">&quot;小王&quot;</span>);</span><br><span class="line">        poke.add(<span class="string">&quot;大王&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 洗牌（打乱顺序）</span></span><br><span class="line">        Collections.shuffle(poke);</span><br><span class="line">        <span class="keyword">return</span> poke;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="Iterator接口"><a href="#Iterator接口" class="headerlink" title="*    Iterator接口"></a>*    Iterator接口</h1><h2 id="1-包-17"><a href="#1-包-17" class="headerlink" title="1    包"></a>1    包</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.util.Iterator&lt;E&gt;;	<span class="comment">// 接口</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	对 Collection集合 进行迭代的迭代器。</span></span><br><span class="line"><span class="comment">	  1. 想要遍历Collection结合，就要获取该集合的迭代器完成迭代操作。</span></span><br><span class="line"><span class="comment">	  2. 获取迭代器的方法：Collection接口中存在`public Iterator iterator()方法`</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;E&gt;</span><br></pre></td></tr></table></figure>



<h2 id="2-解释说明-17"><a href="#2-解释说明-17" class="headerlink" title="2    解释说明"></a>2    解释说明</h2><ul>
<li><strong>迭代</strong>：即Collection集合中元素的通用获取方式。<ol>
<li>在去除原宿之前要先判断集合中有没有元素，如果有，就把这个元素取出来，</li>
<li>继续判断下一个，如果有就再取出来。一直把集合中的所有元素全部取出来。</li>
</ol>
</li>
</ul>
<h3 id="2-1-增强for循环"><a href="#2-1-增强for循环" class="headerlink" title="2.1    增强for循环"></a>2.1    增强for循环</h3><ul>
<li><code>增强for</code>循环（也称<code>for...each循环</code>）是JDK1.5++推出的一个高级for循环，<strong>专门用来遍历集合和数组</strong>的。</li>
<li>它的*<em>内部原理其实是一个Iterator迭代器</em>***，所以在遍历的过程中，不能对集合中的元素进行增删操作。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(元素的数据类型 变量名 : Collection集合or数组)&#123;</span><br><span class="line">    <span class="comment">// 操作代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="3-构造方法-15"><a href="#3-构造方法-15" class="headerlink" title="3    构造方法"></a>3    构造方法</h2><h2 id="4-成员方法-15"><a href="#4-成员方法-15" class="headerlink" title="4    成员方法"></a>4    成员方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取迭代器</span></span><br><span class="line">Iterator&lt;E&gt; it = Collection对象.iterator()</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>hasNext()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">如果仍有元素可以迭代，则返回 <code>true</code></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>next()</code></td>
<td align="center"><code>E</code></td>
<td align="center">返回迭代的下一个元素</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>remove()</code></td>
<td align="center"><code>void</code></td>
<td align="center">从迭代器指向的 collection 中移除迭代器返回的最后一个元素（可选操作）</td>
</tr>
</tbody></table>
<h2 id="5-练习-15"><a href="#5-练习-15" class="headerlink" title="5    练习"></a>5    练习</h2><h1 id="线程"><a href="#线程" class="headerlink" title="*    线程"></a>*    线程</h1><h2 id="1-Thread类"><a href="#1-Thread类" class="headerlink" title="1.    Thread类"></a>1.    Thread类</h2><h3 id="1-包-18"><a href="#1-包-18" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.lang.Thread;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-18"><a href="#2-解释说明-18" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><ul>
<li>在Java中，每次程序运行至少启动2个线程，一个是<code>main线程</code>，一个是<code>垃圾回收线程</code>。</li>
<li>每当使用Java命令执行一个类的时候，就会启动一个JVM，每一个JVM其实就是在操作系统中启动了一个进程。</li>
</ul>
<h4 id="1-使用步骤"><a href="#1-使用步骤" class="headerlink" title="1.    使用步骤"></a>1.    使用步骤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 定义Thread类的子类，并重写该类的run()方法，该run()方法的方法体就代表了线程需要完成的任务，因此把run()方	 法称为线程执行体。</span><br><span class="line"><span class="number">2.</span> 创建Thread子类的实例，即创建了线程对象。</span><br><span class="line"><span class="number">3.</span> 调用线程对象的start()方法来启动该线程。</span><br></pre></td></tr></table></figure>



<h4 id="2-代码演示"><a href="#2-代码演示" class="headerlink" title="2.    代码演示"></a>2.    代码演示</h4><ul>
<li>定义Thread类的子类MyThread</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;线程1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义测试方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.定义新线程</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="comment">// 2.开启新线程</span></span><br><span class="line">        myThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="3-构造方法-16"><a href="#3-构造方法-16" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>Thread()</code></td>
<td align="center">分配一个新的线程对象</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Thread(String name)</code></td>
<td align="center">分配一个指定名字的新的线程对象</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>Thread(Runnable target)</code></td>
<td align="center">分配一个带有指定目标的新的线程对象</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>Thread(Runnable target, String name)</code></td>
<td align="center">分配一个带有指定目标的新的线程对象并指定名字</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="4-成员方法-16"><a href="#4-成员方法-16" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>getName()</code></td>
<td align="center"><code>String</code></td>
<td align="center">获取当前线程的名称</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>start()</code></td>
<td align="center"><code>void</code></td>
<td align="center">使当前线程开始执行，即JVM虚拟机开始调用此线程的<code>run()</code>方法</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>run()</code></td>
<td align="center"><code>void</code></td>
<td align="center">此线程要执行的任务代码</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>sleep(long millis)[static]</code></td>
<td align="center"><code>void</code></td>
<td align="center">使当前正在执行的线程暂停x毫秒</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>currentThread()[static]</code></td>
<td align="center"><code>Thread</code></td>
<td align="center">返回当前正在执行的线程对象的引用（地址）</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-16"><a href="#5-练习-16" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="2-Runnable接口"><a href="#2-Runnable接口" class="headerlink" title="2.    Runnable接口"></a>2.    Runnable接口</h2><ul>
<li>创建线程的方式总共有2种，一种是继承Thread类方式，一种是实现Runnable接口方式。</li>
</ul>
<h3 id="1-包-19"><a href="#1-包-19" class="headerlink" title="1.    包"></a>1.    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Runnable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Runnable</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-19"><a href="#2-解释说明-19" class="headerlink" title="2.    解释说明"></a>2.    解释说明</h3><h4 id="1-使用步骤-1"><a href="#1-使用步骤-1" class="headerlink" title="1.    使用步骤"></a>1.    使用步骤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 定义Runnable接口的实现类，并重写该接口中的run()方法，该run()方法同样是该线程的线程执行体；</span><br><span class="line"><span class="number">2.</span> 创建Runnable接口实现类的实例，并以此作为Thread类的target来创建Thread对象，该Thread对象才是真正的线程对象；</span><br><span class="line"><span class="number">3.</span> 调用线程对象的start()方法来启动线程。</span><br></pre></td></tr></table></figure>



<h4 id="2-演示代码"><a href="#2-演示代码" class="headerlink" title="2.    演示代码"></a>2.    演示代码</h4><ul>
<li>定义Runnable接口的实现类RunnableImpl</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RunnableImpl</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;线程执行体，子线程1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义测试方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.创建线程对象</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">RunnableImpl</span>(), <span class="string">&quot;子线程1&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.开启子线程</span></span><br><span class="line">        thread1.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-构造方法-17"><a href="#3-构造方法-17" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><h3 id="4-成员方法-17"><a href="#4-成员方法-17" class="headerlink" title="4.    成员方法"></a>4.    成员方法</h3><h3 id="5-练习-17"><a href="#5-练习-17" class="headerlink" title="5.    练习"></a>5.    练习</h3><h2 id="3-Thread和Runnable的区别"><a href="#3-Thread和Runnable的区别" class="headerlink" title="3    Thread和Runnable的区别"></a>3    Thread和Runnable的区别</h2><h3 id="3-1-实现Runnable接口比继承Thread类所具有的的优势"><a href="#3-1-实现Runnable接口比继承Thread类所具有的的优势" class="headerlink" title="3.1    实现Runnable接口比继承Thread类所具有的的优势"></a>3.1    实现Runnable接口比继承Thread类所具有的的优势</h3><ol>
<li>适合多个相同的程序代码的线程共享同一个资源。</li>
<li>可以避免Java中单继承的局限性。</li>
<li>增加程序的健壮性、实现解耦操作，代码可被多个线程共享，代码和线程独立。</li>
<li>线程池只能放入实现Runnable或Callable类线程，不能直接放入继承Thread的类。</li>
</ol>
<hr>
<h1 id="I-O系统"><a href="#I-O系统" class="headerlink" title="*    I/O系统"></a>*    I/O系统</h1><h2 id="1-File类"><a href="#1-File类" class="headerlink" title="1    File类"></a>1    File类</h2><h3 id="1-包-20"><a href="#1-包-20" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 文件和目录路径名的抽象表示形式。</span></span><br><span class="line"><span class="comment">	2. 主要用于文件和目录的创建、查找和删除等操作。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">File</span>;</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span>;</span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Serializable</span>, Comparable&lt;File&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-20"><a href="#2-解释说明-20" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="2-1-绝对路径和相对路径"><a href="#2-1-绝对路径和相对路径" class="headerlink" title="2.1    绝对路径和相对路径"></a>2.1    绝对路径和相对路径</h3><ul>
<li><strong>绝对路径</strong>：从盘符开始的路径。</li>
<li><strong>相对路径</strong>：相对于项目的路径。</li>
</ul>
<h3 id="3-构造方法-18"><a href="#3-构造方法-18" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>File(File parent, String child)</code></td>
<td align="center">根据 parent 抽象路径名和 child 路径名字符串创建一个新 <code>File</code> 实例。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>File(String parent, String child)</code></td>
<td align="center">根据 parent 路径名字符串和 child 路径名字符串创建一个新 <code>File</code> 实例</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>File(String pathname)</code></td>
<td align="center">通过将给定路径名字符串转换为抽象路径名来创建一个新 <code>File</code> 实例。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>File(URL uri)</code></td>
<td align="center">通过将给定的 <code>file:</code> URI 转换为一个抽象路径名来创建一个新的 <code>File</code> 实例</td>
</tr>
</tbody></table>
<ul>
<li>每一个File对象代表硬盘中真实存在的一个<strong>文件或目录</strong>。</li>
</ul>
<h3 id="4-成员方法-18"><a href="#4-成员方法-18" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>获取功能：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">1</td>
<td align="center"><code>getAbsolutePath()</code></td>
<td align="center"><code>String</code></td>
<td align="center">返回此File的绝对路径字符串</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>getPath()</code></td>
<td align="center"><code>String</code></td>
<td align="center">将此File转换为路径名字符串</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>getName()</code></td>
<td align="center"><code>String</code></td>
<td align="center">返回此File表示的文件或目录名称。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>length()</code></td>
<td align="center"><code>long</code></td>
<td align="center">返回此File表示的文件的长度[字节]。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>判断功能：</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>exists()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断此File表示的文件或目录是否存在</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>isDirectory()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断此File表示的是否为目录。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>isFile()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">判断此File表示的是否为文件</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>创建/删除功能</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>createNewFile()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">当且仅当具有该名称的文件尚不存在时，创建一个新的文件。</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>delete()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">删除此File表示的文件或目录。【如果此File表示目录，则目录必须为空才能被删除】</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>mkdir()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">创建此File表示的目录</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><code>mkdirs()</code></td>
<td align="center"><code>boolean</code></td>
<td align="center">创建此File表示的目录，包括任何必需但不存在的父目录。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>目录的遍历</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">13</td>
<td align="center"><code>list()</code></td>
<td align="center"><code>String[]</code></td>
<td align="center">返回一个String数组，返回该File目录中的所有子文件或目录。</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center"><code>listFiles()</code></td>
<td align="center"><code>File[]</code></td>
<td align="center">返回一个File数组，表示该File目录中的所有子文件或目录。</td>
</tr>
</tbody></table>
<h3 id="5-练习-18"><a href="#5-练习-18" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="2-OutputStream类"><a href="#2-OutputStream类" class="headerlink" title="2    OutputStream类"></a>2    OutputStream类</h2><ul>
<li><strong>OutputStream——字节输出流</strong></li>
</ul>
<h3 id="1-包-21"><a href="#1-包-21" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.OutputStream</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. java.io.OutputStream抽象类 是表示字节输出流的所有类的超类。</span></span><br><span class="line"><span class="comment">	2. 将指定的字节信息写出到目的地。</span></span><br><span class="line"><span class="comment">	3. 它定义了字节输出流的基本的公共的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">OutputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">OutputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-21"><a href="#2-解释说明-21" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><ul>
<li>一切文件数据（文本、图片、视频等）在存储时，都是以二进制数字的形式保存，都是一个个的字节【1B=8bit】。</li>
<li>所以，字节流可以传输任意文件数据。</li>
<li>在操作流的时候，我们要时刻明确，无论使用什么样的流对象，底层传输的始终为二进制数据。</li>
</ul>
<h3 id="3-构造方法-19"><a href="#3-构造方法-19" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-19"><a href="#4-成员方法-19" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center">关闭此输出流并释放与此流相关的任何系统资源</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>flush()</code></td>
<td align="center"><code>void</code></td>
<td align="center">刷新此输出流并强制任何缓冲的输出字节流被写出。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>write(byte[] b)</code></td>
<td align="center"><code>void</code></td>
<td align="center">将<code>b.length</code>字节从指定的字节数组写入此输出流。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>write(byte[] b, int off, int len)</code></td>
<td align="center"><code>void</code></td>
<td align="center">从指定的字节数组写入len字节，从偏移量off开始输出到此输出流</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>write()[abstract]</code></td>
<td align="center"><code>void</code></td>
<td align="center">将该字节输出流写出到目的地。</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-19"><a href="#5-练习-19" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="3-FileOutputStream类"><a href="#3-FileOutputStream类" class="headerlink" title="3.    FileOutputStream类"></a>3.    FileOutputStream类</h2><h3 id="1-包-22"><a href="#1-包-22" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.OutputStream</span><br><span class="line">      继承者 java.io.FileOutputStream;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. FileOutputStream类是文件输出流，用于将数据写出到文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileOutputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">OutputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-22"><a href="#2-解释说明-22" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-20"><a href="#3-构造方法-20" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileOutputStream(File file)</code></td>
<td align="center">创建文件输出流，并指定写出的目标文件。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileOutputStream(String name)</code></td>
<td align="center">创建文件输出流，并指定写出的目标地址。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>FileOutputStream(File file, boolean append)</code></td>
<td align="center">数据可追加续写</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>FileOutputStream(String name, boolean append)</code></td>
<td align="center">数据可追加续写</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>当你创建一个流对象时，必须传入一个文件路径。</li>
<li>该路径下，如果没有这个文件，会自动创建该文件。</li>
<li>如果有这个文件，会清空这个文件的数据。</li>
</ul>
<h3 id="4-成员方法-20"><a href="#4-成员方法-20" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>写出字节数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">1</td>
<td align="center"><code>write(int b)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>write(byte[] b)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>write(byte[] b, int off, int len)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><strong>数据的追加续写</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-20"><a href="#5-练习-20" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="4-InputStream类"><a href="#4-InputStream类" class="headerlink" title="4    InputStream类"></a>4    InputStream类</h2><h3 id="1-包-23"><a href="#1-包-23" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.InputStream</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. java.io.InputStream抽象类 是表示字节输入流的所有类的超类。</span></span><br><span class="line"><span class="comment">	2. 可以读取字节信息到内存中。</span></span><br><span class="line"><span class="comment">	3. 它定义了字节输入流的基本的公共的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">InputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">InputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-23"><a href="#2-解释说明-23" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-21"><a href="#3-构造方法-21" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-21"><a href="#4-成员方法-21" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center">关闭流，释放相关资源</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>read()[abstract]</code></td>
<td align="center"><code>int</code></td>
<td align="center">从输入流中读取数据的下一个字节</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>read(byte[] b)</code></td>
<td align="center"><code>int</code></td>
<td align="center">从输入流中读取一些字节数，并把它们存储到字节数组b中</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-21"><a href="#5-练习-21" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-FileInputStream类"><a href="#5-FileInputStream类" class="headerlink" title="5    FileInputStream类"></a>5    FileInputStream类</h2><h3 id="1-包-24"><a href="#1-包-24" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.InputStream</span><br><span class="line">      继承者 java.io.FileInputStream;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. FileInputStream类是文件输入流，用于从文件中读取字节。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileInputStream</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">InputStream</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-24"><a href="#2-解释说明-24" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-22"><a href="#3-构造方法-22" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileInputStream(File file)</code></td>
<td align="center">通过打开与实际文件的连接来创建一个FileInputStream</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileInputStream(String name)</code></td>
<td align="center">通过打开与实际文件的连接来创建一个FileInputStream</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>当你创建一个FileInputStream流对象时，必须传入一个文件路径。</li>
<li>该路径下，如果没有该文件，会抛出<code>FileNotFoundException</code></li>
</ul>
<h3 id="4-成员方法-22"><a href="#4-成员方法-22" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><strong>读取字节数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>read()</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次可以读取一个字节的数据，提升为int类型，读取到文件末尾，返回-1</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>read(byte[] b)</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次读取<code>b.length</code>个长度的字节到数组中，返回读取到的有效字节<strong>个数</strong>，读取到末尾时，返回-1</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-22"><a href="#5-练习-22" class="headerlink" title="5    练习"></a>5    练习</h3><ol>
<li><p>图片复制</p>
<p>从已有文件中读取字节，将该字节写出到另一个文件中。</p>
</li>
<li><p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    图片复制</span></span><br><span class="line"><span class="comment">    分析：先读后写</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.读</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;E:\\u盘\\CZ\\福蛋蛋.jpg&quot;</span>);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;./福蛋蛋.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">66</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(b)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// 2.写</span></span><br><span class="line">            outputStream.write(b);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3.释放资源</span></span><br><span class="line">        outputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="5-Reader"><a href="#5-Reader" class="headerlink" title="5    Reader"></a>5    Reader</h2><h3 id="1-包-25"><a href="#1-包-25" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.Reader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. java.io.Reader 抽象类是所有读取字符流类的超类。可以读取字符信息到内存中。</span></span><br><span class="line"><span class="comment">	2. 它定义了字符输入流的共性方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Reader</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Readable</span>, Closeable</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-25"><a href="#2-解释说明-25" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><ul>
<li>当使用字节流读取文本文件时，可能会出现一个小问题。</li>
<li>那就是遇到中文字符时，可能不会显示完整的字符。因为一个中文字符可能占用多个字节存储。</li>
<li>以Java提供一些字符流类，以字符为单位读写数据，专门用于处理文本文件。</li>
</ul>
<h3 id="3-构造方法-23"><a href="#3-构造方法-23" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-23"><a href="#4-成员方法-23" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>read()</code></td>
<td align="center"><code>int</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>read(char[] cbuf)</code></td>
<td align="center"><code>int</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">``</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-23"><a href="#5-练习-23" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-FileReader类"><a href="#5-FileReader类" class="headerlink" title="5    FileReader类"></a>5    FileReader类</h2><h3 id="1-包-26"><a href="#1-包-26" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.Reader</span><br><span class="line">      继承者 java.io.InputStreamReader</span><br><span class="line">          继承者 java.io.FileReader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 构造时使用系统默认的字符编码和默认字节缓冲区。</span></span><br><span class="line"><span class="comment">	2. 字符编码：字节与字符的对应规则。Windows系统的中文编码默认是GBK编码表。</span></span><br><span class="line"><span class="comment">	3. 字节缓冲区：一个字节数组，用来临时存储字节数据。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileReader</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">InputStreamReader</span></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-26"><a href="#2-解释说明-26" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-24"><a href="#3-构造方法-24" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileReader(File file)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileReader(String fileName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">``</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>当你创建一个流对象时，必须传图一个文件路径。</li>
</ul>
<h3 id="4-成员方法-24"><a href="#4-成员方法-24" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>读取字符数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>read()</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次读取一个字符的数据，提升为int型，读到文件末尾返回-1</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>read(char[], cbuf)</code></td>
<td align="center"><code>int</code></td>
<td align="center">每次读取<code>cbuf.length</code>个字符到数组中，返回读取到的字符个数，读取到末尾时返回-1.</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-24"><a href="#5-练习-24" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-Writer类"><a href="#5-Writer类" class="headerlink" title="5    Writer类"></a>5    Writer类</h2><h3 id="1-包-27"><a href="#1-包-27" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.io.Writer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 所有写出字符流的超类。将指定的字符信息写出到目的地。</span></span><br><span class="line"><span class="comment">	2. 定义了字符输出流的基本的共性的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Writer</span></span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Object</span></span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">Appendable</span>, Closeable, Flushable</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-27"><a href="#2-解释说明-27" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-25"><a href="#3-构造方法-25" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><h3 id="4-成员方法-25"><a href="#4-成员方法-25" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>write()</code></td>
<td align="center"><code>void</code></td>
<td align="center">写入单个字符</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>write(char[] cbuf)</code></td>
<td align="center"><code>void</code></td>
<td align="center">写入字符数组</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>write(char[] cbuf, int off, int len)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>write(String str)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>write(String str, int off, int len)</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>flush()</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>close()</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-25"><a href="#5-练习-25" class="headerlink" title="5    练习"></a>5    练习</h3><h2 id="5-FileWriter类"><a href="#5-FileWriter类" class="headerlink" title="5    FileWriter类"></a>5    FileWriter类</h2><h3 id="1-包-28"><a href="#1-包-28" class="headerlink" title="1    包"></a>1    包</h3><h3 id="2-解释说明-28"><a href="#2-解释说明-28" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-26"><a href="#3-构造方法-26" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>FileWriter(File file)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>FileWriter(String fileName)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>FileWriter(File file, boolean append)</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>FileWriter(String fileName, boolean append)</code></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="4-成员方法-26"><a href="#4-成员方法-26" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>写出数据</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(int b)</code></td>
<td align="center"></td>
<td align="center">每次可以写出一个字符数据</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(char[] cbuf)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(char[] cbuf, int off, int len)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(String str)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>write(String str, int off, int len)</code></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><strong>关闭和刷新</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>flush()</code></td>
<td align="center"></td>
<td align="center">刷新缓冲区，流对象可以继续使用</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>close()</code></td>
<td align="center"></td>
<td align="center">先刷新缓冲区，然后通知系统释放资源</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-26"><a href="#5-练习-26" class="headerlink" title="5    练习"></a>5    练习</h3><h3 id="-1"><a href="#-1" class="headerlink" title></a></h3><h3 id="-2"><a href="#-2" class="headerlink" title></a></h3><hr>
<h1 id="属性集"><a href="#属性集" class="headerlink" title="*    属性集"></a>*    属性集</h1><h2 id="1-Properties类"><a href="#1-Properties类" class="headerlink" title="1    Properties类"></a>1    Properties类</h2><h3 id="1-包-29"><a href="#1-包-29" class="headerlink" title="1    包"></a>1    包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Object</span><br><span class="line">  继承者 java.util.Dictionary&lt;K,V&gt;</span><br><span class="line">      继承者 java.util.Hashtable&lt;Object,Object&gt;</span><br><span class="line">          继承者 java.util.Properties;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. Properties类表示一个持久的属性集。</span></span><br><span class="line"><span class="comment">	2. 它使用键值对结构存储数据，每个键及其对应的值都是一个字符串。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Properties</span>;</span><br><span class="line"><span class="keyword">extends</span> <span class="title class_">Hashtable</span>&lt;Object,Object&gt;</span><br></pre></td></tr></table></figure>



<h3 id="2-解释说明-29"><a href="#2-解释说明-29" class="headerlink" title="2    解释说明"></a>2    解释说明</h3><h3 id="3-构造方法-27"><a href="#3-构造方法-27" class="headerlink" title="3    构造方法"></a>3    构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">构造方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>Properties()</code></td>
<td align="center">创建一个空的属性列表</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Properties(Properties default)</code></td>
<td align="center">创建一个带有指定默认值的空属性列表</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="4-成员方法-27"><a href="#4-成员方法-27" class="headerlink" title="4    成员方法"></a>4    成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>setProperties(String key, String value)</code></td>
<td align="center"><code>Object</code></td>
<td align="center">保存一对属性</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>getProperties(String key)</code></td>
<td align="center"><code>String</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>stringPropertyNames()</code></td>
<td align="center"><code>Set&lt;String&gt;</code></td>
<td align="center">获取所有键的名称的集合</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>load(InputStream inStream)</code></td>
<td align="center"><code>void</code></td>
<td align="center">从字节输入流中获取键值对</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">`</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">``</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="5-练习-27"><a href="#5-练习-27" class="headerlink" title="5    练习"></a>5    练习</h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/20/%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/20/%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url">反射</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-20 10:08:25" itemprop="dateCreated datePublished" datetime="2020-08-20T10:08:25+08:00">2020-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-06-27 16:36:20" itemprop="dateModified" datetime="2022-06-27T16:36:20+08:00">2022-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-类的加载、连接和初始化"><a href="#1-类的加载、连接和初始化" class="headerlink" title="1    类的加载、连接和初始化"></a>1    类的加载、连接和初始化</h1><p><strong>类加载的时机</strong></p>
<p>应用程序（进程）可以在第一次使用某个类时加载该类，也可以使用预加载机制提前加载某个类。</p>
<h2 id="1-1-JVM和类"><a href="#1-1-JVM和类" class="headerlink" title="1.1    JVM和类"></a>1.1    JVM和类</h2><p>运行某个Java程序时会启动一个Java虚拟机<strong>进程</strong>，不管该Java进程有多么复杂，该进程启动了多少个<strong>线程</strong>，它们都处于Java虚拟机进程里。也就是说，同一个JVM的所有线程、所有变量都处于同一个进程里，它们都使用<strong>该JVM进程的内存区</strong>。当系统出现以下几种情况时，JVM进程将被终止：</p>
<ul>
<li>程序运行到最后正常结束。</li>
<li>程序执行过程中遇到了未捕获的异常或错误而结束。</li>
<li>程序运行到使用了<code>System.exit()</code>或<code>Runtime.getRuntime().exit()</code>方法的代码处结束程序。</li>
<li>程序所在的平台强制结束了JVM进程。</li>
</ul>
<p>从上面的介绍可以看出，当Java程序运行结束时，JVM进程结束，该程序在内存中的状态将会丢失。下面以类的静态变量来说明这个问题。</p>
<ol>
<li>先定义一个包含静态变量的类。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">7</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>定义一个类：创建A类实例，并访问A对象的静态变量a。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ATest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        a.a++;</span><br><span class="line">        System.out.println(a.a);	<span class="comment">// 8</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>下面程序也创建A对象，并访问其变量a的值</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ATest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        System.out.println(b.a);	<span class="comment">// 7</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在ATest1.java程序中创建了A类的实例，并让该实例的静态变量a的值自增1，程序输出的结果为8，这是显而易见的。关键是运行第2个程序ATest2时，程序再次创建了A对象，并输出A对象静态变量a的值，此时a的值是多少呢？</p>
<p>相信很多读者会毫不犹豫的认为是8，因为A类里面的a变量是静态变量，同一个类的所有实例的静态变量共享同一块内存区，因为第一次运行时改变了第一个A实例的a变量，所以第二次运行时第二个A实例的a变量也将受到影响。</p>
<p>实际上结果依然是7，而不是8。这是因为ATest1和Atest2是两次运行JVM进程，第一次运行JVM结束后，它对A类所做的修改将全部丢失——第2次运行JVM时将再次重新初始化A类。两次运行的JVM程序处于两个不同的JVM进程中，两个JVM之间并不会共享数据。</p>
<h2 id="1-2-类的加载"><a href="#1-2-类的加载" class="headerlink" title="1.2    类的加载"></a>1.2    类的加载</h2><p>当程序主动使用某个类时，如果该类还未被加载到内存中，则系统会通过<strong>加载、链接、初始化</strong>三个步骤将该类加载到内存中。正常情况下，JVM 会连续完成这三个步骤，所以有时候也把这三个步骤统称为类加载或类初始化。</p>
<p>实际上，<strong>类加载</strong>指的是将磁盘上的 <code>.class</code> 文件读入 JVM 内存，并为之创建一个<code>java.lang.Class</code>对象。也就是说，运行中的程序中在使用任何类时，JVM 内存中一定会存在一个该类的<code>java.lang.Class</code>对象。</p>
<p>类的加载由类加载器完成，类加载器通常由 JVM 提供。当然，Java 也支持通过继承 ClassLoader 类来创建自定义类加载器。类加载器是所有程序运行的基础（将二进制文件加载进内存形成 Class 对象）。</p>
<p>使用不同的类加载器，可以从不同的数据源加载类的二进制数据。通常有如下几种来源：</p>
<ul>
<li>从开发人员编写的本地项目文件中加载 <code>.class</code> 文件。</li>
<li>从引入的 JAR 包中加载 <code>.class</code> 文件（这其实也是从本地加载 <code>.class</code> 文件）。</li>
<li>通过网络加载 class 文件。</li>
</ul>
<p><strong>类加载器可以无需等到“首次使用某个类时才加载该类，Java虚拟机允许预先加载某些类。</strong></p>
<hr>
<h2 id="1-3-类的链接"><a href="#1-3-类的链接" class="headerlink" title="1.3    类的链接"></a>1.3    类的链接</h2><p>当类被加载进 JVM 内存后，虚拟机会通过一系列步骤为其生成对应的 Class 对象，接着会进入链接阶段。链接阶段负责把类的二进制数据合并到 JRE 中。类连接又可以分为如下3个阶段：</p>
<ol>
<li>验证：验证阶段用于检验被加载的类是否有正确的内部结构，是否和其它类协调一致。</li>
<li>准备：类准备阶段则负责为类的静态变量分配内存，并设置默认初始值。</li>
<li>解析：将类的二进制数据中的符号引用替换成直接引用。</li>
</ol>
<hr>
<h2 id="1-4-类的初始化"><a href="#1-4-类的初始化" class="headerlink" title="1.4    类的初始化"></a>1.4    类的初始化</h2><p>类的初始化阶段，主要就是对类中的静态变量进行<strong>显式初始化</strong>。为类中的静态变量指定初始化值的方式有2种：</p>
<ol>
<li>声明静态变量时指定初始值。</li>
<li>使用静态代码块为静态变量指定初始值。</li>
</ol>
<p>如果不为静态变量指定初始值，JVM 会采用对应数据类型的默认零值作为该静态变量的初始值。</p>
<p>JVM初始化一个类包含如下几个步骤：</p>
<ol>
<li><p>若这个类还没有被加载和链接，则执行加载和链接步骤。</p>
</li>
<li><p>若该类的父类还没有被初始化，则先初始化其父类，以此类推。所以 JVM 最先初始化的总是<code>java.lang.Object</code> 类。</p>
</li>
<li><p>假设类中有初始化语句，则系统一次执行这些初始化语句。（如赋初始值等）</p>
</li>
</ol>
<h3 id="1-4-1-类的初始化时机"><a href="#1-4-1-类的初始化时机" class="headerlink" title="1.4.1    类的初始化时机"></a>1.4.1    类的初始化时机</h3><p>当 Java 程序首次通过如下方式来使用某个类（或接口）时，虚拟机就会初始化该类（或接口）。</p>
<ol>
<li>创建类的实例。包括：<ul>
<li>使用new创建实例。</li>
<li>通过反射来创建实例</li>
<li>通过反序列化来创建实例</li>
</ul>
</li>
<li>调用某个类的静态方法。</li>
<li>访问某个类（或接口）的静态变量，或为该静态变量赋值。</li>
<li>使用反射方式来创建某个类（或接口）对应的<code>java.lang.Class</code>对象。</li>
<li>初始化某个类的子类。</li>
</ol>
<blockquote>
<p>  <strong>Tip</strong></p>
</blockquote>
<p><strong>case1：</strong>对 于一个 final 修饰的静态变量，该变量的值在编译时就可以确定下来，那么这个变量就相当于一个“常量”。Java 编译器会在编译时直接把这个变量出现的地方替换成常量值，<strong>因此即使程序访问该变量，也不会导致该类的初始化</strong>。如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;HelloWord&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(Test1.str);	<span class="comment">// 访问被 final static 修饰的变量不会导致类初始化（就相当于访问一个常量，自然不会导致类初始化了）</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="2-初识反射"><a href="#2-初识反射" class="headerlink" title="2 初识反射"></a>2 初识反射</h1><h2 id="2-1-编译时类型-amp-运行时类型"><a href="#2-1-编译时类型-amp-运行时类型" class="headerlink" title="2.1 编译时类型 &amp; 运行时类型"></a>2.1 编译时类型 &amp; 运行时类型</h2><p><strong>编译时类型</strong>和<strong>运行时类型</strong>是Java“多态”语法的一种体现。比如下面这行代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br></pre></td></tr></table></figure>

<p>这行代码会创建一个实例对象 person，该对象的编译时类型为 Person ，运行时类型为 Student。</p>
<p>还有更极端的情况，程序中的某些方法在运行时会收到外部传入的一个对象，该对象的编译时类型是 Object ，但在运行时又需要调用对象区分于 Object 类中的某些方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">    <span class="comment">// obj.setUsername(&quot;张三&quot;); // false</span></span><br><span class="line">    ((Person)obj).setUsername(<span class="string">&quot;张三&quot;</span>); <span class="comment">// OK</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在我们的程序中，这种“一个对象表现出两种类型”的情况非常多。那么，虚拟机是如何在程序运行时发现对象的真真实类型的呢？解决这个问题的思路主要有两种：</p>
<ul>
<li><p>第一种思路就是：让程序在编译时就能知道对象的真实类型。这时在虚拟机内存中创建的对象的类型就是最终需要使用的类型。比如在编译时通过类型强制转换声明对象的最终类型。</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">    ((Person)obj).setUsername(<span class="string">&quot;张三&quot;</span>); <span class="comment">// 类型强制转换</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>  第二种思路就是：<strong>编译时根本无法知道某个对象的最终类型，程序只能在运行时通过调用某些方法来获取对象的真实类型。</strong>这就必须使用反射。</p>
</li>
</ul>
<h2 id="2-2-什么是反射"><a href="#2-2-什么是反射" class="headerlink" title="2.2    什么是反射"></a>2.2    什么是反射</h2><blockquote>
<p><strong>定义：</strong></p>
</blockquote>
<p>Reflection（反射）是一门语言是否是动态语言的关键点。</p>
<p><strong>反射机制允许程序在运行时借助于 Reflection API 取得任何类的元数据信息，并能直接操作任意对象的内部属性及方法。</strong></p>
<p>Java 中反射相关的 API 都保存在 <code>java.lang.reflect</code> 包下。</p>
<blockquote>
<p><strong>解释：</strong></p>
</blockquote>
<p>Java 中的反射就是：在 Java 程序运行的过程中：</p>
<ul>
<li>对于任意一个类，都能知道这个类的所有属性和方法；</li>
<li>对于任意一个对象，都能调用它的属性和方法</li>
</ul>
<p>这种<strong>动态获取类信息</strong>和<strong>动态调用对象方法</strong>的功能称为 Java 的反射机制。之所以强调属性和方法是因为这是开发者最为关注的2个部分，实际上通过反射，不仅仅可以获取类的属性、方法，还可以获取类的父类、接口、包等信息。</p>
<blockquote>
<p>  <strong>静态调用和动态调用：</strong></p>
</blockquote>
<ul>
<li><strong>静态调用</strong>：在<code>.java</code>文件中<strong>显式调用</strong>对象方法或获取类的信息。</li>
<li><strong>动态调用</strong>：在 JVM 运行时期，通过反射机制调用类/对象中的方法或获取类的信息。</li>
<li>  动态调用的好处：将编译期异常转移到运行期异常，降低耦合度。</li>
</ul>
<hr>
<h2 id="2-3-反射机制能提供的功能"><a href="#2-3-反射机制能提供的功能" class="headerlink" title="2.3    反射机制能提供的功能"></a>2.3    反射机制能提供的功能</h2><ul>
<li>在运行时判断任意一个对象所属的类（包括它的最终类类型和父类类型）</li>
<li>在运行时构造任意一个类的实例对象</li>
<li>在运行时判断任意一个类所具有的成员变量和方法</li>
<li>在运行时获取泛型信息</li>
<li>在运行时调用任意一个对象的成员变量和方法</li>
<li>在运行时处理注解</li>
<li>生成动态代理。</li>
</ul>
<h2 id="2-4-相关-API"><a href="#2-4-相关-API" class="headerlink" title="2.4    相关 API"></a>2.4    相关 API</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Class: <span class="comment">// 反射的源头</span></span><br><span class="line">java.lang.reflect.Method</span><br><span class="line">java.lang.reflect.Field</span><br><span class="line">java.lang.reflect.Constructor</span><br><span class="line">....</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="3-Java代码在计算机中经历的三个阶段"><a href="#3-Java代码在计算机中经历的三个阶段" class="headerlink" title="3    Java代码在计算机中经历的三个阶段"></a>3    Java代码在计算机中经历的三个阶段</h1><p><img src="/2020/08/20/%E5%8F%8D%E5%B0%84/Java%E4%BB%A3%E7%A0%81%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5.bmp"></p>
<p><strong>一、源代码阶段（.java/.class）</strong></p>
<p>这一阶段数据都保存在本地磁盘上。我们编写好代码之后，运行 <code>javac</code> 命令将 <code>Person.java</code> 文件编译为 <code>Person.class</code> 二进制文件，这两个文件都保存在本地磁盘上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 1、成员变量：</span></span><br><span class="line">    <span class="keyword">private</span> String name;	</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">// 2、构造方法：</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;.....&#125;</span><br><span class="line">    <span class="comment">// 3、普通方法： </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 4、其它</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>二、Class 类对象阶段[反射]</strong></p>
<blockquote>
<p><strong>Class 类对象阶段正是执行反射操作的阶段，因为运行时程序使用的一般都是某个类的对象实例，而 Class 类对象阶段可以理解为一个类成为实例对象前的一个准备阶段。所以在这个阶段还可以对要创建的实例对象进行一系列修改或增强。</strong></p>
</blockquote>
<p><code>Person.class</code> 字节码文件会被 ClassLoader 加载到虚拟机内存中，形成一个 Class 对象（同时会先将 Person 类的所有父类 Class 对象加载到内存中），该对象中保存了 Person 类的所有信息。比如：</p>
<ul>
<li>  将 Person 类的每个成员变量封装为 <strong>Field 对象</strong>，并存入 Field[] 数组中。</li>
<li>  将 Person 类的每个普通方法封装为 <strong>Method 对象</strong>，并存入 Method[] 数组中。</li>
<li>  将 Person 类的每个构造方法封装为 <strong>Constructor 对象</strong>，并存入 Constructor[] 数组中。</li>
<li>  ……</li>
</ul>
<p>这一阶段 Person 的 Class 对象整体仍然是一个对象，但是其中的成员变量、成员方法、普通方法等也分别被封装成了一个个的对象。</p>
<p>这一阶段是在<strong>虚拟机内存</strong>中进行的。</p>
<blockquote>
<p>  与 Java 反射相关的类：</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">类名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Class</code></td>
<td align="left">代表类对象，在运行的Java程序中表示类或接口</td>
</tr>
<tr>
<td align="left"><code>Field</code></td>
<td align="left">代表类的属性</td>
</tr>
<tr>
<td align="left"><code>Method</code></td>
<td align="left">代表类中的普通方法</td>
</tr>
<tr>
<td align="left"><code>Constructor</code></td>
<td align="left">代表类中的构造方法</td>
</tr>
</tbody></table>
<hr>
<p><strong>三、运行时阶段（Runtime）</strong></p>
<ul>
<li>运行时阶段（Runtime）的主要功能就是：将 Class 类转换为实例对象。</li>
<li>这一阶段也在内存中进行。</li>
</ul>
<hr>
<h1 id="4-常用方法"><a href="#4-常用方法" class="headerlink" title="4 常用方法"></a>4 常用方法</h1><h2 id="4-1-获取Class类对象的方法"><a href="#4-1-获取Class类对象的方法" class="headerlink" title="4.1 获取Class类对象的方法"></a>4.1 获取Class类对象的方法</h2><ul>
<li>获取的是内存中的 <strong>Class类对象</strong></li>
<li>同一个字节码文件，即 <code>.class</code> 文件，在一次程序运行的过程中，只会被加载一次。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>Class.forName(&quot;全限定类名&quot;)</code></td>
<td align="left">将字节码文件加载进内存，返回Class类对象</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>类名.class</code></td>
<td align="left">通过类名获取Class对象</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><code>对象名.getClass()</code></td>
<td align="left"><code>getClass()</code>方法是Object根类中的方法</td>
</tr>
</tbody></table>
<h2 id="4-2-Class类对象中的方法"><a href="#4-2-Class类对象中的方法" class="headerlink" title="4.2 Class类对象中的方法"></a>4.2 Class类对象中的方法</h2><p><strong>获取成员变量对象</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getFields()</code></td>
<td align="left"><code>Filed[]</code></td>
<td align="left">获取所有public修饰的成员变量对象</td>
</tr>
<tr>
<td align="left"><code>getfield(String name)</code></td>
<td align="left"><code>Field</code></td>
<td align="left">根据名称获取被public修饰的成员变量对象</td>
</tr>
<tr>
<td align="left"><code>getDeclaredFields()</code></td>
<td align="left"><code>Filed[]</code></td>
<td align="left">获取所有的成员变量对象，不考虑修饰符</td>
</tr>
<tr>
<td align="left"><code>getDeclaredField(String name)</code></td>
<td align="left"><code>Field</code></td>
<td align="left">获取指定名称的成员变量对象</td>
</tr>
</tbody></table>
<p><strong>获取构造方法对象</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getConstructors()</code></td>
<td align="left"><code>Constructor&lt;?&gt;[]</code></td>
<td align="left">获取public修饰的所有构造函数对象</td>
</tr>
<tr>
<td align="left"><code>Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Constructor&lt;T&gt;</code></td>
<td align="left">根据构造函数的入参类型获取public修饰的构造函数对象</td>
</tr>
<tr>
<td align="left"><code>getDeclaredConstructors()</code></td>
<td align="left"><code>Constructor&lt;?&gt;[]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Constructor&lt;T&gt;</code></td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>获取成员方法对象</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getMethods()</code></td>
<td align="left"><code>Method[]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Method</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getDeclaredMethods()</code></td>
<td align="left"><code>Method[]</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td>
<td align="left"><code>Method</code></td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>其它</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>getName()</code></td>
<td align="left"><code>String</code></td>
<td align="left">获取全限定类名</td>
</tr>
<tr>
<td align="left"><code>newInstance()</code></td>
<td align="left"><strong>Object</strong></td>
<td align="left">创建一个空参对象</td>
</tr>
<tr>
<td align="left"><code>getClassLoader()</code></td>
<td align="left"><code>ClassLoader</code></td>
<td align="left">返回该类的类加载器</td>
</tr>
</tbody></table>
<hr>
<h2 id="4-3-Field-Constructor-Method-对象中的方法"><a href="#4-3-Field-Constructor-Method-对象中的方法" class="headerlink" title="4.3 Field/Constructor/Method 对象中的方法"></a>4.3 Field/Constructor/Method 对象中的方法</h2><h3 id="Field对象"><a href="#Field对象" class="headerlink" title="Field对象"></a>Field对象</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>set(Object obj, Object value)</code></td>
<td align="left">void</td>
<td align="left">设置值</td>
</tr>
<tr>
<td align="left"><code>get(Object obj)</code></td>
<td align="left">Object</td>
<td align="left">获取值</td>
</tr>
<tr>
<td align="left"><code>setAccessible(true)</code></td>
<td align="left">void</td>
<td align="left">忽略访问权限修饰符的安全检查【暴力反射】</td>
</tr>
</tbody></table>
<h3 id="Constructor对象"><a href="#Constructor对象" class="headerlink" title="Constructor对象"></a>Constructor对象</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>newInstance(Object... initargs)</code></td>
<td align="left"><code>T</code></td>
<td align="left">创建对象</td>
</tr>
</tbody></table>
<h3 id="Method对象"><a href="#Method对象" class="headerlink" title="Method对象"></a>Method对象</h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>invoke(Object obj, Object... args)</code></td>
<td align="left"><code>Object</code></td>
<td align="left">调用方法</td>
</tr>
<tr>
<td align="left"><code>getName()</code></td>
<td align="left"><code>String</code></td>
<td align="left">获取方法名</td>
</tr>
</tbody></table>
<h2 id="4-4-ClassLoader中的方法"><a href="#4-4-ClassLoader中的方法" class="headerlink" title="4.4    ClassLoader中的方法"></a>4.4    ClassLoader中的方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getResourceAsStream(String name)		<span class="comment">// 读取指定资源，返回输入流</span></span><br></pre></td></tr></table></figure>

<h2 id="4-5-代码演示"><a href="#4-5-代码演示" class="headerlink" title="4.5 代码演示"></a>4.5 代码演示</h2><h3 id="基本方法演示"><a href="#基本方法演示" class="headerlink" title="基本方法演示"></a>基本方法演示</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz=Person.class;</span><br><span class="line">    <span class="comment">// 1.通过反射创建Person类的对象</span></span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">cons</span> <span class="operator">=</span> clazz.getConstructor(String.class, <span class="type">int</span>.class); <span class="comment">// 获取指定参数类型的构造器</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> cons.newInstance(<span class="string">&quot;Tom&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> (Person)obj;</span><br><span class="line">    System.out.println(p.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.通过反射，调用对象指定的属性、方法</span></span><br><span class="line">    <span class="comment">// 2.1 调用属性</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">age</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">    age.set(p, <span class="number">10</span>);	<span class="comment">// 设置对象p的属性age</span></span><br><span class="line">    System.out.println(p.toString());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.2 调用方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">show</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    show.invoke(p); <span class="comment">// 调用对象p的方法show</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.3 通过反射调用Person类的私有结构。比如：私构造器、方法、属性</span></span><br><span class="line">    <span class="comment">// 2.3.1 调用私构造器</span></span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">colns1</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class);</span><br><span class="line">    colns1.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> (Person) colns1.newInstance(<span class="string">&quot;Jerry&quot;</span>);</span><br><span class="line">    System.out.println(p1.toString());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.3.2 调用私属性</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">name</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    name.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    name.set(p1, <span class="string">&quot;jenny&quot;</span>);</span><br><span class="line">    System.out.println(p1);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.3.3 调用私方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">showNation</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;showNation&quot;</span>, String.class);</span><br><span class="line">    showNation.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj1</span> <span class="operator">=</span> showNation.invoke(p, <span class="string">&quot;中国&quot;</span>);</span><br><span class="line">    String nation1=(String) obj1;</span><br><span class="line">    System.out.println(nation1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="获取-Class-类对象的四种方式"><a href="#获取-Class-类对象的四种方式" class="headerlink" title="获取 Class 类对象的四种方式"></a>获取 Class 类对象的四种方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;<span class="comment">//3.获取class实例的方式</span></span><br><span class="line">    <span class="comment">// 方式一：调用运行时类的属性：.class</span></span><br><span class="line">    Class&lt;Person&gt; clas = Person.class;</span><br><span class="line">    System.out.println(clas);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方式二：通过运行时类的对象，调用getClass()</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass</span> <span class="operator">=</span> p1.getClass();</span><br><span class="line">    System.out.println(aClass);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//方式三：调用Class的静态方法：forName(String classPath)</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.item.java.reflection.Person&quot;</span> );</span><br><span class="line">    System.out.println(aClass1);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方式四：使用类的加载器：ClassLoader</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ReflectionTest.class.getClassLoader();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">aClass2</span> <span class="operator">=</span> classLoader.loadClass(<span class="string">&quot;com.item.java.reflection.Person&quot;</span>);</span><br><span class="line">    System.out.println(aClass2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="体会反射机制的“动态性”"><a href="#体会反射机制的“动态性”" class="headerlink" title="体会反射机制的“动态性”"></a>体会反射机制的“动态性”</h3><ul>
<li>  通过反射得到的对象实例其具体类型是不确定的，所以一般声明为最高的抽象类型。</li>
<li>  想要调用某些子类方法时，必须在代码中手动向下转型为具体子类对象。</li>
<li>  在调用某个方法时，必须要声明是通过哪个对象调用的，要不然就有可能调用到父类的方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">3</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">classPath</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span>(num)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                classPath = <span class="string">&quot;java.util.Date&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                classPath = <span class="string">&quot;java.lang.Object&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                classPath = <span class="string">&quot;cn.xsyu.java.Person&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> getInstance(classPath);</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="使用-Classloader-加载-src-目录下的配置文件"><a href="#使用-Classloader-加载-src-目录下的配置文件" class="headerlink" title="使用 Classloader 加载 src 目录下的配置文件"></a>使用 Classloader 加载 src 目录下的配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">pros</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">// 此时的文件默认在当前的module下。</span></span><br><span class="line">    <span class="comment">// 读取配置文件的方式一：</span></span><br><span class="line"><span class="comment">//        FileInputStream fis = new FileInputStream(&quot;jdbc.properties&quot;);</span></span><br><span class="line"><span class="comment">//        FileInputStream fis = new FileInputStream(&quot;src\\jdbc1.properties&quot;);</span></span><br><span class="line"><span class="comment">//        pros.load(fis);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取配置文件的方式二：使用ClassLoader</span></span><br><span class="line">    <span class="comment">// 配置文件默认识别为：当前module的src下</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ClassLoaderTest.class.getClassLoader();</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> classLoader.getResourceAsStream(<span class="string">&quot;jdbc1.properties&quot;</span>);</span><br><span class="line">    pros.load(is);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;user = &quot;</span> + user + <span class="string">&quot;,password = &quot;</span> + password);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<hr>
<h1 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h1><blockquote>
<p>  <strong>代理模式原理：</strong></p>
</blockquote>
<p>使用一个代理将对象包装起来, 然后用该代理对象取代原始对象。任何对原始对象的调用都要通过代理。代理对象决定是否以及何时将方法调用转到原始对象上。 </p>
<h2 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h2><blockquote>
<p>  <strong>举例：</strong>实现Runnable接口的方法创建多线程。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Class MyThread <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;&#125; <span class="comment">//相当于被代理类</span></span><br><span class="line">Class Thread <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;&#125; <span class="comment">//相当于代理类</span></span><br><span class="line">main()&#123;</span><br><span class="line">    <span class="type">MyThread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t);</span><br><span class="line">    thread.start();<span class="comment">//启动线程；调用线程的run()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/20/JDBC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/20/JDBC/" class="post-title-link" itemprop="url">JDBC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-20 09:44:29" itemprop="dateCreated datePublished" datetime="2020-08-20T09:44:29+08:00">2020-08-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-10-30 21:55:44" itemprop="dateModified" datetime="2020-10-30T21:55:44+08:00">2020-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-什么是JDBC"><a href="#1-什么是JDBC" class="headerlink" title="1    什么是JDBC"></a>1    什么是JDBC</h1><ol>
<li><code>Java Database Connectivity</code>，Java数据库连接[规范]。</li>
<li>JDBC规范就是Java语言内置一套接口，包含了CRUD等方法，用来访问数据库应用程序。</li>
</ol>
<p><img src="/2020/08/20/JDBC/JDBC%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、程序员通过JDBC接口操作对应数据库的实现类；[多态]</span><br><span class="line">---&gt;&gt;</span><br><span class="line"><span class="number">2</span>、实现类完成调用数据库并返回结果的过程。</span><br></pre></td></tr></table></figure>





<h3 id="1-1-1-JDBC的作用"><a href="#1-1-1-JDBC的作用" class="headerlink" title="1.1.1    JDBC的作用"></a>1.1.1    JDBC的作用</h3><ol>
<li>JDBC是一个<strong>接口</strong>，这个接口的作用是：<ul>
<li>定义了一套使用Java语言操作关系型数据的的规范；</li>
<li>但是这些规范的实现类不是存在于JDK中，而是由各大数据库厂商提供的；</li>
<li>所以使用JDBC操作数据库时，必须要导入各大数据库厂商提供的实现类。</li>
</ul>
</li>
</ol>
<h3 id="1-1-2-JDBC的优势"><a href="#1-1-2-JDBC的优势" class="headerlink" title="1.1.2    JDBC的优势"></a>1.1.2    JDBC的优势</h3><ol>
<li>开发人员可以通过一套固定的Java代码操作所有关系型数据库。</li>
</ol>
<hr>
<h1 id="2-JDBC的实现"><a href="#2-JDBC的实现" class="headerlink" title="2    JDBC的实现"></a>2    JDBC的实现</h1><h2 id="2-1-JDBC快速入门"><a href="#2-1-JDBC快速入门" class="headerlink" title="2.1    JDBC快速入门"></a>2.1    JDBC快速入门</h2><ol>
<li><p><strong>导入相关数据库的依赖jar包</strong>[实际上就是JDBC接口的实现类]</p>
<ul>
<li><p>JDBC只是一个数据库接口API，却没有具体的实现类。</p>
</li>
<li><p>具体的实现类由各大数据库厂商提供。如果要通过java操作数据库，必须要下载这些厂商对应的jar包并导入到IDE环境中。</p>
</li>
</ul>
</li>
</ol>
<p>   <img src="/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B1.png"></p>
<p>   <img src="/2020/08/20/JDBC/%E5%88%9B%E5%BB%BAJDBC%E5%B7%A5%E7%A8%8B2.png"></p>
<ol start="2">
<li><p><strong>加载和注册驱动</strong></p>
<ul>
<li><p>原理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 通过导入具体数据库的驱动jar包，我们已经得到了数据库厂商编写的实现类的字节码文件;</span><br><span class="line"><span class="number">2.</span> 通过反射机制，将实现类的字节码文件加载进内存，得到字节码文件对应的`Class类对象`;</span><br><span class="line">	* 字节码文件整体及其中每个成员变量、成员方法、构造方法等都是一个独立的`Class类对象`。</span><br></pre></td></tr></table></figure></li>
<li><p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">	格式：</span></span><br><span class="line"><span class="comment">		Class.forName(数据库驱动的实现类的全类名)</span></span><br><span class="line"><span class="comment">		通过&quot;全类名&quot;将字节码文件加载进内存，得到对应类的Class对象。</span></span><br><span class="line"><span class="comment">    分析：</span></span><br><span class="line"><span class="comment">    	反射机制，将字节码文件加载进内存，获得字节码文件中的所有`Class类对象`。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>)	<span class="comment">// 加载和注册mysql数据库，获取Driver的Class类对象</span></span><br></pre></td></tr></table></figure></li>
<li><p>分析：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`Class.forName()`方法的原理和`import xxx`导包的原理相类似，不同的是:</span><br><span class="line">	1. import导入的是`.java`文件，得到的是类，在使用时要先根据类创建对象才能使用；</span><br><span class="line">	2. Class.forName()导入的是`.class`文件，得到的是 Class类对象 ，使用时要先根据Class类对象创建实例对象才能使用。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取数据库连接对象Connection</strong></p>
<ul>
<li><p><code>DriverManger</code>类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DriverManager</span>;</span><br><span class="line">	<span class="number">1.</span> 是Java内部提供的类</span><br><span class="line">	<span class="number">2.</span> 作用是管理 JDBC 驱动程序的基本服务。</span><br><span class="line"></span><br><span class="line">类中的静态方法：</span><br><span class="line">	<span class="number">1.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, String username, String password)</span>;</span><br><span class="line">	<span class="number">2.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, Properties info)</span>;</span><br><span class="line">	<span class="number">3.</span> Connection <span class="title function_">getConnection</span><span class="params">(String url)</span>;</span><br><span class="line">	作用：建立与指定数据库的连接，返回一个连接对象。</span><br><span class="line">	参数：</span><br><span class="line">		* url：不同数据库的url是不同的，</span><br><span class="line">		  	   MySQL的是：jdbc:mysql:<span class="comment">//localhost:3306/demo[?参数名=参数值]</span></span><br><span class="line">		 	   格式：协议名:子协议:<span class="comment">//服务器名或IP地址:端口号/数据库名?参数=参数值</span></span><br><span class="line">		* username：登录MySQL的用户名</span><br><span class="line">		* password：登录MySQL的密码	</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取执行SQL语句的对象<code>Statement</code></strong></p>
<ul>
<li><p><code>Connection</code>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Connection</span>;</span><br><span class="line">	Connection接口，代表一个连接对象,具体的实现类由数据库厂商实现。</span><br><span class="line">        </span><br><span class="line">Connection接口中的方法：</span><br><span class="line">	Statement <span class="title function_">createStatement</span><span class="params">()</span>;	创建一个 Statement 对象用于将 SQL 语句发送到数据库。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>执行SQL语句，返回结果</strong>。</p>
<ul>
<li><p>使用<code>Statement</code>对象中的<code>executeXxx()方法</code>执行SQL语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Statement对象的作用：</span><br><span class="line">    * java中执行SQL语句的对象，用于发送SQL语句给数据库，并接收数据库返回的执行的结果。</span><br><span class="line">    </span><br><span class="line">Statement接口中的方法：</span><br><span class="line">    * <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql)</span>	</span><br><span class="line">    	用于发送DML语句，增删改的操作，insert、update、delete</span><br><span class="line">    	参数：String类型的SQL语句</span><br><span class="line">    	返回值：返回对数据库影响的行数</span><br><span class="line">    </span><br><span class="line">    * ResultSet <span class="title function_">executeQuery</span><span class="params">(String sql)</span></span><br><span class="line">    	用于发送DQL语句，查询的操作，select</span><br><span class="line">    	参数：SQL语句</span><br><span class="line">    	返回值：查询的结果集</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>释放资源</strong></p>
<ul>
<li>需要释放资源的对象：<code>ResultSet结果集</code>、<code>Statement语句对象</code>、<code>Connection连接对象</code></li>
<li>释放原则：栈式原则</li>
<li>释放资源的步骤放在哪个代码块中：finally代码块中。</li>
</ul>
</li>
<li><p><strong>流程图</strong>：</p>
<p><img src="/2020/08/20/JDBC/JDBC%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png"></p>
<ul>
<li><p><strong><code>Connection</code>：建立连接通道</strong></p>
</li>
<li><p><strong><code>Statement</code>：一个容器，携带SQL语句从Java发送给MySQL处理。</strong></p>
</li>
<li><p><strong><code>ResultSet</code>：一个容器，携带MySQL的处理结果返回给Java。</strong></p>
</li>
</ul>
</li>
<li><p><strong>快速入门</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.导入驱动jar包。</span></span><br><span class="line"><span class="comment">    2.加载和注册驱动</span></span><br><span class="line"><span class="comment">    3.获取数据库连接对象Connection</span></span><br><span class="line"><span class="comment">    4.获取执行sql语句的对象Statement</span></span><br><span class="line"><span class="comment">    5.执行sql并处理结果</span></span><br><span class="line"><span class="comment">    6.释放资源</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// 1. 导入驱动jar包</span></span><br><span class="line">        <span class="comment">// 2. 注册数据库驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. 获取数据库连接对象</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// 4. 获取执行sql语句的对象Statement</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update watertiger set name = &#x27;李四&#x27; where id = 36&quot;</span>;</span><br><span class="line">        <span class="comment">// 5.执行sql语句（java-&gt;mysql） 并 返回执行结果（mysql—&gt;java）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">executeUpdate</span> <span class="operator">=</span> statement.executeUpdate(sql);  </span><br><span class="line">        System.out.println(executeUpdate);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 释放资源</span></span><br><span class="line">        connection.close();</span><br><span class="line">        statement.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-2-各个对象详解"><a href="#2-2-各个对象详解" class="headerlink" title="2.2    各个对象详解"></a>2.2    各个对象详解</h2><h3 id="1-驱动管理类——DriverManger"><a href="#1-驱动管理类——DriverManger" class="headerlink" title="1    驱动管理类——DriverManger"></a>1    驱动管理类——DriverManger</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>注册驱动。</p>
<p><em>[静态代码块的特点：随着类的加载而执行，且只执行一次。]</em></p>
<p>利用反射机制，将<code>Driver</code>字节码文件加载进内存，此时会执行类中的静态代码块，即创建Driver实例对象并使用DriverManager类中的静态方法注册该驱动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 利用反射机制，将字节码文件加载进内存，获得Driver类的Class类对象</span></span><br><span class="line">  class.forName(com.mysql.jdbc.Driver)	<span class="comment">// 驱动jar包的com.mysql.jdbc目录中有一个Driver类.</span></span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">  <span class="comment">// 通过查看源码发现：在 com.mysql.jdbc.Driver 类中存在静态代码块</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Driver</span> <span class="keyword">extends</span> <span class="title class_">NonRegisteringDriver</span> <span class="keyword">implements</span> <span class="title class_">java</span>.sql.Driver &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Driver</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">static</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              DriverManager.registerDriver(<span class="keyword">new</span> <span class="title class_">Driver</span>());</span><br><span class="line">          &#125; <span class="keyword">catch</span> (SQLException var1) &#123;</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Can&#x27;t register driver!&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 注意：MySQL5.0+之后的驱动jar包可以省略注册驱动的过程。</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>DriverManager</code>类中的<strong>静态方法</strong>获取数据库连接对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">(String url, String user, String password)</span>;</span><br><span class="line"><span class="comment">/* 参数：</span></span><br><span class="line"><span class="comment">	url：指定连接的路径</span></span><br><span class="line"><span class="comment">		语法：jdbc:mysql://ip地址(域名):端口号/数据库名称</span></span><br><span class="line"><span class="comment">		例子：jdbc:mysql://localhset:3306/db1</span></span><br><span class="line"><span class="comment">		细节：如果连接的是本机的mysql服务器，并且默认服务器端口号是3306，</span></span><br><span class="line"><span class="comment">			 则url可简写为：jdbc:mysql://db1</span></span><br><span class="line"><span class="comment">	user：用户名</span></span><br><span class="line"><span class="comment">	password:密码</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="2-数据库连接对象——Connection"><a href="#2-数据库连接对象——Connection" class="headerlink" title="2    数据库连接对象——Connection"></a>2    数据库连接对象——Connection</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>获取执行SQL的对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：</span></span><br><span class="line">Statement <span class="title function_">createStatement</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// 方法2：</span></span><br><span class="line">PreparedStatement <span class="title function_">createPreparedStatement</span><span class="params">(String sql)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>管理事务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.开启事务</span></span><br><span class="line">setAutoCommit(<span class="type">boolean</span> autoCommit);	<span class="comment">// 调用该方法设置参数为false，即可开启事务</span></span><br><span class="line"><span class="comment">// 2.提交事务</span></span><br><span class="line">commit();</span><br><span class="line"><span class="comment">// 3.回滚事务</span></span><br><span class="line">rollback();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="3-执行SQL的对象——Statement"><a href="#3-执行SQL的对象——Statement" class="headerlink" title="3    执行SQL的对象——Statement"></a>3    执行SQL的对象——Statement</h3><ul>
<li><p>功能：</p>
<ol>
<li><p>执行SQL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.可以执行任意SQL语句(了解)</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">execute</span><span class="params">(String sql)</span>;	 </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.执行DML(insert、delete、update)语句，DDL(create、drop、alter)语句</span></span><br><span class="line"><span class="comment">// 返回值:影响的行数。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql)</span>;	 </span><br><span class="line">						  </span><br><span class="line"><span class="comment">// 3.执行DQL（select）语句</span></span><br><span class="line"><span class="comment">// 返回值：ResultSet结果集</span></span><br><span class="line">ResultSet <span class="title function_">executeQuery</span><span class="params">(String sql)</span>;	</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="4-结果集对象——ResultSet"><a href="#4-结果集对象——ResultSet" class="headerlink" title="4    结果集对象——ResultSet"></a>4    结果集对象——ResultSet</h3><ul>
<li><p>功能：封装查询结果</p>
<ol>
<li><p>ResultSet对象中的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ResultSet结果集对象的结构是一个虚拟表，可以是多行多列的，如果要得到其中某行某列的数据还需要逐行读取。</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 1.游标向下移动一行，判断当前行是否是最后一行末尾（是否有数据），如果是返回false，如果不是返回true。</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.获取数据</span></span><br><span class="line">xxx <span class="title function_">getXxx</span><span class="params">(参数)</span>;</span><br><span class="line">	返回值类型：</span><br><span class="line">        Xxx代表查询结果的返回值类型。	如： <span class="type">int</span> <span class="title function_">getInt</span><span class="params">()</span>;	String <span class="title function_">getString</span><span class="params">()</span></span><br><span class="line">     参数：</span><br><span class="line">        <span class="number">1.</span> <span class="type">int</span>: 代表列的编号,从<span class="number">1</span>开始。表示按照列的编号查询数据。	如： getString(<span class="number">1</span>);</span><br><span class="line">        <span class="number">2.</span> String: 代表列的名称。表示按照列的名称查询数据。	如： getDouble(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">	</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用步骤：</span></span><br><span class="line"><span class="comment">	  1.游标向下移动一行，并判断是否有数据</span></span><br><span class="line"><span class="comment">	  2.如果有，获取数据；</span></span><br><span class="line"><span class="comment">	  	如果没有，结束。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<h3 id="5-执行SQL的对象2——PreparedStatement"><a href="#5-执行SQL的对象2——PreparedStatement" class="headerlink" title="5    执行SQL的对象2——PreparedStatement"></a>5    执行SQL的对象2——PreparedStatement</h3><h4 id="1、SQL注入"><a href="#1、SQL注入" class="headerlink" title="1、SQL注入"></a>1、SQL注入</h4><ul>
<li><p>在拼接SQL时，有一些特殊的关键字参与字符串的拼接，会造成安全性问题。</p>
</li>
<li><p>如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在用户登录案例中：</span><br><span class="line">    用户名和密码随便输入xxx，只要在最后的输入位置加上：	<span class="keyword">or</span> <span class="string">&#x27;a&#x27;</span><span class="operator">=</span>a;</span><br><span class="line"></span><br><span class="line">那么整个<span class="keyword">sql</span>语句就变成了：</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">and</span> password<span class="operator">=</span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;a&#x27;</span><span class="operator">=</span>a</span><br><span class="line">	即使前面的账户名和密码错误，但是整个<span class="keyword">sql</span>语句传入到mysql后再执行，所以必定能得到<span class="keyword">sql</span>数据库，返回值也为<span class="literal">true</span>，可以正常登录，这显然是不安全的</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2、PreparedStatement"><a href="#2、PreparedStatement" class="headerlink" title="2、PreparedStatement"></a>2、PreparedStatement</h4><ul>
<li>使用<code>PreparedStatement</code>对象执行SQL语句可以解决SQL注入问题；</li>
<li>因为<code>PreparedStatement</code>执行的是预编译的SQL语句，使用<code>?</code>作为参数的占位符；</li>
<li>这时传递的SQL语句的结构是确定的，只能填充占位符上的空值，而不能修改SQL语句的整体结构。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">步骤:</span><br><span class="line">	<span class="number">1.</span>导入驱动jar包</span><br><span class="line">	<span class="number">2.</span>注册驱动</span><br><span class="line">	<span class="number">3.</span>获取数据库连接对象Connection</span><br><span class="line">	<span class="number">4.</span>定义SQL语句：使用？作为占位符。		如： select * from user where name=? and password=?；</span><br><span class="line">	<span class="number">5.</span>获取SQL执行语句对象PreparedStatement。</span><br><span class="line">		connection.PreparedStatement(String sql)	<span class="comment">// 该对象需要直接把SQL语句作为参数传递进去</span></span><br><span class="line">  	<span class="number">6.</span>给占位符？赋值</span><br><span class="line">  	  方法：</span><br><span class="line">  		setXxx(参数<span class="number">1</span>，参数<span class="number">2</span>)</span><br><span class="line">  		  * 参数<span class="number">1</span>：？的位置序号，从<span class="number">1</span>开始【第几个？】</span><br><span class="line">  		  * 参数<span class="number">2</span>：？的值</span><br><span class="line">  	<span class="number">7.</span>执行sql语句</span><br><span class="line">  	<span class="number">8.</span>处理结果</span><br><span class="line">  	<span class="number">9.</span>释放资源</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-JDBCUtils"><a href="#3-JDBCUtils" class="headerlink" title="3    JDBCUtils"></a>3    JDBCUtils</h1><h2 id="3-1-工具类"><a href="#3-1-工具类" class="headerlink" title="3.1    工具类"></a>3.1    工具类</h2><ul>
<li><p>什么时候自己创建工具类？</p>
</li>
<li><p>如果一个功能经常用到，那么我们建议把这个功能做成一个工具类，可以在不同的地方重用。</p>
</li>
<li><p>目的：简化书写</p>
<ul>
<li>根据之前学过的知识，通过Java操作数据库时，每创建一个类都要注册驱动、获取连接对象、获取执行SQL语句的对象、释放资源等。这些代码在不同的类中大体上都是相同的。所以JDBCUtils的作用就是把这些相同的代码抽取出来封装到一个静态的类JDBCUtils中，这样我们就可以通过JDBCUtils完成驱动注册、资源释放等操作，简化了代码的书写。</li>
</ul>
</li>
</ul>
<h2 id="3-2-抽取JDBC工具类：JDBCUtils"><a href="#3-2-抽取JDBC工具类：JDBCUtils" class="headerlink" title="3.2    抽取JDBC工具类：JDBCUtils"></a>3.2    抽取JDBC工具类：JDBCUtils</h2><ul>
<li>抽取JDBC工具类：JDBCUtils</li>
</ul>
<h3 id="3-2-1-步骤"><a href="#3-2-1-步骤" class="headerlink" title="3.2.1    步骤"></a>3.2.1    步骤</h3><ol>
<li><p>注册驱动的代码：每个类都要使用，可以抽取。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>获取连接对象的代码：每个类都要使用，可以抽取。</p>
<ul>
<li>把登录数据库，以及注册驱动的代码放到配置文件<code>jdbc.properties</code>中。如果要连接的数据库发生改变，或者使用了不同厂商的数据库，那么我们直接修改配置文件即可。JDBCUtils类内的代码完全不用改变</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	需求：1.不想传递参数，</span></span><br><span class="line"><span class="comment">		 2.还要保证代码的耦合性低。</span></span><br><span class="line"><span class="comment">	解决：使用配置文件</span></span><br><span class="line"><span class="comment">		jdbc.properties</span></span><br><span class="line"><span class="comment">			url=jdbc:mysql://localhost:3306/db1</span></span><br><span class="line"><span class="comment">			uesr=root</span></span><br><span class="line"><span class="comment">			password=root</span></span><br><span class="line"><span class="comment">			driver=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  </span><br><span class="line">-------------------------------------------------------------------------------------------------</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	使用配置文件需要把配置文件中的数据加载到内存中供JDBCUtils工具类使用：</span></span><br><span class="line"><span class="comment">		获取src目录下文件路径的方法：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">JDBCUtils.class.getClassLoader().getResource(<span class="string">&quot;jdbc.properties&quot;</span>).getPath();</span><br><span class="line">properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 	</span></span><br><span class="line"><span class="comment">	1. JDBCUtils.class;	根据类名获取Class类对象[将字节码文件加载进内存，返回Class类对象]</span></span><br><span class="line"><span class="comment">	2. getClassLoader();	返回该类的类加载器</span></span><br><span class="line"><span class="comment">	3. getResource(&quot;jdbc.properties&quot;);	根据完整的文件名获取资源的URL</span></span><br><span class="line"><span class="comment">	4. getPath();	根据URL获取路径的字符串形式</span></span><br><span class="line"><span class="comment">*/</span>	</span><br></pre></td></tr></table></figure></li>
<li><p>释放资源的代码：每个类都要使用，可以抽取。</p>
<ul>
<li>释放资源的代码需要重载2个，因为<ul>
<li>DQL语句返回一个ResultSet集合，需要释放</li>
<li>而其他语句的返回值是int类型的，不需要释放。</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 下面4个参数声明为全局变量，为了防止try...catch之外的代码访问不到</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 注册驱动不是每个类中都必须使用的，所以可以放入静态代码块中，在需要时再修改</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.创建Properties集合类,准备接收 jdbc.properties 配置文件的数据</span></span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            <span class="comment">// 2.获取src路径下的文件的方式：ClassLoader【类加载器】</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> JDBCUtils.class.getClassLoader().getResource(<span class="string">&quot;jdbc.properties&quot;</span>).getPath();</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(path));</span><br><span class="line">            <span class="comment">// 3.获取properties对象中的数据【properties对象中存的就是properties配置文件的数据】</span></span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="comment">// 4.注册驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 连接对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,user,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Statement statement, Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 释放资源（重载方法）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultSet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(ResultSet resultSet, Statement statement, Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-2-2-反射之读取配置文件"><a href="#3-2-2-反射之读取配置文件" class="headerlink" title="3.2.2    反射之读取配置文件"></a>3.2.2    反射之读取配置文件</h3><p><img src="/2020/08/20/JDBC/%E5%8F%8D%E5%B0%84%E4%B9%8B%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png"></p>
<ol>
<li><p>需求：</p>
<ul>
<li>读取配置文件中的配置信息到当前类中。</li>
</ul>
</li>
<li><p>分析：</p>
<ul>
<li>每个类对应有一个Class类对象；</li>
<li>每个Class类对象对应有一个ClassLoader类加载器；</li>
<li>类加载器中有一个读取本地文件转化为输入流的方法；</li>
<li>然后原路返回，当前类A即可获得配置文件信息的输入流格式。</li>
</ul>
</li>
<li><p>步骤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">    </span><br><span class="line">    Class&lt;A&gt; aClass = A.class;</span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">acl</span> <span class="operator">=</span>aClass.getClassLoader();</span><br><span class="line">    <span class="type">inputStream</span> <span class="variable">in</span> <span class="operator">=</span>acl.getResourceAsStream(xxx.properties);</span><br><span class="line">    <span class="comment">// 创建Properties对象,用于接收 jdbc.properties 配置文件的字节输入流数据</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    properties.load(in);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="4-JDBC事务操作"><a href="#4-JDBC事务操作" class="headerlink" title="4    JDBC事务操作"></a>4    JDBC事务操作</h1><hr>
<ol>
<li><p>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这多个步骤要么同时成功，要么同时失败。</p>
</li>
<li><p>操作：</p>
<ul>
<li>开启事务</li>
<li>提交事务</li>
<li>回滚事务</li>
</ul>
</li>
<li><p>使用Connection对象来管理事务：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.开启事务</span></span><br><span class="line">setAutoCommit(<span class="type">boolean</span> atuoCommit)  <span class="comment">// 调用该方法时设置参数为false，即为开启事务【在执行SQL之前开启事务】</span></span><br><span class="line"><span class="comment">// 2.提交事务</span></span><br><span class="line">commit()	<span class="comment">// 当所有sql都执行完之后提交事务</span></span><br><span class="line"><span class="comment">// 3.回滚事务</span></span><br><span class="line">rollback()	<span class="comment">// 在try...catch的catch代码块中回滚事务。             </span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="5-数据库连接池"><a href="#5-数据库连接池" class="headerlink" title="5    数据库连接池"></a>5    数据库连接池</h1><h2 id="5-1-数据库连接池概述"><a href="#5-1-数据库连接池概述" class="headerlink" title="5.1    数据库连接池概述"></a>5.1    数据库连接池概述</h2><hr>
<ol>
<li><p>概念：本质上就是一个容器（集合），存放数据库连接对象的容器。</p>
<ul>
<li>当系统初始化好之后，数据库连接池就会被创建，这个容器会申请一些连接对象，当用户访问数据库时，可以从数据库连接池中获取连接对象，当用户访问完数据库之后，会把连接对象归还给数据库连接池。</li>
</ul>
</li>
<li><p>优点：</p>
<ul>
<li><p>节约资源</p>
</li>
<li><p>访问高效。</p>
<p><img src="/2020/08/20/JDBC/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0.bmp"></p>
</li>
</ul>
</li>
<li><p>不使用数据库连接池的情况：</p>
<ul>
<li>每次访问数据库都需要创建一个新的数据库连接对象，这个对象在访问结束后就被释放了。</li>
</ul>
</li>
<li><p>使用数据库连接池的情况：</p>
<ul>
<li>程序初始化完成后就会创建一个数据库连接池，客户端访问数据库时无需创建<code>Connection</code>，直接从数据库连接池中拿出一个<code>Connection</code>对象使用即可。使用完毕后也不用释放资源，只需要把<code>Connection</code>对象归还即可。</li>
<li>实现了数据库连接对象的复用。</li>
</ul>
</li>
<li><p>实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">javax.sql.DataSource</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataSource</span>;		<span class="comment">// [接口,JDK中定义的规范]</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 方法</span><br><span class="line">    * getConnection()		<span class="comment">// 获取连接对象;</span></span><br><span class="line">    * connection.close()	<span class="comment">// 归还连接对象;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果连接对象Connection是从数据库连接池中获取的，那么调用<code>Connection.close()</code>方法就不是释放资源了，而是归还数据连接对象。</p>
</li>
<li><p>一般情况下，我们不去实现这个接口，而是交给数据库厂商来实现，我们只需要使用它们提供的jar包即可：</p>
<ol>
<li><code>C3p0</code>：数据库连接池实现技术</li>
<li><code>Druid</code>：数据库连接池实现技术，由阿里巴巴提供的。</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="5-2-数据库连接池技术——C3p0"><a href="#5-2-数据库连接池技术——C3p0" class="headerlink" title="5.2    数据库连接池技术——C3p0"></a>5.2    数据库连接池技术——C3p0</h2><ol>
<li><p>使用步骤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 导入jar包(<span class="number">2</span>个).	 </span><br><span class="line">    * c3p0-<span class="number">0.9</span><span class="number">.5</span><span class="number">.2</span>.jar；	</span><br><span class="line">    * mchange-commons-java-<span class="number">0.2</span><span class="number">.12</span>.jar</span><br><span class="line">    * 不要忘记导入数据库驱动jar包</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span> 定义配置文件：</span><br><span class="line">    * 名称:c3p0.properties	或者	  c3p0-config.xml</span><br><span class="line">        * 路径：直接将文件放在src目录下即可。</span><br><span class="line">        * 配置文件名称是写死的，因为程序默认自动扫描src目录下的c3p0.properties或者c3p0-config.xml文件</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 创建数据库连接池对象：</span><br><span class="line">    * <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>()</span><br><span class="line">        </span><br><span class="line"><span class="number">4.</span>获取数据库连接对象：</span><br><span class="line">    * getConnection()</span><br></pre></td></tr></table></figure></li>
<li><p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建数据库连接池对象</span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line"><span class="comment">// 获取数据库连接对象</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> ds.getConnection();</span><br></pre></td></tr></table></figure></li>
<li><p>配置文件</p>
<ul>
<li><code>c3p0-config.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用默认的配置读取连接池对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  连接参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/db1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池参数 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池初始化数据连接对象个数  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池最大数据连接对象个数  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 创建数据库连接池对象的超时响应时间  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>3000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--创建多个DataBase--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;otherc3p0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  连接参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/db2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 连接池参数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-3-数据库连接池技术——Druid"><a href="#5-3-数据库连接池技术——Druid" class="headerlink" title="5.3    数据库连接池技术——Druid"></a>5.3    数据库连接池技术——Druid</h2><ol>
<li><p><strong>使用步骤</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入jar包</span><br><span class="line">	* druid-<span class="number">1.0</span><span class="number">.9</span>.jar</span><br><span class="line">    * 数据库驱动jar包</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>定义配置文件</span><br><span class="line">	* 文件格式：Xxx.properties</span><br><span class="line">	* 可以任意命名，可以放在任意目录下。【最终通过字节码文件找到其绝对路径】</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span>加载配置文件。</span><br><span class="line">    </span><br><span class="line"><span class="number">4.</span>获取数据库连接池对象</span><br><span class="line">	* 通过工厂来获取：DruidDataSourceFactory</span><br><span class="line">    </span><br><span class="line"><span class="number">5.</span>获取数据库连接对象</span><br><span class="line">	* getConnection()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><strong>代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.加载配置文件</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">pro</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span>DruidDemo.class.getClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br><span class="line">pro.load(is);	<span class="comment">// load()方法中的参数是字符输入流或字节输入流</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.获取数据库连接池对象</span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">ds</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line"><span class="comment">// 5.获取数据库连接对象</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> ds.getConnection();</span><br></pre></td></tr></table></figure></li>
<li><p><strong>配置文件</strong></p>
<ul>
<li><code>druid.properties</code></li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/db1</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">3000</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>定义工具类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.定义一个类JDBCUtils</span></span><br><span class="line"><span class="comment">	2.提供静态代码块加载配置文件，初始化连接池对象</span></span><br><span class="line"><span class="comment">	3.提供方法：</span></span><br><span class="line"><span class="comment">		* 获取连接方法</span></span><br><span class="line"><span class="comment">		* 释放资源</span></span><br><span class="line"><span class="comment">		* 获取连接池方法</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-4-Spring-JDBC"><a href="#5-4-Spring-JDBC" class="headerlink" title="5.4    Spring_JDBC"></a>5.4    Spring_JDBC</h2><hr>
<ol>
<li><p>Spring框架对JDBC做了简单的封装。提供了一个<code>JDBCTemplate</code>对象简化JDBC的开发。</p>
</li>
<li><p>使用步骤：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入jar包</span><br><span class="line"><span class="number">2.</span>创建JDBCTemplate对象。依赖于数据源（数据库连接池）DataSource。[所以仍需要c3p0或druid数据库连接池]</span><br><span class="line">	* <span class="type">JdbcTemplate</span> <span class="variable">jt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(DataSource ds);</span><br><span class="line"><span class="number">3.</span>调用JDBCTemplate对象中的方法来完成CRUD。</span><br><span class="line">	* update()	</span><br><span class="line">		+ 执行DML语句，增删改语句</span><br><span class="line">	* queryForMap()	</span><br><span class="line">		+ 将查询的结果集封装为Map集合，用列名作为key，值作为Value，将这条记录封装为一个Map集合。</span><br><span class="line">		  注意：这个方法查询的结果集长度只能为<span class="number">1.</span></span><br><span class="line">	* queryForList()	</span><br><span class="line">		+ 将查询的结果集封装为List集合。</span><br><span class="line">		  注意：本质上是先将每一条记录封装为一个Map集合，在将多个Map集合装载到List集合中</span><br><span class="line">	</span><br><span class="line">	* query()</span><br><span class="line">		+ 将查询结果封装为javaBean对象</span><br><span class="line">		+ query的参数<span class="number">2</span>：RowMapper</span><br><span class="line">		  - 一般我们使用BeanPropertyRowMapper实现类。可以完成JavaBean的自动封装。</span><br><span class="line">		  - <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;类型&gt;(类型.class)</span><br><span class="line">		  </span><br><span class="line">	* queryForObject(sql,*.class)		【*代表查询结果的数据类型】</span><br><span class="line">		+ 将查询结果封装为对象</span><br><span class="line">		+ 一般用于聚合函数的查询</span><br></pre></td></tr></table></figure></li>
<li><p>分析：</p>
<p><img src="/2020/08/20/JDBC/JDBC%E6%A0%B8%E5%BF%83.png"></p>
<ul>
<li>JDBC的核心就是<code>Connection</code>连接对象，<code>Connection</code>对象可以自己创建，也可以从数据库连接池中获取。</li>
<li><code>JdbcTemplate</code>对象：<ol>
<li><code>JdbcTemplate</code>首先从<code>DataSource</code>中获取<code>Connection</code>连接对象；</li>
<li>然后，在<code>JdbcTemplate</code>中集成了<code>JDBC</code>中原本使用<code>Connection、PreparedStatement、ResultSet</code>对象；</li>
<li>并对具体的步骤做了封装，让我们可以只关心SQL语句，而不用关心JDBC的具体执行步骤；</li>
<li>可以使用<code>JdbcTemplate</code>对象中的简单的方法完成对数据库的CRUD操作。</li>
</ol>
</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/19/Servlet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/19/Servlet/" class="post-title-link" itemprop="url">Servlet</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-19 09:07:15" itemprop="dateCreated datePublished" datetime="2020-08-19T09:07:15+08:00">2020-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-04 23:22:10" itemprop="dateModified" datetime="2022-05-04T23:22:10+08:00">2022-05-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基础理论"><a href="#基础理论" class="headerlink" title="基础理论"></a>基础理论</h1><h2 id="1、Servlet是什么？"><a href="#1、Servlet是什么？" class="headerlink" title="1、Servlet是什么？"></a>1、Servlet是什么？</h2><p><img src="/2020/08/19/Servlet/Servlet%E6%A6%82%E5%BF%B5.png"></p>
<p>Servlet 是 JavaEE 的规范之一，规范就是接口。</p>
<p>Servlet 是 <code>javax.servlet</code> 包下的一个顶级接口，接口中定义了所有 Servlet 子类都必须实现的方法。该接口中包含一个<code>service()</code>方法，用于编写处理请求的业务逻辑。</p>
<p>Servlet 是运行在 Web 服务器上的一个小型 Java 程序，<strong>通过 HTTP 接收客户端发送过来的请求，处理后响应结果给客户端</strong>。</p>
<p>Servlet 是 JavaWeb 三大组件之一。三大组件分别是：</p>
<ul>
<li>  Servlet 程序</li>
<li>  Fliter 过滤器</li>
<li>  Listener 监听器</li>
</ul>
<h2 id="2、Servlet中路径的写法"><a href="#2、Servlet中路径的写法" class="headerlink" title="2、Servlet中路径的写法"></a>2、Servlet中路径的写法</h2><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><ul>
<li><p>  特点：不以 <code>/</code> 开头，以 <code>.</code> 开头。如：<code>./index.heml</code></p>
</li>
<li><p>  通过相对路径不能确定唯一的资源</p>
</li>
<li><p>规则：</p>
<ul>
<li>  <code>./</code> ：当前目录（<code>./</code>可以省略，同样表示当前目录）</li>
<li>  <code>../</code>：上一级目录</li>
</ul>
</li>
</ul>
<h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><ul>
<li><p>  特点：以 <code>/</code> 开头的路径</p>
</li>
<li><p>  通过绝对路径可以确定唯一的资源</p>
</li>
<li><p>格式：<code>协议名://IP地址:端口号/工程路径/资源路径</code></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 例子</span><br><span class="line">http://localhost:3306/day15/responseDemo2</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="绝对路径中-的使用规则"><a href="#绝对路径中-的使用规则" class="headerlink" title="绝对路径中/的使用规则"></a>绝对路径中<code>/</code>的使用规则</h3><p>在 Web 项目中，斜杠（“<code>/</code>”）是一种绝对路径</p>
<ul>
<li><p>  <code>/</code> 如果被客户端解析，得到的地址是：<code>http:ip:port/</code></p>
</li>
<li><p>  <code>/</code> 如果被服务器端解析，得到的地址是：<code>http://ip:port/工程路径</code></p>
</li>
<li><p>特殊情况：重定向。重定向是服务端把 “<code>/</code>” 发送给客户端浏览器解析，所以可以将其视作 <a href="http://ip:port/">http://ip:port/</a></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务端把 “/” 发送给客户端浏览器解析</span></span><br><span class="line">response.sendRediect(<span class="string">&quot;/&quot;</span>);		</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="绝对-相对路径实战"><a href="#绝对-相对路径实战" class="headerlink" title="绝对/相对路径实战"></a>绝对/相对路径实战</h3><h4 id="在客户端（浏览器）使用时，需要手动加工程路径"><a href="#在客户端（浏览器）使用时，需要手动加工程路径" class="headerlink" title="在客户端（浏览器）使用时，需要手动加工程路径"></a>在客户端（浏览器）使用时，需要手动加工程路径</h4><ul>
<li><p>示例：<code>/day15/responseDemo2</code></p>
</li>
<li><p>建议动态获取工程路径，避免程序硬解码带来的的耦合度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsp中动态获取工程路径的方法</span></span><br><span class="line">request.getContextPath();</span><br></pre></td></tr></table></figure></li>
<li><p>访问网络上的资源需要使用资源的绝对路径。在客户端浏览器上，<code>/</code> 代表了 <code>http:ip:port/</code>，所以还需要加上<code>day15/responseDemo2</code> 就可以构成一个完整的 URL 了。</p>
</li>
<li><p>使用场景：重定向、超链接、表单提交等。</p>
</li>
</ul>
<h4 id="在服务器端使用时，不需要加工程路径"><a href="#在服务器端使用时，不需要加工程路径" class="headerlink" title="在服务器端使用时，不需要加工程路径"></a>在服务器端使用时，不需要加工程路径</h4><ul>
<li>示例：<code>/responseDemo2</code></li>
<li>同理，此时 <code>/</code> 代表 <code>http:ip:port/day15/</code>，只需要需要加上 <code>responseDemo2</code> 可以构成一个完整的 URL 了。</li>
<li>使用场景：请求转发（请求转发的全流程都在服务器端完成）</li>
</ul>
<hr>
<h1 id="Servlet快速入门"><a href="#Servlet快速入门" class="headerlink" title="Servlet快速入门"></a>Servlet快速入门</h1><h2 id="1、项目结构"><a href="#1、项目结构" class="headerlink" title="1、项目结构"></a>1、项目结构</h2><p><img src="/2020/08/19/Servlet/image-20200514203012448.png"></p>
<blockquote>
<ul>
<li>  <strong>src</strong>：src目录用于存放开发人员编写的java源代码</li>
<li><strong>web</strong>：web目录一般用来存放web工程使用到的资源文件。比如 html、css、js、jar包等文件。<ul>
<li><strong>WEB-INF</strong>：WEB-INF是一个受服务器保护的目录，浏览器无法直接访问到此目录中的内容。<ul>
<li>  <strong>lib</strong>：lib目录用来存放第三方的jar包（Maven工程中无此目录）。</li>
<li>  <strong>web.xml</strong>：web.xml是整个web工程的配置文件，可以在这里配置诸多web工程的组件。比如：Servlet程序、Filter过滤器、Listener监听器、Session超时等。</li>
</ul>
</li>
<li>  <strong>index.jsp</strong>：web服务器的默认首页</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="2、Servlet应用的实现步骤"><a href="#2、Servlet应用的实现步骤" class="headerlink" title="2、Servlet应用的实现步骤"></a>2、Servlet应用的实现步骤</h2><h3 id="2-1-配置文件方式"><a href="#2-1-配置文件方式" class="headerlink" title="2.1 配置文件方式"></a>2.1 配置文件方式</h3><ol>
<li>创建一个 Servlet 接口的实现类。</li>
<li>重写接口中的 <code>service()</code> 方法，在该方法中编写业务逻辑。</li>
<li>在配置文件 <code>web.xml</code> 中配置 servlet 项目对外暴露的访问 URL。</li>
</ol>
<blockquote>
<p>  web.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Servlet应用的访问地址--&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--在&lt;web-app&gt;标签中添加以下内容--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--服务端资源（Servlet实现类）的路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>	</span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>     <span class="comment">&lt;!--实现类的别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.web.servlet.Demo01_Servlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>    <span class="comment">&lt;!--实现类的全限定类名--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--服务端资源对外暴露的访问路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> <span class="comment">&lt;!--实现类的别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  <span class="comment">&lt;!--配置访问路径--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        `/` 表示绝对路径，在服务器解析的时候，表示的地址为：IP地址:port/工程路径/</span></span><br><span class="line"><span class="comment">        所以 `/demo01` 就等价于：IP地址:port/工程路径/cn.web.servlet.Demo01_Servlet</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  设置工程路径</li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200515231635912-1589555959099.png" alt="image-20200515231635912"></p>
<hr>
<h3 id="2-2-注解方式（Servlet3-0-）"><a href="#2-2-注解方式（Servlet3-0-）" class="headerlink" title="2.2 注解方式（Servlet3.0+）"></a>2.2 注解方式（Servlet3.0+）</h3><p>注解配置用于替换配置文件配置<code>web.xml</code> 。</p>
<h4 id="1、创建Web应用（注解方式）"><a href="#1、创建Web应用（注解方式）" class="headerlink" title="1、创建Web应用（注解方式）"></a>1、创建Web应用（注解方式）</h4><ol>
<li><p>创建 Web 项目，选择 Servlet3.0 以上的版本，选择不创建web.xml。</p>
<p><img src="/2020/08/19/Servlet/image-20200509183119002.png" alt="image-20200509183119002"></p>
</li>
<li><p>创建一个 Servlet 接口的实现类，重写 Servlet 接口中的抽象方法</p>
</li>
<li><p>在实现类上使用 <strong>@WebServlet</strong> 注解配置当前类的访问路径。（下图是3种等价写法）</p>
<ul>
<li><p><code>@WebServlet(urlPatterns = &quot;/demo01&quot;)</code>    </p>
<p><img src="/2020/08/19/Servlet/Servlet%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE1.png"></p>
</li>
<li><p><code>@WebServlet(value = &quot;/demo01&quot;)</code></p>
</li>
</ul>
<p><img src="/2020/08/19/Servlet/Servlet%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE2.png"></p>
<ul>
<li><code>@WebServlet(&quot;/demo01&quot;)</code>【简化版】</li>
</ul>
<p><img src="/2020/08/19/Servlet/Servlet%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE3.png"></p>
</li>
</ol>
<h4 id="2、配置-Servlet-应用中类的访问路径"><a href="#2、配置-Servlet-应用中类的访问路径" class="headerlink" title="2、配置 Servlet 应用中类的访问路径"></a>2、配置 Servlet 应用中类的访问路径</h4><ul>
<li><code>url-partten</code>：Servlet 应用中某个类的的访问路径</li>
</ul>
<ol>
<li><p>Servlet 应用中一个类可以设置多个访问路径，通过多个路径都能访问到目标程序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&#123;&quot;/demo1&quot;,&quot;/demo2&quot;,&quot;/demo3&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Servlet</span> <span class="keyword">implements</span> <span class="title class_">Servler</span> &#123;</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>一个 Servlet 程序可以定义多层的访问路径，定义规则：</p>
<table>
<thead>
<tr>
<th align="center">格式</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>/xx</code></td>
<td align="center">单层路径匹配</td>
</tr>
<tr>
<td align="center"><code>/xx/xx</code></td>
<td align="center">多层路径匹配</td>
</tr>
<tr>
<td align="center"><code>*.xx</code></td>
<td align="center">正则匹配</td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h2 id="3、原理分析"><a href="#3、原理分析" class="headerlink" title="3、原理分析"></a>3、原理分析</h2><p>服务器是本质上是一台<strong>安装了服务器软件</strong>的<strong>高性能计算机</strong>。</p>
<ul>
<li><p>  计算机：有唯一的IP地址</p>
</li>
<li><p>安装了服务器软件：如 TomCat，TomCat 默认占用的端口号是8080</p>
</li>
</ul>
<p>一个服务器中可以部署多个工程，每个工程都有唯一的<strong>工程路径</strong>。</p>
<p>每个工程中又拥有多个资源文件（Servlet的实现类 &amp; WEB目录下的静态资源文件），每个资源文件又有唯一的访问路径。</p>
<ul>
<li>Servlet 实现类通过类上的 @WebServlet 注解配置。</li>
<li>WEB 目录下的静态资源文件直接通过『<code>ip:port/工程路径/资源文件名称</code>』访问。</li>
</ul>
<p>以客户端（浏览器）访问本地服务器（Tomcat）中的资源（HelloServlet 类）为例，其访问原理如下图所示：</p>
<p><img src="/2020/08/19/Servlet/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AETomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B5%84%E6%BA%90%E5%8E%9F%E7%90%86%E5%9B%BE.svg" alt="浏览器访问Tomcat服务器资源原理图"></p>
<h3 id="服务器端完成的工作："><a href="#服务器端完成的工作：" class="headerlink" title="服务器端完成的工作："></a>服务器端完成的工作：</h3><ol>
<li>使用 8080 端口启动了一个 Tomcat 进程。</li>
<li>Tomcat 进程加载了一段 Servlet 程序：创建了一个 Servlet 接口的实现类 HelloServlet，并重写了 service() 方法作为业务逻辑的处理方法。</li>
<li>在配置文件 <code>web/WEB-INF/web.xml</code> 中配置 HelloServlet 程序对外暴露的访问 URL。</li>
<li>现在 HelloServlet 就作为一个程序被挂在服务器上了，通过对外暴露的访问 URL，所有的客户端都可以访问这个程序。</li>
<li>如果客户端成功访问到了 HelloServlet 程序，该程序中的 service() 方法就会被执行。</li>
</ol>
<h3 id="客户端完成的工作："><a href="#客户端完成的工作：" class="headerlink" title="客户端完成的工作："></a>客户端完成的工作：</h3><ol>
<li>客户端（浏览器）通过 HelloServlet 类对外暴露的访问 URL 就可以访问服务器上的 HelloServlet 程序了。</li>
</ol>
<h3 id="执行原理："><a href="#执行原理：" class="headerlink" title="执行原理："></a>执行原理：</h3><p><strong>客户端发送请求：</strong></p>
<ul>
<li><p>  客户端浏览器发送以下请求：<a target="_blank" rel="noopener" href="http://localhost:8080/servlet_demo01/hello">http://localhost:8080/servlet_demo01/hello</a></p>
</li>
<li><p>  客户端浏览器（携带请求信息）–&gt; 根据Servlet程序对外暴露的访问URL访问服务器中的Servlet程序(协议+IP+端口号+工程路径+Servlet类访问路径) –&gt; 服务器响应</p>
</li>
<li><p>分析：</p>
<table>
<thead>
<tr>
<th></th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>http://</td>
<td>协议名称</td>
</tr>
<tr>
<td>localhost</td>
<td>服务器的IP地址</td>
</tr>
<tr>
<td>8080</td>
<td>Tomcat进程占用的端口号</td>
</tr>
<tr>
<td>servlet_demo01</td>
<td>工程路径（支持自定义）</td>
</tr>
<tr>
<td>demo01</td>
<td>资源的访问路径（<code>&lt;url-pattern&gt;</code>）</td>
</tr>
</tbody></table>
<ol>
<li> 首先，Web 应用启动后会自动扫描工程路径下的 WEB-INF/web.xml 配置文件。</li>
<li> 并在配置文件中找到所有的 <code>&lt;url-pattern&gt;</code> 标签，逐一与 <code>/hello</code> 进行匹配（Servlet实现类的访问URL）。</li>
<li> 如果匹配成功，继续查找 <code>/hello</code> 对应的 <code>&lt;servlet-name&gt;</code> 标签（别名）。</li>
<li> 最后关联到对应的 <code>&lt;servlet-class&gt;</code> 标签，这个标签保存了服务器中 Servlet 实现类的全限定类名。</li>
<li> 核心就是通过 url-pattern 找到服务器中对应的处理程序。</li>
</ol>
</li>
</ul>
<p><strong>服务端处理请求：</strong></p>
<p>服务器端收到请求消息后，在 service() 方法中处理请求，并原路返回响应信息。</p>
<p>Tomcat 监听到请求消息后自动进行：</p>
<ol>
<li>Tomcat 将 <code>全限定类名.java</code> 对应的 <code>.class</code> 字节码文件加载进内存。【<code>Class.forName()</code>】     </li>
<li>通过反射机制在内存中创建实例对象；【<code>class.newInstance()</code>】        </li>
<li>调用对象中的 <code>service()</code> 方法，执行方法中定义的业务逻辑。</li>
</ol>
<p><strong>结论：</strong> </p>
<ul>
<li>通过客户端可以访问服务器端的 Servlet 程序。</li>
</ul>
<h2 id="4、实战：IDEA中TomCat的相关配置"><a href="#4、实战：IDEA中TomCat的相关配置" class="headerlink" title="4、实战：IDEA中TomCat的相关配置"></a>4、实战：IDEA中TomCat的相关配置</h2><ol>
<li><p>IDEA 会为 TomCat 部署每一个的项目单独建立一份配置文件。</p>
<ul>
<li>查看配置文件的路径：控制台日志信息 <code>Using CATALINA_BASE</code></li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200509184656771.png" alt="image-20200509184656771"></p>
</li>
<li><p>工作项目 和 TomCat 部署的 web 项目</p>
<ul>
<li>工作项目是存储我们编写的代码的目录。</li>
<li>客户端真正访问的是“TomCat部署的web项目”，“TomCat部署的web项目”与“工作空间项目”的web项目目录下的所有资源一一映射。</li>
</ul>
</li>
<li><p>TomCat重新部署web项目（重新将工作项目打成war包）</p>
<p><img src="/2020/08/19/Servlet/image-20200518180904346-1597651978164.png" alt="image-20200518180904346"></p>
<p><img src="/2020/08/19/Servlet/image-20200518181231222-1597651978166.png" alt="image-20200518181231222"></p>
</li>
</ol>
<hr>
<h1 id="Servlet体系结构"><a href="#Servlet体系结构" class="headerlink" title="Servlet体系结构"></a>Servlet体系结构</h1><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><img src="/2020/08/19/Servlet/Servlet%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png" alt="Servlet体系结构" style="zoom: 50%;">

<h3 id="GenericServlet"><a href="#GenericServlet" class="headerlink" title="GenericServlet"></a>GenericServlet</h3><p>GenericServlet 是一个抽象类，它对 Servlet 接口中的部分抽象方法做了空实现，只保留了 service() 仍是一个抽象方法。</p>
<p>相比于实现 Servlet 接口，如果我们自定义的类直接继承了 GenericServlet 抽象类，那么就可以无需重写 Servlet 接口中很多不常用的抽象方法，比如 init()、destroy() 等，只需要重写最常用的 service() 方法即可。</p>
<p>非常用方法只在有需要时重写即可，简化了代码书写。</p>
<h3 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a>HttpServlet</h3><p>HttpServlet 类继承了 GenericServlet 类。对 HTTP 协议中的 GET/POST 提交方式默认做了分发处理，简化了代码的书写。</p>
<p>好处：</p>
<ul>
<li>  自定义的 Servlet 类只需继承 HttpServlet 抽象类即可。</li>
<li>  只需要重写对应的 <code>doGet()</code> 或 <code>doPost()</code> 方法即可。【<code>doGet()/doPost()</code>方法等价于<code>service()</code> 方法】</li>
<li>  对应客户端浏览器两种最常见的提交方式 GET/POST。</li>
</ul>
<h2 id="Servlet-的请求分发处理"><a href="#Servlet-的请求分发处理" class="headerlink" title="Servlet 的请求分发处理"></a>Servlet 的请求分发处理</h2><p>Servlet 程序最主要的功能就是<strong>接收客户端发送的请求，处理请求并响应处理结果给客户端</strong>。</p>
<p>在开发中使用最广泛的数据传输协议就是 HTTP 协议，HTTP协议中常用的数据提交方式有2种：GET 和 POST。</p>
<p>在 Servlet 程序中，虽然使用 service() 方法可以接收任意请求方式提交的请求信息，但在实际应用中为了降低耦合度和具体的业务需求，我们一般会分别处理 GET 和 POST 方式的请求。</p>
<h3 id="1、直接实现Servlet接口，手动进行请求分发处理"><a href="#1、直接实现Servlet接口，手动进行请求分发处理" class="headerlink" title="1、直接实现Servlet接口，手动进行请求分发处理"></a>1、直接实现Servlet接口，手动进行请求分发处理</h3><p>HttpServletRequest 类中有一个方法 getMethod()，通过方法的可以获得请求方式的字符串形式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_2_Servlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ServletRequest中没有getMethod()方法，它的子类HttpServletRequest中有getMethod()方法</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest)servletRequest;</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> httpServletRequest.getMethod();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;GET&quot;</span>.equals(method))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;GET请求&quot;</span>);</span><br><span class="line">            doGET();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(method))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;POST请求&quot;</span>);</span><br><span class="line">            doPOST();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理Get请求</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理Post请求</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="2、继承HttpServlet类，自动进行请求分发处理"><a href="#2、继承HttpServlet类，自动进行请求分发处理" class="headerlink" title="2、继承HttpServlet类，自动进行请求分发处理"></a>2、继承HttpServlet类，自动进行请求分发处理</h3><p>HttpServlet 类已经帮我们实现了请求分发处理的逻辑，我们只需直接继承 HttpServlet 类就可以实现上面的功能。</p>
<p>具体流程为：</p>
<ol>
<li>创建 HttpServlet 的子类。</li>
<li>根据请求方式重写 doGet() 或 doPost() 方法。</li>
<li>到配置文件 web.xml 中去配置 Servlet 程序的访问 URL。</li>
</ol>
<hr>
<h1 id="Servlet接口分析"><a href="#Servlet接口分析" class="headerlink" title="Servlet接口分析"></a>Servlet接口分析</h1><h2 id="Servlet的生命周期"><a href="#Servlet的生命周期" class="headerlink" title="Servlet的生命周期"></a>Servlet的生命周期</h2><ol>
<li>执行Servlet实现类的构造方法</li>
<li>执行<code>init()</code>初始化方法</li>
<li>执行<code>service()</code>方法</li>
<li>……</li>
<li>执行<code>destroy()</code>销毁方法</li>
</ol>
<blockquote>
<p>  Servlet 接口源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置方法：每个Servlet实例对应一个ServletConfig实例</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 服务方法[专门用来处理请求和响应的]</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span></span><br><span class="line">        <span class="keyword">throws</span> ServletException, IOException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取相关信息的方法</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h2><p>顾名思义，<code>ServletConfig</code> 就是 Servlet 应用的配置类。</p>
<p>既然是配置类，自然与配置文件 <code>web.xml</code> 息息相关。该类可以获取 <code>web.xml</code> 中的所有配置信息。</p>
<blockquote>
<p>  ServletConfig 类源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletName</span><span class="params">()</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 每个ServletConfig实例都可以获取全局的ServletContext实例</span></span><br><span class="line">    <span class="keyword">public</span> ServletContext <span class="title function_">getServletContext</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInitParameter</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getInitParameterNames</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h3 id="1、获取-ServletConfig-的几种方式"><a href="#1、获取-ServletConfig-的几种方式" class="headerlink" title="1、获取 ServletConfig 的几种方式"></a>1、获取 ServletConfig 的几种方式</h3><h4 id="case1："><a href="#case1：" class="headerlink" title="case1："></a>case1：</h4><p><code>ServletConfig</code> 是初始化方法 <code>init()</code> 的入参，自然可以在在 <code>init()</code> 方法内使用该对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 	如果需要在自定义的Servlet实现类中重写init()方法，</span></span><br><span class="line"><span class="comment">* 一定记得使用super调用父类的init()方法，以保证初始</span></span><br><span class="line"><span class="comment">* 化能正常进行。因为需要在父类的init()方法中加载配置</span></span><br><span class="line"><span class="comment">* 文件的数据。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Servlet_HttpServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="built_in">super</span>.init(config);		<span class="comment">// 很重要</span></span><br><span class="line">        System.out.println(<span class="string">&quot;重写了init方法，做了一些扩展&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="Case2："><a href="#Case2：" class="headerlink" title="Case2："></a>Case2：</h4><p>通过 <code>this.getServletConfig()</code> 的方式，也可以获得 <code>ServletConfig </code>对象。</p>
<h4 id="Case3："><a href="#Case3：" class="headerlink" title="Case3："></a>Case3：</h4><p>直接使用。Servlet实现类对象和ServletConfig对象都是由TomCat创建的，在Servlet类中可直接使用。</p>
<ul>
<li>  Servlet 实现类的对象实例是在服务器中 Servlet 类第一次被访问时创建的。</li>
<li>  每个 Servlet 实现类都拥有一个对应的 ServletConfig 对象。在每个 Servlet 实现类初始化时，就会创建一个对应的 ServletConfig 对象。</li>
<li>  也就是说，一个 Web 应用中，存在多个 Servlet 实现类的实例对象，也存在多个 ServletConfig 实例对象。</li>
</ul>
<hr>
<h3 id="2、ServletConfig类的三大作用"><a href="#2、ServletConfig类的三大作用" class="headerlink" title="2、ServletConfig类的三大作用"></a>2、ServletConfig类的三大作用</h3><ol>
<li><p>可以获取Servlet实现类在配置文件中的名称（id），即 <code>&lt;servlet-name&gt;</code> 标签的值。</p>
</li>
<li><p>获取初始化参数<code>&lt;init-param&gt;</code>。[配置文件中]</p>
</li>
</ol>
<ul>
<li><code>&lt;init-param&gt;</code>是初始化参数。<ul>
<li><code>&lt;init-param&gt;</code>定义在<code>&lt;servlet&gt;</code>标签中，一个<code>&lt;servlet&gt;</code>标签中可以保存多个<code>&lt;init-param&gt;</code>键值对</li>
<li><code>&lt;init-param&gt;</code>中保存的是<code>&lt;param-name&gt;</code>和<code>&lt;param-value&gt;</code>的键值对， ServletConfig实例可以通过键获取值</li>
</ul>
</li>
</ul>
<ol start="3">
<li>获取 <code>ServletContext</code> 对象。</li>
</ol>
<blockquote>
<p>  <code>web.xml</code>配置文件</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&lt;context-param&gt;是上下文参数（它作用于整个WEB工程）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>context<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>987654<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>     <span class="comment">&lt;!--别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>javaweb.tomcat.Demo01_TomCat<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span> 	<span class="comment">&lt;!--Servlet实现类的全限定名--&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">&lt;!--初始化参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--初始化参数的key--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--初始化参数的value--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>zhangsan<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>	<span class="comment">&lt;!--Servlet的访问路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>测试</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Servlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  1. 可以获取Servlet实现类的别名，即`&lt;servlet-name&gt;`的值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">servletName</span> <span class="operator">=</span> servletConfig.getServletName();	</span><br><span class="line">        System.out.println(servletName);	<span class="comment">// demo01</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//  2. 获取初始化参数`&lt;init-param&gt;`</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">initParameter1</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">initParameter2</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(initParameter1+<span class="string">&quot;:&quot;</span>+initParameter2);	<span class="comment">// zhangsan:123456</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//  3. 获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletConfig.getServletContext();</span><br><span class="line">        System.out.println(servletContext);		<span class="comment">//org.apache.catalina.core.ApplicationContextFacade@7a589846</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h2><blockquote>
<p>  <strong>ServletContext；Servlet上下文对象；单例</strong></p>
</blockquote>
<ul>
<li>  与 ServletConfig 实例不同，一个 Web 工程中只能有一个 ServletContext 实例。</li>
<li>  <code>ServletContext</code> 实例在 web 工程启动时自动创建，在 web 工程停止时自动销毁。</li>
<li>  <code>ServletContext</code> 是一个<strong>域对象</strong>，它被整个 web 工程共享。</li>
</ul>
<h3 id="1、域对象（共享数据）"><a href="#1、域对象（共享数据）" class="headerlink" title="1、域对象（共享数据）"></a>1、域对象（共享数据）</h3><p>域对象就是一个容器，类似于Map集合，可以存取数据。</p>
<table>
<thead>
<tr>
<th align="center">分类</th>
<th align="center">存数据</th>
<th align="center">取数据</th>
<th align="center">删除数据</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Map</td>
<td align="center"><code>put()</code></td>
<td align="center"><code>get()</code></td>
<td align="center"><code>remove()</code></td>
</tr>
<tr>
<td align="center">域对象</td>
<td align="center"><code>setAttribute()</code></td>
<td align="center"><code>getAttribute()</code></td>
<td align="center"><code>removeAttribute()</code></td>
</tr>
</tbody></table>
<p><strong>测试：</strong>在一个 Web 工程中创建 2 个 Servlet 实现类，因为在一个 web 工程中只能有一个 <code>ServletContext</code> 对象实例，所以在该 web 工程中任意一个 Servlet 实现类实例都可以对 <code>ServletContext</code> 对象进行增、删、取数据的操作。</p>
<ul>
<li>  Servlet 实例1：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo04_ServletContext</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line"> 		<span class="comment">//一个web工程中只能有一个ServletContext对象实例，所以在同一web工程的任意一个Servlet实现类中都可以执行以下操作：</span></span><br><span class="line">        <span class="comment">// 1.获取Context对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">// 2.往域对象中存数据</span></span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  Servlet 实例2：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05_ServletContext</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取Context对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="comment">// 2.从域对象中取数据</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> servletContext.getAttribute(<span class="string">&quot;k1&quot;</span>);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        <span class="comment">// 3.删除域对象中的数据</span></span><br><span class="line">        servletContext.removeAttribute(<span class="string">&quot;k1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h3 id="2、如何获取ServletContext？"><a href="#2、如何获取ServletContext？" class="headerlink" title="2、如何获取ServletContext？"></a>2、如何获取ServletContext？</h3><table>
<thead>
<tr>
<th align="left">说明</th>
<th>方法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">通过 request 对象获取</td>
<td><code>request.getServletContext()</code></td>
</tr>
<tr>
<td align="left">通过 HttpServlet 对象直接获取</td>
<td><code>[this.]getServletContext()</code></td>
</tr>
<tr>
<td align="left">通过 ServletConfig 对象获取</td>
<td><code>servletConfig.getServletContext()</code></td>
</tr>
</tbody></table>
<h3 id="3、ServletContext的作用"><a href="#3、ServletContext的作用" class="headerlink" title="3、ServletContext的作用"></a>3、ServletContext的作用</h3><blockquote>
<p>  ServletContext 类源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletContext</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TEMPDIR</span> <span class="operator">=</span> <span class="string">&quot;javax.servlet.context.tempdir&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ORDERED_LIBS</span> <span class="operator">=</span> <span class="string">&quot;javax.servlet.context.orderedLibs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContextPath</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletContext <span class="title function_">getContext</span><span class="params">(String uripath)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMajorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getEffectiveMajorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getEffectiveMinorVersion</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMimeType</span><span class="params">(String file)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">getResourcePaths</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> URL <span class="title function_">getResource</span><span class="params">(String path)</span> <span class="keyword">throws</span> MalformedURLException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> InputStream <span class="title function_">getResourceAsStream</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RequestDispatcher <span class="title function_">getRequestDispatcher</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RequestDispatcher <span class="title function_">getNamedDispatcher</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> Servlet <span class="title function_">getServlet</span><span class="params">(String name)</span> <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;Servlet&gt; <span class="title function_">getServlets</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getServletNames</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(Exception exception, String msg)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message, Throwable throwable)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRealPath</span><span class="params">(String path)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServerInfo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInitParameter</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getInitParameterNames</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">setInitParameter</span><span class="params">(String name, String value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getAttribute</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getAttributeNames</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAttribute</span><span class="params">(String name, Object object)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeAttribute</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletContextName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addServlet</span><span class="params">(String servletName, String className)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addServlet</span><span class="params">(String servletName, Servlet servlet)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addServlet</span><span class="params">(String servletName,</span></span><br><span class="line"><span class="params">            Class&lt;? extends Servlet&gt; servletClass)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration.Dynamic <span class="title function_">addJspFile</span><span class="params">(String jspName, String jspFile)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Servlet</span>&gt; T <span class="title function_">createServlet</span><span class="params">(Class&lt;T&gt; c)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServletRegistration <span class="title function_">getServletRegistration</span><span class="params">(String servletName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, ? <span class="keyword">extends</span> <span class="title class_">ServletRegistration</span>&gt; getServletRegistrations();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration.Dynamic <span class="title function_">addFilter</span><span class="params">(String filterName, String className)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration.Dynamic <span class="title function_">addFilter</span><span class="params">(String filterName, Filter filter)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration.Dynamic <span class="title function_">addFilter</span><span class="params">(String filterName,</span></span><br><span class="line"><span class="params">            Class&lt;? extends Filter&gt; filterClass)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Filter</span>&gt; T <span class="title function_">createFilter</span><span class="params">(Class&lt;T&gt; c)</span> <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FilterRegistration <span class="title function_">getFilterRegistration</span><span class="params">(String filterName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, ? <span class="keyword">extends</span> <span class="title class_">FilterRegistration</span>&gt; getFilterRegistrations();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> SessionCookieConfig <span class="title function_">getSessionCookieConfig</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSessionTrackingModes</span><span class="params">(</span></span><br><span class="line"><span class="params">            Set&lt;SessionTrackingMode&gt; sessionTrackingModes)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;SessionTrackingMode&gt; <span class="title function_">getDefaultSessionTrackingModes</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;SessionTrackingMode&gt; <span class="title function_">getEffectiveSessionTrackingModes</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(String className)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">EventListener</span>&gt; <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(T t)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(Class&lt;? extends EventListener&gt; listenerClass)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">EventListener</span>&gt; T <span class="title function_">createListener</span><span class="params">(Class&lt;T&gt; c)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> JspConfigDescriptor <span class="title function_">getJspConfigDescriptor</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ClassLoader <span class="title function_">getClassLoader</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">declareRoles</span><span class="params">(String... roleNames)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getVirtualServerName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSessionTimeout</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSessionTimeout</span><span class="params">(<span class="type">int</span> sessionTimeout)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRequestCharacterEncoding</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRequestCharacterEncoding</span><span class="params">(String encoding)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getResponseCharacterEncoding</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setResponseCharacterEncoding</span><span class="params">(String encoding)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th align="left">作用</th>
<th align="left">方法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">获取MIME类型</td>
<td align="left"><code>String getMimeType(String file)</code></td>
</tr>
<tr>
<td align="left">获取<code>web.xml</code>中配置的上下文参数<code>&lt;context-param&gt;</code>。</td>
<td align="left"><code>String getContextParameter(String key)</code></td>
</tr>
<tr>
<td align="left">获取当前WEB项目的工程路径</td>
<td align="left"><code>String getContextPath()</code></td>
</tr>
<tr>
<td align="left">获取WEB项目的绝对路径(war包所在路径)</td>
<td align="left"><code>String getRealPath(String path)</code></td>
</tr>
</tbody></table>
<ul>
<li><code>&lt;context-param&gt;</code><ul>
<li><code>&lt;context-param&gt;</code> 是上下文参数（它作用于整个WEB工程）</li>
<li><code>&lt;context-param&gt;</code> 在配置文件web.xml中的位置在最前面的<code>&lt;servlet&gt;</code>之外（上）</li>
</ul>
</li>
<li>工程路径：我们自己编写的代码所在的路径，绝对路径是我们编写的代码部署在服务器上之后的路径。</li>
<li>绝对路径：<ul>
<li>获取绝对路径时需要在 <code>getRealPath(&#39;/&#39;)</code> 中加一个斜杠，表示绝对路径</li>
<li>这个绝对路径是你写的项目被打成的war包所在的路径。[<code>协议 + IP地址 + 端口号 + war包路径</code>]</li>
</ul>
</li>
</ul>
<p><strong>测试：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Servlet_Context</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	TomCat自动创建的对象调用：getServletConfig()</span></span><br><span class="line"><span class="comment">        	servletConfig对象实例调用：getServletContext()</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletConfig.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 获取`web.xml`中配置的上下文参数`&lt;context-param&gt;`。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username_value</span> <span class="operator">=</span> servletContext.getContextParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password_value</span> <span class="operator">=</span> servletContext.getContextParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username_value+<span class="string">&quot;:&quot;</span>+password_value);	<span class="comment">// context:987654</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 获取当前的工程路径：`/工程路径`。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> servletContext.getContextPath();</span><br><span class="line">        System.out.println(contextPath);	<span class="comment">// /D1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 获取工程部署后在服务器上的绝对路径。[这个绝对路径是你写的项目被打成的war包所在的路径]</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        <span class="comment">// F:\03JavaWeb\code2\out\artifacts\D1_TomCat_war_exploded\</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="附：MIME类型说明"><a href="#附：MIME类型说明" class="headerlink" title="附：MIME类型说明"></a>附：MIME类型说明</h3><p>MIME 类型是互联网通信过程中定义的一种文件数据类。</p>
<p>MIME（Multipurpose Internet Mail Extensions）：多功能邮件扩充服务。</p>
<p>MIME类型的格式：大类型/小类型，并与某一种文件扩展名相对应。</p>
<ul>
<li><p>常见的MIME类型</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">文件</th>
<th align="center">文件后缀名</th>
<th align="center">MIME类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">超文本标记语言</td>
<td align="center">.html || .htm</td>
<td align="center">text/html</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">普通文本</td>
<td align="center">.txt</td>
<td align="center">text/plain</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">RTF文本（类似于Word文档）</td>
<td align="center">.rtf</td>
<td align="center">application/rtf</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">GIF图形</td>
<td align="center">.gif</td>
<td align="center">image/img</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">JPEG图形</td>
<td align="center">.jpeg || .jpg</td>
<td align="center">image/jpeg</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">au声音文件</td>
<td align="center">.au</td>
<td align="center">auto/basic</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">MIDI音乐文件</td>
<td align="center">.mid || .midi</td>
<td align="center">audio/midi || audio/x-midi</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">RealAudio音乐文件</td>
<td align="center">.ra || .ram</td>
<td align="center">video/mpeg</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">MPEG文件</td>
<td align="center">.mpg || .mpeg</td>
<td align="center">video/mpeg</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">AVI文件</td>
<td align="center">.avi</td>
<td align="center">video/x-msvideo</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">GZIP文件</td>
<td align="center">.gz</td>
<td align="center">application/x-gzip</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">TAR文件</td>
<td align="center">.tar</td>
<td align="center">application/x-tar</td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h1 id="Servlet-中的请求和响应"><a href="#Servlet-中的请求和响应" class="headerlink" title="Servlet 中的请求和响应"></a>Servlet 中的请求和响应</h1><p>Request 对象和 Response 对象是 Tomcat 服务器在监听到请求后由 Servlet 程序自动创建的，我们可以在 Servlet 的实现类中直接使用。</p>
<p>Request 对象是用来获取请求消息的，Response 对象是用来返回响应消息的。</p>
<h2 id="1、Request"><a href="#1、Request" class="headerlink" title="1、Request"></a>1、Request</h2><h3 id="Request对象的继承结构"><a href="#Request对象的继承结构" class="headerlink" title="Request对象的继承结构"></a>Request对象的继承结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ServletRequest		-- 接口</span><br><span class="line">	|</span><br><span class="line">HttpServletRequest		-- 接口</span><br><span class="line">	|</span><br><span class="line">org.apache.catalina.connector.RequestFacade 	--类（TomCat创建的）</span><br></pre></td></tr></table></figure>

<h3 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h3><h4 id="1、HttpServletRequest-有什么作用？"><a href="#1、HttpServletRequest-有什么作用？" class="headerlink" title="1、HttpServletRequest 有什么作用？"></a>1、HttpServletRequest 有什么作用？</h4><ul>
<li>  Tomcat 服务器会一直监听客户端的请求。当监听到请求消息时，就会把请求消息数据封装到 ServletRequest 接口的实现类对象中。</li>
<li>  通过 Servlet 对象的 <code>service()</code>方法（或者 <code>doGet()</code> 和 <code>doPos()</code> 方法）可以获取到这个实现类对象。</li>
<li>  通过 <code>HttpServletRequest</code> 的子类实例，获取到客户端请求消息中包含的信息；</li>
<li>  在 <code>service()</code> 方法中编写处理请的逻辑，并将响应结果封装到 <code>HttpServletResponse</code> 的实现类对象中，返回给客户端。</li>
</ul>
<h4 id="2、HttpServletRequest类中的方法："><a href="#2、HttpServletRequest类中的方法：" class="headerlink" title="2、HttpServletRequest类中的方法："></a>2、HttpServletRequest类中的方法：</h4><h5 id="2-1、获取请求消息中数据的方法"><a href="#2-1、获取请求消息中数据的方法" class="headerlink" title="2.1、获取请求消息中数据的方法"></a>2.1、获取请求消息中数据的方法</h5><h6 id="获取请求行数据："><a href="#获取请求行数据：" class="headerlink" title="获取请求行数据："></a>获取请求行数据：</h6><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">说明</th>
<th align="left">例子</th>
</tr>
</thead>
<tbody><tr>
<td align="left">获取请求方式</td>
<td align="left"><code>String getMethod()</code></td>
<td align="left"><code>GET</code></td>
</tr>
<tr>
<td align="left">获取访问路径(url-pattern)</td>
<td align="left"><code>String getServletPath()</code></td>
<td align="left"><code>/demo01</code></td>
</tr>
<tr>
<td align="left">获取请求参数[只适用于GET请求]</td>
<td align="left"><code>String getQueryString()</code></td>
<td align="left"><code>name=zhangsan</code></td>
</tr>
<tr>
<td align="left">获取URI（统一资源标识符）</td>
<td align="left"><code>String getRequestURI()</code></td>
<td align="left"><code>/day14/demo01</code></td>
</tr>
<tr>
<td align="left">获取URL（统一资源定位符）</td>
<td align="left"><code>StringBuffer getRequestURL()</code></td>
<td align="left"><code>http://localhost/day14/demo01</code></td>
</tr>
<tr>
<td align="left">获取协议及版本信息</td>
<td align="left"><code>String getProtocol()</code></td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">获取客户机的IP地址</td>
<td align="left"><code>String getRemoteHost()</code></td>
<td align="left">-</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>String getRemoteAddr()</code></td>
<td align="left">-</td>
</tr>
</tbody></table>
<ul>
<li><code>ServletRequest</code> 接口中没有定义<code>getMethod()</code>方法，<code>HttpServletRequest</code>接口中才开始定义该方法，所以如果想要使用该方法，自定义的类必须实现 <code>HttpServletRequest</code>接口。</li>
</ul>
<h6 id="获取请求头数据："><a href="#获取请求头数据：" class="headerlink" title="获取请求头数据："></a>获取请求头数据：</h6><table>
<thead>
<tr>
<th align="center"></th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>Enumeration&lt;String&gt; getHeaderNames()</code></td>
<td align="left">获取所有请求头的名称</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>String getHeader(String name)</code></td>
<td align="left">通过请求头的名称获取请求头的值</td>
</tr>
</tbody></table>
<h6 id="获取请求体数据（POST请求专有）"><a href="#获取请求体数据（POST请求专有）" class="headerlink" title="获取请求体数据（POST请求专有）"></a>获取请求体数据（POST请求专有）</h6><p><code>ServletRequest</code> 接口会将 Request 请求消息中的请求体封装到一个<strong>数据流对象</strong>中，只要获得了这个流对象，就可以从流对象中读取到<strong>请求体数据</strong>。所以说获取请求体的数据可分为2步实现：</p>
<ol>
<li>获取数据流对象</li>
<li>从流对象中读取请求体数据</li>
</ol>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="left">获取流对象</td>
<td align="left"></td>
</tr>
<tr>
<td align="center">1</td>
<td align="left"><code>BufferedReader getReader()</code></td>
<td align="left">获取字符输入流</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>ServletInputStream getInputStream()</code></td>
<td align="left">获取字节输入流</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left">从流对象中读取数据</td>
<td align="left">参考File对象</td>
</tr>
</tbody></table>
<h6 id="获取请求参数的通用方法："><a href="#获取请求参数的通用方法：" class="headerlink" title="获取请求参数的通用方法："></a>获取请求参数的通用方法：</h6><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>String getParameter(String name)</code></td>
<td align="center">根据请求参数的key获取value</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>String[] getParameterValues(String name)</code></td>
<td align="center">根据请求参数的key获取value数组</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>Enumeration&lt;String&gt; getParameterNames()</code></td>
<td align="center">获取所有请求参数的key</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>Map&lt;String,String[]&gt; getParameterMap()</code></td>
<td align="center">获取所有参数的Map集合</td>
</tr>
</tbody></table>
<h6 id="其它-☆"><a href="#其它-☆" class="headerlink" title="其它[☆]"></a>其它[☆]</h6><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>getAtrribute(key)</code></td>
<td align="center">获取Request共享域中的数据</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>getRequestDispatcher(String path)</code></td>
<td align="center">获取请求转发对象</td>
</tr>
</tbody></table>
<h5 id="2-2、修改请求消息中数据的方法"><a href="#2-2、修改请求消息中数据的方法" class="headerlink" title="2.2、修改请求消息中数据的方法"></a>2.2、修改请求消息中数据的方法</h5><table>
<thead>
<tr>
<th align="center"></th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>setAttribute(key, value)</code></td>
<td align="left">向Request共享域中添加数据</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>setCharacterEncoding(&quot;utf-8&quot;)</code></td>
<td align="left">设置请求体的编码方式为utf-8</td>
</tr>
</tbody></table>
<h6 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h6><ul>
<li>  GET方式：Tomcat8+ 之后已经将GET提交中文乱码的问题解决了。</li>
<li>  POST方式：在处理请求体数据之前，先通过Request对象设置请求体的编码方式</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.先设置请求体的编码方式为utf-8</span></span><br><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"><span class="comment">// 2.根据参数名称获取参数值</span></span><br><span class="line">String <span class="title function_">getParameter</span><span class="params">(String name)</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Tip：</strong></p>
<p>一定要在获取请求参数之前调用该方法，假如你要获取的请求参数有多个，但是只有最后一个会出现乱码，也必须在获取第一个请求参数之前调用<code>setCharacterEncoding()</code>方法，否则该方法不会生效。</p>
</blockquote>
<h4 id="3、请求转发"><a href="#3、请求转发" class="headerlink" title="3、请求转发"></a>3、请求转发</h4><p><strong>请求转发</strong>指服务器收到请求后，从一个资源跳到另一个资源的操作。</p>
<p>请求转发是一种服务内部的资源跳转方式。</p>
<h5 id="3-1、为什么要使用请求转发（使用场景）？"><a href="#3-1、为什么要使用请求转发（使用场景）？" class="headerlink" title="3.1、为什么要使用请求转发（使用场景）？"></a>3.1、为什么要使用请求转发（使用场景）？</h5><ul>
<li>  客户端通过浏览器访问服务器资源</li>
<li>  在服务器内部，我们希望服务是”高内聚、低耦合”的，尽量让每个类满足单一职责要求。这种情况下，客户端要访问的资源就不可能只存储在一个类中，也就是说客户端一次请求所需要的资源需要在服务器的同一个工程下的多个类中获取。这时候就需要请求转发了；</li>
<li>  请求转发规定了一个范围，范围内的所有数据可以共享。</li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200519150806643-1597652154014.png" alt="image-20200519150806643"></p>
<h5 id="3-2、请求转发的特点"><a href="#3-2、请求转发的特点" class="headerlink" title="3.2、请求转发的特点"></a>3.2、请求转发的特点</h5><ul>
<li>  请求转发是一次请求。</li>
<li>  浏览器的地址栏路径不会发生变化。</li>
<li>  只能转发到当前Web工程的资源中。</li>
<li>  请求转发可以访问到<code>WEB-INF</code>目录下。[<code>WEB-INF</code>是受保护的目录，浏览器不能直接访问到该目录]</li>
</ul>
<h5 id="3-3、Request共享域"><a href="#3-3、Request共享域" class="headerlink" title="3.3、Request共享域"></a>3.3、Request共享域</h5><ul>
<li><p><code>request共享域</code>：代表一次请求的范围，一般用于请求转发的多个资源间共享数据。</p>
</li>
<li><p>共享数据必须被保存到共享域中才能被该共享域中的其它对象访问到。</p>
</li>
</ul>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>void setAttribute(String name, Object obj)</code></td>
<td align="center">添加Map数据到Request共享域中</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>Object getAttribute(String name)</code></td>
<td align="center">从Request共享域中通过键获取值</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>void removeAttribute(String name)</code></td>
<td align="center">通过键删除键值对</td>
</tr>
</tbody></table>
<h5 id="3-4、请求转发的步骤"><a href="#3-4、请求转发的步骤" class="headerlink" title="3.4、请求转发的步骤"></a>3.4、请求转发的步骤</h5><ol>
<li><p>通过Request对象获取<em>请求转发器</em>对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RequestDispatcher <span class="title function_">getRequestDispatcher</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// 如：</span></span><br><span class="line">    req.getRequestDispatcher(String path)	<span class="comment">// 参数为要转发的地址的资源路径url-pattern</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	请求转发必须要以 &quot;/&quot; 开头，斜杠表示绝对路径，地址为：</span></span><br><span class="line"><span class="comment">		http://ip:port/工程名/</span></span><br><span class="line"><span class="comment">	映射到IDEA代码的WEB目录</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>RequestDispatcher</code>转发器对象来进行转发：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	请求转发是一次请求，但是要访问多个资源。所有的请求信息都包含在第一次请求中，所有的响应消息都在最后一次请求完毕后返回给用户。</span></span><br><span class="line"><span class="comment">	所以在转发的时候，要把	客户端的 请求和响应 同时转发给下一个服务器资源对象 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">forward(ServletRequest req, Servletresponse resp)</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="3-5、-lt-Base-gt-标签的作用"><a href="#3-5、-lt-Base-gt-标签的作用" class="headerlink" title="3.5、&lt;Base&gt;标签的作用"></a>3.5、<code>&lt;Base&gt;</code>标签的作用</h5><ul>
<li><p><code>&lt;Base&gt;</code>标签可以设置当前页面中所有相对路径的参考路径</p>
</li>
<li><p>我们在WEB目录下新建两个HTML项目</p>
<ol>
<li><p><code>index.html</code>：这是一个首页，可以跳转到<code>c.html</code>，也可以跳转到转发器ForwardC，通过转发器转发到<code>c.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;a/b/c.html&quot;</span>&gt;</span>跳转到网页C<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8080/D1/demo06&quot;</span>&gt;</span>调到转发器，转发器转发到网页C<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>a/b/c.html</code>：这是C页面，可以跳转回首页（<code>index.html</code>）【通过相对路径跳转】</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>这里是C网页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--添加&lt;base&gt;标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8080/D1/a/b/c.html&quot;</span>&gt;</span>	 </span><br><span class="line"><span class="comment">&lt;!--&lt;base href=&quot;http://localhost:8080/D1/a/b/&quot;&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--文件名可以省略，斜杠不能省略。[省略斜杠会让b默认是文件，而不是文件夹]--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../../index.html&quot;</span>&gt;</span>跳转到首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>ForwardC.java</code>：这是一个Java类，里面有一个转发器，跳转到C网页（<code>c.html</code>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo06_ForwardC</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这里是转发器ForwardC&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            WEB目录下的首页 index.html --&gt;&gt; 转发器ForwardC --&gt;&gt; WEB/a/b/c.html</span></span><br><span class="line"><span class="comment">	   */</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;/a/b/c.html&quot;</span>);</span><br><span class="line">        requestDispatcher.forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<p><img src="/2020/08/19/Servlet/image-20200519154532869-1597652154015.png" alt="image-20200519154532869"></p>
<ul>
<li><p>如果不使用<code>&lt;base&gt;</code>，经过转发器转发后，<code>c.html</code>返回首页的链接就会以转发器所在的<code>ForwardC.java</code>类的绝对路径为标准进行相对查找，这样找到的路径是不对的。</p>
</li>
<li><p>所以我们必须设置一个具有参考意义的绝对路径，让每次执行跳转到首页的操作时参考该路径，就不会出现转发器转发后路径错误的现象。</p>
</li>
<li><p><code>&lt;Base&gt;</code>标签可以设置当前页面中所有相对路径的参考路径，该参考路径为绝对路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//ip:port/工程路径/[资源路径] </span></span><br><span class="line"><span class="comment">// 资源路径可以省略</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="2、Response"><a href="#2、Response" class="headerlink" title="2、Response"></a>2、Response</h2><h3 id="2-1-HttpServletResopnse"><a href="#2-1-HttpServletResopnse" class="headerlink" title="2.1 HttpServletResopnse"></a>2.1 HttpServletResopnse</h3><p>HttpServletResponse 和 HttpServletRequest 一样是由 Tomcat 负责创建其子类实例的，Tomcat 服务器每次监听到请求消息就会创建一个 Response 子类实例。</p>
<p>HttpServletRequest 实例封装了客户端的请求的信息，HttpServletResponse 实例则封装了服务器发送给客户端的响应信息。</p>
<p>我们可以把响应消息封装到 HttpServletResponse 的子类实例中，Tomcat 服务器会进一步把该实例对象解析并封装到 HTTP 的响应体中，传输给客户端。</p>
<h4 id="1、设置响应行"><a href="#1、设置响应行" class="headerlink" title="1、设置响应行"></a>1、设置响应行</h4><ul>
<li>  响应行格式：</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br></pre></td></tr></table></figure>

<p>在响应行中，协议名称、版本号以及协议状态都不用手动设置，唯一可以设置的只有状态码了。</p>
<ul>
<li>  设置响应状态码</li>
</ul>
<blockquote>
<p>  HttpServletResponse#setStatus 源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HttpServletResponse</span> <span class="keyword">extends</span> <span class="title class_">ServletResponse</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 设置响应行的状态码</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(<span class="type">int</span> sc)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2、设置响应头"><a href="#2、设置响应头" class="headerlink" title="2、设置响应头"></a>2、设置响应头</h4><p>响应头都是一些键值对</p>
<blockquote>
<p>  HttpServletResponse#setHeader/addHeader 源码：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HttpServletResponse</span> <span class="keyword">extends</span> <span class="title class_">ServletResponse</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 设置响应头信息</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeader</span><span class="params">(String name, String value)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">	* 添加响应头</span></span><br><span class="line"><span class="comment">	*/</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addHeader</span><span class="params">(String name, String value)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3、设置响应体"><a href="#3、设置响应体" class="headerlink" title="3、设置响应体"></a>3、设置响应体</h4><p><strong>设置响应体：</strong></p>
<ol>
<li>先通过<code>resp</code>对象获取<code>输出流对象</code></li>
<li>调用<code>输出流对象</code>中的<code>write(String s)</code>方法可以将字符串<code>s</code>添加到<code>Response缓冲区</code>中，之后Tomcat会将<code>Response缓冲区</code>中的内容封装到响应消息的响应体中返回给客户端浏览器。</li>
</ol>
<ol>
<li><p>通过<code>resp</code>对象获取<em>输出流对象</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.获取输出流对象的方法：</span></span><br><span class="line">PrintWriter <span class="title function_">getWriter</span><span class="params">()</span>;	<span class="comment">// 获取字符输出流</span></span><br><span class="line">ServletOutputStream <span class="title function_">getOutputStream</span><span class="params">()</span>;	<span class="comment">// 获取字节输出流</span></span><br></pre></td></tr></table></figure></li>
<li><p>调用<em>输出流对象</em>中的<code>write()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.使用输出流，将数据输出到客户端浏览器</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="两个输出流的说明"><a href="#两个输出流的说明" class="headerlink" title="两个输出流的说明"></a>两个输出流的说明</h5><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">获取</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">字节流</td>
<td align="center"><code>getOutputStream()</code></td>
<td align="center">常用于下载（传递二进制数据）</td>
</tr>
<tr>
<td align="center">字符流</td>
<td align="center"><code>getWriter()</code></td>
<td align="center">常用于回传字符串</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p>Tip：两个流同时只能使用一个，否则访问服务器时会出现500以上的错误。</p>
</blockquote>
<h4 id="4、如何解决客户端输出到浏览器上的中文数据乱码问题？"><a href="#4、如何解决客户端输出到浏览器上的中文数据乱码问题？" class="headerlink" title="4、如何解决客户端输出到浏览器上的中文数据乱码问题？"></a>4、如何解决客户端输出到浏览器上的中文数据乱码问题？</h4><ol>
<li><strong>乱码产生的原因</strong></li>
</ol>
<blockquote>
<p>乱码问题产生的原因：编码&amp;解码使用的标准不一致。</p>
<ul>
<li>Response缓冲区的默认编码是<code>ISO-8859-1</code>。</li>
<li>如果服务器的响应消息中不告诉用户浏览器使用什么方式解码，那么用户浏览器就会使用默认的解码方式解码【默认解码方式与用户系统一致，比如安装的是中文系统的Windows，那么默认使用GBK编码】</li>
<li>那么拿着ISO-8859-1编码的数据，使用GBK解码，显然会出现乱码的现象。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取输出流对象</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 2.调用输出流对象中的write()方法，将字符串写到Response缓冲区中(并使用ISO编码编译)</span></span><br><span class="line">        writer.write(<span class="string">&quot;你好，世界&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.出现问题，输出到浏览器页面的中文内容无法被解析</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4.查看resp对象的编码类型 【ISO-8859-1】</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encoding</span> <span class="operator">=</span> resp.getCharacterEncoding();</span><br><span class="line">        System.out.println(encoding);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5.原因：浏览器默认使用的GBK编码，TomCat服务器通过resp对象传给浏览器的数据默认是ISO-8859-1编码，是浏览器无法解析的数据类型，所以会出现乱码。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><p><strong>解决方案</strong>（3个方法）：</p>
<ul>
<li><p>1)、在Response获取输出流对象之前，设置该流使用的编码方式与浏览器默认的解码方式一致</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1:</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo03response&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo05_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 0.设置TomCat的字符输出流的编码方式与系统相同（GBK）【耦合度高】</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;gbk&quot;</span>);</span><br><span class="line">        <span class="comment">// 1..获取字节/字符输出流对象【通过TomCat创建的resp对象来获取】</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 2.使用输出流，把数据输出到客户端浏览器</span></span><br><span class="line">        pw.write(<span class="string">&quot;&lt;h1&gt;hello 世界&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>2)、服务器在Response消息的响应头Headers中告诉客户端浏览器我使用的编码方式是什么，让浏览器选择对应的解码方式。[我们已知了计算机系统的默认编码方式为GBK，但是如果把这个程序放到默认以UTF-8编码的计算机上以方法1运行仍然会报错，所以我们需要把    设置输出流编码方式  &amp;  告诉浏览器输出流的编码方式  结合起来使用。]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo03response&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 0. 首先要设置服务器中字符输出流的编码格式</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">	   	<span class="comment">// 1.服务器告诉浏览器我使用哪种编码，让浏览器按照对应的码表解码	</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.获取字节/字符输出流【通过TomCat创建的resp对象来获取】</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 2.使用输出流，把数据输出到客户端浏览器</span></span><br><span class="line">        pw.write(<span class="string">&quot;&lt;h1&gt;hello 世界&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>3)、resoponse对象中的<code>setContentType()</code>方法不仅设置了服务器使用utf-8字符集，还设置了响应头中的<code>ContentType</code>的值为<code>&quot;text/html;utf-8&quot;</code>。简化了方法2的书写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo03response&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo03_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       </span><br><span class="line">	   	<span class="comment">// 1.同时设置服务器可客户端使用utf-8字符集	</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.获取字节/字符输出流【通过TomCat创建的resp对象来获取】</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">// 3.使用输出流，把数据输出到客户端浏览器</span></span><br><span class="line">        pw.write(<span class="string">&quot;&lt;h1&gt;hello 世界&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tip：此方法一定要在获取流对象之前调用才有效</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h3 id="2-2-重定向vs-转发"><a href="#2-2-重定向vs-转发" class="headerlink" title="2.2 重定向vs.转发"></a>2.2 重定向vs.转发</h3><blockquote>
<p>  <strong>重定向；redirect</strong></p>
</blockquote>
<h4 id="重定向理论基础"><a href="#重定向理论基础" class="headerlink" title="重定向理论基础"></a>重定向理论基础</h4><p><img src="/2020/08/19/Servlet/%E9%87%8D%E5%AE%9A%E5%90%91.png" alt="重定向"></p>
<p><strong>重定向是一种资源跳转的方式。</strong></p>
<p>它的一个使用场景是：用户希望访问某些资源，这些资源之前一直通过 A 接口获取。但是随着时间的推移和项目的迭代，A 接口慢慢被废弃了，被新的接口 B 所取代。此时，A 接口已经无法实现获取相应资源的服务了。但是，可能还存在一些老的请求一直在调用 A 接口，为了保证项目的兼容性，我们希望通过访问 A 接口的请求最终都被转发到 B 接口中。这就用到了<code>重定向（Redirect）</code>。</p>
<p>客户端先通过 URL 访问到了 A 接口，A 告诉用户我满足不了你的需求，但是我知道 B 接口能满足你的需求，所以 A 在自己的 Response 中包含了 302 的响应状态码以及 B 接口的 URL。让客户端浏览器再次访问 B 接口。在这个过程中，客户端浏览器对 A 和 B 接口都发送了 request 请求，总共是 2 次请求。</p>
<p><strong>重定向的特点：</strong></p>
<ul>
<li>  重定向是两次请求。</li>
<li>  浏览器的地址栏会发生变化。</li>
<li>  重定向可以访问其他站点（服务器）的资源。</li>
<li>  不能共享Request域中的数据。</li>
<li>  不能访问 WEB-INF 目录下的资源</li>
</ul>
<h4 id="请求重定向的2种实现方式"><a href="#请求重定向的2种实现方式" class="headerlink" title="请求重定向的2种实现方式"></a>请求重定向的2种实现方式</h4><h5 id="Case1："><a href="#Case1：" class="headerlink" title="Case1："></a>Case1：</h5><p>方法1：<code>resp.setStatus(302)</code> + <code>resp.setHeader(&quot;location&quot;,&quot;/D4/demo02response&quot;)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo01response&quot;)</span>	<span class="comment">// 当前资源路径</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo01重定向到demo02&quot;</span>);		<span class="comment">// 本路径的资源</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	重定向</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// 1. 给客户端返回302状态码。</span></span><br><span class="line">        resp.setStatus(<span class="number">302</span>);</span><br><span class="line">        <span class="comment">// 2. 给客户端返回跳转的地址【键值对】保存在响应头中返回。</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;location&quot;</span>,<span class="string">&quot;/D4/demo02response&quot;</span>);	<span class="comment">// 第一个斜杠表示绝对地址（给浏览器解析）</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Case2：-1"><a href="#Case2：-1" class="headerlink" title="Case2："></a>Case2：</h5><ul>
<li>方法2(推荐使用)：<code> resp.sendRedirect(&quot;http://www.baidu.com&quot;)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo01response&quot;)</span>	<span class="comment">// 当前资源路径</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo01_Response</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo01重定向到demo02&quot;</span>);		<span class="comment">// 本路径的资源	</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	重定向</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">		<span class="comment">// 1.动态的获取[绝对]工程路径</span></span><br><span class="line">     <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> req.getContextPath(	);</span><br><span class="line">        <span class="comment">// 2.调用重定向方法（该方法实现了返回302状态码 &amp; 返回跳转的地址）</span></span><br><span class="line">     <span class="comment">// resp.sendRedirect(contextPath+&quot;/demo02response&quot;);</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;http://www.baidu.com&quot;</span>);     <span class="comment">// 重定向可以访问其它服务器上的资源</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h4 id="转发（forward）"><a href="#转发（forward）" class="headerlink" title="转发（forward）"></a>转发（forward）</h4><ol>
<li>转发时地址栏路径不变</li>
<li>转发只能访问当前服务器下的资源</li>
<li>转发是一次请求，可以共享数据。</li>
</ol>
<h3 id="2-3-访问缓存（304）"><a href="#2-3-访问缓存（304）" class="headerlink" title="2.3 访问缓存（304）"></a>2.3 访问缓存（304）</h3><p>用户浏览器会把用户机暂时访问过的部分资源缓存到客户机中，未清空缓存的情况下，用户再次访问该资源时，客户端会自动检测到这些缓存的存在，就会给用户浏览器返回 304 响应状态码，让用户使用缓存的资源。从而节省了传输时间，减轻了服务器的压力。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="post-title-link" itemprop="url">Hexo+Gitee/GitHub搭建个人博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-18 11:05:31" itemprop="dateCreated datePublished" datetime="2020-08-18T11:05:31+08:00">2020-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-30 22:36:36" itemprop="dateModified" datetime="2022-05-30T22:36:36+08:00">2022-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%85%B6%E5%AE%83/" itemprop="url" rel="index"><span itemprop="name">其它</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="一、安装Git"><a href="#一、安装Git" class="headerlink" title="一、安装Git"></a>一、安装Git</h2><ul>
<li>全局安装Git。</li>
<li><a target="_blank" rel="noopener" href="https://npm.taobao.org/mirrors/git-for-windows">Git淘宝镜像下载地址</a> </li>
</ul>
<hr>
<h2 id="二、安装-node-js"><a href="#二、安装-node-js" class="headerlink" title="二、安装 node.js"></a>二、安装 node.js</h2><ol>
<li><p>全局安装Node.js；</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://npm.taobao.org/mirrors/node">Node.js 镜像地址</a></li>
</ul>
</li>
<li><p>安装完成后在控制台输出<code>node-v</code>查看版本信息；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v			# node -version</span><br></pre></td></tr></table></figure></li>
<li><p>Node中包含了NPM，在控制台输入<code>npm -v</code>查看版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure></li>
<li><p>npm默认的仓库地址是在国外网站，网速较慢。在这里推荐安装一款切换镜像的工具：<code>nrm</code>。首先安装<code>nrm</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install nrm -g		# g：global，表示全局安装</span><br></pre></td></tr></table></figure></li>
<li><p>安装完成后使用<code>nrm ls</code>查看npm的仓库列表，带*的就是当前选中的镜像仓库。使用<code>nrm use taobao</code>来指定要使用的镜像源。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nrm ls				# ls：list，展示nrm的仓库列表</span><br><span class="line">nrm use taobao	 	# 切换到taobao镜像源</span><br><span class="line">nrm test npm		# 可以使用该命令来测试网络速度</span><br></pre></td></tr></table></figure></li>
<li><p>当然也可以使用<code>cnpm</code>命令来使用cnpm命令，但是这种方法有时候会出现bug，不推荐使用！！！</p>
</li>
</ol>
<hr>
<h2 id="三、安装hexo"><a href="#三、安装hexo" class="headerlink" title="三、安装hexo"></a>三、安装hexo</h2><ol start="2">
<li><p>全局安装Hexo框架</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li>
<li><p>查看Hexo版本，验证是否安装成功。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure></li>
<li><p>在你的电脑中任意目录下创建一个任意名字的文件夹（比如：<code>E:/blog</code>）</p>
</li>
<li><p>在blog文件夹进入命令行窗口，执行Hexo的初始化命令。初始化完成后，该文件夹中会出现许多文件/文件夹。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></li>
<li><p>启动Hexo服务，即可在本地服务器上访问Hexo。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s		# s：server，启动Hexo服务</span><br></pre></td></tr></table></figure>

<p>启动完成后，会在命令窗口中给出一个本地网址：localhost：4000，进入该网址即可访问博客了。</p>
</li>
</ol>
<hr>
<h2 id="四、将博客部署到GitHub上"><a href="#四、将博客部署到GitHub上" class="headerlink" title="四、将博客部署到GitHub上"></a>四、将博客部署到GitHub上</h2><ol>
<li><p>进入GitHub官网，注册/使用账户，记住自己的用户名称，之后会用到。</p>
<ol>
<li>在GitHub中新建一个仓库，注意仓库名称一定要是<code>&#123;用户名称&#125;.github.io</code>，仓库名也就是你之后的博客网站地址。</li>
</ol>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20200818100633901.png" alt="image-20200818100633901"></p>
</li>
<li><p>在命令行窗口安装一个将Hexo部署到远端的工具。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save	# 局部安装</span><br></pre></td></tr></table></figure></li>
<li><p>在<code>E:/bolg</code>目录下找到<code>blog_config.yml</code>配置文件，修改/添加以下参数后，保存并退出。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span>	</span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>		<span class="comment"># 远端仓库的类型</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/LvNengDong/LvNengDong.github.io</span>		<span class="comment"># 远端仓库的地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span>	<span class="comment"># 分支名称</span></span><br></pre></td></tr></table></figure></li>
<li><p>将Hexo博客部署到远端仓库。第一次部署过程中要输入GitHub的账号和密码，正确输入即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d 			# d：deploy，部署到远端仓库</span><br></pre></td></tr></table></figure></li>
<li><p>上传成功后会在GitHub仓库中多出来一些文件，这些文件正是你本地博客中的内容。</p>
</li>
<li><p>这时候使用<code>&#123;用户名称&#125;.github.io</code>即可访问到你的博客了。</p>
</li>
<li><p>由于网速原因，可能会出现一切配置无误时，访问博客仍然会出现404错误，这个时间从几秒到几个小时不等。</p>
</li>
</ol>
<hr>
<h2 id="五、将博客部署到gitee上"><a href="#五、将博客部署到gitee上" class="headerlink" title="五、将博客部署到gitee上"></a>五、将博客部署到gitee上</h2><p>Gitee是一个静态网页托管服务器，托管后就可在任意网络设备上访问你的博客了。</p>
<ol>
<li><p>进入Gitee官网，注册账号。</p>
</li>
<li><p>在个人主页中找到新建仓库，建立一个新的仓库。</p>
</li>
<li><p>在命令行窗口安装一个将Hexo部署到远端的工具。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li>
<li><p>修改<code>blog_config.yml</code>配置文件中的部分参数。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">	<span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">	<span class="attr">repo:</span> <span class="string">https://gitee.com/lv_neng_dong/study.git</span>  	</span><br><span class="line">	<span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">1. 上传文件到gitee仓库。</span><br><span class="line"></span><br><span class="line">   ```shell</span><br><span class="line">   git config --global user.email &quot;注册时的邮箱&quot;</span><br><span class="line">   git config --global user.name &quot;注册时的用户名&quot;</span><br><span class="line">   hexo d 				# 部署到远端仓库</span><br></pre></td></tr></table></figure>

<ol>
<li><p>上传之后在Gitee仓库会看到多出来一些文件。在Gitee仓库中找到右上方的“服务”，打开”Gitee Pages”服务，点击左下方的“更新。之后会在中间部分刷新出一个网址，点击即可访问你的博客</p>
</li>
<li><p>（每次更新博客后都需要重新“更新”！！！）</p>
</li>
</ol>
<hr>
<h2 id="六、常见的问题"><a href="#六、常见的问题" class="headerlink" title="六、常见的问题"></a>六、常见的问题</h2><h3 id="1-使用Gitee部署博客时出现的问题"><a href="#1-使用Gitee部署博客时出现的问题" class="headerlink" title="1    使用Gitee部署博客时出现的问题"></a>1    使用Gitee部署博客时出现的问题</h3><ol>
<li><p>将本地博客部署到Gitee远端时，无法加载主题？</p>
<ul>
<li>修改hexo的站点配置文件<code>_config.yml</code></li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;	</span></span><br><span class="line"><span class="comment">## [如果您的站点放在子目录中，则将url设置为&#x27;http://yoursite.com/child&#x27;，并将root设置为&#x27;/child/&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改前：</span></span><br><span class="line"><span class="comment"># url: https://yoursite.com</span></span><br><span class="line"><span class="comment"># root: /					# 改为  /你的仓库名/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后：</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://yoursite.com</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/study/</span></span><br></pre></td></tr></table></figure></li>
<li><p>只能显示安装当天的博客，第二天更新的博客无法显示。</p>
<ul>
<li>修改hexo的站点配置文件<code>_config.yml</code></li>
</ul>
</li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改前：</span></span><br><span class="line"><span class="comment"># url: https://yoursite.com		# 修改url为你的Gitee地址。</span></span><br><span class="line"><span class="comment"># root: /study/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后：</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://lv_neng_dong.gitee.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/study/</span></span><br></pre></td></tr></table></figure>



<h3 id="2-Hexo博客无法展示图片问题"><a href="#2-Hexo博客无法展示图片问题" class="headerlink" title="2    Hexo博客无法展示图片问题"></a>2    Hexo博客无法展示图片问题</h3><ol>
<li><p>找到Hexo的站点配置文件：<code>E:/blog/_config.yml</code>，修改参数为：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span>		<span class="comment"># 开启 `推送资源所在文件夹`</span></span><br></pre></td></tr></table></figure></li>
<li><p>完成此设置后，使用<code>Hexo new &quot;文件名&quot;</code>新建博客时，会产生一个和文件同名的文件夹，用来存放静态资源文件。</p>
</li>
<li><p>在Hexo的根路径下下载一个插件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure></li>
<li><p>当博客中需要插入图片时，将需要添加的图片放入同名的文件夹中，通过相对路径索引到该图片。</p>
</li>
<li><p>我这里使用的是<code>Typora编辑器</code>，所以直接将图片资源的保存位置设置为了<code>./$&#123;filename&#125;</code>当前目录的同名文件夹下，方便统一管理。</p>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20200818131015829.png" alt="image-20200818131015829"></p>
</li>
</ol>
<hr>
<h2 id="七、用hexo写博客"><a href="#七、用hexo写博客" class="headerlink" title="七、用hexo写博客"></a>七、用hexo写博客</h2><ol>
<li><p>在<code>E:/blog</code>目录下使用命令行窗口创建一篇新的博客。创建的文件未markdown格式，保存在当前文件的<code>./source/_posts</code>目录下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n &quot;My First Blog&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>找到新建的博客，用任一Markdown编辑软件编辑博客内容。</p>
</li>
<li><p>编辑完成后保，在<code>E:/blog</code>的命令行窗口中执行以下命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean 				# 清除记录</span><br><span class="line">hexo g					# g：generate，生成静态网页</span><br><span class="line">hexo s					# 启动hexo[部署到远端时这一步可以省略]</span><br><span class="line">hexo d					# 将本地博客中的内容部署到远端仓库</span><br></pre></td></tr></table></figure>

<p>然后就可以在浏览器中去访问你的博客内容了。</p>
</li>
</ol>
<hr>
<h2 id="八、Hexo常用命令"><a href="#八、Hexo常用命令" class="headerlink" title="八、Hexo常用命令"></a>八、Hexo常用命令</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo new <span class="string">&quot;My New Post&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo server</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo generate</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo deploy</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<hr>
<h2 id="九、Hexo回滚"><a href="#九、Hexo回滚" class="headerlink" title="九、Hexo回滚"></a>九、Hexo回滚</h2><p>我们将代码提交到GitHub上时，经常会出现提交错误。</p>
<p>如果错误的原因是因为本地提交的版本与GitHub上提交成功的版本不一致造成的，可以选择回滚本地版本到与GitHub提交的版本一致来解决。</p>
<ol>
<li><p>进入如下图所示的目录，HEAD文件就是我们提交的日志文件。选择与GitHub提交的版本一致的版本进行回滚</p>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20201228205609039.png" alt="image-20201228205609039"></p>
</li>
<li><p>在<code>./deploy_git</code>目录下进入cmd命令窗口，执行Git命令。</p>
</li>
</ol>
<p><img src="/2020/08/18/Hexo-Gitee-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/image-20201228205403601.png" alt="image-20201228205403601"></p>
<h3 id="常见的Git命令"><a href="#常见的Git命令" class="headerlink" title="常见的Git命令"></a>常见的Git命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 git reset HEAD^　　#回退所有内容到上一个版本　　　　　</span><br><span class="line">2 git reset HEAD^　　a.py　#回退a.py这个文件的版本到上一个版本　　　　　</span><br><span class="line">3 git reset –soft　　HEAD~3　#向前回退到第3个版本　　　　　　</span><br><span class="line">4 git reset –hard　　origin/master　#将本地的状态回退到和远程的一样</span><br><span class="line">5 git reset 057d　　#回退到某个版本[版本号只取前4位]　　　　　　</span><br><span class="line">6 git revert HEAD　#回退到上一次提交的状态，按照某一次的commit完全反向的进行一次commit</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/28/Spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/28/Spring/" class="post-title-link" itemprop="url">Spring</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-07-28 10:05:13" itemprop="dateCreated datePublished" datetime="2020-07-28T10:05:13+08:00">2020-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-03-29 18:35:01" itemprop="dateModified" datetime="2022-03-29T18:35:01+08:00">2022-03-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-Spring概述"><a href="#1-Spring概述" class="headerlink" title="1 Spring概述"></a>1 Spring概述</h1><h2 id="1-1-是什么"><a href="#1-1-是什么" class="headerlink" title="1.1 是什么"></a>1.1 是什么</h2><ul>
<li>  <strong>轻量级</strong> Java 开发框架。</li>
<li>  目的是为了解决企业级应用开发中的业务逻辑层和其他各层的耦合问题。</li>
<li>  它是一个分层的 JavaSE/JavaEE <strong>一站式轻量级</strong>开源框架，为开发Java应用程序提供全面的基础架构支持。</li>
<li>  Spring 负责基础架构，因此Java开发者可以<strong>专注于应用程序的开发</strong>。</li>
<li>  Spring 最根本的使命是解决企业级应用开发的复杂性，即简化 Java 开发。</li>
<li>  Spring可以做很多事情，它为企业级开发提供给了丰富的功能，但是这些功能的底层都依赖于它的两个核心特性，也就是依赖注入（dependency injection，DI）和面向切面编程（aspectoriented programming，AOP）。</li>
</ul>
<h2 id="1-2-两大核心"><a href="#1-2-两大核心" class="headerlink" title="1.2 两大核心"></a>1.2 两大核心</h2><blockquote>
<ol>
<li><strong>IoC（Inverse of Control）</strong>：控制反转</li>
<li><strong>AOP（Aspect Oriented Programmimg）</strong>：面向切面编程</li>
</ol>
</blockquote>
<p><strong>IOC</strong></p>
<ul>
<li>  IOC 就是不会在代码中直接使用 <code>new</code> 关键字创建对象，只是把对象声明出来；</li>
<li>  在代码中不直接让对象与服务进行连接，但是在配置文件中描述了哪一项组件需要哪一项服务，由容器将它们组装起来。</li>
<li>  在一般的 IOC 场景中，容器创建了所有的对象，并设置了必要的属性将他们联系在一起，等到需要使用的时候才把他们声明出来；</li>
<li>  或者使用注解方式，容器会自动根据注解把对象组合起来。</li>
</ul>
<p><strong>AOP</strong></p>
<ul>
<li>  AOP 是一种编程模式，它允许开发人员通过自定义的横切点进行模块化，将那些影响多个类的行为封装到可重用的模块中。</li>
<li>  比如日志输出，不使用 AOP 的话就需要把日志的输出语句放在所有类、方法中，但是有了 AOP 就可以把日志输出语句封装成一个可重用模块，在以声明的方式将它们放在类中，每次使用类就自动完成了日志输出。 </li>
</ul>
<hr>
<h2 id="1-3-Spring-的设计目标、设计理念、和核心"><a href="#1-3-Spring-的设计目标、设计理念、和核心" class="headerlink" title="1.3 Spring 的设计目标、设计理念、和核心"></a>1.3 Spring 的设计目标、设计理念、和核心</h2><ul>
<li>  <strong>Spring设计目标</strong>：为开发者提供一个一站式轻量级应用开发平台；</li>
<li>  <strong>Spring设计理念</strong>：在JavaEE开发中，支持POJO和JavaBean开发方式，使应用面向接口开发，充分支持OOP（面向对象）设计方法；Spring通过IOC容器实现对象耦合关系的管理，并实现依赖反转，将对象之间的依赖关系交给IOC容器，实现解耦；</li>
<li>  <strong>Spring框架的核心</strong>：IOC 容器和 AOP 模块。通过 IOC 容器管理 POJO 对象以及他们之间的耦合关系；通过 AOP 以动态非侵入的方式增强服务。</li>
<li>  IOC 让相互协作的组件保持松散的耦合，而 AOP 编程允许你把遍布于应用各层的功能分离出来形成可重用的功能组件。</li>
</ul>
<hr>
<h2 id="1-4-优缺点"><a href="#1-4-优缺点" class="headerlink" title="1.4    优缺点"></a>1.4    优缺点</h2><blockquote>
<p>  <strong>优点</strong></p>
</blockquote>
<ol>
<li><strong>降低耦合度，简化开发</strong><ul>
<li>通过Spring提供的IoC容器，可以将对象间的依赖关系交由Spring进行控制，避免硬解码所造成的程序过度耦合。</li>
<li>用户也不必再为单例模式、属性文件解析这些很底层的需求写代码，可以更专注于上层的应用。</li>
</ul>
</li>
<li><strong>支持面向切面编程（AOP）</strong><ul>
<li>  Spring 提供面向切面编程，可以方便的实现对程序进行权限拦截、运行监控等功能。</li>
</ul>
</li>
<li><strong>声明式事务的支持</strong><ul>
<li>  只需要通过配置就可以完成对事务的管理，而无需手动编写代码。</li>
</ul>
</li>
<li><strong>方便程序的测试</strong><ul>
<li>  Spring 对 Junit4 的支持，可以通过注解方便的测试 Spring 程序。</li>
</ul>
</li>
<li><strong>方便集成各种优秀框架</strong><ul>
<li>  Spring 不排斥各种优秀的开源框架，其内部提供了对各种优秀框架的直接支持（如：Struts、Hibernate、MyBatis等）。</li>
</ul>
</li>
<li><strong>降低 JavaEE API 的使用难度</strong><ul>
<li>  Spring 对 JavaEE 开发中非常难用的一些 API（JDBC、JavaMail、远程调用等），都提供了封装，使这些 API 应用难度大大降低。 </li>
</ul>
</li>
</ol>
<blockquote>
<p>  <strong>缺点</strong></p>
</blockquote>
<ol>
<li> 配置复杂（相较于 SpringBoot 而言）</li>
<li> Spring 依赖反射，反射影响性能</li>
</ol>
<hr>
<h2 id="1-5-体系结构"><a href="#1-5-体系结构" class="headerlink" title="1.5    体系结构"></a>1.5    体系结构</h2><p>Spring 项目目前总共有20多个模块，点击这里访问 <a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-framework">GitHub</a> 查看模块源码。</p>
<p><img src="/2020/07/28/Spring/image-20220329182326817.png" alt="image-20220329182326817"></p>
<p>这些模块按照功能大致被划分为</p>
<ul>
<li>  <strong>核心容器（Core Container）</strong></li>
<li>  <strong>AOP（Aspect Oriented Programming）</strong></li>
<li>  <strong>设备支持（Instrmentation）</strong></li>
<li>  <strong>数据访问与集成（Data Access/Integeration）</strong> 、 </li>
<li>  <strong>Web</strong></li>
<li>  <strong>消息（Messaging）</strong> </li>
<li>  <strong>Test</strong></li>
</ul>
<p>6类，下图是 Spring5 的模块分类图：</p>
<p><img src="/2020/07/28/Spring/spring%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-1598445621955" alt="image-20200706181255193"></p>
<p><strong>Spring Core</strong>：提供了框架的基本组成部分，包括控制反转（IOC）和依赖注入（DI）功能。</p>
<p><strong>Spring Beans</strong>：提供了 BeanFactory，是工厂模式的一个经典实现，Spring 将管理的对象称为 Bean。</p>
<p><strong>Spring Context</strong>：构建于 Core 封装包基础上的 Context 封装包，提供了一种框架式的对象访问方法。</p>
<p><strong>Spring JDBC</strong>：提供了一个 JDBC 的抽象层，消除了烦琐的 JDBC 编码和数据库厂商特有的错误代码解析， 用于简化JDBC。</p>
<p><strong>Spring AOP</strong>：提供了面向切面的编程实现，让你可以自定义拦截器、切点等。</p>
<p><strong>Spring Web</strong>：提供了针对 Web 开发的集成特性，例如文件上传，利用 servlet listeners 进行 IOC 容器初始化和针对 Web 的 ApplicationContext。</p>
<p><strong>Spring Test</strong>：主要为测试提供支持的，支持使用 JUnit 或 TestNG 对 Spring 组件进行单元测试和集成测试。</p>
<h2 id="1-6-Spring-中用到了哪些设计模式"><a href="#1-6-Spring-中用到了哪些设计模式" class="headerlink" title="1.6 Spring 中用到了哪些设计模式"></a>1.6 Spring 中用到了哪些设计模式</h2><ol>
<li> <strong>工厂模式</strong>：BeanFactory 就是工厂模式的提现，用来创建对象的实例。</li>
<li> <strong>单例模式</strong>：Bean 默认为单例模式。</li>
<li> <strong>代理模式</strong>：AOP 功能用到了 JDK 的动态代理和 cglib 字节码生成技术。</li>
<li> <strong>模板方法模式</strong>：用来解决代码重复的问题。比如 RestTemplate，JmsTemplate，JpaTemplate。</li>
<li> <strong>观察者模式</strong>：定义对象间一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都会得到通知并被动更新，如Spring 中 listener 的实现 ApplicationListener。</li>
</ol>
<hr>
<h1 id="2-IoC"><a href="#2-IoC" class="headerlink" title="2    IoC"></a>2    IoC</h1><blockquote>
<p>  超链接：<a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/08/07/Spring%E2%80%94%E2%80%94IoC/">Spring——IoC</a></p>
</blockquote>
<hr>
<h1 id="3-AOP"><a href="#3-AOP" class="headerlink" title="3    AOP"></a>3    AOP</h1><blockquote>
<p>  超链接：<a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/07/20/Spring%E2%80%94%E2%80%94AOP/">Spring——AOP</a></p>
</blockquote>
<hr>
<h1 id="4-Spring-TX：Spring-中的事务"><a href="#4-Spring-TX：Spring-中的事务" class="headerlink" title="4    Spring TX：Spring 中的事务"></a>4    Spring TX：Spring 中的事务</h1><blockquote>
<p>  <strong>超链接：</strong><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/07/20/Spring%E2%80%94%E2%80%94TX/">Spring——TX</a></p>
</blockquote>
<ul>
<li>  Spring 中的事务是利用 AOP 面向切面的特性配置的。</li>
<li>  事务管理是一个公共的功能，在很多方法中都需要被使用到，利用 AOP 的特性，可以将事务管理抽取成一个增强类，在代码中需要使用事务管理的方法上动态织入即可。可以在不修改代码的基础上动态的给方法增加事务管理的功能。</li>
<li>  如果是基于 XML 配置的 Spring 事务管理，那么在业务层方法的代码上，你将看不到任何事务管理的相关代码，但是这些方法确确实实是被事务所管理的，管理事务的配置信息写在 XML 配置文件中，运行期间通过动态织入对切入点方法进行增强。</li>
</ul>
<h2 id="1-Before：不使用事务管理存在的问题"><a href="#1-Before：不使用事务管理存在的问题" class="headerlink" title="1    Before：不使用事务管理存在的问题"></a>1    Before：不使用事务管理存在的问题</h2><blockquote>
<p>  <strong>转账（Account）案例中的事务</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户的业务层实现类</span></span><br><span class="line"><span class="keyword">package</span> cn.xsyu.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 业务逻辑层的具体实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 依赖注入</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAccountDao</span><span class="params">(AccountDao accountDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.accountDao = accountDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        accountDao.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.update(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        accountDao.add(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">findByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accountDao.findByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转账操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sourceName    转出账户名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetName    转入账户名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> money         转账金额</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String sourceName, String targetName, Double money)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取转出账户和转入账户</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">sourceAccount</span> <span class="operator">=</span> accountDao.findByName(sourceName);</span><br><span class="line">        <span class="type">Account</span> <span class="variable">targetAccount</span> <span class="operator">=</span> accountDao.findByName(targetName);</span><br><span class="line">        <span class="comment">// 转出账户减钱，转入账户加钱</span></span><br><span class="line">        sourceAccount.setMoney(sourceAccount.getMoney()-money);</span><br><span class="line">        targetAccount.setMoney(targetAccount.getMoney()+money);</span><br><span class="line">        <span class="comment">// 更新数据</span></span><br><span class="line">        accountDao.update(sourceAccount);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;	<span class="comment">// 模拟转账异常</span></span><br><span class="line">        accountDao.update(targetAccount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>存在的问题</strong>：</p>
</blockquote>
<ol>
<li><p>事务被自动控制了[默认]。换言之，我们使用了 <code>connection</code> 对象的 <code>setAutoCommit(true)</code>，每执行一条 SQL 语句就会进行一次完整的事务。</p>
</li>
<li><p>此时，如果方法的每个业务功能中都只包含一条 SQL 语句，事务管理是 OK 的，出现异常时可以回滚所有的操作。  </p>
</li>
<li><p>但是如果一个业务方法中包含多条 SQL 语句，当业务出现异常时，就无法实现整个业务的回滚操作了。</p>
<ul>
<li>当我们执行转账业务时，由于执行过程中出现异常，会导致转账失败。但是因为我们每次执行的持久层方法都是独立事务，导致无法实现事务控制（不符合事务的一致性）。</li>
<li>每次自动提交，都会执行一遍开启事务、提交事务、回滚事务、关闭事务的过程。</li>
</ul>
</li>
</ol>
<blockquote>
<p>  <strong>分析：</strong></p>
</blockquote>
<p><img src="/2020/07/28/Spring/%E8%87%AA%E5%8A%A8%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98.png"></p>
<ol>
<li><code>accountDao.findByName(sourceName);</code>：完成了按姓名查找的功能，并成功提交事务。</li>
<li><code>accountDao.findByName(targetName);</code>：完成了按姓名查找的功能，并成功提交事务。</li>
<li><code>accountDao.update(sourceAccount);</code>：完成了更新<code>sourceAccount</code>账户的功能，该<code>账户中的余额=原本的余额-money</code>，并成功提交事务。</li>
<li><code>int i = 1/0；</code>：除0异常，程序终止。</li>
<li><code>accountDao.update(targetAccount);</code>：更新<code>targetAccount</code>账户的事务未能执行，但是由于之前的三个事务与该事务独立，所以回滚的时候并不会撤销之前的操作。这就造成了转出账户余额减少，而转入账户余额未增加的问题。</li>
</ol>
<hr>
<h2 id="2-After：解决方案"><a href="#2-After：解决方案" class="headerlink" title="2    After：解决方案"></a>2    After：解决方案</h2><blockquote>
<p>  <strong>解决方法</strong></p>
</blockquote>
<ul>
<li>关闭事务的自动提交，让上述四步操作由一个事务管理。这样其中的任何一步出现异常，事务都会回滚到事务开始的状态。</li>
<li>并且让上述四步操作的<code>Connection对象</code>为同一个。</li>
</ul>
<blockquote>
<p>  <strong>具体步骤</strong></p>
</blockquote>
<ol>
<li>编写ConnectionUtils类。从数据源中获取一个连接Connection，并且实现和线程的绑定。<ul>
<li>  如果不绑定 Connection，每次使用调用 CRUD 操作时都会重新创建一个新的 Connection 对象。</li>
<li>  绑定了 Connection 后，每次操作使用的 Connection 都是同一个 Connection 对象。</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库连接的工具类；</span></span><br><span class="line"><span class="comment"> * 用于从DataSource中获取一个连接Connection，并且实现和线程的绑定</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectionUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建一个本地线程变量</span></span><br><span class="line">    <span class="keyword">private</span> ThreadLocal&lt;Connection&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;Connection&gt;();</span><br><span class="line">    <span class="comment">// DI</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDataSource</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dataSource = dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前线程上的连接【本程序是单线程程序】</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.从ThreadLocal上获取数据库连接Connection</span></span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">            <span class="comment">// 2.判断当前线程上是否有连接</span></span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">// 3.判断当前线程上没有连接</span></span><br><span class="line">                <span class="comment">// 从数据源中获取一个连接，并且存入ThreadLocal中</span></span><br><span class="line">                <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">                threadLocal.set(conn);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4.返回当前线程上的连接</span></span><br><span class="line">            <span class="keyword">return</span> conn;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 把连接和线程解绑</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<hr>
<h1 id="5-Spring中的JDBCTemplate"><a href="#5-Spring中的JDBCTemplate" class="headerlink" title="5    Spring中的JDBCTemplate"></a>5    Spring中的JDBCTemplate</h1><h2 id="5-1-JdbcTemplate概述"><a href="#5-1-JdbcTemplate概述" class="headerlink" title="5.1    JdbcTemplate概述"></a>5.1    JdbcTemplate概述</h2><ul>
<li><p>JdbcTemplate 是 Spring 为我们提供的一个框架，是对原始 Jdbc API 接口的简单封装。</p>
</li>
<li><p>Spring 框架为我们提供了很多的操作框架。</p>
<ol>
<li>操作关系型数据库的：<ul>
<li><code>JdbcTemplate</code></li>
<li><code>HibernateTemplate</code></li>
</ul>
</li>
<li>操作 NoSQL 数据库的：<ul>
<li><code>RedisTemplate</code></li>
</ul>
</li>
<li>操作消息队列的：<ul>
<li><code>JmsTemplate</code></li>
</ul>
</li>
</ol>
<ul>
<li><p>在使用<code>JdbcTemplate</code>时，需要导入：</p>
<ol>
<li><code>spring-jdbc-5.0.2.RELEASE.jar</code></li>
<li><code>spring-tx-5.0.2.RELEASE.jar</code>：和事务相关的jar</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-JdbcTemplate对象的创建"><a href="#5-2-JdbcTemplate对象的创建" class="headerlink" title="5.2    JdbcTemplate对象的创建"></a>5.2    JdbcTemplate对象的创建</h2><blockquote>
<p>  <strong>源码</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3种构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">JdbcTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">JdbcTemplate</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">	setDataSource(dataSource);</span><br><span class="line">	afterPropertiesSet();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">JdbcTemplate</span><span class="params">(DataSource dataSource, <span class="type">boolean</span> lazyInit)</span> &#123;</span><br><span class="line">	setDataSource(dataSource);</span><br><span class="line">	setLazyInit(lazyInit);</span><br><span class="line">	afterPropertiesSet();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1、除了无参构造器之外，都需要提供一个数据源。</span></span><br><span class="line"><span class="comment">	2、并且类中含有`set`方法，可以使用配置文件配置`dataSourse`，采用依赖注入赋值。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>





<h2 id="5-3-Spring中配置数据源"><a href="#5-3-Spring中配置数据源" class="headerlink" title="5.3    Spring中配置数据源"></a>5.3    Spring中配置数据源</h2><h3 id="5-3-1-环境搭建"><a href="#5-3-1-环境搭建" class="headerlink" title="5.3.1    环境搭建"></a>5.3.1    环境搭建</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Spring IoC--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置Spring Jdbc--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置Spring 事务管理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置数据库--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-3-2-编写spring的配置文件bean-xml"><a href="#5-3-2-编写spring的配置文件bean-xml" class="headerlink" title="5.3.2    编写spring的配置文件bean.xml"></a>5.3.2    编写spring的配置文件bean.xml</h3><ul>
<li><code>bean.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h3 id="5-3-3-配置数据源"><a href="#5-3-3-配置数据源" class="headerlink" title="5.3.3    配置数据源"></a>5.3.3    配置数据源</h3><ul>
<li>我们学过的数据源：</li>
</ul>
<ol>
<li><code>c3p0</code></li>
<li><code>DBCP</code></li>
<li><code>Spring内置数据源</code></li>
</ol>
<h4 id="1、配置c3p0数据源"><a href="#1、配置c3p0数据源" class="headerlink" title="1、配置c3p0数据源"></a>1、配置c3p0数据源</h4><ol>
<li>导入jar：<code>c3p0-0.9.2.1</code></li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>设置<code>bean</code>：<ul>
<li>查看<code>com.mchange.v2.c3p0.ComboPooledDataSource</code>的源码发现，其中有许多<code>set</code>方法，所以可以采用DI的方式配置连接数据库所需的信息。</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置数据源--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2、配置DBCP数据源"><a href="#2、配置DBCP数据源" class="headerlink" title="2、配置DBCP数据源"></a>2、配置DBCP数据源</h4><ol>
<li><p>导入<code>jar</code>：<code>commons-dbcp.jar</code>和<code>commons-pool.jar</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-pool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>配置<code>bean</code>：</p>
<ul>
<li>显然<code>org.apache.commons.dbcp.BasicDataSource</code>的构造函数中也有大量相关的<code>set</code>方法，可以注入数据库连接信息，只是在<code>set</code>方法的命名上略有差异罢了。</li>
</ul>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3、配置Spring内置数据源"><a href="#3、配置Spring内置数据源" class="headerlink" title="3、配置Spring内置数据源"></a>3、配置Spring内置数据源</h4><ul>
<li>Spring框架也提供了一个内置数据源，我们可以使用Spring的内置数据源。</li>
</ul>
<ol>
<li><p>导入jar：<code>spring-jdbc-5.0.2.RELEASE.jar</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>配置<code>bean</code>：<code>DI</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db5&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="4、将数据库连接的信息配置到外部属性文件中"><a href="#4、将数据库连接的信息配置到外部属性文件中" class="headerlink" title="4、将数据库连接的信息配置到外部属性文件中"></a>4、将数据库连接的信息配置到外部属性文件中</h4><h5 id="4-1、定义属性文件"><a href="#4-1、定义属性文件" class="headerlink" title="4.1、定义属性文件"></a>4.1、定义属性文件</h5><ul>
<li><p><code>jdbc.properties</code></p>
  <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/db4</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="4-2、引入外部的属性文件"><a href="#4-2、引入外部的属性文件" class="headerlink" title="4.2、引入外部的属性文件"></a>4.2、引入外部的属性文件</h5><ol>
<li><p>方式一：</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入外部属性文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;location&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>	</span><br></pre></td></tr></table></figure>

</li>
<li><p>方式二：</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="5-4-JdbcTemplate的CRUD操作"><a href="#5-4-JdbcTemplate的CRUD操作" class="headerlink" title="5.4    JdbcTemplate的CRUD操作"></a>5.4    JdbcTemplate的CRUD操作</h2><h3 id="5-4-1-前期准备"><a href="#5-4-1-前期准备" class="headerlink" title="5.4.1    前期准备"></a>5.4.1    前期准备</h3><h4 id="1、准备数据库"><a href="#1、准备数据库" class="headerlink" title="1、准备数据库"></a>1、准备数据库</h4><h3 id="5-4-2-在Spring配置文件中配置JdbcTemplate"><a href="#5-4-2-在Spring配置文件中配置JdbcTemplate" class="headerlink" title="5.4.2    在Spring配置文件中配置JdbcTemplate"></a>5.4.2    在Spring配置文件中配置JdbcTemplate</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置数据库操作模板JdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据源DataSource--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-4-3-最基本的CRUD"><a href="#5-4-3-最基本的CRUD" class="headerlink" title="5.4.3    最基本的CRUD"></a>5.4.3    最基本的CRUD</h3><ul>
<li>使用<code>Statement</code>对象执行SQL语句，存在SQL注入的隐患。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into account (name, money) values(&#x27;王五&#x27;, 555);&quot;</span>;</span><br><span class="line">    jdbc.execute(sql);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-4-4-基本的CRUD"><a href="#5-4-4-基本的CRUD" class="headerlink" title="5.4.4    基本的CRUD"></a>5.4.4    基本的CRUD</h3><ul>
<li>使用<code>PreparedStatement</code>对象，可以有效防止SQL注入</li>
</ul>
<h4 id="1、保存操作"><a href="#1、保存操作" class="headerlink" title="1、保存操作"></a>1、保存操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into account (name, money) values(?, ?);&quot;</span>;</span><br><span class="line">        jdbc.update(sql,<span class="string">&quot;赵四&quot;</span>, <span class="number">666</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2、更新操作"><a href="#2、更新操作" class="headerlink" title="2、更新操作"></a>2、更新操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update account set name=? where id=?&quot;</span>;</span><br><span class="line">        jdbc.update(sql,<span class="string">&quot;黄猿&quot;</span>, <span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3、删除操作"><a href="#3、删除操作" class="headerlink" title="3、删除操作"></a>3、删除操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from account where id=?&quot;</span>;</span><br><span class="line">        jdbc.update(sql,<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4、查询所有操作-★"><a href="#4、查询所有操作-★" class="headerlink" title="4、查询所有操作[★]"></a>4、查询所有操作[★]</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 创建spring容器</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行操作</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account where money&gt;?&quot;</span>;</span><br><span class="line">        List&lt;Account&gt; accounts = jdbc.query(sql, <span class="keyword">new</span> <span class="title class_">AccountRowMapper</span>(), <span class="number">600</span>);</span><br><span class="line">        <span class="keyword">for</span> (Account account : accounts) &#123;</span><br><span class="line">            System.out.println(account);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountRowMapper</span> <span class="keyword">implements</span> <span class="title class_">RowMapper</span>&lt;Account&gt;&#123;</span><br><span class="line">        <span class="keyword">public</span> Account <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">            <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line">            account.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            account.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">            account.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> account;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h5><h5 id="1、自己手动实现对返回的Bean对象的封装"><a href="#1、自己手动实现对返回的Bean对象的封装" class="headerlink" title="1、自己手动实现对返回的Bean对象的封装"></a>1、自己手动实现对返回的Bean对象的封装</h5><ol>
<li><p><code>RowMapper&lt;T&gt;接口</code>的作用</p>
<ul>
<li><code>JdbcTemplate</code>中所有查询语句的返回结果必须实现的父接口。</li>
<li>作用：执行查询语句从数据库中得到结果集，并把结果集中的数据一一映射到JavaBean实体类中，返回JavaBean实体类。</li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RowMapper</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行查询语句从数据库中得到结果集，并把结果集中的数据一一映射到JavaBean实体类中，返回JavaBean实体类</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rs 要映射到Bean对象中的结果集[数据库查询语句得到的结果集]</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rowNum 当前行的编号</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> 当前行映射后的结果对象 (may be &#123;<span class="doctag">@code</span> null&#125;)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	T <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>手动实现<code>RowMapper&lt;T&gt;</code>接口，将查询数据库得到的结果集每行的数据映射到一个JavaBean对象上。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现RowMapper&lt;T&gt;接口，并指定封装后的泛型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountRowMapper</span> <span class="keyword">implements</span> <span class="title class_">RowMapper</span>&lt;Account&gt;&#123;</span><br><span class="line">    <span class="comment">// 重写mapRow方法</span></span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="comment">// 创建一个空的Account对象</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line">        <span class="comment">// 从数据库的返回的结果集rs中分别取出`id`、`name`和`money`，映射到实体类JavaBean的对应的字段中</span></span><br><span class="line">        account.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        account.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        account.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">        <span class="comment">// 返回JavaBean对象account</span></span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>jdbc.query()</code>方法得到的返回值是<code>List&lt;T&gt;</code>集合的形式，</p>
<ul>
<li>就是先让<code>RowMapper&lt;T&gt;</code>接口中的<code>mapRow()</code>方法先把从数据库中得到的每一行数据都封装为一个JavaBean对象；</li>
<li>然后再通过<code>query()</code>方法把这些结果封装为一个List集合，作为返回值返回。</li>
</ul>
</li>
</ol>
<h5 id="2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装"><a href="#2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装" class="headerlink" title="2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装"></a>2、采用JdbcTemplate提供的默认方法完成对返回的Bean对象的封装</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account where money&gt;?&quot;</span>;</span><br><span class="line">    List&lt;Account&gt; accounts = jdbc.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Account&gt;(Account.class), <span class="number">600</span>);</span><br><span class="line">    <span class="keyword">for</span> (Account account : accounts) &#123;</span><br><span class="line">        System.out.println(account);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/2020/07/28/Spring/RowMapper.png"></p>
<ol>
<li>显然，<code>BeanPropertyRowMapper类</code>继承自<code>RowMapper接口</code></li>
<li>它是<code>JdbcTemplate</code>为我们提供的自动封装工具。作用：<ul>
<li>从数据库中查询数据，把得到的每行数据封装为一个JavaBean对象。</li>
</ul>
</li>
<li>我们只需要指定JavaBean对象的类型即可。如：<code>new BeanPropertyRowMapper&lt;Account&gt;(Account.class)</code></li>
</ol>
<h4 id="5、查询一个操作"><a href="#5、查询一个操作" class="headerlink" title="5、查询一个操作"></a>5、查询一个操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from account where id=?&quot;</span>;</span><br><span class="line">    List&lt;Account&gt; accounts = jdbc.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Account&gt;(Account.class), <span class="number">5</span>);</span><br><span class="line">    System.out.println(accounts.isEmpty()?<span class="string">&quot;没有结果&quot;</span>:accounts.get(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6、查询返回一行一列操作"><a href="#6、查询返回一行一列操作" class="headerlink" title="6、查询返回一行一列操作"></a>6、查询返回一行一列操作</h4><ul>
<li>返回值结果只能是<strong>一行一列</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 创建spring容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据id获取bean对象</span></span><br><span class="line">    <span class="type">JdbcTemplate</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JdbcTemplate) ac.getBean(<span class="string">&quot;jdbcTemplate&quot;</span>);</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT COUNT(*) FROM account WHERE money&gt;?;&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> jdbc.queryForObject(sql, Integer.class, <span class="number">600</span>);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/" class="post-title-link" itemprop="url">容器（数组+集合）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-07-25 11:04:22" itemprop="dateCreated datePublished" datetime="2020-07-25T11:04:22+08:00">2020-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-08-02 15:37:32" itemprop="dateModified" datetime="2021-08-02T15:37:32+08:00">2021-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li>  <a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/07/05/%E9%9B%86%E5%90%88%E7%B1%BB%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8%E2%80%94%E2%80%94List-Set-Map/">超链接：ArrayList、HashSet、HashMap源码分析</a></li>
</ul>
<p><strong>容器</strong>：是将多个数据存储到一起，每个数据称为该容器的元素。</p>
<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/%E5%AE%B9%E5%99%A8.png"></p>
<h1 id="数组（Array）"><a href="#数组（Array）" class="headerlink" title="数组（Array）"></a>数组（Array）</h1><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/%E6%95%B0%E7%BB%84Array.png" alt="数组Array" style="zoom: 50%;">



<h2 id="1-是什么"><a href="#1-是什么" class="headerlink" title="1    是什么"></a>1    是什么</h2><blockquote>
<p>  <strong>定义</strong></p>
</blockquote>
<ul>
<li>  相同类型数据的集合，并使用一个名字命名，通过编号的方式对这些数据进行统一管理。</li>
<li>  数组是一种<strong>定长</strong>、<strong>定类型</strong>的容器。</li>
</ul>
<blockquote>
<p>  <strong>数组相关的概念：</strong></p>
</blockquote>
<ul>
<li>  数组名</li>
<li>  元素</li>
<li>  角标、下标、索引</li>
<li>  数组的长度：元素的个数</li>
</ul>
<blockquote>
<p>  <strong>数组的特点：</strong></p>
</blockquote>
<ol>
<li> 数组的长度一旦确定，就不能修改。</li>
<li> 数组中元素的数据类型一致。</li>
<li> 在内存中占用一整块连续的空间。</li>
</ol>
<hr>
<h2 id="2-分类"><a href="#2-分类" class="headerlink" title="2    分类"></a>2    分类</h2><blockquote>
<p>  <strong>数组分类</strong></p>
</blockquote>
<ul>
<li>  按维数划分：一维数组、二维数组、…..</li>
<li>  按元素类型划分：基本数据类型元素的数组，引用数据类型元素的数组</li>
</ul>
<h3 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h3><blockquote>
<p>  <strong>数组的默认初始值</strong>：</p>
</blockquote>
<ul>
<li>  数组元素是整型：0</li>
<li>  数组元素是浮点型：0.0</li>
<li>  <strong>数组元素是char型：0 或 ‘\u0000’，而非’0’</strong></li>
<li>  数组元素是boolean型：false</li>
<li>  数组元素是引用数据类型：null</li>
</ul>
<h3 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h3><blockquote>
<p>  <strong>如何理解二维数组？</strong></p>
</blockquote>
<p>数组属于引用类型数据，数组的元素也可以是引用类型数据，一个一维数组 A 的元素如果还是一个一维数组类型的，则此数组 A 称为二维数组。</p>
<blockquote>
<p>  <strong>二维数组的属性</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr[] = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">10</span>&#125;,&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">System.out.println(arr.length);		<span class="comment">// 3</span></span><br><span class="line">System.out.println(arr[<span class="number">0</span>].length);	<span class="comment">// 3</span></span><br><span class="line">System.out.println(arr[<span class="number">1</span>].length);	<span class="comment">// 4</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>  <strong>二维数组元素的默认初始化值</strong></p>
</blockquote>
<p><strong>规定</strong>：二维数组分为外层数组的元素，内层数组的元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">外层元素：arr[<span class="number">0</span>], arr[<span class="number">1</span>]等</span><br><span class="line">内层元素：arr[<span class="number">0</span>][<span class="number">0</span>], arr[<span class="number">1</span>][<span class="number">2</span>]等;</span><br></pre></td></tr></table></figure>



<p><strong>二维数组元素的默认初始化值</strong> </p>
<ol>
<li>针对于初始化方式一：比如：<code>int[][] arr = new int[4][3];</code><ul>
<li>  外层元素的初始值为：地址值</li>
<li>  内层元素的初始值为：与一维数组初始化情况相同</li>
</ul>
</li>
<li>针对于初始化方式二：比如：<code>int[][] arr = new int[4][];</code><ul>
<li>  外层元素的初始化值为：null；【因为外层数组的元素也是一个引用类型，所以初始值为null】</li>
<li>  内层元素的初始化值为：不能调用，否则报错。</li>
</ul>
</li>
</ol>
<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/image-20210801174210274.png" alt="image-20210801174210274"></p>
<hr>
<h2 id="3-创建方式（3种）"><a href="#3-创建方式（3种）" class="headerlink" title="3    创建方式（3种）"></a>3    创建方式（3种）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：</span></span><br><span class="line">数组存储的数据类型[] 数组名字 = <span class="keyword">new</span> 数组存储的数据类型[长度]    <span class="comment">// []表示数组</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// 方式2：</span></span><br><span class="line">数据类型[] 数组名字 = <span class="keyword">new</span> 数据类型[]&#123;元素<span class="number">1</span>，元素<span class="number">2</span>，...&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式3：</span></span><br><span class="line">数据类型[] 数组名字 = &#123;元素<span class="number">1</span>，元素<span class="number">2</span>，...&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="4-数组的成员"><a href="#4-数组的成员" class="headerlink" title="4    数组的成员"></a>4    数组的成员</h2><h3 id="4-1-索引"><a href="#4-1-索引" class="headerlink" title="4.1    索引"></a>4.1    索引</h3><ul>
<li>数组会自动为其中的每个元素分配一个**索引(index)**，索引从0开始。</li>
</ul>
<blockquote>
<p>   <strong>索引的作用：</strong></p>
</blockquote>
<p>可以通过索引找到到数组中对应的元素。获取到元素后，可以：</p>
<ol>
<li>访问数组中的元素；</li>
<li>为数组中的元素赋值。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问数组中的元素</span></span><br><span class="line">数据类型 变量名 = 数组名[索引]</span><br><span class="line"><span class="comment">// 为数组中的元素赋值。</span></span><br><span class="line">数组名[索引]=数值：为组中的元素赋值</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="4-2-数组的长度属性"><a href="#4-2-数组的长度属性" class="headerlink" title="4.2    数组的长度属性"></a>4.2    数组的长度属性</h3><ul>
<li><code>length</code>是数组类中的一个属性。数组的长度是固定的，可以通过数组的长度属性<code>length</code>访问到数组的长度。</li>
<li>数组的最大索引值为：<code>length-1</code></li>
</ul>
<hr>
<h2 id="5-数组的内存布局"><a href="#5-数组的内存布局" class="headerlink" title="5    数组的内存布局"></a>5    数组的内存布局</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">        System.out.println(arr);    <span class="comment">// [I@5fd0d5ae  ；arr数组在堆内存中的地址，存储在方法栈中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)&#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E5%86%85%E5%AD%98%E5%9B%BE.png"></p>
<blockquote>
<p>  程序的执行流程：</p>
</blockquote>
<ol>
<li><p><em><code>main()</code>方法进入栈内存中执行。</em></p>
</li>
<li><p><em>执行<code>new int[3]</code>语句创建数组,JVM会在堆内存中开辟一块空间，存储数组。</em></p>
<ul>
<li><em>数组内容保存在堆内存中，而数组的地址则保存在栈内存中；</em></li>
<li><em>数组中有3个元素，默认初始值是0.</em></li>
</ul>
</li>
</ol>
<hr>
<h2 id="6-数组中常见的操作"><a href="#6-数组中常见的操作" class="headerlink" title="6    数组中常见的操作"></a>6    数组中常见的操作</h2><h3 id="6-1-通过下标存取"><a href="#6-1-通过下标存取" class="headerlink" title="6.1    通过下标存取"></a>6.1    通过下标存取</h3><h3 id="6-2-遍历"><a href="#6-2-遍历" class="headerlink" title="6.2    遍历"></a>6.2    遍历</h3><ol>
<li> for 循环</li>
<li> 增强 for 循环：<code>for-each</code></li>
<li> <strong>注意</strong>：数组不能使用迭代器<code>Iterator</code>遍历，因为 Array 类没有实现<code>Iterable</code>接口。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="comment">// 1.遍历数组，给数组赋值。</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">            arr[i] = <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.遍历数组，查看所有元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.遍历数组，获取最大值。</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (max&lt;arr[i])&#123;</span><br><span class="line">                max = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(max);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.数组反转。【数组的最远端元素互换位置】</span></span><br><span class="line">        <span class="type">int</span> temp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> start=<span class="number">0</span>, end=arr.length-<span class="number">1</span>; start&lt;end; start++,end--)&#123;</span><br><span class="line">            temp = arr[start];</span><br><span class="line">            arr[start] = arr[end];</span><br><span class="line">            arr[end] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(arr););</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="7-数组中常见的异常"><a href="#7-数组中常见的异常" class="headerlink" title="7    数组中常见的异常"></a>7    数组中常见的异常</h2><ol>
<li><p>数组下标越界异常</p>
<ul>
<li><strong><code>ArrayIndexOutOfBoundException</code></strong></li>
</ul>
</li>
<li><p>数组空指针异常</p>
<ul>
<li><strong><code>NullPointerException</code></strong></li>
</ul>
</li>
</ol>
<hr>
<h2 id="8-数组工具类：Arrays"><a href="#8-数组工具类：Arrays" class="headerlink" title="8    数组工具类：Arrays"></a>8    数组工具类：Arrays</h2><blockquote>
<p><strong>java.util.Arrays</strong>：此类包含了用来操作数组的各种方法。 该类中所有的方法均为静态方法，可通过类名直接调用。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>String toString（int[] a）</code></td>
<td align="left">返回指定数组内容的字符串表示形式。</td>
</tr>
<tr>
<td align="left"><code>void sort（int[] a）</code></td>
<td align="left">对<code>int[] a</code>数组进行升序排序</td>
</tr>
<tr>
<td align="left"><code>boolean equals(int[] a,int[] b)</code></td>
<td align="left">判断两个数组是否相等</td>
</tr>
<tr>
<td align="left"><code>void fill(int[] a,int val)</code></td>
<td align="left">将指定值填充到数组之中（数组中的全部元素都用该值填充）</td>
</tr>
<tr>
<td align="left"><code>int binarySearch(int[] a,int key)</code></td>
<td align="left">二分查找某个元素</td>
</tr>
<tr>
<td align="left"><code>T[] copyOf(T[] original, int newLength)</code></td>
<td align="left">数组复制</td>
</tr>
<tr>
<td align="left">……</td>
<td align="left">……</td>
</tr>
</tbody></table>
<hr>
<h1 id="数组-vs-集合"><a href="#数组-vs-集合" class="headerlink" title="数组 vs. 集合"></a>数组 vs. 集合</h1><h2 id="1-集合与数组存储数据概述"><a href="#1-集合与数组存储数据概述" class="headerlink" title="1    集合与数组存储数据概述"></a>1    集合与数组存储数据概述</h2><ul>
<li>  集合、数组都是对多个数据进行存储操作的结构，简称 Java 容器。</li>
<li>  <strong>说明：</strong>此时的存储，主要指的是内存层面的存储，不涉及到持久化的存储（.txt,.jpg,.avi，数据库中)</li>
</ul>
<h2 id="2-为什么要有集合？"><a href="#2-为什么要有集合？" class="headerlink" title="2    为什么要有集合？"></a>2    为什么要有集合？</h2><ul>
<li>  为了解决数组存储数据方面的弊端。</li>
</ul>
<hr>
<h2 id="3-数组存储的弊端"><a href="#3-数组存储的弊端" class="headerlink" title="3    数组存储的弊端"></a>3    数组存储的弊端</h2><ol>
<li> 一旦初始化以后，其长度就不可修改；</li>
<li> 数组中提供的方法非常限，对于添加、删除、插入数据等操作，非常不便，同时效率不高；</li>
<li> 获取数组中<strong>实际元素</strong>的个数的需求，数组没有现成的属性或方法可用；</li>
<li> 数组存储的数据是可重复的。对于不可重复的需求，不能满足。</li>
</ol>
<p><strong>总结：长度固定、类型固定、功能少。</strong></p>
<hr>
<h2 id="4-集合和数组的区别："><a href="#4-集合和数组的区别：" class="headerlink" title="4    集合和数组的区别："></a>4    集合和数组的区别：</h2><table>
<thead>
<tr>
<th align="center"></th>
<th align="left">数组</th>
<th>集合</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">长度是固定的</td>
<td>长度是可变的</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">只能存储同一类型的元素</td>
<td>可以存储不同类型的元素[但不建议]</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">可以存储任意类型的数据</td>
<td>只能存储引用类型数据对象（即存储基础类型数据时会自动装箱）</td>
</tr>
</tbody></table>
<hr>
<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/image-20210801183135587.png" alt="image-20210801183135587"></p>
<h2 id="迭代器接口：Iterable"><a href="#迭代器接口：Iterable" class="headerlink" title="迭代器接口：Iterable"></a>迭代器接口：Iterable</h2><h3 id="1-遍历Collection的两种方式"><a href="#1-遍历Collection的两种方式" class="headerlink" title="1    遍历Collection的两种方式"></a>1    遍历Collection的两种方式</h3><blockquote>
<ol>
<li> <strong>使用迭代器 Iterator</strong></li>
<li> <strong>for-each循环（或增强for循环）</strong></li>
</ol>
</blockquote>
<ul>
<li>  使用<code>for-each</code>循环遍历不需要实现 <strong>Iterable</strong> 接口，所以数组和集合都可以使用 for-each 遍历；</li>
<li>  <strong>数组可以使用<code>for-each</code>循环遍历，但是数组不能使用<code>iterator</code>迭代器遍历，因为其没有实现 Iterable 接口</strong>。</li>
</ul>
<h3 id="2-Iterable-接口"><a href="#2-Iterable-接口" class="headerlink" title="2    Iterable 接口"></a>2    Iterable 接口</h3><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><ul>
<li>  <code>Collection接口</code> 是 <code>Iterable接口</code>的子接口。</li>
<li>  Iterator 对象称为迭代器(设计模式的一种)，主要用于遍历 Collection 集合中的元素。</li>
<li>  GOF 给迭代器模式的定义为：提供一种方法访问一个容器(container)对象中各个元素，而又不需暴露该对象的内部细节。迭代器模式，就是为容器而生。</li>
</ul>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><ul>
<li>  遍历集合Collectiton元素</li>
</ul>
<h4 id="如何获取实例"><a href="#如何获取实例" class="headerlink" title="如何获取实例"></a>如何获取实例</h4><ul>
<li>  通过 <strong>Collection#iterator()</strong> 方法返回一个迭代器实例。</li>
</ul>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> coll.iterator();</span><br><span class="line"><span class="comment">// hasNext()：判断是否还有下一个元素</span></span><br><span class="line"><span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">    <span class="comment">// next()：①指针下移  ②将下移以后集合位置上的元素返回</span></span><br><span class="line">    System.out.println(iterator.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/image-20210802102325927.png" alt="image-20210802102325927"></p>
<h4 id="接口源码"><a href="#接口源码" class="headerlink" title="接口源码"></a>接口源码</h4><blockquote>
<p>  <strong>Iterable 接口的源码</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*	Iterable接口的源码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;</span><br><span class="line">    </span><br><span class="line">    Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">forEach</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> T&gt; action)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(action);</span><br><span class="line">        <span class="keyword">for</span> (T t : <span class="built_in">this</span>) &#123;</span><br><span class="line">            action.accept(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">default</span> Spliterator&lt;T&gt; <span class="title function_">spliterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Spliterators.spliteratorUnknownSize(iterator(), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>  <code>Iterable</code> 接口中有一个成员方法 <strong>iterator()<strong>，该方法的作用是返回一个<code>Iterator实例</code>，这个实例被称为</strong>迭代器</strong>。</li>
<li>  所有实现了<code>Iterable接口</code>的类必须重写<code>iterator()</code>方法，通过该方法可以获得一个<code>迭代器</code>，通过<code>迭代器</code>中的方法可以遍历集合。</li>
</ul>
<blockquote>
<p>  <strong>迭代器（Iterator）接口源码：</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*	Iterator接口的源码（部分）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    E <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">forEachRemaining</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> E&gt; action)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(action);</span><br><span class="line">        <span class="keyword">while</span> (hasNext())</span><br><span class="line">            action.accept(next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  迭代器（Iterator）接口中定义了 4 个方法，常用的有 3 个</li>
</ul>
<hr>
<h3 id="3-Iterator-接口"><a href="#3-Iterator-接口" class="headerlink" title="3    Iterator 接口"></a>3    Iterator 接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.util.Iterator&lt;E&gt;;	</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;E&gt;	<span class="comment">// 接口</span></span><br></pre></td></tr></table></figure>



<h4 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h4><p>迭代是获取 Collection 集合中元素的通用方式。</p>
<ol>
<li>在取出元素之前要先判断集合中有没有元素，如果有，就把这个元素取出来，</li>
<li>继续判断下一个，如果有就再取出来。一直把集合中的所有元素全部取出来。</li>
</ol>
<h4 id="增强for循环"><a href="#增强for循环" class="headerlink" title="增强for循环"></a>增强for循环</h4><ul>
<li><code>增强for</code>循环（也称<code>for...each循环</code>）是 JDK1.5++ 推出的一个高级 for 循环，<strong>专门用来遍历集合和数组</strong>的。</li>
<li>它的<strong>内部原理其实是一个Iterator迭代器</strong>，在遍历的过程中，不能对集合中的元素进行增删操作。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(元素的数据类型 变量名 : Collection集合or数组)&#123;</span><br><span class="line">    <span class="comment">// 操作代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-操作"><a href="#4-操作" class="headerlink" title="4    操作"></a>4    操作</h3><blockquote>
<ol>
<li> <strong>获取迭代器对象；</strong></li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;E&gt; it = Collection对象.iterator()</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="2">
<li> <strong>Iterator 接口中的方法：</strong></li>
</ol>
</blockquote>
<table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>hasNext()</code></td>
<td align="center"><code>boolean</code></td>
<td align="left">如果仍有元素可以迭代，则返回 <code>true</code></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>next()</code></td>
<td align="center"><code>E</code></td>
<td align="left">返回迭代的下一个元素</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>remove()</code></td>
<td align="center"><code>void</code></td>
<td align="left">从迭代器指向的 collection 中移除迭代器返回的最后一个元素</td>
</tr>
</tbody></table>
<hr>
<h2 id="单列集合：Collection接口"><a href="#单列集合：Collection接口" class="headerlink" title="单列集合：Collection接口"></a>单列集合：Collection接口</h2><p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/Collection%E6%8E%A5%E5%8F%A3.png" alt="Collection接口"></p>
<ol>
<li>单列集合的顶级父接口。</li>
<li>两个重要的子接口：<ul>
<li><code>java.util.List</code>    元素有序、可重复</li>
<li><code>java.util.Set</code>    元素无需、不可重复</li>
</ul>
</li>
</ol>
<h3 id="Collection接口中常用的公共方法"><a href="#Collection接口中常用的公共方法" class="headerlink" title="Collection接口中常用的公共方法"></a>Collection接口中常用的公共方法</h3><table>
<thead>
<tr>
<th align="center">类别</th>
<th align="left">方法</th>
<th align="center">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="left"><code>add(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="left">添加对象到集合中</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>addAll(Collection coll)</code></td>
<td align="center"><code>boolean</code></td>
<td align="left">添加集合对象到集合中</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="left"><code>remove(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="left">删除集合中指定的元素（只是删除元素，即使全都删除完，集合也存在）</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>removeAll(Collection coll)</code></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>clear()</code></td>
<td align="center"><code>void</code></td>
<td align="left">清空集合中所有的元素，但不删除集合</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="left"><code>size()</code></td>
<td align="center"><code>int</code></td>
<td align="left">返回当前集合中有效元素的个数</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>isEmpty()</code></td>
<td align="center"><code>boolean</code></td>
<td align="left">判断集合是否为空</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">判断</td>
<td align="left"><code>isEmpty()</code></td>
<td align="center"><code>boolean</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>contains(E e)</code></td>
<td align="center"><code>boolean</code></td>
<td align="left">判断集合中是否包含元素e</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>containsAll(Collection coll)</code></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">其它</td>
<td align="left"><code>toArray()</code></td>
<td align="center"><code>Object[]</code></td>
<td align="left">把集合中的元素存储到数组中</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>iterator()</code></td>
<td align="center"><code>Iterator</code></td>
<td align="left">返回在此 collection 集合的迭代器。</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>retainsAll(Collection coll)</code></td>
<td align="center"></td>
<td align="left">返回交集</td>
</tr>
</tbody></table>
<h3 id="Collection-接口与数组间的相互转换"><a href="#Collection-接口与数组间的相互转换" class="headerlink" title="Collection 接口与数组间的相互转换"></a>Collection 接口与数组间的相互转换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 集合 --&gt; 数组：toArray()</span></span><br><span class="line">Object[] arr = coll.toArray();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; arr.length;i++)&#123;</span><br><span class="line">    System.out.println(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组 --&gt; 集合：调用Arrays类的静态方法 asList(T ... t)</span></span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;AA&quot;</span>, <span class="string">&quot;BB&quot;</span>, <span class="string">&quot;CC&quot;</span>&#125;);</span><br><span class="line">System.out.println(list);</span><br><span class="line"></span><br><span class="line"><span class="type">List</span> <span class="variable">arr1</span> <span class="operator">=</span> Arrays.asList(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">123</span>, <span class="number">456</span>&#125;);</span><br><span class="line">System.out.println(arr1.size());<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="type">List</span> <span class="variable">arr2</span> <span class="operator">=</span> Arrays.asList(<span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">123</span>, <span class="number">456</span>&#125;);</span><br><span class="line">System.out.println(arr2.size());<span class="comment">//2</span></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="存储元素的要求"><a href="#存储元素的要求" class="headerlink" title="存储元素的要求"></a>存储元素的要求</h3><blockquote>
<p>  <strong>使用 Collection 集合存储对象，要求对象所属的类满足：</strong></p>
</blockquote>
<p>向 Collection 接口的实现类的对象中添加数据 obj 时，要求 obj 所在类要重写 <code>equals()</code>。</p>
<hr>
<h2 id="List-接口"><a href="#List-接口" class="headerlink" title="List 接口"></a>List 接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;E&gt; </span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br></pre></td></tr></table></figure>



<h3 id="List-接口的特点"><a href="#List-接口的特点" class="headerlink" title="List 接口的特点"></a>List 接口的特点</h3><ol>
<li> 元素有序（存入和取出顺序一致）</li>
<li> 元素可重复</li>
</ol>
<blockquote>
<p>  <strong>集合或数组中关于有序、无序的概念：</strong></p>
</blockquote>
<p>在集合或数组中的有序性指的是先后顺序，而不是那种按年龄、按大小、按价格之类的排序。有序、无序是指在进行插入操作时，插入位置的顺序性。先插的位置在前，后插的位置在后，则为有序，反之无序</p>
<h3 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h3><table>
<thead>
<tr>
<th align="center">类别</th>
<th align="left">方法</th>
<th align="center">返回值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="left"><code>add(int index，E e)</code></td>
<td align="center"><code>void</code></td>
<td align="left">追加</td>
</tr>
<tr>
<td align="center">插</td>
<td align="left"><code>add(int index, Object ele)</code></td>
<td align="center"></td>
<td align="left">插入</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="left"><code>remove(int index）</code></td>
<td align="center"><code>E</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"><code>remove(Object obj)</code></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">改</td>
<td align="left"><code>set(int index， E e）</code></td>
<td align="center"><code>E</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="left"><code>get(int index）</code></td>
<td align="center"><code>E</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">长度</td>
<td align="left"><code>size()</code></td>
<td align="center"></td>
<td align="left">是元素的个数，不是数组长度</td>
</tr>
<tr>
<td align="center"></td>
<td align="left"></td>
<td align="center"></td>
<td align="left"></td>
</tr>
<tr>
<td align="center">遍历</td>
<td align="left"></td>
<td align="center"></td>
<td align="left">① Iterator迭代器方式<br>② 增强for循环<br>③ 普通的循环</td>
</tr>
</tbody></table>
<hr>
<h3 id="常用实现类"><a href="#常用实现类" class="headerlink" title="常用实现类"></a>常用实现类</h3><blockquote>
<ol>
<li>  <strong>ArrayList</strong></li>
<li> <strong>LinkedList</strong></li>
<li> <strong>Vector</strong></li>
</ol>
</blockquote>
<blockquote>
<p>  <strong>ArrayList</strong></p>
</blockquote>
<p>作为 List 接口的主要实现类，具有以下特点：</p>
<ul>
<li>  线程不安全，效率高；</li>
<li>  底层使用 <code>Object[] elementData</code> 数组存储元素，查找快。</li>
</ul>
<blockquote>
<p>  <strong>LinkedList</strong></p>
</blockquote>
<ul>
<li>  底层使用<strong>双向链表</strong>存储元素，对于频繁的插入、删除操作，效率比 ArrayList 高；</li>
</ul>
<blockquote>
<p>  <strong>Vector</strong></p>
</blockquote>
<ul>
<li>  作为 List 接口的古老实现类，是线程安全的(Sychnronized)，效率低；</li>
<li>  底层使用 <code>Object[] elementData</code> 存储。</li>
</ul>
<hr>
<h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p><em>ArrayList集合的特点：</em></p>
<ul>
<li><em>数据存储结构是 数组，查找快，增删慢</em></li>
<li><em>线程不安全，效率高</em></li>
</ul>
<h3 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h3><blockquote>
<p>  <strong>JDK7 中：</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();	<span class="comment">// 底层创建了长度是10的Object[]数组elementData</span></span><br><span class="line"></span><br><span class="line">list.add(<span class="number">123</span>);	<span class="comment">// elementData[0] = new Integer(123);</span></span><br><span class="line"></span><br><span class="line">list.add(<span class="number">11</span>);	<span class="comment">// 如果此次的添加导致底层elementData数组容量不够，则扩容。</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  默认情况下，扩容为原来的容量的 1.5 倍，同时需要将原有数组中的数据复制到新的数组中。</li>
<li>  <strong>结论</strong>：建议开发中使用带参的构造器：ArrayList list = new ArrayList(int capacity)</li>
</ul>
<blockquote>
<p>  <strong>JDK8 中 ArrayList 的变化：</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();	<span class="comment">// 底层Object[] elementData初始化为&#123;&#125;.并没创建长度为10的数组</span></span><br><span class="line">list.add(<span class="number">123</span>);	<span class="comment">// 第一次调用 add() 时，底层才创建了长度10的数组，并将数据123添加到elementData[0]</span></span><br><span class="line"><span class="comment">// ...... 后续的添加和扩容操作与 JDK7 无异。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>小结：</strong></p>
</blockquote>
<ul>
<li>  JDK7 中的 ArrayList 的对象的创建类似于单例的饿汉式，</li>
<li>  而 JDK8 中的 ArrayList 的对象的创建类似于单例的懒汉式，延迟了数组的创建，节省内存。</li>
</ul>
<hr>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="left">方法</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left"><code>ArrayList()</code></td>
<td align="left">创建一个初始容量为 0 的对象</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left"><code>ArrayList(Collection&lt;? extends E&gt; c)</code></td>
<td align="left">构造一个包含指定 collection 的元素的列表。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left"><code>ArrayList(int initialCapacity)</code></td>
<td align="left">构造一个具有指定初始容量的对象</td>
</tr>
</tbody></table>
<h3 id="成员方法-1"><a href="#成员方法-1" class="headerlink" title="成员方法"></a>成员方法</h3><table>
<thead>
<tr>
<th align="center">ID</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"><code>add(E e)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的元素添加到此列表的尾部。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>add(int index, E e)</code></td>
<td align="center">void</td>
<td align="center">将指定的元素插入此列表中的指定位置。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center"><code>addAll(Collection&lt;? extends E&gt; c)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的集合添加到此列表的尾部。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>addAll(int index, Collection&lt;? extends E&gt; c)</code></td>
<td align="center">boolean</td>
<td align="center">将指定的集合插入此列表中的指定位置。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"><code>clear()</code></td>
<td align="center">void</td>
<td align="center">移除此列表中的所有元素。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center"><code>clone()</code></td>
<td align="center">Object</td>
<td align="center">返回此 <code>ArrayList</code> 实例浅拷贝</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center"><code>contains(Object o)</code></td>
<td align="center">boolean</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">6</td>
<td align="center"><code>get(int index)</code></td>
<td align="center">E</td>
<td align="center">返回此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center"><code>indexOf(Object o)</code></td>
<td align="center">int</td>
<td align="center">返回此列表中首次出现的指定元素的索引，或如果此列表不包含元素，则返回 -1。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>lastIndexOf(Object o)</code></td>
<td align="center">int</td>
<td align="center">返回此列表中最后一次出现的指定元素的索引，或如果此列表不包含元素，则返回 -1。</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center"><code>set(int index, E e)</code></td>
<td align="center">E</td>
<td align="center">用指定的元素替代此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center"><code>isEmpty()</code></td>
<td align="center">boolean</td>
<td align="center">如果此列表中没有元素，则返回 <code>true</code></td>
</tr>
<tr>
<td align="center">10</td>
<td align="center"><code>remove(int index)</code></td>
<td align="center">E</td>
<td align="center">移除此列表中指定位置上的元素。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>remove(Object o)</code></td>
<td align="center">boolean</td>
<td align="center">移除此列表中首次出现的指定元素（如果存在）。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>removeRange(int fromIndex, int toIndex)</code></td>
<td align="center">void</td>
<td align="center">移除列表中索引在 <code>[fromIndex，toIndex)</code>之间的所有元素。</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center"><code>size()</code></td>
<td align="center">int</td>
<td align="center">返回此列表中的元素数。</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><code>toArray()</code></td>
<td align="center">Object[]</td>
<td align="center">返回包含此列表中所有元素的数组</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>toArray(T[] a)</code></td>
<td align="center">T[]</td>
<td align="center">返回包含此列表中所有元素的数组；返回数组的运行时类型是指定数组的运行时类型。</td>
</tr>
</tbody></table>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><ol>
<li><p>生成6个1~33之间的随机整数，添加到集合，并遍历。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    生成6个1~33之间的随机整数，添加到集合，并遍历。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.生成6个1~33之间的随机整数,并添加到集合</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randNum</span> <span class="operator">=</span> random.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            list.add(randNum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 遍历集合</span></span><br><span class="line">        <span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
<li><p>定义所有获取偶数元素集合的方法</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定义所有获取偶数元素集合的方法.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.生成10个0~100之间的随机整数,并添加到集合list中</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">6</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">randNum</span> <span class="operator">=</span> random.nextInt(<span class="number">33</span>) + <span class="number">1</span>;</span><br><span class="line">            list.add(randNum);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 获取集合中的所有偶数,添加到子集合subList中</span></span><br><span class="line">        ArrayList&lt;Integer&gt; subList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                subList.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.遍历subList子集合</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;subList.size(); i++)&#123;</span><br><span class="line">            System.out.println(subList.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><blockquote>
<ol>
<li>LinkedList 是 List 接口的一个实现类。</li>
<li><em>LinkedList集合的特点：</em><ul>
<li><em>数据结构是 双向链表，</em> </li>
<li><em>查找慢，增删快</em></li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="源码分析-1"><a href="#源码分析-1" class="headerlink" title="源码分析"></a>源码分析</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinkedList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>(); <span class="comment">// 内部声明了Node类型的first和last属性，默认值为null</span></span><br><span class="line">list.add(<span class="number">123</span>);	<span class="comment">// 创建一个Node对象，并将123封装到Node中，</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// Node 节点的定义：体现了LinkedList的双向链表的说法</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">      E item;</span><br><span class="line">      Node&lt;E&gt; next;</span><br><span class="line">      Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">      Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">      <span class="built_in">this</span>.item = element;</span><br><span class="line">      <span class="built_in">this</span>.next = next;</span><br><span class="line">      <span class="built_in">this</span>.prev = prev;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h3 id="成员方法-2"><a href="#成员方法-2" class="headerlink" title="成员方法"></a>成员方法</h3><ul>
<li>LinkedList中特有的成员方法：</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法</th>
<th align="center">返回值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">增</td>
<td align="center"><code>addFirst（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>addLast（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>push（E e）</code></td>
<td align="center"><code>void</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删</td>
<td align="center"><code>removeFirst（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>removeLast（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>pop（）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">查</td>
<td align="center"><code>getFirst（E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>getLast（E e）</code></td>
<td align="center"><code>E</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h2><h3 id="源码分析-2"><a href="#源码分析-2" class="headerlink" title="源码分析"></a>源码分析</h3><ul>
<li>  JDK7 和 JDK8 中通过 <code>Vector()</code> 构造器创建对象时，底层都创建了<strong>长度为10的数组</strong>。</li>
<li>  在扩容方面，默认扩容为原来的数组长度的 <strong>2 倍</strong>。</li>
</ul>
<hr>
<h2 id="Set-接口"><a href="#Set-接口" class="headerlink" title="Set 接口"></a>Set 接口</h2><h3 id="数据特点"><a href="#数据特点" class="headerlink" title="数据特点"></a>数据特点</h3><blockquote>
<p>  <strong>存储的数据特点：</strong></p>
</blockquote>
<ol>
<li> 元素无序</li>
<li> 元素不可重复</li>
</ol>
<hr>
<h2 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h2><h3 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h3><blockquote>
<p>  <strong>数据特点具体分析：</strong></p>
</blockquote>
<p>以 HashSet 为例说明：</p>
<p>【有序性是数据存储时按照插入的先后顺序排列的】</p>
<ol>
<li>无序性：不等于随机性。<strong>存储的数据在底层数组中并非照数组索引的顺序添加，而是根据数据的哈希值决定的。</strong></li>
<li>不可重复性：保证相同的元素在添加时，根据 <code>equals()</code> 判断不能返回 true。即相同的元素只能添加一个。</li>
</ol>
<blockquote>
<p>  <strong>底层数据结构：</strong></p>
</blockquote>
<p><strong>HashSet 底层是通过 HashMap 实现的，底层也是一个数组（HashTable）</strong>，初始容量16，当如果使用率超过 0.75（16<em>0.75=12）就会扩大容量为原来的 2 倍。</em>*</p>
<ul>
<li>  在 JDK7中，HashMap 的底层还是通过：数组+链表的结构 实现的。</li>
<li>  从 JDK8 开始，HashMap 的底层结构更改为<strong>链表长度大于等于 8 时，开始由链表转换为红黑树</strong>。</li>
</ul>
<hr>
<h3 id="元素添加过程"><a href="#元素添加过程" class="headerlink" title="元素添加过程"></a>元素添加过程</h3><ol>
<li> 我们向 <code>HashSet</code> 中添加元素 a 时，首先调用元素 a 所在类的 <code>hashCode()</code> 方法，计算元素 a 的哈希值，</li>
<li> 此哈希值接着通过某种算法计算出在 HashSet 底层数组中的存放位置（即：索引位置）</li>
<li>判断数组此位置上是否已经元素：<ul>
<li>  如果此位置上没有其它元素，则元素 a 添加成功。【Case1】</li>
<li>如果此位置上其他元素 b（或以链表形式存在的多个元素，则比较元素 a 与元素 b 的 hash 值）：<ul>
<li>  如果 hash 值不相同，则元素 a 添加成功。【Case2】</li>
<li>如果 hash 值相同，进而需要调用元素 a 所在类的 <code>equals()</code> 方法：<ul>
<li>  <code>equals()</code> 返回 true，元素 a 添加失败。【Case3】</li>
<li>  <code>equals()</code> 返回 false，则元素 a 添加成功。【Case4】</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hashCode --&gt; 计算哈希值 --&gt; 索引位置 --&gt; 此位置没有其他元素 --&gt;添加成功</span><br><span class="line">                                    --&gt; 此位置有其他元素 --&gt; hash值不同 --&gt; 添加成功</span><br><span class="line">                                    			      --&gt; hash值相同 --&gt; 调用equals方法 --&gt; 返回true --&gt; 添加失败</span><br><span class="line">                                                                                        --&gt; 返回false --&gt; 添加成功</span><br></pre></td></tr></table></figure>





<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li>  Set 接口中没额外定义新的方法，使用的都是 Collection 中声明过的方法。</li>
</ul>
<h3 id="常用实现类-1"><a href="#常用实现类-1" class="headerlink" title="常用实现类"></a>常用实现类</h3><ul>
<li><strong>Collection</strong> 接口：单列集合，用来存储一个一个的对象。<ul>
<li><strong>Set</strong> 接口：存储无序的、不可重复的数据。<ul>
<li><strong>HashSet</strong>：作为 Set 接口的主要实现类；线程不安全的；可以存储 null 值；<ul>
<li>  <strong>LinkedHashSet</strong>：作为 HashSet 的子类；遍历其内部数据时，可以按照添加的顺序遍历。在添加数据的同时，每个数据还维护了两个引用，记录此数据前一个数据和后一个数据。</li>
</ul>
</li>
<li>  <strong>TreeSet</strong>：可以照添加对象的指定属性，进行排序。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="对存储对象所在类的要求"><a href="#对存储对象所在类的要求" class="headerlink" title="对存储对象所在类的要求"></a>对存储对象所在类的要求</h3><blockquote>
<p>  <strong>HashSet/LinkedHashSet：</strong></p>
</blockquote>
<ol>
<li> 要求：向 HashSet（主要指：HashSet、LinkedHashSet）中添加的数据时，元素对象所在的类一定要重写 <code>hashCode()</code>和 <code>equals()</code> 方法、【因为 HashSet 插入元素时的主要判断标准就是哈希值和 <code>equals()</code> 方法】</li>
<li> 要求：重写的 <code>hashCode()</code>和 <code>equals()</code> 尽可能保持一致性，即相等的对象必须具有相等的散列码。</li>
</ol>
<p>重写两个方法的小技巧：对象中用作 <code>equals()</code> 方法比较的 Field，都应该用来计算 hashCode 值。</p>
<hr>
<h2 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h2><h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><ol>
<li> 向 TreeSet 中添加的数据，要求是<strong>相同类的对象</strong>。</li>
<li> 两种排序方式：自然排序（实现Comparable接口）和 定制排序（Comparator）</li>
</ol>
<h3 id="常用的排序方式"><a href="#常用的排序方式" class="headerlink" title="常用的排序方式"></a>常用的排序方式</h3><blockquote>
<p>  <strong>方式一：自然排序</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">TreeSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeSet</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 失败：不能添加不同类的对象</span></span><br><span class="line"><span class="comment">//        set.add(123);</span></span><br><span class="line"><span class="comment">//        set.add(456);</span></span><br><span class="line"><span class="comment">//        set.add(&quot;AA&quot;);</span></span><br><span class="line"><span class="comment">//        set.add(new User(&quot;Tom&quot;,12));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 举例一：</span></span><br><span class="line"><span class="comment">//        set.add(34);</span></span><br><span class="line"><span class="comment">//        set.add(-34);</span></span><br><span class="line"><span class="comment">//        set.add(43);</span></span><br><span class="line"><span class="comment">//        set.add(11);</span></span><br><span class="line"><span class="comment">//        set.add(8);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 举例二：</span></span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Tom&quot;</span>,<span class="number">12</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jerry&quot;</span>,<span class="number">32</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jim&quot;</span>,<span class="number">2</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Mike&quot;</span>,<span class="number">65</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jack&quot;</span>,<span class="number">33</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> set.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote>
<p>  <strong>方式二：定制排序</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Comparator</span> <span class="variable">com</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Comparator</span>() &#123;</span><br><span class="line">        <span class="comment">//照年龄从小到大排列</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> User &amp;&amp; o2 <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">                <span class="type">User</span> <span class="variable">u1</span> <span class="operator">=</span> (User)o1;</span><br><span class="line">                <span class="type">User</span> <span class="variable">u2</span> <span class="operator">=</span> (User)o2;</span><br><span class="line">                <span class="keyword">return</span> Integer.compare(u1.getAge(),u2.getAge());</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;输入的数据类型不匹配&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">TreeSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeSet</span>(com);</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Tom&quot;</span>,<span class="number">12</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jerry&quot;</span>,<span class="number">32</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jim&quot;</span>,<span class="number">2</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Mike&quot;</span>,<span class="number">65</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Mary&quot;</span>,<span class="number">33</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;Jack&quot;</span>,<span class="number">33</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> set.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="双列集合：Map-接口"><a href="#双列集合：Map-接口" class="headerlink" title="双列集合：Map 接口"></a>双列集合：Map 接口</h2><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/Map%E6%8E%A5%E5%8F%A3.png" alt="Map接口" style="zoom: 50%;">



<h3 id="常用实现类结构"><a href="#常用实现类结构" class="headerlink" title="常用实现类结构"></a>常用实现类结构</h3><ul>
<li><p><strong>Map</strong>：双列数据，存储键值对数据</p>
<ul>
<li><p><strong>HashMap</strong>：作为 Map 的主要实现类；线程不安全的，效率高；存储null的key和value</p>
<ul>
<li><p><strong>LinkedHashMap</strong>：保证在遍历 map 元素时，可以照添加的顺序实现遍历。</p>
<p>  原因：在原的 HashMap 底层结构基础上，添加了一对指针，指向前一个和后一个元素。</p>
<p>  对于频繁的遍历操作，此类执行效率高于HashMap。</p>
</li>
</ul>
</li>
<li><p><strong>TreeMap</strong>：保证照添加的 key-value 对进行排序，实现排序遍历。</p>
<p>  此时考虑key的自然排序或定制排序</p>
<p>  底层使用红黑树</p>
</li>
</ul>
</li>
<li><p><strong>Hashtable</strong>：作为古老的实现类；线程安全的，效率低；不能存储null的key和value</p>
<ul>
<li>  Properties:常用来处理配置文件。key和value都是String类型</li>
</ul>
</li>
</ul>
<h3 id="存储结构的理解"><a href="#存储结构的理解" class="headerlink" title="存储结构的理解"></a>存储结构的理解</h3><ul>
<li><p><strong>Map 中的 key</strong>：无序的、不可重复的。</p>
<p>  使用 Set 存储所有的 key  —&gt; key 所在的类要重写 <code>equals()</code> 和 <code>hashCode()</code> （以HashMap为例)</p>
</li>
<li><p><strong>Map中的value</strong>：无序的、可重复的。</p>
<p>  使用 Collection 存储所有的 value —&gt; value 所在的类要重写 <code>equals()</code></p>
</li>
<li><p>  一个键值对：key-value 构成了一个 Entry 对象。</p>
</li>
<li><p>  Map 中的 entry：无序的、不可重复的，使用 Set 存储所的 entry</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    Map map1=<span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">    map1.put(<span class="string">&quot;AA&quot;</span>,<span class="number">123</span>);</span><br><span class="line">    map1.put(<span class="string">&quot;BB&quot;</span>,<span class="number">345</span>);</span><br><span class="line">    map1.put(<span class="string">&quot;cc&quot;</span>,<span class="number">345</span>);</span><br><span class="line">    map1.put(<span class="string">&quot;AA&quot;</span>,<span class="number">001</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//key</span></span><br><span class="line">    <span class="type">Set</span> <span class="variable">set1</span> <span class="operator">=</span> map1.keySet();	<span class="comment">// HashMap中的key是set无序不可重复,可以用iterator遍历</span></span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator1</span> <span class="operator">=</span> set1.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator1.hasNext())&#123;</span><br><span class="line">        System.out.println(iterator1.next());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// values</span></span><br><span class="line">    <span class="type">Collection</span> <span class="variable">values</span> <span class="operator">=</span> map1.values(); <span class="comment">// HashMap中的values是Collection</span></span><br><span class="line">    <span class="keyword">for</span> (Object obj:values) &#123;</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// key-value</span></span><br><span class="line">    <span class="type">Set</span> <span class="variable">entrySet</span> <span class="operator">=</span> map1.entrySet();	<span class="comment">// HashMap中的entry是set</span></span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> entrySet.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">        <span class="comment">// entrySet集合中的元素都是entry</span></span><br><span class="line">        Map.Entry entry=(Map.Entry)obj;</span><br><span class="line">        System.out.println(entry.getKey()+<span class="string">&quot;----&gt;&quot;</span>+entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/image-20210802115642845.png" alt="image-20210802115642845"></p>
<hr>
<h3 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 添加：put(Object key,Object value)</span><br><span class="line">* 删除：remove(Object key)</span><br><span class="line">* 修改：put(Object key,Object value)</span><br><span class="line">* 查询：get(Object key)</span><br><span class="line">* 长度：size()</span><br><span class="line">* 遍历：keySet() / values() / entrySet()</span><br></pre></td></tr></table></figure>





<h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><ol>
<li> HashMap的底层实现原理？</li>
<li> HashMap 和 Hashtable的异同？</li>
<li> CurrentHashMap 与 Hashtable的异同？（暂时不讲)</li>
</ol>
<hr>
<h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h2><h3 id="HashMap-底层结构"><a href="#HashMap-底层结构" class="headerlink" title="HashMap 底层结构"></a>HashMap 底层结构</h3><blockquote>
<p>  <strong>JDK7</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>():</span><br><span class="line"><span class="comment">// ...可能已经执行过多次put...</span></span><br><span class="line">map.put(key1,value1);     </span><br></pre></td></tr></table></figure>

<ol>
<li> 执行 <code>new HashMap()</code> 的指令，底层会创建一个长度为16 的一维数组 <strong>Entry[] table</strong>；</li>
<li>  ….可能已经执行过多次 <code>put</code> …</li>
<li>执行 <code>map.put(key1,value1)</code> 方法：<ul>
<li>首先，调用 <code>key1</code> 所在类的 <code>hashCode()</code> 计算 <code>key1</code> 的哈希值，此哈希值经过某种算法计算以后，得到在 <code>Entry</code> 数组中的存放位置。<ul>
<li>  如果此位置上的数据为空，此时的 <code>key1-value1</code> 添加成功。【Case1】</li>
<li>如果此位置上的数据不为空（意味着此位置上存在一个或多个数据(以链表形式存在)），比较 <code>key1</code> 和已经存在的一个或多个数据的哈希值：<ul>
<li>  如果 <code>key1</code> 的哈希值与已经存在的数据的哈希值都不相同，此时 <code>key1-value1</code> 添加成功。【Case2】</li>
<li>如果 <code>key1</code> 的哈希值和已经存在的某一个数据 <code>(key2-value2)</code> 的哈希值相同，继续比较.调用 <code>key1</code> 所在类的<code>equals(key2)</code>方法，比较：<ul>
<li>  如果 <code>equals()</code>返回 false，此时 <code>key1-value1</code> 添加成功。【Case3】</li>
<li>  如果 <code>equals()</code> 返回 true，使用 <code>value1</code> 替换 <code>value2</code>。【Case4】</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>  <strong>Tip：</strong></p>
</blockquote>
<ul>
<li>  在不断的添加过程中，会涉及到扩容问题，当<strong>超出临界值 0.75 (且要存放的位置非空)时，扩容</strong>。</li>
<li>  默认的扩容方式：<strong>扩容为原来容量的 2 倍</strong>，并将原的数据复制过来。</li>
</ul>
<blockquote>
<p>  <strong>JDK8</strong>：HashMap 在 JDK8 中相较于 JDK7 在底层实现方面的不同：</p>
</blockquote>
<ol>
<li> <code>new HashMap()</code> 底层没有创建一个长度为16的数组，而是使用一个类加载阶段就创建好的空数组；</li>
<li> JDK8 底层的数组是：**Node[]**，而非Entry[]；</li>
<li> <strong>首次调用<code>put()</code>方法时，底层才会创建长度为16的数组；</strong></li>
<li> JDK7 底层结构：数组+链表。JDK8 中底层结构：数组+链表+红黑树。</li>
<li> 当数组的某一个索引位置上的元素以链表形式存在的数据个数 &gt; 8 <strong>且</strong>当前数组的长度 &gt; 64时，此时此索引位置上的所数据改为使用红黑树存储。<code>[链表长度 &gt;= 8 &amp;&amp; 数组长度 =&lt; 64]</code></li>
</ol>
<blockquote>
<p>  <strong>HashMap 底层结构典型属性的说明（源码中属性的说明）：</strong></p>
</blockquote>
<ul>
<li>  <strong>DEFAULT_INITIAL_CAPACITY</strong> ：HashMap的默认容量，16</li>
<li>  <strong>DEFAULT_LOAD_FACTOR</strong>：HashMap的默认加载因子，0.75；</li>
<li>  <strong>threshold</strong>：扩容的临界值， 等于 <strong>容量*填充因子</strong>：16 * 0.75 =&gt; 12；</li>
<li>  <strong>TREEIFY_THRESHOLD</strong>：Bucket 中链表长度大于该默认值时转化为红黑树，8；</li>
<li>  <strong>MIN_TREEIFY_CAPACITY</strong>：桶中的Node被树化时最小的 hash 表容量，64</li>
</ul>
<h2 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h2><blockquote>
<p>  <strong>LinkedHashMap的底层实现原理</strong></p>
</blockquote>
<ul>
<li>  LinkedHashMap 底层使用的结构与 HashMap 相同，因为 LinkedHashMap 继承于 HashMap。</li>
<li>  区别就在于：<strong>LinkedHashMap 内部提供了 Entry，替换了 HashMap 中的 Node</strong>。</li>
</ul>
<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/image-20210802122626223.png" alt="image-20210802122626223"></p>
<h2 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h2><ul>
<li>  向 TreeMap 中添加 <code>key-value</code>，<strong>要求 <code>key</code> 必须是由同一个类创建的对象</strong>。</li>
<li>  因为要根据 key 进行排序：自然排序 、定制排序。</li>
</ul>
<hr>
<h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Properties</span> <span class="keyword">extends</span> <span class="title class_">Hashtable</span>&lt;Object,Object&gt;</span><br></pre></td></tr></table></figure>

<p>Properties 是 Hashtable 的一个子类，<code>key</code> 和 <code>value</code> 都是 String 类型，常用来处理配置文件。</p>
<blockquote>
<p>  <strong>代码演示</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">pros</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">        fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line">        pros.load(fis);	<span class="comment">// 加载流对应的文件</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> pros.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name + <span class="string">&quot;, password = &quot;</span> + password);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(fis != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="Collections-工具类"><a href="#Collections-工具类" class="headerlink" title="Collections 工具类"></a>Collections 工具类</h2><h3 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h3><ul>
<li>  <strong>操作 Collection 和 Map 的工具类</strong></li>
</ul>
<h3 id="常用方法-2"><a href="#常用方法-2" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li>  **reverse(List)**：反转 List 中元素的顺序</li>
<li>  **shuffle(List)**：对 List 集合元素进行随机排序</li>
<li>  **sort(List)**：根据元素的自然顺序对指定 List 集合元素升序排序</li>
<li>  **sort(List，Comparator)**：根据指定的 Comparator 产生的顺序对 List 集合元素进行排序</li>
<li>  **swap(List，int， int)**：将指定 list 集合中的 i 处元素和 j 处元素进行交换</li>
<li>  **Object max(Collection)**：根据元素的自然顺序，返回给定集合中的最大元素</li>
<li>  **Object max(Collection，Comparator)**：根据 Comparator 指定的顺序，返回给定集合中的最大元素</li>
<li>  <strong>Object min(Collection)</strong></li>
<li>  <strong>Object min(Collection，Comparator)</strong></li>
<li>  **int frequency(Collection，Object)**：返回指定集合中指定元素的出现次数</li>
<li>  **void copy(List dest,List src)**：将src中的内容复制到dest中</li>
<li>  **replaceAll(List list，Object oldVal，Object newVal)**：使用新值替换 List 对象的所有旧值</li>
</ul>
<h3 id="可以创建线程安全的-List-、Set-、Map"><a href="#可以创建线程安全的-List-、Set-、Map" class="headerlink" title="可以创建线程安全的 List 、Set 、Map"></a>可以创建线程安全的 List 、Set 、Map</h3><blockquote>
<p>  <strong>说明：</strong></p>
</blockquote>
<p>ArrayList、HashSet 和 HashMap 都是线程不安全的，如果程序要求线程安全，我们可以使用 Collections 工具类将 ArrayList、HashSet 或 HashMap 转换为线程的。</p>
<p><img src="file://E:/blog/source/_posts/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/image-20210705213534400.png?lastModify=1627872363" alt="image-20210705213534400"></p>
<hr>
<p><img src="/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/%E9%9B%86%E5%90%88.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/05/26/JavaSE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/05/26/JavaSE/" class="post-title-link" itemprop="url">JavaSE</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-05-26 22:12:58" itemprop="dateCreated datePublished" datetime="2020-05-26T22:12:58+08:00">2020-05-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-08-13 17:13:28" itemprop="dateModified" datetime="2021-08-13T17:13:28+08:00">2021-08-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-计算机基础知识"><a href="#1-计算机基础知识" class="headerlink" title="1.    计算机基础知识"></a>1.    计算机基础知识</h1><h2 id="1-1-进制"><a href="#1-1-进制" class="headerlink" title="1.1    进制"></a>1.1    进制</h2><p><img src="/2020/05/26/JavaSE/image-20210723103449876.png" alt="image-20210723103449876"></p>
<h3 id="二进制"><a href="#二进制" class="headerlink" title="二进制"></a>二进制</h3><p>二进制系统中，每一个0或1就是一个<strong>位</strong>，都代表一个 <strong>bit（比特）</strong>。</p>
<p><strong>二进制数据的存储方式</strong>：所有的数值，不管正负，底层都以补码的方式存储。</p>
<p><strong>原码、反码、补码的说明：</strong></p>
<ul>
<li><p>  <strong>正数</strong>：三码合一</p>
</li>
<li><p><strong>负数</strong>：</p>
<blockquote>
<p>  <strong>原码：</strong>直接将一个数值转换成二进制数，最高位是符号位。</p>
<p>  <strong>负数的反码：</strong>是对原码按位取反，只是最高位（符号位）确定为1.</p>
<p>  <strong>负数的补码：</strong>对其反码加 1。</p>
</blockquote>
</li>
</ul>
<p><img src="/2020/05/26/JavaSE/image-20210730120058217.png" alt="image-20210730120058217"></p>
<p><img src="/2020/05/26/JavaSE/image-20210730120129684.png" alt="image-20210730120129684"></p>
<h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><p><img src="/2020/05/26/JavaSE/image-20210723103635390.png" alt="image-20210723103635390"></p>
<h2 id="1-2-字节"><a href="#1-2-字节" class="headerlink" title="1.2    字节"></a>1.2    字节</h2><ul>
<li>8个<code>bit</code>（比特）表示1个<strong>字节</strong>，写成 <strong>1B</strong> 或者 <strong>1byte</strong> 。</li>
<li><em>字节是我们常见的计算机中的最小存储单元</em>。</li>
<li>计算机存储任何数据，都是以字节的形式存储。</li>
<li>Java 中单个汉字的所占的 存储空间为 2~4 个字节不等。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">8bit = 1B</span><br><span class="line">1024B = 1KB</span><br><span class="line">1024KB = 1MB</span><br><span class="line">1024MB = 1GB</span><br><span class="line">1024GB = 1TB</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p><img src="/2020/05/26/JavaSE/%E5%AD%97%E8%8A%82.png" alt="字节"></p>
<h2 id="1-3-常见的编码表"><a href="#1-3-常见的编码表" class="headerlink" title="1.3    常见的编码表"></a>1.3    常见的编码表</h2><table>
<thead>
<tr>
<th>名称</th>
<th>简介</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ASCII</strong></td>
<td>美国标准信息交换码。用一个字节的7位可以表示。</td>
</tr>
<tr>
<td><strong>ISO8859-1</strong></td>
<td>拉丁码表。欧洲码表。用一个字节的8位表示。</td>
</tr>
<tr>
<td><strong>GB2312</strong></td>
<td>中国的中文编码表。最多两个字节编码所有字符</td>
</tr>
<tr>
<td><strong>GBK</strong></td>
<td>中国的中文编码表升级，融合了更多的中文文字符号。最多两个字节编码</td>
</tr>
<tr>
<td><strong>Unicode</strong></td>
<td>国际标准码，融合了目前人类使用的所字符。为每个字符分配唯一的字符码。所有的文字都用两个字节来表示。</td>
</tr>
<tr>
<td><strong>UTF-8</strong></td>
<td>变长的编码方式，可用1-4个字节来表示一个字符。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="1-4-ASCII编码表"><a href="#1-4-ASCII编码表" class="headerlink" title="1.4    ASCII编码表"></a>1.4    ASCII编码表</h2><ul>
<li>计算机只能识别二进制的0或1，那如何用二进制数据表示人类的文字呢？这就用到了编码表！</li>
</ul>
<h3 id="1-编码表"><a href="#1-编码表" class="headerlink" title="1.  编码表"></a>1.  编码表</h3><ol>
<li><strong>概念：</strong><ul>
<li>就是将人类的文字（最初是英文）和一个十进制数字对应起来的一个表格。</li>
<li>十进制数字又可以进一步转换为二进制数字表示。</li>
<li>这样就实现了用二进制数表示人类的文字（英文、中文等）。</li>
</ul>
</li>
<li><strong>ASCII 编码表</strong><ul>
<li><em>将所有的英文字母、数字、符号都和十进制进行了对应，产生了世界上第一张编码表 ASCII</em></li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">字符</th>
<th align="center">数值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">48</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">57</td>
</tr>
<tr>
<td align="center">A</td>
<td align="center">65</td>
</tr>
<tr>
<td align="center">Z</td>
<td align="center">90</td>
</tr>
<tr>
<td align="center">a</td>
<td align="center">97</td>
</tr>
<tr>
<td align="center">z</td>
<td align="center">122</td>
</tr>
</tbody></table>
<p><img src="/2020/05/26/JavaSE/%E7%BC%96%E7%A0%81%E8%A1%A8.png" alt="编码表"></p>
<hr>
<h1 id="2-Java语言开发环境"><a href="#2-Java语言开发环境" class="headerlink" title="2.    Java语言开发环境"></a>2.    Java语言开发环境</h1><h2 id="2-1-Java虚拟机——JVM"><a href="#2-1-Java虚拟机——JVM" class="headerlink" title="2.1    Java虚拟机——JVM"></a>2.1    Java虚拟机——JVM</h2><ul>
<li><strong>JVM</strong>（Java Virtual Machine）：Java虚拟机，简称JVM。</li>
<li>跨平台。</li>
</ul>
<h3 id="2-1-1-JVM虚拟机的内存划分"><a href="#2-1-1-JVM虚拟机的内存划分" class="headerlink" title="2.1.1    JVM虚拟机的内存划分"></a>2.1.1    JVM虚拟机的内存划分</h3><h4 id="1、内存的概念"><a href="#1、内存的概念" class="headerlink" title="1、内存的概念"></a>1、内存的概念</h4><blockquote>
<p>内存是用来<strong>存储临时数据</strong>的（即断电后数据消失），它主要负责：硬盘等硬件上的数据和CPU之间的数据交换处理，也起到缓存系统中的临时数据的作用。在计算机中，它直接和CPU交换数据。</p>
<p><a href>内存，外存和CPU的关系</a></p>
</blockquote>
<ul>
<li>我们编写的程序是存放在硬盘中的，在硬盘中的程序是不会运行的，必须先加载进内存中，然后由CPU运行程序，运行完毕后会清空内存。</li>
<li>JVM虚拟机要运行程序，必须要对内存进行空间的分配和管理。</li>
</ul>
<h4 id="2、JVM的内存划分"><a href="#2、JVM的内存划分" class="headerlink" title="2、JVM的内存划分"></a>2、JVM的内存划分</h4><blockquote>
<p>为了提高运算效率，JVM对内存空间进行了不同区域的划分。每一片区域都有特定的处理数据方式和内存管理方式。</p>
</blockquote>
<p><strong>JVM的内存划分</strong>：</p>
<table>
<thead>
<tr>
<th align="center">区域名称</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">寄存器</td>
<td align="center">给CPU使用，与开发无关。运行速度最快</td>
</tr>
<tr>
<td align="center">本地方法栈</td>
<td align="center">JVM在操作系统功能时调用，与开发无关。</td>
</tr>
<tr>
<td align="center">方法区</td>
<td align="center">存储<code>1、Class对象</code>，<code>2、类中的成员方法</code>，<code>3、static修饰的一切</code></td>
</tr>
<tr>
<td align="center">堆内存</td>
<td align="center">用于存放所有的Java<code>对象</code>，<strong>new出来的，都存储在堆内存(包括String和数组)。</strong></td>
</tr>
<tr>
<td align="center">方法栈</td>
<td align="center"><code>方法</code>运行时使用的内存，比如main()方法运行，进入方法栈中执行。<code>对象引用</code>保存在栈中。</td>
</tr>
</tbody></table>
<ul>
<li><code>方法区</code>中有一块内存被称为<code>静态区</code>，所有被<code>static</code>修饰的内容（包括静态方法、静态变量、静态代码块）都位于静态区中。</li>
</ul>
<hr>
<h2 id="2-2-JVM-amp-JRE-amp-JDK"><a href="#2-2-JVM-amp-JRE-amp-JDK" class="headerlink" title="2.2    JVM &amp; JRE &amp; JDK"></a>2.2    JVM &amp; JRE &amp; JDK</h2><p><img src="/2020/05/26/JavaSE/image-20210723095928287.png" alt="image-20210723095928287"></p>
<ul>
<li><strong>JVM</strong>：字节码文件运行的平台</li>
<li><strong>JRE</strong>（Java Runtime Environment）：JVM + Java核心类库 + 其它【==&gt; 只能运行编译好的 <code>.class</code> 文件】</li>
<li><strong>JDK</strong>（Java Development Kit）：JRE + Javac编译器 + 其它【==&gt; 编译、运行一条龙服务】</li>
<li>三者关系：<strong>JDK &gt; JRE &gt; JVM</strong></li>
</ul>
<p><img src="/2020/05/26/JavaSE/image-20200618234423180.png" alt="image-20200618234423180"></p>
<hr>
<h2 id="2-3-JavaBean——标准代码"><a href="#2-3-JavaBean——标准代码" class="headerlink" title="2.3    JavaBean——标准代码"></a>2.3    JavaBean——标准代码</h2><ul>
<li><code>JavaBean</code>是Java语言编写类的一种标准规范。</li>
<li>符合<code>JavaBean</code>的类，要求类必须是<strong>具体的和公共的</strong>，并且<strong>具有无参的构造方法</strong>，提供用来操作成员变量的**<code>set</code>和<code>get</code>方法**。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaBean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassName</span>&#123;</span><br><span class="line">    <span class="comment">// 成员变量</span></span><br><span class="line">    <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="comment">// 无参构造方法【必须】</span></span><br><span class="line">    <span class="comment">// 有参构造方法【建议】</span></span><br><span class="line">    <span class="comment">// 成员方法</span></span><br><span class="line">    <span class="comment">// getXxx()</span></span><br><span class="line">    <span class="comment">// setXxx()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="3-Java程序的执行原理"><a href="#3-Java程序的执行原理" class="headerlink" title="3.    Java程序的执行原理"></a>3.    Java程序的执行原理</h1><h2 id="3-1-Java程序执行的3个步骤"><a href="#3-1-Java程序执行的3个步骤" class="headerlink" title="3.1.    Java程序执行的3个步骤"></a>3.1.    Java程序执行的3个步骤</h2><p><strong>编写 –&gt; 编译 –&gt; 运行</strong></p>
<p><img src="/2020/05/26/JavaSE/Java%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E7%9A%843%E4%B8%AA%E6%AD%A5%E9%AA%A4.png"></p>
<blockquote>
<ol>
<li> <strong>编写</strong></li>
</ol>
</blockquote>
<ul>
<li>程序员编写的源程序是<code>.java</code>格式的，JVM 是看不懂这种格式的文件的，因此我们必须把编写好的 <code>.java</code>源文件编译为 JVM 可以识别的二进制字节码文件，即 <code>.class</code> 文件。</li>
</ul>
<blockquote>
<ol start="2">
<li> <strong>编译</strong></li>
</ol>
</blockquote>
<ul>
<li><p>使用 <code>javac.exe</code> 命令编译我们的 java 源文件。</p>
</li>
<li><p>步骤：在DOS命令窗口中，进入java源文件所在的目录，使用<code>javac</code>命令进行编译。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javac Java源文件名.后缀名</span><br><span class="line"></span><br><span class="line">javac HelloWorld.java</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<ol start="3">
<li> <strong>运行</strong></li>
</ol>
</blockquote>
<ul>
<li><p>使用 <code>java.exe</code> 命令解释运行我们的字节码文件。</p>
</li>
<li><p>步骤：在DOS命令窗口中，进入java源文件所在的目录，使用<code>java</code>命令进行编译。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java 类名</span><br><span class="line">    </span><br><span class="line">java HelloWorld</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="3-2-编译-amp-解释-amp-运行"><a href="#3-2-编译-amp-解释-amp-运行" class="headerlink" title="3.2    编译 &amp; 解释 &amp; 运行"></a>3.2    编译 &amp; 解释 &amp; 运行</h2><blockquote>
<p>  <strong>编译 &amp; 运行</strong></p>
</blockquote>
<ol>
<li><strong>编译</strong>：将 <code>.java</code> 源文件一次性翻译成 <code>.class</code> 字节码文件。</li>
<li><strong>运行</strong>：将<code>.class</code>文件交给<code>JVM</code>去执行。</li>
</ol>
<blockquote>
<p>  <strong>编译 &amp; 解释</strong></p>
</blockquote>
<ul>
<li><strong>编译</strong>：将源代码一次性转换成<code>二进制文件</code>的过程。</li>
<li><strong>解释</strong>：将源代码逐条转换成<code>二进制文件</code>的过程。</li>
</ul>
<p>Java 是一门半解释半编译型语言。</p>
<hr>
<h2 id="3-2-main-方法"><a href="#3-2-main-方法" class="headerlink" title="3.2    main() 方法"></a>3.2    main() 方法</h2><ol>
<li><p><code>main()</code>方法称为主方法，是一切程序的入口。</p>
</li>
<li><p><code>main()</code> 方法也是一个普通的静态方法。</p>
</li>
<li><p><code>main()</code> 方法可以作为我们与控制台交互的方式。（之前：使用Scanner）</p>
</li>
<li><p>如何将控制台获取的数据传给形参：<code>String[] args</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在控制台上输入：</span></span><br><span class="line">java [类名] <span class="string">&quot;Tom&quot;</span> <span class="string">&quot;Jerry&quot;</span> <span class="string">&quot;123&quot;</span> <span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(args[<span class="number">0</span>]);	<span class="comment">// &quot;Tom&quot;</span></span><br><span class="line">        System.out.println(args[<span class="number">3</span>]);	<span class="comment">// &quot;true&quot;</span></span><br><span class="line">        System.out.println(args[<span class="number">4</span>]);	<span class="comment">// 异常，数组下标越界</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-4-其它"><a href="#3-4-其它" class="headerlink" title="3.4    其它"></a>3.4    其它</h2><blockquote>
<p>  <strong>在一个 java 源文件中可以声明几个 class ？</strong></p>
</blockquote>
<p>在一个 java 源文件中可以声明多个 class。但是，只能最多有一个类声明为 public 的。而且要求声明为 public 的类的类名必须与源文件名相同。</p>
<blockquote>
<p>  <strong>编译的过程</strong></p>
</blockquote>
<p>编译以后，一个 <code>.java</code> 源文件会生成<strong>一个或多个字节码文件</strong>（如果含有内部类就会生成多个字节码文件）。字节码文件的文件名与 java 源文件中的类名相同。</p>
<hr>
<h1 id="4-变量的分类"><a href="#4-变量的分类" class="headerlink" title="4.    变量的分类"></a>4.    变量的分类</h1><h2 id="4-1-按照类别划分"><a href="#4-1-按照类别划分" class="headerlink" title="4.1    按照类别划分"></a>4.1    按照类别划分</h2><img src="/2020/05/26/JavaSE/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" alt="数据类型" style="zoom:50%;">

<h3 id="4-1-1-、基本数据类型"><a href="#4-1-1-、基本数据类型" class="headerlink" title="4.1.1 、基本数据类型"></a>4.1.1 、基本数据类型</h3><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">关键字</th>
<th align="center">内存占用</th>
<th align="center">取值范围</th>
<th align="center">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">字节型</td>
<td align="center">byte</td>
<td align="center">1个字节</td>
<td align="center">-2^7^ ~ 2^7^-1【2^8^】</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">短整型</td>
<td align="center">short</td>
<td align="center">2个字节</td>
<td align="center">-2^15^ ~ 2^15^-1【2^16^】</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">整型</td>
<td align="center">int</td>
<td align="center">4个字节</td>
<td align="center">-2^31^ ~ 2^31^-1【2^32^】</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">长整形</td>
<td align="center">long</td>
<td align="center">8个字节</td>
<td align="center">-2^63^ ~ 2^63^-1【2^64^】</td>
<td align="center">0L</td>
</tr>
<tr>
<td align="center">单精度浮点数</td>
<td align="center">float</td>
<td align="center">4个字节</td>
<td align="center"></td>
<td align="center">0.0f</td>
</tr>
<tr>
<td align="center">双精度浮点数</td>
<td align="center">double（默认）</td>
<td align="center">8个字节</td>
<td align="center"></td>
<td align="center">0.0d</td>
</tr>
<tr>
<td align="center">字符型</td>
<td align="center">char</td>
<td align="center">2个字节</td>
<td align="center">0~2^16^</td>
<td align="center">–</td>
</tr>
<tr>
<td align="center">布尔类型</td>
<td align="center">boolean</td>
<td align="center">1个字节</td>
<td align="center">true/ false</td>
<td align="center">false</td>
</tr>
</tbody></table>
<blockquote>
<p>  附：</p>
<ul>
<li>  long类型：建议数据后加L表示</li>
<li>  float类型：建议数据后加F表示</li>
</ul>
</blockquote>
<h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><blockquote>
<p>  <strong>为什么4个字节的 float 表示数值的范围比8个字节的 long 还大？</strong></p>
</blockquote>
<p><img src="/2020/05/26/JavaSE/20200625193023765.png" alt="img"></p>
<p>整数在计算机底层采用补码的形式表示，除去首位的符号位，剩余的位数即表示数值的范围，也就是<strong>位数越多，范围越大</strong>。</p>
<p>而对于单精度浮点数 float 和双精度浮点数 double，它们底层的数据结构是由 <strong>符号位 + 指数位 + 尾数位</strong> 组成的，中间的8位是指数位，尾数位表示小数的范围。</p>
<p>指数位有 8 位，即最高取到 128，底数固定为 2，即最大范围约等于  <strong>2^-128^ ~ 2^128^</strong> 之间，显然大于 long 类型的数据。</p>
<h4 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h4><p><strong>表示方式</strong></p>
<ol>
<li> 显式地声明一个字符</li>
<li> 转义字符</li>
<li> 直接使用 Unicode 值来表示字符型常量</li>
</ol>
<hr>
<h3 id="4-1-2、引用数据类型"><a href="#4-1-2、引用数据类型" class="headerlink" title="4.1.2、引用数据类型"></a>4.1.2、引用数据类型</h3><ul>
<li>除了基本类型剩下的数据都是引用类型。</li>
<li>基本类型数据可以作为成员变量、作为方法的参数，作为方法的返回值，那么当然引用类型也是可以的。*[引用类型数据的使用范围大于等于基本类型数据]*</li>
</ul>
<h4 id="1-class作为成员变量"><a href="#1-class作为成员变量" class="headerlink" title="1.    class作为成员变量"></a>1.    class作为成员变量</h4><ul>
<li><p>定义一个类<code>Role</code>（游戏角色）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Role</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> blood;  <span class="comment">//生命值</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此时<code>String</code>本身就是引用类型，由于使用的方式类似常量，所以往往忽略了他是引用类型的存在。如果我们继续丰富这个类的定义，给<code>Role</code>增加武器，穿戴装备等属性，将如何编写呢？</p>
</blockquote>
</li>
<li><p>定义武器类<code>Weapon</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Weapon</span> &#123; <span class="comment">// 武器</span></span><br><span class="line">    <span class="keyword">private</span> String name;    <span class="comment">// 武器名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> hurt;   <span class="comment">// 伤害值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="comment">// get/set方法</span></span><br><span class="line">    <span class="comment">// 重写toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义防具类<code>Armor</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Armor</span> &#123;    <span class="comment">// 防具</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> protect;    <span class="comment">// 护甲/魔抗</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="comment">// get/set方法</span></span><br><span class="line">    <span class="comment">// 重写toString方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义角色类<code>Role</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Role</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> blood;  <span class="comment">//生命值</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Weapon wp;  <span class="comment">// 添加武器属性</span></span><br><span class="line">    <span class="keyword">private</span> Armor ar;   <span class="comment">// 添加防具属性</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 攻击方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attack</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用&quot;</span>+wp.getName()+<span class="string">&quot;造成了&quot;</span>+wp.getHurt()+<span class="string">&quot;点伤害&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 防御方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">defense</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用&quot;</span>+ar.getName()+<span class="string">&quot;抵挡了&quot;</span>+ar.getProtect()+<span class="string">&quot;点伤害&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="comment">// get/set方法</span></span><br><span class="line">    <span class="comment">// 重写toString方法</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Weapon</span> <span class="variable">wp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Weapon</span>(<span class="string">&quot;终默之焉&quot;</span>, <span class="number">666</span>);</span><br><span class="line">        <span class="type">Armor</span> <span class="variable">ar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Armor</span>(<span class="string">&quot;新手盾牌&quot;</span>,<span class="number">999</span>);</span><br><span class="line">        <span class="type">Role</span> <span class="variable">role</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Role</span>(<span class="number">7</span>, <span class="number">100</span>, <span class="string">&quot;执行者&quot;</span>, wp, ar);</span><br><span class="line"></span><br><span class="line">        role.attack();</span><br><span class="line">        role.defense();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果：</span></span><br><span class="line"><span class="comment">    ——————————————————————————————————————————————————————————————————————————</span></span><br><span class="line"><span class="comment">            使用终默之焉造成了666点伤害</span></span><br><span class="line"><span class="comment">            使用新手盾牌抵挡了999点伤害</span></span><br><span class="line"><span class="comment">    ——————————————————————————————————————————————————————————————————————————</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p>类作为成员变量时，对它进行赋值的操作，实际上是<strong>赋给它该类的一个实例对象</strong>。</p>
</li>
</ul>
<hr>
<h4 id="2-interface作为成员变量"><a href="#2-interface作为成员变量" class="headerlink" title="2.    interface作为成员变量"></a>2.    interface作为成员变量</h4><ul>
<li>接口不能直接 new，但是可以接收一个子类对象。</li>
<li>接口作为成员变量时，对它进行赋值操作，实际上是 <strong>赋给它该接口的一个子类实例对象</strong>。</li>
</ul>
<h4 id="3-interface作为方法参数和返回值类型"><a href="#3-interface作为方法参数和返回值类型" class="headerlink" title="3.    interface作为方法参数和返回值类型"></a>3.    interface作为方法参数和返回值类型</h4><ul>
<li><strong>接口作为方法参数时，传递的是它的子类实例对象。</strong></li>
<li><strong>接口作为返回值类型时，返回的是它的子类实例对象。</strong></li>
</ul>
<hr>
<h2 id="4-2-按声明的位置分类"><a href="#4-2-按声明的位置分类" class="headerlink" title="4.2    按声明的位置分类"></a>4.2    按声明的位置分类</h2><p><img src="/2020/05/26/JavaSE/image-20210723102237987.png" alt="image-20210723102237987"></p>
<hr>
<h2 id="4-2-按照是否可变划分"><a href="#4-2-按照是否可变划分" class="headerlink" title="4.2    按照是否可变划分"></a>4.2    按照是否可变划分</h2><h3 id="4-2-1、常量"><a href="#4-2-1、常量" class="headerlink" title="4.2.1、常量"></a>4.2.1、常量</h3><ul>
<li><strong>常量：</strong>是指在 Java 程序中固定不变的数据。</li>
</ul>
<h4 id="4-2-2-1-分类"><a href="#4-2-2-1-分类" class="headerlink" title="4.2.2.1  分类"></a>4.2.2.1  分类</h4><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">含义</th>
<th align="center">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">整数常量</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">小数常量</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">字符常量</td>
<td align="center"><strong>单引号</strong>引起来，只能写一个字符，必须有内容</td>
<td align="center">‘a’, ‘[空格]’, ‘好’</td>
</tr>
<tr>
<td align="center">字符串常量</td>
<td align="center"><strong>双引号</strong>引起来，可以写多个字符，也可以不写</td>
<td align="center">“A”, “Hello”, “你好”, “”</td>
</tr>
<tr>
<td align="center">布尔常量</td>
<td align="center"><code>false/true</code></td>
<td align="center">–</td>
</tr>
<tr>
<td align="center">空常量</td>
<td align="center"><code>null</code></td>
<td align="center">–</td>
</tr>
</tbody></table>
<h3 id="4-2-2、变量"><a href="#4-2-2、变量" class="headerlink" title="4.2.2、变量"></a>4.2.2、变量</h3><ul>
<li><strong>变量：</strong>常量是固定不变的数据，那么在程序中可以变化的量称为变量。</li>
<li>Java 中要求每个变量每一次只能保存一个数据，且必须明确保存的数据类型。</li>
</ul>
<h4 id="4-2-2-1、变量的定义"><a href="#4-2-2-1、变量的定义" class="headerlink" title="4.2.2.1、变量的定义"></a>4.2.2.1、变量的定义</h4><h5 id="1-格式"><a href="#1-格式" class="headerlink" title="1.  格式"></a>1.  格式</h5><ul>
<li><p>变量定义的格式包括3个要素：</p>
<ol>
<li><strong>数据类型</strong></li>
<li><strong>变量名</strong></li>
<li><strong>数据值</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据类型 变量名 = 数据值</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="附1："><a href="#附1：" class="headerlink" title="附1："></a>附1：</h5><ul>
<li>在同一个大括号范围内，变量的名字不可以相同。</li>
<li><strong>变量赋值：类中方法外的成员变量，有缺省值，不赋值可以使用。  类中方法中的值，无缺省值，不赋值不能使用。</strong></li>
</ul>
<hr>
<h2 id="4-3-数据类型转换"><a href="#4-3-数据类型转换" class="headerlink" title="4.3    数据类型转换"></a>4.3    数据类型转换</h2><blockquote>
<p><strong>Java程序中要求参与计算的数据的类型必须保持一致，如果数据类型不一致将发生类型的转换。</strong></p>
</blockquote>
<h3 id="4-3-1-自动类型转换（只涉及7种基本数据类型，不包括Boolean）"><a href="#4-3-1-自动类型转换（只涉及7种基本数据类型，不包括Boolean）" class="headerlink" title="4.3.1    自动类型转换（只涉及7种基本数据类型，不包括Boolean）"></a>4.3.1    自动类型转换（只涉及7种基本数据类型，不包括Boolean）</h3><p><strong>结论：</strong>当容量小的数据类型的变量与容量大的数据类型的变量做运算时，结果自动提升为容量大的数据类型。</p>
<p><strong>原理：</strong>Java 程序要求参与运算的数据类型必须一致，若不一致将被自动转换。当容量小的数据类型变量与容量大的数据类型变量进行运算时，将取值范围大的数据转换为取值范围小的数据可能会发生数据损失，所以 Java 程序会自动将取值范围小的数据类型转换为取值范围大的数据类型。</p>
<p><strong>转换规则：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span> 、<span class="type">char</span> 、<span class="type">short</span> --&gt; <span class="type">int</span> --&gt; <span class="type">long</span> --&gt; <span class="type">float</span> --&gt; <span class="type">double</span> </span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>当 byte、char、short 三种类型的变量做运算时，结果为 int 型。</p>
<h3 id="4-3-2-强制转换-只涉及7种基本数据类型）"><a href="#4-3-2-强制转换-只涉及7种基本数据类型）" class="headerlink" title="4.3.2    强制转换(只涉及7种基本数据类型）"></a>4.3.2    强制转换(只涉及7种基本数据类型）</h3><p><strong>强制类型转换</strong>：将<code>取值范围大的类型</code>转换为<code>取值范围小的类型</code>。</p>
<p><strong>格式</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据类型 变量名 = (数据类型)待转换数据值</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>强制类型转换，可能导致精度损失。</p>
<h3 id="4-3-3-自动转换-vs-强制转换"><a href="#4-3-3-自动转换-vs-强制转换" class="headerlink" title="4.3.3    自动转换 vs. 强制转换"></a>4.3.3    自动转换 vs. 强制转换</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">自动类型转换</th>
<th align="center">强制类型转换</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">Java程序自动执行</td>
<td align="center">手动执行</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">不会出现数据的损失</td>
<td align="center">可能会出现数据的损失</td>
</tr>
</tbody></table>
<hr>
<h1 id="5-运算符"><a href="#5-运算符" class="headerlink" title="5.    运算符"></a>5.    运算符</h1><img src="/2020/05/26/JavaSE/%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%886%E7%B1%BB%EF%BC%89.png" alt="运算符（6类）" style="zoom: 50%;">





<h2 id="5-1-算术运算符"><a href="#5-1-算术运算符" class="headerlink" title="5.1    算术运算符"></a>5.1    算术运算符</h2><blockquote>
<p>  <strong>取余运算结果的符号与被模数的符号相同！！！</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">12</span>;	<span class="comment">// 被模数</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">num11</span> <span class="operator">=</span> -<span class="number">12</span>;	<span class="comment">// 被模数</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> -<span class="number">5</span>;</span><br><span class="line">       <span class="type">int</span> <span class="variable">num22</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">       System.out.println(num1 % num2);    <span class="comment">// 12 % (-5) = 2</span></span><br><span class="line">       System.out.println(num11 % num2);   <span class="comment">// (-12) % (-5) = -2</span></span><br><span class="line">       System.out.println(num11 % num22);  <span class="comment">// (-12) % 5 = -2</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>





<blockquote>
<p>  <strong>在Java中，2个整数使用算术运算符，无论怎么计算，也不会得到小数</strong>。</p>
</blockquote>
<p>​        如：<code>5/2 = 2</code>。其原理是：Java要求参与运算的数据的数据类型必须保持一致，否则就会进行类型转换。2个<code>int</code>类型的数据进行运算，得到的结果如果正好是<code>int</code>类型，则可以得到准确的结果，如果运算的结果含有小数，那么Java程序就会强制浮点型数据转换为整型数据，即使结果损失了部分数据。</p>
<blockquote>
<p>  <strong><code>前++</code>和<code>后++</code>有什么区别？</strong></p>
</blockquote>
<ul>
<li>在只有一个变量的独立运算中，<code>前++</code>和<code>后++</code>没有区别。如<code>a++</code>就完全等价于<code>++a</code>；</li>
<li>如果运算包含多个变量且有赋值操作，<code>前++</code>和<code>后++</code>的到的结果则不同。如<code>b=a++</code>是先赋值再自增，而<code>b=++a</code>是先自增再赋值。</li>
</ul>
<blockquote>
<p>  <strong>+的含义？</strong></p>
</blockquote>
<ul>
<li>当<code>+</code>两边都为数值型变量时，表示数值运算；</li>
<li>当<code>+</code>两边存在字符串时，表示拼接字符串[只要存在一个字符串就表示拼接]。</li>
</ul>
<blockquote>
<p>  <strong>算术运算符需要注意优先级问题。</strong></p>
</blockquote>
<hr>
<h2 id="5-2-赋值运算符"><a href="#5-2-赋值运算符" class="headerlink" title="5.2    赋值运算符"></a>5.2    赋值运算符</h2><p>​        <code>=</code> 的意思是把<code>=</code>右边的值赋值给左边，右边的值可以是任何常数、变量或者表达式，但左边的值必须是一个明确的、已经定义好的变量。如<code>int a = 4</code>。</p>
<ol>
<li><p>对于对象来说，赋值的不是对象的值，而是对象的引用。</p>
</li>
<li><p><strong>所有的赋值运算符都被看作是一次运算，并带有强制转换的特点</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    <span class="type">short</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// s1 = s1 + 2;    // 编译失败</span></span><br><span class="line">    s += <span class="number">1</span>;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	分析： s+=1 逻辑上看作是 s = s+1, 计算结果被提升为int类型，再向short类型赋值时发生错误，因为不能自动将取值范围大的类型赋值给取值范围小的类型。</span></span><br><span class="line"><span class="comment">	但是，s=s+1 进行了2步运算， 而 += 是一个运算符，只运算一次，并带有强制转换的特点，也就是说 s+=1 等价于s=(short)s+1，因此程序没有问题编译通过，运行结果是2.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>常量和变量的运算</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    <span class="type">byte</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">byte</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="type">byte</span> <span class="variable">b3</span> <span class="operator">=</span> <span class="number">1</span> + <span class="number">2</span>;    <span class="comment">// OK</span></span><br><span class="line">    <span class="type">byte</span> <span class="variable">b4</span> <span class="operator">=</span> b1 + b2;      <span class="comment">// Error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     分析：</span></span><br><span class="line"><span class="comment">         b3 = 1+2, 1和2是常量，为固定不变的数据，在编译(javac)的时候，就可以确定了1+2的结果并没有超过byte类型的取值范围，可以赋值给变量 byte b3， 因此 byte b3 = 1 + 2; 是正确的。</span></span><br><span class="line"><span class="comment">         反之， byte b4 = b1 + b2; b2 和 b3 是变量，变量的值可能是变化的，在编译的时候，编译器不能确定 b2+b3 的结果是否会超过byte的取值范围，因此会将结果以 int 类型处理，因为 int 类型不能赋值给 byte 类型，因此编译失败。</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="5-3-比较运算符"><a href="#5-3-比较运算符" class="headerlink" title="5.3    比较运算符"></a>5.3    比较运算符</h2><p>比较运算符：是两个数据之间进行比较的运算。</p>
<ol>
<li> 比较运算符的结果是boolean类型</li>
<li> <code>&gt;  &lt;  &gt;=  &lt;=</code> 只能使用在数值类型的数据之间。</li>
<li> <code>==</code> 和 <code>!=</code> 不仅可以使用在数值类型数据之间，还可以使用在其他引用类型变量之间。</li>
</ol>
<hr>
<h2 id="5-4-逻辑运算符"><a href="#5-4-逻辑运算符" class="headerlink" title="5.4    逻辑运算符"></a>5.4    逻辑运算符</h2><ul>
<li>逻辑运算符：是用来<strong>连接两个布尔类型</strong>结果的运算符，运行结果都是布尔值<code>true/false</code>。</li>
</ul>
<blockquote>
<p>  <strong>区分 <code>&amp;</code> 与  <code>&amp;&amp;</code></strong></p>
</blockquote>
<ul>
<li>  相同点1：<code>&amp;</code> 与 <code>&amp;&amp;</code> 的运算结果相同</li>
<li>  相同点2：当符号左边是 true 时，二者都会执行符号右边的运算</li>
<li>  不同点：当符号左边是 false 时，<code>&amp;</code> 继续执行符号右边的运算，<code>&amp;&amp;</code> 不再执行符号右边的运算。</li>
<li>  开发中，推荐使用&amp;&amp;</li>
</ul>
<blockquote>
<p>  <strong>区分：| 与 ||</strong> </p>
</blockquote>
<ul>
<li>  相同点1：<code>|</code> 与 <code>||</code> 的运算结果相同</li>
<li>  相同点2：当符号左边是 false 时，二者都会执行符号右边的运算</li>
<li>  不同点3：当符号左边是 true 时，<code>|</code> 继续执行符号右边的运算，而 <code>||</code> 不再执行符号右边的运算</li>
<li>  开发中，推荐使用 <code>||</code></li>
</ul>
<hr>
<h2 id="5-5-三元运算符"><a href="#5-5-三元运算符" class="headerlink" title="5.5    三元运算符"></a>5.5    三元运算符</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据类型 变量名 = 布尔类型表达式？结果<span class="number">1</span>：结果<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (<span class="number">1</span>==<span class="number">2</span> ? <span class="number">100</span> : <span class="number">200</span>);</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>三元运算符可以嵌套使用</p>
<hr>
<h1 id="6-流程控制"><a href="#6-流程控制" class="headerlink" title="6.    流程控制"></a>6.    流程控制</h1><img src="/2020/05/26/JavaSE/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6.png" alt="流程控制" style="zoom:50%;">

<h2 id="6-1-顺序结构"><a href="#6-1-顺序结构" class="headerlink" title="6.1    顺序结构"></a>6.1    顺序结构</h2><ul>
<li>默认情况下程序顺序执行。</li>
</ul>
<h2 id="6-2-分支结构"><a href="#6-2-分支结构" class="headerlink" title="6.2    分支结构"></a>6.2    分支结构</h2><h3 id="if-else"><a href="#if-else" class="headerlink" title="if-else"></a>if-else</h3><blockquote>
<p>  <strong>if</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(关系表达式)&#123;</span><br><span class="line">	代码体；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>if…else</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(关系表达式)&#123;</span><br><span class="line">	代码体<span class="number">1</span>；</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    代码体<span class="number">2</span>；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>if…else  if…else</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(判断条件<span class="number">1</span>)&#123;</span><br><span class="line">	代码体<span class="number">1</span>；</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(判断条件<span class="number">2</span>)&#123;</span><br><span class="line">    代码体<span class="number">2</span>；</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(判断条件n)&#123;</span><br><span class="line">    代码体n;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    代码体n+<span class="number">1</span>;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<h3 id="switch-case"><a href="#switch-case" class="headerlink" title="switch-case"></a>switch-case</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">swich(表达式)&#123;</span><br><span class="line">    <span class="keyword">case</span> 常量值<span class="number">1</span>:</span><br><span class="line">    	语句体<span class="number">1</span>;</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">         </span><br><span class="line">    <span class="keyword">case</span> 常量值<span class="number">1</span>:</span><br><span class="line">        语句体<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">	...</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        语句体n+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	执行流程：</span></span><br><span class="line"><span class="comment">	  1. 首先计算出表达式的值。</span></span><br><span class="line"><span class="comment">	  2. 其次，让表达式值与 case 依次比较，一旦有对应的值，就会执行相应的语句，在执行的过程中，遇到break就会结束。</span></span><br><span class="line"><span class="comment">	  3. 最后，如果所有的case都和表达式的值不匹配，就会执行default语句体部分，然后结束程序。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<ol>
<li> 根据 <code>switch</code> 表达式中的值，依次匹配各个 <code>case</code> 中的常量。一旦匹配成功，则进入相应 <code>case</code> 中，调用其执行语句。当调用完执行语句以后，继续向下执行其它 <code>case</code> 结构中的执行语句，直到遇到 <code>break</code>关键字或此 <code>switch-case</code> 结构末尾结束为止。</li>
<li> <code>break</code> 可以使用在 <code>switch-case</code> 结构中，表示一旦执行到此关键字，就跳出 <code>switch-case</code> 结构。</li>
<li> <code>break</code> 关键字是可选的。</li>
<li><strong><code>switch</code>结构中的表达式，只能是如下的 6 种数据类型之一：</strong><ul>
<li>  数字类型：byte、short、char、int</li>
<li>  枚举类型(JDK5.0新增)</li>
<li>  String类型(JDK7.0新增)</li>
</ul>
</li>
<li> <strong><code>case</code> 之后只能声明常量，不能声明范围</strong>。</li>
<li> <code>default</code> 相当于 if-else 结构中的else。  </li>
<li> <code>default</code> 结构是可选的，而且位置是灵活的。</li>
</ol>
<p><strong>测试：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 判断星期几</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (day)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期1&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期2&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期3&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期4&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期5&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期6&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;星期7&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-3-循环结构"><a href="#6-3-循环结构" class="headerlink" title="6.3    循环结构"></a>6.3    循环结构</h2><h3 id="1-while"><a href="#1-while" class="headerlink" title="1.    while"></a>1.    while</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">初始表达式;</span><br><span class="line"><span class="keyword">while</span>(布尔表达式)&#123;</span><br><span class="line">	循环体;</span><br><span class="line">	步进表达式;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// while循环计算1~100之间的和</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-do…while"><a href="#2-do…while" class="headerlink" title="2.    do…while"></a>2.    do…while</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">初始表达式;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">        循环体；</span><br><span class="line">        步进表达式；</span><br><span class="line">    &#125;<span class="keyword">while</span>(布尔表达式);</span><br><span class="line">        </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	do...while 循环的特点：无条件执行一次循环体，即使我们将循环条件直接写成false，也依然会循环一次。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">        </span><br><span class="line"> </span><br><span class="line"><span class="comment">//——————————————————————————————————————————————————————————————————————————</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 输出10次hello</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;<span class="keyword">while</span> (i&lt;=<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// do...while 循环</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;无条件执行一次&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">while</span> (<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-for"><a href="#3-for" class="headerlink" title="3.    for"></a>3.    for</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(初始表达式; 布尔表达式; 步进表达式)&#123;</span><br><span class="line">    循环体;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//——————————————————————————————————————————————————————————————————</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用循环计算1~100之间的偶数和</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum1</span> <span class="operator">=</span> sum_even1();</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum2</span> <span class="operator">=</span> sum_even2();</span><br><span class="line">        System.out.println(sum1);</span><br><span class="line">        System.out.println(sum2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 遍历1~100之间的所有数字，对这些数字再进行筛选，筛选出所有的偶数求和。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum_even2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">100</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (i%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                sum+=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 只遍历啊1~100之间的偶数，设置步长为2，只求所有偶数的和</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1~100之间偶数之和</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum_even1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;=<span class="number">100</span>; i+=<span class="number">2</span>)&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-for-each"><a href="#4-for-each" class="headerlink" title="4.    for-each"></a>4.    for-each</h3><blockquote>
<p>在JDK1.5++中引入了一种更加简洁的对数组和集合进行遍历的方法，即<code>for-each</code>语句。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">array</span> <span class="operator">=</span> &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> num: array)&#123;</span><br><span class="line">    System.out.println(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-知识点"><a href="#5-知识点" class="headerlink" title="5.    知识点"></a>5.    知识点</h3><blockquote>
<p>  <strong><code>if...else</code>语句可与<code>三元运算符</code>的关系？</strong></p>
</blockquote>
<p><code>if...else</code>语句可与<code>三元运算符</code>可互相替换。</p>
<blockquote>
<p>  <strong><code>switch</code>中case的穿透现象？</strong></p>
</blockquote>
<p>​        在switch语句中，如果case后面不写break，将出现穿透现象，也就是不会再判断下一个case的值，直接向后运行，直到到达下一个break，或者整体switch结束。</p>
<blockquote>
<p>  <strong>死循环的两种表现形式</strong></p>
</blockquote>
<p>死循环就是循环中的条件永远为true。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// while死循环</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for 死循环</span></span><br><span class="line"><span class="keyword">for</span>(;;)&#123;</span><br><span class="line">	<span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>  <strong>如何结束一个循环结构？</strong></p>
</blockquote>
<ul>
<li>  方式一：当循环条件是false时</li>
<li>  方式二：在循环体中，执行break</li>
</ul>
<blockquote>
<p>  <strong>什么是嵌套循环？</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 使用嵌套循环，打印5*8的矩形*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=<span class="number">8</span>; j++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 内循环打印8个 *号 后，需要一次换行</span></span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*————————————————————————————————————————————————————————————————————</span></span><br><span class="line"><span class="comment">                ********</span></span><br><span class="line"><span class="comment">                ********</span></span><br><span class="line"><span class="comment">                ********</span></span><br><span class="line"><span class="comment">                ********</span></span><br><span class="line"><span class="comment">                ********</span></span><br><span class="line"><span class="comment">__________________________________________________________________*/</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-5-跳出语句"><a href="#6-5-跳出语句" class="headerlink" title="6.5    跳出语句"></a>6.5    跳出语句</h2><blockquote>
<ol>
<li> <strong>break</strong></li>
</ol>
</blockquote>
<ul>
<li>使用场景：<ol>
<li>终止switch。</li>
<li>终止循环。</li>
</ol>
</li>
</ul>
<blockquote>
<ol start="2">
<li> <strong>continue</strong></li>
</ol>
</blockquote>
<ul>
<li>使用场景<ol>
<li>结束本次循环，继续下一次的循环。</li>
</ol>
</li>
</ul>
<blockquote>
<ol start="3">
<li> <strong>return</strong></li>
</ol>
</blockquote>
<p><strong>break和continue关键字的使用</strong></p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">使用范围</th>
<th align="center">循环中使用的作用(不同点)</th>
<th align="center">相同点</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>break</strong></td>
<td align="center">switch-case</td>
<td align="center">终止switch</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">循环结构中</td>
<td align="center">结束当前循环</td>
<td align="center">关键字后面不能声明执行语句</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>continue</strong></td>
<td align="center"></td>
<td align="center">结束当次循环</td>
<td align="center">关键字后面不能声明执行语句</td>
</tr>
</tbody></table>
<hr>
<h1 id="7-方法"><a href="#7-方法" class="headerlink" title="7.    方法"></a>7.    方法</h1><blockquote>
<p><strong>方法</strong>：方法就是函数，也就是做某些事的方式。</p>
</blockquote>
<img src="/2020/05/26/JavaSE/%E6%96%B9%E6%B3%95.png" style="zoom: 80%;">

<h2 id="7-1-方法的组成"><a href="#7-1-方法的组成" class="headerlink" title="7.1    方法的组成"></a>7.1    方法的组成</h2><ul>
<li>5部分</li>
</ul>
<h3 id="关键字-return"><a href="#关键字-return" class="headerlink" title="关键字 return"></a>关键字 return</h3><blockquote>
<p>  <strong>return关键字：</strong></p>
</blockquote>
<ol>
<li> <strong>使用范围</strong>：使用在方法体中</li>
<li> <strong>作用</strong>：① 结束方法  ② 针对于返回值类型的方法，使用”return 数据”方法返回所要的数据。</li>
<li> <strong>注意点</strong>：return关键字后面不可以声明执行语句。</li>
</ol>
<h3 id="可变形参个数的方法"><a href="#可变形参个数的方法" class="headerlink" title="可变形参个数的方法"></a>可变形参个数的方法</h3><p>JDK5 新增的内容。</p>
<blockquote>
<p>  <strong>使用说明：</strong></p>
</blockquote>
<ol>
<li> 可变个数形参的格式：<code>数据类型 ... 变量名</code></li>
<li> 当调用可变个数形参的方法时，传入的参数个数可以是：0个，1个,2个，…</li>
<li> 可变个数形参的方法与本类中方法名相同，形参不同的方法之间构成重载</li>
<li> <strong>可变个数形参的方法与本类中方法名相同，形参类型也相同的数组之间不构成重载</strong>。换句话说，二者不能共存。【因为可变形参的底层就是用数组实现的】</li>
<li> <strong>可变个数形参在方法的形参中，必须声明在末尾</strong></li>
<li> <strong>可变个数形参在方法的形参中,最多只能声明一个可变形参。</strong></li>
</ol>
<blockquote>
<p>  举例说明</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.xsyu.shuzu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> lnd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2021/7/30 18:02</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Test</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">        test.show(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        test.show(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>);	<span class="comment">// 调用方式一</span></span><br><span class="line">        test.show(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;AA&quot;</span>,<span class="string">&quot;BB&quot;</span>,<span class="string">&quot;CC&quot;</span>&#125;);	<span class="comment">// 调用方式二</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String s)</span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String ... strs)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; strs.length;i++)&#123;</span><br><span class="line">            System.out.print(strs[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 不能与上一个方法同时存在</span></span><br><span class="line"><span class="comment">//    public void show(String[] strs)&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="7-2-方法的定义"><a href="#7-2-方法的定义" class="headerlink" title="7.2    方法的定义"></a>7.2    方法的定义</h2><p><strong>定义方法的范围：类中方法外</strong></p>
<ul>
<li>  一个方法不能在另一个方法中定义，但是可以在另一个方法中调用。</li>
<li>  方法可以定义在一个类中，也可以不定义在一个类中(比如：接口中)。</li>
<li>  不能在 return 后面写代码，return意味着方法结束，后面的所有代码永远不会执行，属于无效代码。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修饰符 返回值类型 方法名 （参数列表）&#123;</span><br><span class="line">	方法体</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="7-2-1-方法的返回值类型、参数类型详解"><a href="#7-2-1-方法的返回值类型、参数类型详解" class="headerlink" title="7.2.1    方法的返回值类型、参数类型详解"></a>7.2.1    方法的返回值类型、参数类型详解</h3><p>方法的参数为基本类型时，传递的是数据值，方法的参数为引用类型时，传递的是地址值。</p>
<p><strong>特殊情况：String 要视情况考虑。[常量池]</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        System.out.println(a);      <span class="comment">// 1</span></span><br><span class="line">        System.out.println(b);      <span class="comment">// 2</span></span><br><span class="line">        change(a, b);</span><br><span class="line">        System.out.println(a);      <span class="comment">// 1</span></span><br><span class="line">        System.out.println(b);      <span class="comment">// 2</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        a = a+b;</span><br><span class="line">        b = b+a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    方法参数为基本类型，传递的是数据值。类似于深拷贝。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//——————————————————————————————————————————————————————————————————————————</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>&#125;;</span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]);     <span class="comment">// 5</span></span><br><span class="line">        change(arr);</span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]);     <span class="comment">// 99</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    方法参数为引用类型，传递的是地址值。类似于浅拷贝。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<hr>
<h2 id="7-3-方法分类"><a href="#7-3-方法分类" class="headerlink" title="7.3    方法分类"></a>7.3    方法分类</h2><hr>
<h2 id="7-4-重载"><a href="#7-4-重载" class="headerlink" title="7.4    重载"></a>7.4    重载</h2><p>方法重载指<strong>在同一个类中，允许存在一个以上的同名方法</strong>，只要它们的<strong>参数列表不同</strong>即可，与修饰符和返回值类型无关。</p>
<blockquote>
<p>  <strong>方法重载的条件：</strong></p>
</blockquote>
<p>**”两同一不同”**：</p>
<ol>
<li> 同一个类</li>
<li> 相同方法名</li>
<li>参数列表不同<ul>
<li>  个数不同；</li>
<li>  数据类型不同；</li>
<li>  参数类型排列顺序不同。</li>
</ul>
</li>
<li> 跟方法的权限修饰符、返回值类型、形参变量名、方法体都没关系！</li>
</ol>
<blockquote>
<p>  <strong>如何确定一个类中某一个方法的调用？</strong></p>
</blockquote>
<ul>
<li>  方法名 + 参数列表</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        println(<span class="number">10</span>);</span><br><span class="line">        println(<span class="string">&quot;哈哈&quot;</span>);</span><br><span class="line">        println(<span class="number">0</span>);</span><br><span class="line">        println(<span class="number">12.5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">(String  a)</span>&#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">(<span class="type">byte</span> a)</span>&#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">(<span class="type">double</span> a)</span>&#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="7-5-重写"><a href="#7-5-重写" class="headerlink" title="7.5    重写"></a>7.5    重写</h2><p>方法重写描述的是<code>子类和父类</code>之间的方法关系，而重载指的是同一类中方法的关系。</p>
<blockquote>
<p>  <strong>定义：</strong></p>
</blockquote>
<p>子类继承父类以后，可以对父类中同名同参数的方法，进行覆盖操作。</p>
<p>重写以后，当创建子类对象以后，通过子类对象调用子父类中的同名同参数的方法时，实际执行的是子类重写父类的方法。</p>
<blockquote>
<p>  <strong>方法重写的原则：“两同两小一大”</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法的声明：</span></span><br><span class="line">权限修饰符  返回值类型  方法名(形参列表) <span class="keyword">throws</span> 异常的类型&#123;</span><br><span class="line">	<span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>  子类重写方法的 <strong>方法名</strong> 和 <strong>形参列表</strong> 必须和父类被重写的方法的方法名和形参列表相同。【两同】</li>
<li>子类重写的方法的<strong>权限修饰符大于父类</strong>被重写的方法的权限修饰符。【一大】<ul>
<li>  特殊情况：子类不能重写父类中声明为 <code>private</code> 权限的方法【继承都继承不到，自然谈不上重写了】</li>
</ul>
</li>
<li>   返回值类型：    -   父类被重写的方法的返回值类型是 void，则子类重写的方法的返回值类型只能是 void；    -   父类被重写的方法的返回值类型是基本数据类型(比如：double)，则子类重写的方法的返回值类型必须是相同的基本数据类型(必须也是double)    -   父类被重写的方法的返回值类型是 A 类型，则<strong>子类重写的方法的返回值类型可以是 A 类或 A 类的子类</strong>（一小）</li>
<li>  子类重写的方法<strong>抛出的异常类型小于父类被重写的方法抛出的异常类型</strong>（两小）</li>
</ul>
<h2 id="7-5-重载-vs-重写"><a href="#7-5-重载-vs-重写" class="headerlink" title="7.5 重载 vs.重写"></a>7.5 重载 vs.重写</h2><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">重载</th>
<th align="center">重写</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">方法位于同一类中</td>
<td align="center">是父类和子类之间方法的关系</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">参数列表必须不同</td>
<td align="center">参数列表必须相同</td>
</tr>
</tbody></table>
<hr>
<h1 id="8-类"><a href="#8-类" class="headerlink" title="8.    类"></a>8.    类</h1><img src="/2020/05/26/JavaSE/%E7%B1%BB.png" alt="类" style="zoom:45%;">

<blockquote>
<p>  Java中，一切都是对象，类也是一种对象。</p>
</blockquote>
<h2 id="8-1-类结构（4大6小成员）"><a href="#8-1-类结构（4大6小成员）" class="headerlink" title="8.1    类结构（4大6小成员）"></a>8.1    类结构（4大6小成员）</h2><p>类的基本要素是<strong>属性</strong>和<strong>方法</strong>。</p>
<ul>
<li><strong>属性</strong>：属性也被称为字段、成员变量，属性可以是任意类型的对象，也可以是基本类型数据。</li>
<li><strong>方法</strong>：方法也被称为成员方法，其实就是函数，也就是做某些事的方式。包括：构造方法和普通方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>&#123;</span><br><span class="line">	<span class="comment">// 属性（字段）</span></span><br><span class="line">    <span class="comment">// 成员方法（构造方法+普通方法）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-1-1-属性（变量）"><a href="#8-1-1-属性（变量）" class="headerlink" title="8.1.1    属性（变量）"></a>8.1.1    属性（变量）</h3><h4 id="成员变量-vs-局部变量"><a href="#成员变量-vs-局部变量" class="headerlink" title="成员变量 vs. 局部变量"></a>成员变量 vs. 局部变量</h4><ul>
<li>  类中的直接属性（字段）也被称为<strong>成员变量</strong>；而类中的间接属性（类中方法中的变量）又被称为<strong>局部变量</strong>。</li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">成员变量</th>
<th align="center">局部变量</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><br>在类中的位置不同</td>
<td align="center"><br>类中 &amp; 方法外</td>
<td align="center">方法中，方法形参<br>构造方法中，构造方法形参<br><strong>代码块内</strong></td>
</tr>
<tr>
<td align="center">作用范围不一样</td>
<td align="center">类中</td>
<td align="center">方法中</td>
</tr>
<tr>
<td align="center">初始化的值不同</td>
<td align="center">有默认值</td>
<td align="center">无默认值，必须赋值</td>
</tr>
<tr>
<td align="center">在内存中的位置不同</td>
<td align="center">堆内存</td>
<td align="center">栈内存</td>
</tr>
<tr>
<td align="center">生命周期不同</td>
<td align="center">随对象的创建而存在，随对象的消失而消失</td>
<td align="center">随方法的调用而存在，随方法的调用完毕而消失</td>
</tr>
<tr>
<td align="center">权限修饰符的不同</td>
<td align="center">private、public、缺省、protected</td>
<td align="center">不可以使用权限修饰符<br>（因为根本出不了当前类，出了作用范围就不可以被使用了）</td>
</tr>
</tbody></table>
<h4 id="类变量-amp-实例变量"><a href="#类变量-amp-实例变量" class="headerlink" title="类变量 &amp; 实例变量"></a>类变量 &amp; 实例变量</h4><ul>
<li>  静态变量：随着类的加载而加载，在内存中只会有一份</li>
<li>  实例变量：属于对象，在内存中创建几次对象就会有几份实例变量</li>
</ul>
<hr>
<h3 id="8-1-2-方法"><a href="#8-1-2-方法" class="headerlink" title="8.1.2    方法"></a>8.1.2    方法</h3><blockquote>
<p>  <strong>方法</strong>：描述类应该具备的功能。</p>
</blockquote>
<h4 id="1、构造方法"><a href="#1、构造方法" class="headerlink" title="1、构造方法"></a>1、构造方法</h4><blockquote>
<p>类中有一种特殊的方法被称为 <strong>构造方法</strong>，或者叫 <strong>构造器</strong>、<strong>构造函数</strong>。</p>
</blockquote>
<p><strong>构造器的作用</strong></p>
<ol>
<li> 创建对象</li>
<li> 初始化对象信息</li>
</ol>
<p><strong>构造器的格式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">权限修饰符  类名(形参列表)&#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>构造方法比较特殊，</p>
<ol>
<li><em>它没有返回值；</em></li>
<li><em>它的名称要和类名一致；</em></li>
<li><em>构造方法可以有多个，彼此构成重载。</em></li>
</ol>
<p><strong>使用说明</strong></p>
<ol>
<li> 如果类中没有显式地定义构造方法的话，JVM 会自动生成一个默认的无参构造器。</li>
<li> 一旦我们显式地定义了类的构造器之后，系统就不再提供默认的空参构造器</li>
<li> 构造器只在创建对象的时期调用一次，保证了对象的初始化的进行。</li>
<li> <strong>一个类中至少会有一个构造器，保证对象可以被创建出来</strong>。</li>
</ol>
<p><strong>属性赋值的先后顺序</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-   ① 默认初始化</span><br><span class="line">-   ② 显式初始化</span><br><span class="line">-   ③ 构造器中初始化</span><br><span class="line">-   ④ 通过&quot;对象.方法&quot; 或 &quot;对象.属性&quot;的方式，赋值</span><br></pre></td></tr></table></figure>





<h4 id="2、成员方法"><a href="#2、成员方法" class="headerlink" title="2、成员方法"></a>2、成员方法</h4><ul>
<li>成员方法中的变量被称为局部变量。</li>
</ul>
<h3 id="8-1-3-代码块"><a href="#8-1-3-代码块" class="headerlink" title="8.1.3    代码块"></a>8.1.3    代码块</h3><blockquote>
<ol>
<li> <strong>代码块的作用</strong>：用来初始化类、对象的信息</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li> <strong>分类</strong></li>
</ol>
</blockquote>
<p>代码块要是使用修饰符，只能使用 <code>static</code>。</p>
<ul>
<li>  静态代码块</li>
<li>  非静态代码块</li>
</ul>
<blockquote>
<ol start="3">
<li> <strong>静态代码块</strong></li>
</ol>
</blockquote>
<ul>
<li>  内部可以输出语句；</li>
<li>  随着类的加载而执行，且只执行一次；</li>
<li>  作用：初始化类的信息；</li>
<li>  如果一个类中定义了多个静态代码块，则按照声明的先后顺序执行；</li>
<li>  静态代码块的执行要优先于非静态代码块的执行；</li>
<li>  静态代码块内只能调用静态的属性、静态的方法，不能调用非静态的结构。</li>
</ul>
<blockquote>
<ol start="4">
<li> <strong>非静态代码块</strong></li>
</ol>
</blockquote>
<ul>
<li>  内部可以输出语句；</li>
<li>  随着对象的创建而执行；</li>
<li>  每创建一个对象，就执行一次非静态代码块；</li>
<li>  作用：可以在创建对象时，对对象的属性等进行初始化；</li>
<li>  如果一个类中定义了多个非静态代码块，则按照声明的先后顺序执行；</li>
<li>  非静态代码块内可以调用静态的属性、静态的方法，或非静态的属性、非静态的方法</li>
</ul>
<blockquote>
<p>  <strong>实例化子类对象时，涉及到父类、子类中静态代码块、非静态代码块、构造器的加载顺序</strong>：</p>
</blockquote>
<ul>
<li>  由父及子，静态先行。</li>
</ul>
<h3 id="8-1-4-内部类"><a href="#8-1-4-内部类" class="headerlink" title="8.1.4    内部类"></a>8.1.4    内部类</h3><blockquote>
<p>  <strong>定义</strong></p>
</blockquote>
<p>将一个类 A 定义在另一个类 B 内部，则里面的类A就称为内部类，类B则称为外部类。</p>
<blockquote>
<p>  <strong>分类</strong></p>
</blockquote>
<ul>
<li>  成员内部类（静态、非静态）</li>
<li>  局部内部类(方法内、代码块内、构造器内)</li>
</ul>
<blockquote>
<p>  <strong>内部类特性：</strong></p>
</blockquote>
<ul>
<li>一个内部类对象可以直接访问它的外部类对象的所有内容，包括私有数据。</li>
<li>内部类不为同一包的其他类所见，具有很好的封装性。</li>
<li>内部类仍然是一个独立的类，在编译之后内部类会被编译成独立的<code>.class</code>文件，但是前面冠以外部类的类名和<code>$</code>符号。【比如：<code>Person$Heart.class</code>】【这也证明了一个 <code>.java</code> 文件可以生成多个 <code>.class</code>文件】</li>
</ul>
<blockquote>
<p>  <strong>字节码文件格式：</strong></p>
</blockquote>
<p>成员内部类和局部内部类，在编译以后，都会生成字节码文件。</p>
<ul>
<li>  成员内部类：<code>外部类$内部类名.class</code></li>
<li>  局部内部类：<code>外部类$数字 内部类名.class</code></li>
</ul>
<hr>
<h4 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h4><blockquote>
<p><strong>定义格式：</strong>定义在<strong>类中方法外</strong>的类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class 外部类&#123;</span><br><span class="line">    class 内部类&#123;</span><br><span class="line">        <span class="comment">// 代码块</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>  <strong>成员内部类特点：</strong></p>
</blockquote>
<ol>
<li>一方面，作为外部类的成员，它可以：<ul>
<li>  调用外部类的数据；</li>
<li>  可以被 <code>static</code> 修饰；</li>
<li>  可以被 4 种不同的权限修饰；</li>
</ul>
</li>
<li>另一方面，作为一个类：<ul>
<li>  类内可以定义属性、方法、构造器等；</li>
<li>  可以被 <code>final</code> 修饰，表示此类不能被继承。也就是说不使用 <code>final</code> 的话，内部类就可以被继承；</li>
<li>  可以被 <code>abstract</code> 修饰。</li>
</ul>
</li>
</ol>
<h3 id="8-3-3-局部内部类"><a href="#8-3-3-局部内部类" class="headerlink" title="8.3.3    局部内部类"></a>8.3.3    局部内部类</h3><blockquote>
<p><strong>定义：</strong>定义在类 A 的方法 <code>method()</code> 中的类 B 叫做局部内部类。</p>
</blockquote>
<ul>
<li>  方式一：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getComparable() 方法的功能是返回一个实现了Comparable接口的子类对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Comparable <span class="title function_">getComparable</span><span class="params">()</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建一个实现了Comparable接口的类:局部内部类【类方法中的类】</span></span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">MyComparable</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&#123;  </span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyComparable</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  方式二：匿名局部内部类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Comparable <span class="title function_">getComparable</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Comparable</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>  <strong>注意：</strong></p>
</blockquote>
<p>如果在局部内部类的方法中调用外部类的局部变量，那么要求此局部变量必须声明为 <code>final</code> 的。</p>
<ul>
<li>  JDK8 之前：要求此局部变量必须显式地声明为 <code>final</code> 的；</li>
<li>  从 JDK8 开始：可以省略 <code>final</code> 关键字。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*final*/</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">12</span>;   <span class="comment">// 外部类的局部变量</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Inner 是一个局部内部类</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">innerA</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//                num = 21; // 编译异常，因为num被隐式地声明为final了，不能被更改</span></span><br><span class="line">                System.out.println(num);    <span class="comment">// OK，调用是OK的</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="8-3-4-匿名内部类"><a href="#8-3-4-匿名内部类" class="headerlink" title="8.3.4    匿名内部类"></a>8.3.4    匿名内部类</h3><blockquote>
<p><strong>匿名内部类</strong>：是内部类的简化写法。</p>
<p>它的本质是一个 <code>带具体实现的</code>、<code>父类或者父接口</code>、<code>匿名的</code><strong>子类对象</strong>。</p>
<p>开发时，最常用到的内部类就是匿名内部类了。</p>
<p>以接口举例，当你使用一个接口时，你得做以下几步操作：</p>
</blockquote>
<ol>
<li>定义子类实现类；</li>
<li>重写接口中的抽象方法；</li>
<li>创建子类对象；</li>
<li>调用重写后的方法；</li>
</ol>
<p>我们的目的，最终只是为了调用方法，那么能不能简化以下，把以上4步合成一步呢？匿名内部类就是这样做的快捷方式。</p>
<h4 id="1-前提"><a href="#1-前提" class="headerlink" title="1    前提"></a>1    前提</h4><ul>
<li>匿名内部类必须<strong>继承一个父类</strong>或者<strong>实现一个父接口</strong>。也就是说，子类是父类的内部类。</li>
</ul>
<h4 id="2-格式"><a href="#2-格式" class="headerlink" title="2  格式"></a>2  格式</h4><ul>
<li><p><strong>内部类要实现的功能？</strong></p>
<ul>
<li><strong>答：通过外部类调用内部类的方法。</strong></li>
<li><strong>或：通过父类调用调用子类中的方法。</strong></li>
</ul>
</li>
<li><p>格式：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 父类名或接口名()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 方法体</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-2-初始化"><a href="#8-2-初始化" class="headerlink" title="8.2    初始化"></a>8.2    初始化</h2><h3 id="8-2-1-类的初始化"><a href="#8-2-1-类的初始化" class="headerlink" title="8.2.1    类的初始化"></a>8.2.1    类的初始化</h3><blockquote>
<p><strong>类的初始化就是创建一个新的对象</strong>，我们在使用<code>new</code>关键字创建对象时，其实是调用了这个对象的构造方法进行的初始化。</p>
</blockquote>
<ul>
<li>详见<code>9.  对象</code></li>
</ul>
<h3 id="8-2-2-成员变量初始化"><a href="#8-2-2-成员变量初始化" class="headerlink" title="8.2.2    成员变量初始化"></a>8.2.2    成员变量初始化</h3><blockquote>
<ol>
<li> <strong>成员变量的赋值顺序</strong></li>
</ol>
</blockquote>
<p>JVM 会保证每个成员变量在使用前都会获得初始值，成员变量的赋值顺序可分为：</p>
<ol>
<li> 默认初始化（类加载阶段，默认赋零值）</li>
<li> 显式初始化/在代码块中赋值【先静态后非静态，先父后子】</li>
<li> 构造器中初始化</li>
<li> 有了对象以后，可以通过 <code>对象.属性</code> 或 <code>对象.方法</code> 的方式，进行赋值。</li>
</ol>
<p><strong>成员变量（属性）的默认值</strong></p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">数据类型</th>
<th align="center">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">基本类型</td>
<td align="center">整型（byte，short，int，long）<br>浮点型（float，double）<br>布尔型（boolean）<br>字符型（char）</td>
<td align="center">0<br>0.0<br>false<br>‘\u0000’</td>
</tr>
<tr>
<td align="center">引用类型</td>
<td align="center">基本类型的包装类、String、数组，类，接口</td>
<td align="center">null</td>
</tr>
</tbody></table>
<ul>
<li></li>
</ul>
<h3 id="8-2-3-构造器初始化"><a href="#8-2-3-构造器初始化" class="headerlink" title="8.2.3    构造器初始化"></a>8.2.3    构造器初始化</h3><blockquote>
<p><strong>可以在<code>构造器</code>中对某些属性进行初始化，确定初始值。</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="type">int</span> i; <span class="comment">// 未手动初始化，但有默认值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">()</span>&#123;</span><br><span class="line">        i=<span class="number">11</span>;	<span class="comment">// 在构造器中对属性i进行初始化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











<hr>
<h1 id="9-对象"><a href="#9-对象" class="headerlink" title="9.    对象"></a>9.    对象</h1><h2 id="9-1-对象的创建"><a href="#9-1-对象的创建" class="headerlink" title="9.1    对象的创建"></a>9.1    对象的创建</h2><blockquote>
<p>使用<code>new</code>关键字创建对象，但是实际调用的是<code>class</code>类中的构造方法。</p>
</blockquote>
<ul>
<li>创建对象就是类的初始化。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类名 对象名 = <span class="keyword">new</span> 类名();</span><br></pre></td></tr></table></figure>



<h2 id="9-2-对象的销毁"><a href="#9-2-对象的销毁" class="headerlink" title="9.2    对象的销毁"></a>9.2    对象的销毁</h2><blockquote>
<p>在Java中，我们不需要手动管理对象的销毁，它是由Java虚拟机（JVM）进行管理和销毁的。</p>
</blockquote>
<h2 id="9-3-对象的使用"><a href="#9-3-对象的使用" class="headerlink" title="9.3    对象的使用"></a>9.3    对象的使用</h2><ol>
<li><p>使用对象中的成员（包括方法和属性）</p>
<blockquote>
<ul>
<li>对象引用.成员变量</li>
<li>对象引用.成员方法</li>
</ul>
</blockquote>
</li>
<li><p>给对象中的属性赋值</p>
<blockquote>
<ul>
<li>对象名.成员变量 = “value”</li>
</ul>
</blockquote>
</li>
</ol>
<h2 id="9-4-对象在内存中的情况"><a href="#9-4-对象在内存中的情况" class="headerlink" title="9.4    对象在内存中的情况"></a>9.4    对象在内存中的情况</h2><h3 id="1、一个对象，调用一个方法内存图"><a href="#1、一个对象，调用一个方法内存图" class="headerlink" title="1、一个对象，调用一个方法内存图"></a>1、一个对象，调用一个方法内存图</h3><p><img src="/2020/05/26/JavaSE/%E5%8D%95%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E5%86%85%E5%AD%98%E5%9B%BE.png"></p>
<ol>
<li>测试程序中的<code>main()</code>方法是程序执行的入口，<code>main()</code>方法首先进栈；</li>
<li>执行<code>创建p1对象</code>的语句，在堆内存中保存<code>p1对象</code>，<ul>
<li>将<code>p1对象的引用</code>保存在栈中，</li>
<li><code>p1对象的属性</code>保存在堆中；</li>
<li><code>p1对象的成员方法</code>保存在方法区中；</li>
<li><code>p1对象的成员方法的地址</code>保存在堆中；</li>
</ul>
</li>
<li>在测试程序中，通过<code>p1对象的引用</code>调用<code>p1对象中的方法</code>，<code>eat()</code>方法继续进栈执行；</li>
<li>问题：创建多个People对象时，如果每个对象中都保存一份成员方法的信息，那么多个对象就会有多份重复的成员方法信息<code>eat()</code>，这就非常浪费内存了，因为所有对象的方法信息都是一样的，那么如何解决这个问题呢？</li>
</ol>
<h3 id="2-两个对象，调用一个方法内存图"><a href="#2-两个对象，调用一个方法内存图" class="headerlink" title="2.    两个对象，调用一个方法内存图"></a>2.    两个对象，调用一个方法内存图</h3><p><img src="/2020/05/26/JavaSE/%E4%B8%A4%E4%B8%AA%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8%E5%90%8C%E4%B8%80%E6%96%B9%E6%B3%95%E5%86%85%E5%AD%98%E5%9B%BE.png"></p>
<ol>
<li>两个对象调用同一成员方法，该成员方法的数据不存储在堆内存中，只在堆内存中保存着一个<strong>方法标记</strong>。</li>
<li>方法真正的内容保存在方法区中。</li>
<li>通过堆内存的方法标记访问方法区的成员方法，来完成成员方法的调用。</li>
<li>可以实现，即便有多个对象，成员方法信息也只保存一份，节省内存空间。</li>
</ol>
<hr>
<h2 id="9-5-匿名对象"><a href="#9-5-匿名对象" class="headerlink" title="9.5    匿名对象"></a>9.5    匿名对象</h2><blockquote>
<p><strong>匿名对象</strong>：没有变量名的对象。</p>
<p>匿名对象是典型的多例的应用。</p>
</blockquote>
<p>定义</p>
<p>我们创建的对象，没显式的赋给一个变量名。即为匿名对象。</p>
<p>特点</p>
<p>匿名对象只能调用一次。（因为没有在栈中保存该对象的引用）</p>
<ul>
<li>创建对象时，只有创建对象的语句，却没有把对象的地址值赋值给某个变量。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 类名(参数列表)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 举例</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br></pre></td></tr></table></figure>

<h3 id="9-5-1-应用场景"><a href="#9-5-1-应用场景" class="headerlink" title="9.5.1.    应用场景"></a>9.5.1.    应用场景</h3><ol>
<li><p>创建匿名对象并直接直接调用该对象的方法，不使用变量名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in).next();</span><br></pre></td></tr></table></figure></li>
<li><p><strong>一旦调用两次方法，就是创建了两个对象，造成资源浪费</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in).next();</span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in).next();</span><br></pre></td></tr></table></figure></li>
<li><p>匿名对象可以<strong>作为方法的参数或返回值</strong></p>
</li>
</ol>
<hr>
<h1 id="10-关键字"><a href="#10-关键字" class="headerlink" title="10    关键字"></a>10    关键字</h1><p><strong>定义</strong>：被Java语言赋予了特殊含义，用做专门用途的字符串（单词）</p>
<p><strong>特点</strong>：关键字中所字母都为小写</p>
<p><strong>有哪些</strong>：</p>
<p><img src="/2020/05/26/JavaSE/image-20210723101625081.png" alt="image-20210723101625081"></p>
<p><img src="/2020/05/26/JavaSE/image-20210730094044842.png" alt="image-20210730094044842"></p>
<p><img src="/2020/05/26/JavaSE/%E5%85%B3%E9%94%AE%E5%AD%97.png"></p>
<blockquote>
<p>  <strong>保留字</strong></p>
</blockquote>
<p><strong>定义</strong>：现Java版本尚未使用，但以后版本可能会作为关键字使用。</p>
<p><strong>注意</strong>：自己命名标识符时要避免使用这些保留字</p>
<blockquote>
<p>  <strong>标识符</strong></p>
</blockquote>
<p><strong>定义</strong>：凡是自己可以起名字的地方都叫标识符。</p>
<p><strong>涉及到的结构</strong>：包名、类名、接口名、变量名、方法名、常量名</p>
<p><strong>规则</strong>：(必须要遵守。否则，编译不通过)</p>
<p><img src="/2020/05/26/JavaSE/image-20210730094359137.png" alt="image-20210730094359137"></p>
<ul>
<li>  标识符应以字母、_ 、$开头</li>
</ul>
<p><strong>规范</strong>：（可以不遵守，不影响编译和运行。但是要求大家遵守）</p>
<p><img src="/2020/05/26/JavaSE/image-20210730094602848.png" alt="image-20210730094602848"></p>
<p><strong>注意</strong>：在起名字时，为了提高阅读性，要尽量意义，“见名知意”。</p>
<h2 id="static"><a href="#static" class="headerlink" title="static"></a>static</h2><blockquote>
<ol>
<li> <strong>static 可以修饰的结构</strong>：</li>
</ol>
</blockquote>
<ul>
<li><p>  主要用来修饰类的内部结构：<strong>属性、方法、代码块、内部类</strong></p>
</li>
<li><p>  被<code>static</code>修饰的成员是<strong>属于类</strong>的，而不是单单属于某个对象的。</p>
</li>
<li><p>  被 static 修饰的 方法/属性 可以在没有创建对象的情况下被调用。</p>
</li>
</ul>
<blockquote>
<ol start="2">
<li> <strong>static 修饰属性：类变量</strong></li>
</ol>
</blockquote>
<ul>
<li>  被 <code>static</code>修饰的成员变量称为<strong>静态成员变量</strong> 或 <strong>类变量</strong>。</li>
<li>  依据同一份类模板创建的每个对象都共享同一份类变量的值，任何对象都可以更改该类变量的值，也可以在不创建实例对象的情况下对类变量进行操作。</li>
<li>  静态变量随着类的加载而加载，可以通过 <code>类.静态变量</code> 的方式进行调用。</li>
<li>  静态变量的加载要早于对象的创建。</li>
<li>  由于类只会加载一次，则静态变量在内存中也只会存在一份。</li>
<li>  <strong>类变量有专门的存储区域</strong>，存在方法区的静态域中，所有的实例对象中保存的是类变量的地址引用。</li>
</ul>
<p><strong>案例：</strong></p>
<p>​        新学期开学，学生报到。现在想按照报到顺序为每一位学生分配学号<code>sid</code>，从第一名学生开始学号为 1，以此类推。学号必须是唯一的，连续的，并且与班级人数相符。以便知道要分配给下一名新同学的学号是多少。【这样我们就需要一个变量，与单独的每一个学生对象无关，而是与创建了多少个学生对象（执行了多少次创建过程）有关】</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sid;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">numberOfStudent</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1、Student类只提供了无参构造方法，所以创建学生对象必须使用该类。</span></span><br><span class="line"><span class="comment">        2、每次new一个新的对象时必调用一次构造方法，且numberOfStudent是一个类(静态)变量，所以每个对象都可     以修改该属性的值，做到了每创建一个对象numberOfStudent就会自增1，对应的sid也就实现了自增长。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sid = ++numberOfStudent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.sid = ++numberOfStudent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sid=&quot;</span> + sid +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//-------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="string">&quot;女&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(s3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            Student&#123;name=&#x27;null&#x27;, gender=&#x27;null&#x27;, sid=1&#125;</span></span><br><span class="line"><span class="comment">            Student&#123;name=&#x27;李四&#x27;, gender=&#x27;女&#x27;, sid=2&#125;</span></span><br><span class="line"><span class="comment">            Student&#123;name=&#x27;王五&#x27;, gender=&#x27;男&#x27;, sid=3&#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<blockquote>
<ol start="3">
<li> <strong>static修饰方法：静态静态方法、类方法</strong></li>
</ol>
</blockquote>
<ul>
<li><p>随着类的加载而加载；</p>
</li>
<li><p>建议使用<code>类名.方法名</code>直接调用静态方法，而不是通过实例对象调用静态方法（当然也可以调用成功）。</p>
</li>
<li><p>注意事项：</p>
<ol>
<li><strong>静态方法只能访问静态成员（静态方法+静态变量）</strong>。</li>
</ol>
</li>
</ul>
<ol start="2">
<li>非静态方法既可以调用非静态的方法或属性，也可以调用静态的方法或属性。</li>
<li><strong>静态方法中不能使用 this 和 super 关键字</strong>。【因为 this 和 super 都代表对象实例，而静态方法不依赖任何实例对象】</li>
</ol>
<p><strong>如何理解？</strong></p>
<p>​        <em>因为静态成员先于实例对象成员创建，静态成员在类加载阶段就已经被创建出来了，而实例成员直到执行 <code>&lt;init&gt;()</code> 构造方法时才被创建出来，所以静态成员有可能访问不到实例。</em></p>
<blockquote>
<ol start="4">
<li> <strong>static 修饰代码块：静态代码块</strong></li>
</ol>
</blockquote>
<ul>
<li><p>  静态代码块：使用<code>static</code>修饰的代码块，定义在<strong>类中方法外</strong>。</p>
</li>
<li><p>  随着类的加载而执行，且只执行一次，优先于和构造方法的执行。</p>
</li>
<li><p><strong>格式</strong>：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Class ClassName&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="comment">// 代码块</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>作用</strong>：给类变量进行初始化赋值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;String&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 给类变量赋值</span></span><br><span class="line">        id = <span class="number">2</span>;</span><br><span class="line">        list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加元素到list中</span></span><br><span class="line">        list.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<ol start="5">
<li> <strong>static 内存分布</strong></li>
</ol>
</blockquote>
<p><code>static</code>修饰的内容：</p>
<ol>
<li>是随着类的加载而加载的，且只加载一次。</li>
<li>存储于一块固定的内存区域（静态区），所以可以直接通过类名调用。</li>
<li>它优先于对象存在，所以，可以被所有对象共享。</li>
</ol>
<ul>
<li>非静态成员变量：操作各自的空间（堆内存中）</li>
<li>静态成员变量：操作共享空间（方法区的静态区中）</li>
</ul>
<p><img src="/2020/05/26/JavaSE/%E9%9D%99%E6%80%81%E5%8E%9F%E7%90%86%E5%9B%BE%E8%A7%A3.png"></p>
<hr>
<h2 id="final"><a href="#final" class="headerlink" title="final"></a>final</h2><blockquote>
<p>  <strong>可以修饰的结构：</strong></p>
</blockquote>
<ul>
<li>  类、方法、变量</li>
</ul>
<blockquote>
<p>  <strong>final 修饰类</strong>：</p>
</blockquote>
<ul>
<li>  被修饰的类，不能被继承。</li>
<li>  比如：String类、System类、StringBuffer类</li>
</ul>
<blockquote>
<p>  <strong>final 修饰方法</strong></p>
</blockquote>
<ul>
<li>  被修饰的方法，不能被重写。</li>
<li>  比如：Object 类中 <code>getClass()</code></li>
</ul>
<blockquote>
<p>  <strong>final 修饰变量</strong></p>
</blockquote>
<ul>
<li>被修饰的普通类型变量，不能被重新赋值。</li>
<li>被修饰的引用类型变量，引用的地址值不能再发生改变。</li>
<li>被 final 修饰的变量，建议在定义时所有字母都使用大写。</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><ol>
<li><p>修饰类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">finall class 类名&#123;</span><br><span class="line">    <span class="comment">// 代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>修饰方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">修饰符 <span class="keyword">final</span> 返回值类型 方法名(参数列表)&#123;</span><br><span class="line">    <span class="comment">// 方法体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重写被final修饰的方法，编译时会报错。</span></span><br></pre></td></tr></table></figure></li>
<li><p>修饰变量</p>
<blockquote>
<ul>
<li><strong>基本类型变量</strong>：基本类型的局部变量，被<code>final</code>修饰后，只能赋值一次，不能再次被赋值。</li>
<li><strong>引用类型变量</strong>：引用类型的局部变量，被<code>final</code>修饰后，只能指向一个引用，地址不能再更改，但是不影响对象内部成员变量值的修改。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、修饰基本类型变量</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">    a = <span class="number">99</span>; <span class="comment">// error，编译时直接报错，不可被重新赋值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、修饰引用类型变量</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">100</span>);</span><br><span class="line">    u = <span class="keyword">new</span> <span class="title class_">User</span>();     <span class="comment">// error,地址不能再修改</span></span><br><span class="line">    u.setName(<span class="string">&quot;zs&quot;</span>);    <span class="comment">// Ok，可以修改对象内部成员变量的值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="权限修饰符（3个）"><a href="#权限修饰符（3个）" class="headerlink" title="权限修饰符（3个）"></a>权限修饰符（3个）</h2><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">public</th>
<th align="center">protected</th>
<th align="center">默认</th>
<th align="center">private</th>
</tr>
</thead>
<tbody><tr>
<td align="center">同一类中</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✔</td>
</tr>
<tr>
<td align="center">同一包中</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">不同包中有继承关系的类</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">不同包中的无关类</td>
<td align="center">✔</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<blockquote>
<p><strong>建议</strong>：</p>
<ol>
<li>成员变量使用<code>private</code>，隐藏细节。</li>
<li>构造方法使用<code>public</code>，方便创建对象。</li>
<li>成员方法使用<code>public</code>，方便调用方法。</li>
</ol>
</blockquote>
<hr>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p><code>this</code> 可以理解为：当前对象  或 当前正在创建的对象。</p>
<p><strong>可以调用的结构</strong>：属性；方法；构造器</p>
<blockquote>
<p>  <strong><code>this</code> 调用属性、方法</strong>：</p>
</blockquote>
<ol>
<li>在<strong>类的方法</strong>中，我们可以使用 <code>this.属性</code> 或 <code>this.方法</code> 的方式，调用<strong>当前对象</strong>的属性或方法。<ul>
<li>  通常情况下，我们都择省略 <code>this.</code>。</li>
<li>  特殊情况下，如果方法的形参和类的属性同名时，我们必须显式的使用 <code>this.变量</code> 的方式，表明此变量是属性，而非形参。</li>
</ul>
</li>
<li>在<strong>类的构造器</strong>中，我们可以使用 <code>this.属性</code> 或 <code>this.方法</code> 的方式，调用<strong>当前正在创建的对象</strong>的属性或方法。<ul>
<li>  通常情况下，我们都择省略 <code>this.</code>。</li>
<li>  特殊情况下，如果构造器的形参和类的属性同名时，我们必须显式的使用 <code>this.变量</code> 的方式，表明此变量是属性，而非形参。</li>
</ul>
</li>
</ol>
<blockquote>
<p>  <strong><code>this</code> 调用构造器：</strong></p>
</blockquote>
<ul>
<li>  我们在类的构造器中，可以显式的使用 <code>this(形参列表)</code> 的方式，调用本类中指定的其他构造器；</li>
<li>  构造器中不能通过 <code>this(形参列表)</code> 的方式调用自己，因为这样会无限递归。【总的原则就是一个构造器调用其它的构造器不能出现无限递归，出现递归则会发生编译时异常】</li>
<li>  如果一个类中有 n 个构造器，则最多可以有 <code>n-1</code> 个构造器中调用用了 <code>this(形参列表)</code>。</li>
<li>  规定：<code>this(形参列表)</code> 必须声明在当前构造器的首行。</li>
<li>  构造器内部，最多只能声明一个 <code>this(形参列表)</code>，用来调用其他的构造器。</li>
</ul>
<h2 id="super"><a href="#super" class="headerlink" title="super"></a>super</h2><p><code>super</code> 关键字可以理解为：父类对象</p>
<p><strong>可以调用的结构</strong>：属性、方法、构造器</p>
<blockquote>
<p>  <strong>super 调用属性、方法：</strong></p>
</blockquote>
<p>我们可以在子类的方法或构造器中，通过使用 <code>super.属性</code> 或 <code>super.方法</code> 的方式，显式的调用父类中声明的属性或方法。</p>
<ul>
<li>  通常情况下，我们习惯省略 <code>super.</code>；</li>
<li>  特殊情况1：当子类和父类中定义了同名的属性时，我们要想在子类中调用父类中声明的属性，则必须显式的使用 <code>super.属性</code> 的方式，表明调用的是父类中声明的属性。</li>
<li>  特殊情况2：当子类重写了父类中的方法以后，我们想在子类的方法中调用父类中被重写的方法时，则必须显式的使用 <code>super.方法</code> 的方式，表明调用的是父类中被重写的方法。</li>
</ul>
<blockquote>
<p>  <strong>super调用构造器</strong>：</p>
</blockquote>
<ul>
<li>  我们可以在子类的构造器中显式的使用 <code>super(形参列表)</code> 的方式，调用父类中声明的指定的构造器；</li>
<li>  <code>super(形参列表)</code> 的使用，必须声明在子类构造器的首行！</li>
<li>  我们<strong>在类的构造器中，针对于 <code>this(形参列表)</code> 或 <code>super(形参列表)</code> 只能二一，不能同时出现</strong>。</li>
<li>  在构造器的首行，没显式的声明 <code>this(形参列表)</code> 或 <code>super(形参列表)</code>，则默认调用的是父类中空参的构造器 <code>super()</code>。</li>
<li>  在类的多个构造器中，至少要存在一个类构造器中使用了 <code>super(形参列表)</code>，调用父类中的构造器。</li>
</ul>
<hr>
<h2 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h2><h2 id="implements"><a href="#implements" class="headerlink" title="implements"></a>implements</h2><h2 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h2><blockquote>
<p>见<code>13.2    abstract</code></p>
</blockquote>
<hr>
<h1 id="11-封装"><a href="#11-封装" class="headerlink" title="11    封装"></a>11    封装</h1><blockquote>
<p>  <strong>封装</strong>：将某些属性隐藏起来，若需要访问某个属性，提供公共方法对其访问。</p>
</blockquote>
<h2 id="11-1-为什么要有封装？"><a href="#11-1-为什么要有封装？" class="headerlink" title="11.1    为什么要有封装？"></a>11.1    为什么要有封装？</h2><ol>
<li> <strong>程序设计追求“高内聚，低耦合”。</strong></li>
<li> <strong>隐藏对象内部的复杂性，只对外公开简单的接口，让代码更容易理解</strong>。便于外界调用，从而提高系统的可扩展性、可维护性。通俗的说，把该隐藏的隐藏起来，该暴露的暴露出来。这就是封装性的设计思想。</li>
<li> <strong>提高代码的安全性</strong>，防止该类的代码和数据被其它类随意访问。</li>
</ol>
<blockquote>
<ul>
<li>  高内聚：类的内部数据操作细节自己完成，不允许外部干涉；</li>
<li>  低耦合：仅对外暴露少量的方法用于使用。</li>
</ul>
</blockquote>
<h2 id="11-2-封装思想的代码提现"><a href="#11-2-封装思想的代码提现" class="headerlink" title="11.2    封装思想的代码提现"></a>11.2    封装思想的代码提现</h2><ol>
<li> 将类的属性私有化（private），同时提供公共（public）的<code>get/set</code>方法来获取和设置该属性的值。</li>
<li> 不对外暴露的私有（private）的方法。</li>
<li> 单例模式（将构造器私有化）。</li>
<li> 如果不希望类在包外被调用，可以将类设置为缺省的。</li>
</ol>
<h2 id="11-3-权限修饰符"><a href="#11-3-权限修饰符" class="headerlink" title="11.3    权限修饰符"></a>11.3    权限修饰符</h2><blockquote>
<p>  <strong>权限修饰符可用来修饰的结构说明：</strong></p>
</blockquote>
<ul>
<li>  4 种权限都可以用来修饰类的内部结构：属性、方法、构造器、内部类</li>
<li>  修饰非内部类的话，只能使用：缺省、public</li>
</ul>
<p><img src="/2020/05/26/JavaSE/image-20210730173311690.png" alt="image-20210730173311690"></p>
<h2 id="11-3-封装优化"><a href="#11-3-封装优化" class="headerlink" title="11.3    封装优化"></a>11.3    封装优化</h2><h3 id="1-this关键字"><a href="#1-this关键字" class="headerlink" title="1.    this关键字"></a>1.    this关键字</h3><h3 id="2-构造方法"><a href="#2-构造方法" class="headerlink" title="2.    构造方法"></a>2.    构造方法</h3><hr>
<h1 id="12-继承"><a href="#12-继承" class="headerlink" title="12    继承"></a>12    继承</h1><h2 id="是什么？"><a href="#是什么？" class="headerlink" title="是什么？"></a>是什么？</h2><blockquote>
<p>  <strong>定义</strong></p>
</blockquote>
<p>多个类中存在相同属性或行为时，将这些内容抽取到单独一个类中，那么多个类无需再定义这些属性和行为，只要继承那一个类即可。</p>
<blockquote>
<p>  <strong>继承：</strong></p>
</blockquote>
<ul>
<li>子类继承父类的<strong>非私有和非静态的</strong>属性和方法，使得子类对象具有与父类对象相同的属性、方法。</li>
<li>子类可以直接访问父类中的非私有和非静态的属性和行为。</li>
</ul>
<blockquote>
<p>  <strong>好处</strong>：</p>
</blockquote>
<ol>
<li>提高代码的复用性</li>
<li>类与类之间产生了关系，是多态的前提。</li>
</ol>
<blockquote>
<p>  <strong>继承的特点</strong></p>
</blockquote>
<ol>
<li> 一个类可以被多个子类继承。</li>
<li> 单继承：一个类只能有一个父类</li>
<li> 子类直接继承的父类，称为 <strong>直接父类</strong>；间接继承的父类称为 <strong>间接父类</strong>。</li>
<li> 子类继承父类以后，就获取了直接父类以及所间接父类中声明的属性和方法。</li>
</ol>
<h2 id="为什么要有？"><a href="#为什么要有？" class="headerlink" title="为什么要有？"></a>为什么要有？</h2><ol>
<li> 减少了代码的冗余，提高了代码的复用性。【像Java中很多顶级父类，一直从JDK1.1、1.2的版本沿用至今，很多都是利用类的继承性】</li>
<li> 便于功能的扩展</li>
<li> 多态性的前提</li>
</ol>
<h2 id="继承后的特点"><a href="#继承后的特点" class="headerlink" title="继承后的特点"></a>继承后的特点</h2><p><img src="/2020/05/26/JavaSE/%E5%AD%90%E7%B1%BB%E7%BB%A7%E6%89%BF%E7%88%B6%E7%B1%BB%E5%90%8E%E6%88%90%E5%91%98%E7%9A%84%E7%89%B9%E7%82%B9.png" alt="子类继承父类后成员的特点"></p>
<h3 id="1-成员变量"><a href="#1-成员变量" class="headerlink" title="1.    成员变量"></a>1.    成员变量</h3><ul>
<li><p>子父类中成员变量无重名：无影响</p>
</li>
<li><p><strong>子父类中成员变量有重名</strong>：有影响，通过子类对象访问父类中的<strong>非私有成员变量</strong>时，需要使用<code>super</code>关键字。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">super</span>.父类成员变量</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-普通方法"><a href="#2-普通方法" class="headerlink" title="2.    普通方法"></a>2.    普通方法</h3><ul>
<li>子父类中成员方法无重名：无影响</li>
<li><strong>字父类中成员方法有重名：重写</strong></li>
</ul>
<h3 id="3-构造方法"><a href="#3-构造方法" class="headerlink" title="3.    构造方法"></a>3.    构造方法</h3><ul>
<li>  因为构造方法的名字和类名是一致的，所以不会出现子类和父类中构造方法重名的问题。</li>
<li>  构造方法的作用是创建并初始化对象，由于创建子类对象时要用到一部分父类对象的数据，所以在创建子类对象之前，必须先初始化父类对象。</li>
<li>  子类的无参构造器中会隐式地调用 <code>super()</code> 方法来调用父类的构造方法，这个隐式调用在编译后位于构造方法的第一行。</li>
<li>  所以说如果想要重载子类的构造方法，必须先显式地调用父类的构造方法，即<code>super()</code>。因为 JVM 不会对重载的构造方法进行隐式调用 <code>super()</code>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Zi</span> <span class="keyword">extends</span> <span class="title class_">Fu</span> &#123;</span><br><span class="line">    <span class="comment">// 重载子类的构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Zi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();    <span class="comment">// 调用父类构造方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<blockquote>
<p>  <strong>父类对象优先于子类对象产生</strong></p>
</blockquote>
<p>因为子类对象中包含了父类对象的部分成员变量和方法，所以每次创建子类对象时，先要初始化父类对象，再初始化子类对象。</p>
<ul>
<li><p><strong>super</strong>：代表父类的存储空间地址。</p>
</li>
<li><p><strong>this</strong>：代表当前对象的引用。</p>
</li>
</ul>
<img src="/2020/05/26/JavaSE/%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB.png" style="zoom:80%;">



<hr>
<h2 id="super-amp-this"><a href="#super-amp-this" class="headerlink" title="super &amp; this"></a>super &amp; this</h2><ul>
<li>  <code>this</code> 时当前对象的引用，可以调用当前对象的 属性、普通方法 和 <strong>构造方法</strong> 。</li>
<li>  <code>super</code>表示父类对象的引用，可以调用父类对象中的 属性、普通方法 和 <strong>构造方法</strong> 。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">this</th>
<th align="center">super</th>
</tr>
</thead>
<tbody><tr>
<td align="center">调用方式</td>
<td align="center">调用当前对象的属性、方法、构造函数</td>
<td align="center">调用父类对象中的属性、方法、构造函数</td>
</tr>
<tr>
<td align="center">调用位置</td>
<td align="center">调用构造函数时放在第一行，其它可自行选择</td>
<td align="center">调用构造函数时放在第一行，其它可自行选择</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>  <strong>this(参数)</strong> 表示调用当前对象的构造方法，</li>
<li>  <strong>super(参数)</strong> 表示调用父类对象的构造方法。</li>
</ul>
</blockquote>
<hr>
<h2 id="子类对象实例化全过程"><a href="#子类对象实例化全过程" class="headerlink" title="子类对象实例化全过程"></a>子类对象实例化全过程</h2><blockquote>
<p>  <strong>从结果上看</strong>：继承性</p>
</blockquote>
<ul>
<li>  子类继承父类以后，就获取了父类中声明的属性或方法。</li>
<li>  创建子类的对象，在堆空间中，就会加载所父类中声明的属性。</li>
</ul>
<blockquote>
<p>  <strong>从过程上看</strong>：</p>
</blockquote>
<p>当我们通过子类的构造器创建子类对象时，我们一定会直接或间接的调用其父类构造器，进而调用父类的父类构造器，… 直到调用了java.lang.Object 类中空参的构造器为止。正因为加载过所有的父类结构，所以在子类中才可以看到内存中父类中的结构，子类对象才可以进行调用。</p>
<blockquote>
<p>  <strong>图示</strong></p>
</blockquote>
<p><img src="/2020/05/26/JavaSE/image-20210730212054243.png" alt="image-20210730212054243"></p>
<blockquote>
<p>  <strong>注意事项</strong>：</p>
</blockquote>
<p><strong>虽然创建子类对象时，调用了父类的构造器，但是自始至终就创建过一个对象，即为 new 的子类对象</strong>。并没有创建对应的父类实例，只是将父类的 Class 对象加载到内存中读取了被子类继承的方法和属性而已。</p>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>Java 虽然不支持多继承，但支持多层继承。所有的类都继承自 java.lang.Object 类，这就意味着所的类具有 Object 类声明的功能。</p>
<blockquote>
<p>  <a href>Object</a></p>
</blockquote>
<hr>
<h1 id="13-抽象类"><a href="#13-抽象类" class="headerlink" title="13    抽象类"></a>13    抽象类</h1><h2 id="13-1-概述"><a href="#13-1-概述" class="headerlink" title="13.1    概述"></a>13.1    概述</h2><blockquote>
<p>父类中的方法，往往被多个子类重写，子类各自的实现方式不尽相同。所以父类中方法的<strong>方法声明</strong>和<strong>方法体</strong>，大多数时候只有方法声明还有意义，而方法主体则没有实际意义了。为了方便，大多数时候我们在父类中只编写<strong>方法声明</strong>，而把具体的<strong>方法体</strong>交给子类去实现。</p>
</blockquote>
<ul>
<li>我们把没有方法体并使用<code>abstract</code>修饰的方法，叫做<strong>抽象方法</strong>。</li>
<li>把使用<code>abstract</code>修饰的类，叫做<strong>抽象类</strong>。[抽象类中可以没有抽象方法]</li>
</ul>
<h2 id="13-2-abstract"><a href="#13-2-abstract" class="headerlink" title="13.2    abstract"></a>13.2    abstract</h2><blockquote>
<p>  <strong>可以修饰的结构：类、方法</strong></p>
</blockquote>
<h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><ul>
<li>  <strong>抽象类不能实例化。</strong></li>
<li>  <strong>但是抽象类中一定有构造器，便于子类实例化时调用。</strong></li>
<li>  开发中，都会提供抽象类的子类，让子类对象实例化，完成相关的操作。</li>
<li>  <strong>抽象类中，不一定包含抽象方法</strong>，但是包含抽象方法的类必定是抽象类。</li>
<li>  抽象类的子类必须重写父类中所有的抽象方法。否则，该子类也必须声明为抽象类。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> class 类名&#123;</span><br><span class="line">    <span class="comment">// 抽象方法（必须）</span></span><br><span class="line">    <span class="comment">// 其它.....</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>



<h4 id="抽象类结构"><a href="#抽象类结构" class="headerlink" title="抽象类结构"></a>抽象类结构</h4><p><strong>必须有：</strong></p>
<ol>
<li>构造方法</li>
</ol>
<p><strong>可以有</strong>：</p>
<ol start="2">
<li> 抽象方法</li>
<li> 普通属性、方法</li>
<li> 静态属性、静态方法。</li>
</ol>
<p><strong>总结：</strong>抽象类和普通类只有两点不同：</p>
<ul>
<li>  抽象类必须用 <code>abstract</code> 修饰外；</li>
<li>  抽象类中<strong>可以</strong>包含抽象方法。</li>
</ul>
<h3 id="抽象方法"><a href="#抽象方法" class="headerlink" title="抽象方法"></a>抽象方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">修饰符 <span class="keyword">abstract</span> 返回值类型 方法名(参数列表);</span><br><span class="line"><span class="comment">// 没有方法体</span></span><br></pre></td></tr></table></figure>





<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ol>
<li> <code>abstract</code> 不能用来修饰：属性、构造器等结构</li>
<li> <code>abstract</code> 不能用来修饰私有方法、静态方法、<code>final</code> 的方法、<code>final</code> 的类。</li>
</ol>
<p><strong>理解：</strong></p>
<p><code>abstract</code> 的作用就是定义顶级的接口和方法，一般只起一个声明的作用，而不做具体实现，具体实现交由不同的子类去完成。而我们上面的这些方法：构造方法、私有方法、静态方法、final 方法，它们都有一个共同的特点，就是<strong>每个方法都不能被重写</strong>。这些方法都不能被子类去重新实现，也就是说如果你把这些方法声明为抽象的，它们就会永久成为抽象的了，这样就失去了定义方法的意义。</p>
<blockquote>
<p>  <strong>总结：<code>abstract</code> 修饰的方法，必须要能被重写。</strong></p>
</blockquote>
<h3 id="设计模式——模板方法"><a href="#设计模式——模板方法" class="headerlink" title="设计模式——模板方法"></a>设计模式——模板方法</h3><hr>
<h1 id="14-接口"><a href="#14-接口" class="headerlink" title="14    接口"></a>14    接口</h1><ul>
<li>  接口用来定义一种对外的<strong>规范</strong>。</li>
<li>  接口是一种<strong>引用类型</strong>，是方法的集合。</li>
</ul>
<h2 id="14-1-接口中的成员"><a href="#14-1-接口中的成员" class="headerlink" title="14.1    接口中的成员"></a>14.1    接口中的成员</h2><blockquote>
<p>  <strong>JDK8 之前</strong>：接口中只能定义全局常量和抽象方法。</p>
</blockquote>
<ul>
<li>  <strong>全局</strong>常量：<code>public static final</code>的.但是书写时，可以省略不写</li>
<li>  <strong>全局</strong>抽象方法：<code>public abstract</code> 的方法</li>
<li>  注意：一定要是全局 <code>public</code> 的，不是全局的就会产生编译时异常。</li>
</ul>
<img src="/2020/05/26/JavaSE/image-20210731003259648.png" alt="image-20210731003259648" style="zoom:80%;">



<blockquote>
<ol start="2">
<li> <strong>从 JDK8 开始</strong>：接口中除了定义全局常量和抽象方法之外，还可以定义<strong>静态方法、默认方法</strong>。</li>
</ol>
</blockquote>
<ul>
<li>  <strong>注意</strong>：无论是静态方法还是默认方法，前提都必须是<strong>全局方法</strong>。</li>
</ul>
<img src="/2020/05/26/JavaSE/image-20210731003735380.png" alt="image-20210731003735380" style="zoom:80%;">



<blockquote>
<ol start="3">
<li> <strong>从 JDK9 开始</strong>：接口中新增可以定义私有（private）方法了。</li>
</ol>
</blockquote>
<ul>
<li>  接口中的私有方法用于改善接口内部的代码可重用性。比如多个 default 方法中存在重复的代码可以抽取出一个 private 方法供接口内部调用。但是这个方法是不会对外暴露的，所以说接口对外暴露的方法都要求必须是全局(public)的。</li>
<li>  可以说正是因为 JDK8 的改动才导致 JDK9 需要在接口内部新增可以定义私有方法。因为在 JDK8 之前，接口内部是不存在方法实现的，从 JDK8 开始新增了 默认方法 和 静态方法 后，接口内部才可以写一些方法实现了。</li>
</ul>
<blockquote>
<p>  <strong>总结</strong></p>
</blockquote>
<ol>
<li><p> 接口中对外暴露的方法必须是<strong>全局方法</strong>。</p>
</li>
<li><p> 接口中<strong>只能定义方法和常量</strong>，<strong>变量和代码块都不能在接口中定义</strong>。</p>
</li>
<li><p> 接口中没有构造方法，不能被实例化。</p>
</li>
<li><p> 接口中的默认方法（default 修饰的方法）与类中的默认权限修饰符方法是不同的。</p>
</li>
<li><p> 如果实现类实现了接口中的所有抽象方法，则此实现类就可以实例化了；如果实现类没有实现接口中的所有抽象方法，则此实现类仍为一个抽象类，仍然不能被实例化。</p>
</li>
<li><p>Java类可以实现多个接口。【弥补了Java单继承性的局限性】</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> <span class="keyword">extends</span> <span class="title class_">BB</span> <span class="keyword">implements</span> <span class="title class_">CC</span>,DD,EE</span><br></pre></td></tr></table></figure></li>
<li><p> 接口与接口之间可以继承，而且可以多继承。</p>
</li>
</ol>
<h3 id="接口、普通类、抽象类中的成员比较"><a href="#接口、普通类、抽象类中的成员比较" class="headerlink" title="接口、普通类、抽象类中的成员比较"></a>接口、普通类、抽象类中的成员比较</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">普通类</th>
<th align="center">抽象类</th>
<th align="center">接口</th>
</tr>
</thead>
<tbody><tr>
<td align="center">属性（成员<strong>变量</strong>）</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✖</td>
</tr>
<tr>
<td align="center"><strong>全局</strong>常量<code>[public static final]</code></td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✔</td>
</tr>
<tr>
<td align="center">构造方法</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✖</td>
</tr>
<tr>
<td align="center">成员方法</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">抽象方法</td>
<td align="center">✖</td>
<td align="center">✔</td>
<td align="center">✔</td>
</tr>
<tr>
<td align="center">私有方法</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✔<code>[JDK9++]</code></td>
</tr>
<tr>
<td align="center">静态方法</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✔<code>[JDK8++]</code></td>
</tr>
<tr>
<td align="center">默认方法</td>
<td align="center">–</td>
<td align="center">1️⃣</td>
<td align="center">✔<code>[JDK8++]</code></td>
</tr>
<tr>
<td align="center">静态代码块</td>
<td align="center">✔</td>
<td align="center">✔</td>
<td align="center">✖</td>
</tr>
</tbody></table>
<h2 id="14-2-接口-vs-抽象类"><a href="#14-2-接口-vs-抽象类" class="headerlink" title="14.2    接口 vs.抽象类"></a>14.2    接口 vs.抽象类</h2><ul>
<li>  接口和抽象类都不能被实例化。</li>
<li>  但是抽象类中有构造方法，而接口中没有构造方法。</li>
<li>  创建接口的实现类对象，就可以调用接口中的<strong>非静态和非私有</strong>方法了。</li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">接口</th>
<th align="center">抽象类</th>
</tr>
</thead>
<tbody><tr>
<td align="center">是否可以实例化？</td>
<td align="center">✖</td>
<td align="center">✖</td>
</tr>
<tr>
<td align="center">是否包含构造方法？</td>
<td align="center">✖</td>
<td align="center">✔</td>
</tr>
</tbody></table>
<h2 id="14-3-接口中的成员详解"><a href="#14-3-接口中的成员详解" class="headerlink" title="14.3    接口中的成员详解"></a>14.3    接口中的成员详解</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> interface 接口名称&#123;</span><br><span class="line">    <span class="comment">// 全局抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// 全局默认方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 方法体</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 全局静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 方法体</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 私有方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 方法体</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-抽象方法"><a href="#1-抽象方法" class="headerlink" title="1    抽象方法"></a>1    抽象方法</h3><ol>
<li>使用<code>public abstract abstract</code> 修饰，没有方法体，该方法供子类实现使用。</li>
<li>接口中有多个抽象方法并且抽象方法有重名时，只需重写一次。</li>
</ol>
<h3 id="2-默认方法（JDK8-）"><a href="#2-默认方法（JDK8-）" class="headerlink" title="2    默认方法（JDK8++）"></a>2    默认方法（JDK8++）</h3><ol>
<li><p>使用<code>public default</code>修饰，供子类调用或重写。</p>
</li>
<li><p>实现类可以继承，可以重写默认方法，但是只能通过实现类的对象来调用（因为接口不能创建实例对象）。[实现类的对象又可以使用接口来表示，这就是多态，父类引用指向子类对象]</p>
</li>
</ol>
<h3 id="3-静态方法（JDK8-）"><a href="#3-静态方法（JDK8-）" class="headerlink" title="3     静态方法（JDK8++）"></a>3     静态方法（JDK8++）</h3><ol>
<li>使用<code>public static</code> 修饰，<strong>只能</strong>通过 <code>接口名.方法名</code> 直接调用。【因为接口不能创建实例对象】</li>
<li>静态方法保存在内存中的方法区，<strong>只能使用接口名调用，不能通过实现类名或实现类对象调用</strong>。</li>
</ol>
<ul>
<li>  普通类中的静态方法，既可以通过类名调用，也可以通过实例对象调用。</li>
<li>  接口中的静态方法，不能够通过 实现类类名 和 实现类对象 调用。</li>
<li>  普通类中，静态属性和静态方法只保留一份在方法区中，实例对象中保存着 Class 对象的地址，所以可以通过实例对象调用 Class 对象中的属性和方法。</li>
<li>  但是在接口中，子类实现接口的时候 私有方法 和 静态方法 不会继承给子类，所以子类成员中就已经失去了私有方法和静态方法，显然实例化时也没有私有方法和静态方法的地址信息，所以不能通过 实现类类名 和 实现类对象 调用。*</li>
</ul>
<ol start="3">
<li>接口中，存在同名的静态方法并不会冲突，因为静态方法不会继承给实现类，只能通过各自的接口名访问。</li>
</ol>
<h3 id="4-私有方法"><a href="#4-私有方法" class="headerlink" title="4    私有方法"></a>4    私有方法</h3><ol>
<li><p>使用<code>private</code>关键字修饰，<strong>在接口中可以省略</strong>，<strong>供接口中的默认方法或静态方法调用</strong>。</p>
<ul>
<li><strong>私有方法</strong>：只有默认方法可以调用。</li>
<li><strong>私有静态方法</strong>：默认方法和静态方法都可以调用。</li>
</ul>
</li>
<li><p>如果一个接口中有多个默认方法，并且方法中有重复的内容，那么就可以抽取出来，封装到私有方法中，供默认方法调用【类似于工具类】。</p>
</li>
</ol>
<hr>
<h2 id="14-4-接口的实现"><a href="#14-4-接口的实现" class="headerlink" title="14.4    接口的实现"></a>14.4    接口的实现</h2><blockquote>
<p>类与接口的关系叫做实现关系。即<strong>类实现接口</strong>。</p>
<p>该类可以称为接口的实现类，也可以称为接口的子类。</p>
</blockquote>
<h3 id="1-非抽象子类实现接口"><a href="#1-非抽象子类实现接口" class="headerlink" title="1  非抽象子类实现接口"></a>1  非抽象子类实现接口</h3><ol>
<li>必须重写接口中所有抽象方法。</li>
<li>继承了接口中的默认方法，既可以直接调用，也可以重写。</li>
<li>无法继承接口中的私有方法和静态方法。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class 子类 implements 接口名&#123;</span><br><span class="line">    <span class="comment">// 重写接口中的抽象方法【必须】</span></span><br><span class="line">    <span class="comment">// 重写接口中的默认方法【可选】</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-接口的多实现"><a href="#2-接口的多实现" class="headerlink" title="2.    接口的多实现"></a>2.    接口的多实现</h3><ul>
<li>一个类只能继承一个父类。</li>
<li>但是，一个类可以实现多个接口。</li>
<li>而且，一个类可以继承一个父类的同时，实现多个接口。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class 子类名 extends 父类名 implements 接口名<span class="number">1</span>，接口名<span class="number">2</span>，...&#123;</span><br><span class="line">    <span class="comment">// 重写接口中的抽象方法【必须】</span></span><br><span class="line">    <span class="comment">// 重写接口中的默认方法【不重名时可选】</span></span><br><span class="line">    <span class="comment">// 重写其它方法【可选】</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优先级问题"><a href="#优先级问题" class="headerlink" title="优先级问题"></a>优先级问题</h4><ul>
<li><p>当一个类，既继承一个父类，又实现若干个接口时，父类中的成员方法与接口中的默认方法重名，子类就近选择执行父类的成员方法。</p>
<p><strong><code>extends &gt; 接口1 &gt; 接口2 &gt; ...</code></strong></p>
</li>
</ul>
<hr>
<h2 id="14-5-接口的多继承"><a href="#14-5-接口的多继承" class="headerlink" title="14.5    接口的多继承"></a>14.5    接口的多继承</h2><ul>
<li>一个类只能直接继承一个父类，</li>
<li>但是，一个接口能继承另一个或多个接口。</li>
<li>接口的继承使用<code>extends</code>关键字。</li>
<li>子接口继承多个父接口，如果父接口中的方法有重名的，那么子接口需要重写一次。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">D</span> <span class="keyword">extends</span> <span class="title class_">A</span>,B&#123;	<span class="comment">// A,B都是接口</span></span><br><span class="line">    <span class="comment">// 代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="附1：-1"><a href="#附1：-1" class="headerlink" title="附1："></a>附1：</h4><ol>
<li>子接口重写默认方法时，<code>default</code>关键字可以保留。</li>
<li><strong>子类(实现类)重写默认方法时，<code>default</code>关键字不可以保留。</strong></li>
</ol>
<hr>
<h2 id="14-6-接口中的注意事项"><a href="#14-6-接口中的注意事项" class="headerlink" title="14.6    接口中的注意事项"></a>14.6    接口中的注意事项</h2><ol>
<li><strong>接口中，无法定义成员变量，但是可以定义成员常量</strong>，其值不可以改变，使用<code>public static final</code>修饰。</li>
<li>接口中，没有构造方法，不能创建对象<strong>。</strong></li>
<li>接口中，只能有方法和常量，不能有代码块（包括静态代码块和非静态代码块）。</li>
<li><strong>类优先原则</strong>：如果子类同时继承了父类和实现了接口中声明了同名同参数的默认方法，那么子类在没重写此方法的情况下，默认调用的是父类中的同名同参数的方法。</li>
<li><strong>接口冲突原则：</strong>如果实现类实现了多个接口，而这多个接口中定义了同名同参数的默认方法，那么在实现类没重写此方法的情况下会报错。这就需要我们必须在实现类中重写此方法</li>
<li>通过实现类的对象，可以调用接口中的默认方法。如果实现类重写了接口中的默认方法，调用时，仍然调用的是重写以后的方法。</li>
<li>如果想要在实现类中调用接口中的默认方法，可以通过 <code>super.方法名</code> 来调用。</li>
</ol>
<hr>
<h1 id="15-多态"><a href="#15-多态" class="headerlink" title="15    多态"></a>15    多态</h1><h2 id="15-1-是什么"><a href="#15-1-是什么" class="headerlink" title="15.1    是什么"></a>15.1    是什么</h2><blockquote>
<p>  <strong>定义</strong></p>
</blockquote>
<ul>
<li>  多态是指同一行为，具有多个不同的表现形式。</li>
<li>  指<strong>程序中定义的引用变量所指向的具体类型和通过该引用变量调用的方法调用在编译期并不确定，而是在运行期才确定</strong>。</li>
</ul>
<blockquote>
<p>  <strong>对象的多态性</strong>：</p>
</blockquote>
<p>父类的引用指向子类的对象。</p>
<blockquote>
<p>  <strong>充要条件</strong>：</p>
</blockquote>
<ol>
<li>继承或实现。【二选一】</li>
<li>重写父类方法。【意义体现】</li>
<li>父类引用指向子类对象。【格式体现】</li>
</ol>
<blockquote>
<p>  <strong>格式</strong>：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">父类类型 变量名 = <span class="keyword">new</span> 子类类型();</span><br><span class="line">变量名.方法名();</span><br></pre></td></tr></table></figure>



<blockquote>
<p>  <strong>注意事项</strong>：</p>
</blockquote>
<ul>
<li>对象的多态性，只适用于方法，不适用于属性。</li>
<li>用多态的方式调用方法时，首先检查父类中是否有该方法，如果没有，则编译错误；如果有，执行的是子类重写后的方法。</li>
</ul>
<blockquote>
<p>  <strong>多态的好处</strong>：</p>
</blockquote>
<ul>
<li>  定义时可以只定义顶层接口(类)，具体实现的时候再关注到底层细节。</li>
</ul>
<hr>
<h2 id="15-2-向上转型-amp-向下转型"><a href="#15-2-向上转型-amp-向下转型" class="headerlink" title="15.2    向上转型 &amp; 向下转型"></a>15.2    向上转型 &amp; 向下转型</h2><h3 id="1-向上转型"><a href="#1-向上转型" class="headerlink" title="1.    向上转型"></a>1.    向上转型</h3><ul>
<li>向上转型 == 多态；</li>
<li>多态本身就是子类类型向父类类型转换的过程，这个过程是默认的。</li>
<li>当父类引用指向一个子类对象时，便是向上转型。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">父类类型 变量名 = <span class="keyword">new</span> 子类类型();</span><br></pre></td></tr></table></figure>





<h3 id="2-向下转型"><a href="#2-向下转型" class="headerlink" title="2.    向下转型"></a>2.    向下转型</h3><blockquote>
<p>  <strong>是什么？</strong></p>
</blockquote>
<ul>
<li><p>向下转型：父类类型向子类类型转换的过程，这个过程是<strong>强制</strong>的。</p>
</li>
<li><p>将父类实例转换为子类实例可以使用强制类型转换的格式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">子类类型 变量名 = (子类类型)父类对象的变量名;</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>  <strong>为什么要向下转型？</strong></p>
</blockquote>
<p>由于对象具有多态性，内存中实际上是加载了子类特有的属性和方法的，但是由于变量声明为父类类型，导致编译时，只能调用父类中声明的属性和方法。子类特有的属性和方法不能调用。如何才能调用子类特的属性和方法？就是使用向下转型。</p>
<blockquote>
<p>  <strong>注意：转型的异常</strong></p>
</blockquote>
<ol>
<li> 使用强转时，可能出现 <strong>ClassCastException</strong> 的异常。</li>
<li> 为了避免在向下转型时出现 <code>ClassCastException </code>的异常，我们在向下转型之前，会先进行 <code>instanceof </code>的判断，只有返回为 true 时才进行向下转型；如果返回 false 则不进行向下转型。</li>
</ol>
<blockquote>
<p>  <strong>instanceof 的使用：</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">① a <span class="keyword">instanceof</span> A：判断对象a是否是类A的实例，如果是返回<span class="literal">true</span>；如果不是返回<span class="literal">false</span>。</span><br><span class="line">② 如果 a <span class="keyword">instanceof</span> A 返回<span class="literal">true</span>，则 a <span class="keyword">instanceof</span> B 也返回<span class="literal">true</span>。其中，类B是类A的父类。</span><br><span class="line">③ 要求a所属的类与类A必须是子类和父类的关系，否则编译错误。</span><br><span class="line"></span><br><span class="line">变量名 <span class="keyword">instanceof</span> 数据类型;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. 如果变量名属于该类型，则返回true；</span></span><br><span class="line"><span class="comment">	2. 如果变量名不属于该类型，则返回false。</span></span><br><span class="line"><span class="comment">*/</span> </span><br></pre></td></tr></table></figure>

<blockquote>
<p>  <strong>规范的语法格式：</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Woman</span>();</span><br><span class="line"><span class="keyword">if</span> (p1 <span class="keyword">instanceof</span> Woman) &#123;</span><br><span class="line">    <span class="type">Woman</span> <span class="variable">w</span> <span class="operator">=</span> (Woman) p1;	<span class="comment">//强制类型转换，向下转型</span></span><br><span class="line">    w.shopping();	<span class="comment">//调用子类方法</span></span><br><span class="line">    w.beauty = <span class="literal">false</span>;	<span class="comment">//调用子类属性</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-对比"><a href="#3-对比" class="headerlink" title="3    对比"></a>3    对比</h3><p><img src="/2020/05/26/JavaSE/image-20210730215015521.png" alt="image-20210730215015521"></p>
<hr>
<h2 id="15-3-接口多态的综合案例"><a href="#15-3-接口多态的综合案例" class="headerlink" title="15.3    接口多态的综合案例"></a>15.3    接口多态的综合案例</h2><h3 id="1-笔记本电脑"><a href="#1-笔记本电脑" class="headerlink" title="1.    笔记本电脑"></a>1.    笔记本电脑</h3><pre><code>笔记本电脑（laptop）通常具备使用USB设备的功能。在生产时，笔记本都预留了可以插入USB设备的USB接口，但是具体是什么USB设备，笔记本厂商并不关心，只要符合USB规格的设备都可以。

定义USB接口，具备最基本的开启功能和关闭功能。

鼠标和键盘想要能在电脑上使用，那么鼠标和键盘也必须遵守USB规范，实现USB接口，否则鼠标和键盘生产出来也无法使用。
</code></pre>
<h3 id="2-案例分析"><a href="#2-案例分析" class="headerlink" title="2.    案例分析"></a>2.    案例分析</h3><pre><code>定义笔记本类，USB接口，USB鼠标类，USB键盘类。
</code></pre>
<ol>
<li>USB接口，包括开启、关闭功能</li>
<li>笔记本类，包含运行功能、关机功能、使用USB设备功能</li>
<li>鼠标类，要实现USB接口，并具备点击功能。</li>
<li>键盘类，要实现USB接口，并具备敲击功能。</li>
</ol>
<h3 id="3-案例实现"><a href="#3-案例实现" class="headerlink" title="3.    案例实现"></a>3.    案例实现</h3><ol>
<li><p>定义USB接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// USB接口，包括开启、关闭功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Usb</span>  &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义Mouse实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">implements</span> <span class="title class_">Usb</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;鼠标已连接，可正常使用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;鼠标已断开连接&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">click</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;点击鼠标&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>定义Keyboard实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Keyboard</span> <span class="keyword">implements</span> <span class="title class_">Usb</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;键盘已连接，可正常使用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;键盘已断开连接&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">knock</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;敲击键盘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>定义笔记本Laptop类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  笔记本类：包含运行功能、关机功能、使用USB设备功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Laptop</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;一键关机&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用USB设备功能</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">useUsb</span><span class="params">(Usb usb)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (usb!=<span class="literal">null</span>)&#123;</span><br><span class="line">            usb.open();</span><br><span class="line">            <span class="keyword">if</span> (usb <span class="keyword">instanceof</span> Mouse)&#123;</span><br><span class="line">                ((Mouse) usb).click();</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (usb <span class="keyword">instanceof</span> Keyboard)&#123;</span><br><span class="line">                ((Keyboard) usb).knock();</span><br><span class="line">            &#125;</span><br><span class="line">            usb.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Laptop</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    定义笔记本类，USB接口，USB鼠标类，USB键盘类。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        1. USB接口，包括开启、关闭功能</span></span><br><span class="line"><span class="comment">        2. 笔记本类，包含运行功能、关机功能、使用USB设备功能</span></span><br><span class="line"><span class="comment">        3. 鼠标类，要实现USB接口，并具备点击功能。</span></span><br><span class="line"><span class="comment">        4. 键盘类，要实现USB接口，并具备敲击功能。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建一个笔记本对象</span></span><br><span class="line">        <span class="type">Laptop</span> <span class="variable">laptop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Laptop</span>();</span><br><span class="line">        <span class="comment">// 2. 笔记本开机</span></span><br><span class="line">        laptop.run();</span><br><span class="line">        <span class="comment">// 3. 使用鼠标</span></span><br><span class="line">        laptop.useUsb(<span class="keyword">new</span> <span class="title class_">Mouse</span>());</span><br><span class="line">        <span class="comment">// 4. 使用键盘</span></span><br><span class="line">        laptop.useUsb(<span class="keyword">new</span> <span class="title class_">Keyboard</span>());</span><br><span class="line">        <span class="comment">// 5. 笔记本关机</span></span><br><span class="line">        laptop.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/08/02/%E6%B3%9B%E5%9E%8B/">超链接：泛型</a></p>
<hr>
<h1 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/07/31/%E5%BC%82%E5%B8%B8/">超链接：异常</a></p>
<hr>
<h1 id="IO-流"><a href="#IO-流" class="headerlink" title="IO 流"></a>IO 流</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2020/10/13/IO%E7%B3%BB%E7%BB%9F/">超链接：IO</a></p>
<hr>
<h1 id="容器（数组-集合）"><a href="#容器（数组-集合）" class="headerlink" title="容器（数组 + 集合）"></a>容器（数组 + 集合）</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2020/07/25/%E5%AE%B9%E5%99%A8%EF%BC%88%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%EF%BC%89/">超链接：容器</a></p>
<hr>
<h1 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/01/29/Java8%E6%96%B0%E7%89%B9%E6%80%A7/">超链接：Java8新特性</a></p>
<hr>
<h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2020/08/20/%E5%8F%8D%E5%B0%84/">超链接：反射</a></p>
<hr>
<h1 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/08/02/%E6%9E%9A%E4%B8%BE/">超链接：枚举</a></p>
<hr>
<h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h1><p><a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/08/02/%E6%B3%A8%E8%A7%A3/">超链接：注解</a></p>
<h1 id="Object-类"><a href="#Object-类" class="headerlink" title="Object 类"></a>Object 类</h1><blockquote>
<ol>
<li> <strong>java.lang.Object类的说明：</strong></li>
</ol>
</blockquote>
<ol>
<li> Object 类是所有类的根类。</li>
<li> 如果在类的声明中未使用 <code>extends</code> 关键字指明其父类，则默认父类为 <code>java.lang.Object</code> 类。 </li>
<li>Object 类中的功能(属性、方法)具有通用性。<ul>
<li>  属性：无</li>
<li>  方法：<code>equals() | toString() | getClass() | hashCode() | clone() | finalize() | wait() | notify() | notifyAll()</code></li>
</ul>
</li>
<li> Object类只声明了一个空参的构造器</li>
</ol>
<blockquote>
<ol start="2">
<li> <strong>equals() 方法</strong></li>
</ol>
</blockquote>
<ol>
<li><p> 只适用于引用数据类型。</p>
</li>
<li><p>Object 类中定义的 <code>equals()</code> 和 <code>==</code> 的作用是相同的，都是比较两个对象的地址值是否相同。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源码：Object#equals()</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">this</span> == obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p> 诸如 String、Date、File、包装类等都重写了 <code>Object#equals()</code> 方法。重写后比较的不是两个引用的地址是否相同，而是比较两个对象的”实体内容”是否相同。</p>
</li>
<li><p>如果我们自定义的类需要使用 <code>equals()</code> 比较两个对象的”实体内容”是否相同的话。那么我们就需要重写继承自 Object类中的<code>equals()</code> 方法。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重写示例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//重写其equals()方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="built_in">this</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> (User)obj;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.age == u.age &amp;&amp; <span class="built_in">this</span>.name.equals(u.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p> 在实际开发中，可以使用 IDE 工具的提供的自动生成功能。</p>
</li>
<li><p>回顾 <code>==</code> 运算符的使用：</p>
<ul>
<li>  可以用在基本数据类型变量和引用数据类型变量中</li>
<li>  如果比较的是基本数据类型变量：比较两个变量保存的数据是否相等。（不一定类型要相同）</li>
</ul>
<ul>
<li>   如果比较的是引用数据类型变量：比较两个对象的地址值是否相同。</li>
<li>补充：<code>==</code> 符号使用时，必须保证符号左右两边的变量类型一致。</li>
</ul>
</li>
</ol>
<blockquote>
<ol start="3">
<li> <strong>toString()方法</strong></li>
</ol>
</blockquote>
<ol>
<li><p> 当我们输出一个对象的引用时，实际上就是调用当前对象的 <code>toString()</code>。</p>
</li>
<li><p>Object 类中 <code>toString()</code> 的定义：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getClass().getName() + <span class="string">&quot;@&quot;</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
<li><p> 像 <code>String、Date、File、包装类</code> 等都重写了 Object 类中的 <code>toString()</code> 方法。使得在调用对象的 <code>toString()</code> 时，返回”实体内容”信息。</p>
</li>
<li><p>自定义类也可以重写toString()方法，当调用此方法时，返回对象的”实体内容”</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重写示例</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Customer [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h1 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h1><h2 id="为什么要有包装类"><a href="#为什么要有包装类" class="headerlink" title="为什么要有包装类"></a>为什么要有包装类</h2><ul>
<li>  为了使基本数据类型的变量具有类的特征，引入包装类。</li>
<li>  因为有一些方法只能通过引用类型对象才能调用，基本数据类型变量是无法胜任的。最常见的比如继承自 Object 类的诸多方法。</li>
</ul>
<h2 id="基本数据类型与对应的包装类"><a href="#基本数据类型与对应的包装类" class="headerlink" title="基本数据类型与对应的包装类"></a>基本数据类型与对应的包装类</h2><p><img src="/2020/05/26/JavaSE/image-20210730221022919.png" alt="image-20210730221022919"></p>
<p>​    </p>
<h2 id="需要掌握的类型间的转换：（基本数据类型、包装类、String）"><a href="#需要掌握的类型间的转换：（基本数据类型、包装类、String）" class="headerlink" title="需要掌握的类型间的转换：（基本数据类型、包装类、String）"></a>需要掌握的类型间的转换：（基本数据类型、包装类、String）</h2><p><img src="/2020/05/26/JavaSE/image-20210730221227422.png" alt="image-20210730221227422"></p>
<blockquote>
<p>  <strong>简易版</strong></p>
</blockquote>
<ol>
<li> <code>基本数据类型&lt;---&gt;包装类</code>：自动装箱 与 自动拆箱</li>
<li> <code>基本数据类型/包装类 --&gt; String</code>：调用 String 重载的 <code>valueOf(Xxx xxx)</code></li>
<li><code>String---&gt;基本数据类型/包装类</code>：调用包装类的 <code>parseXxx(String s)</code><ul>
<li>  注意：转换时，可能会报NumberFormatException</li>
</ul>
</li>
</ol>
<h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><ul>
<li>  <a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2021/06/13/String/">超链接：String 详解</a></li>
</ul>
<h1 id="Java-比较器"><a href="#Java-比较器" class="headerlink" title="Java 比较器"></a>Java 比较器</h1><ul>
<li>  <a target="_blank" rel="noopener" href="https://lvnengdong.github.io/2020/09/14/Java%E4%B8%ADComparable%E6%8E%A5%E5%8F%A3%E5%92%8CComparator%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB/">超链接：Java中Comparable接口和Comparator接口的区别</a>     </li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/04/20/Listener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/20/Listener/" class="post-title-link" itemprop="url">Listener</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-20 00:22:22" itemprop="dateCreated datePublished" datetime="2020-04-20T00:22:22+08:00">2020-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-05 11:30:23" itemprop="dateModified" datetime="2022-05-05T11:30:23+08:00">2022-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Listener概念"><a href="#Listener概念" class="headerlink" title="Listener概念"></a>Listener概念</h1><blockquote>
<p>  <strong>Listener；监听器；Web三大组件之一</strong></p>
</blockquote>
<p><strong>监听器就是监听某个对象状态变化的组件。</strong> </p>
<p>常用于监听 Web 应用中某些对象的创建、销毁、增加，修改，删除等动作的发生，然后作出相应的处理。</p>
<p>当对象的状态发生变化的时候，服务器自动调用监听器对象中的方法。</p>
<p>事件监听机制</p>
<ul>
<li>事件 ：行为，动作</li>
<li>事件源 ：要监听的对象</li>
<li>监听器 ：监听对象</li>
<li>注册监听：将事件、事件源、监听器绑定在一起。 当事件源上发生某个事件后，执行监听器代码</li>
</ul>
<hr>
<h1 id="Listener的实现"><a href="#Listener的实现" class="headerlink" title="Listener的实现"></a>Listener的实现</h1><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol>
<li>自定义一个监听器类，实现<code>ServletContextListener</code>接口。</li>
<li>重写接口中的方法，完成监听的逻辑。</li>
<li>配置监听对象（配置文件<code>web.xml</code>或注解方式）。</li>
</ol>
<h2 id="配置文件配置监听器对象"><a href="#配置文件配置监听器对象" class="headerlink" title="配置文件配置监听器对象"></a>配置文件配置监听器对象</h2><ul>
<li>在配置文件 web.xml 中将自定义的监听器类注册到监听器列表中去。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>cn.itcast.web.listener.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="注解配置监听器对象"><a href="#注解配置监听器对象" class="headerlink" title="注解配置监听器对象"></a>注解配置监听器对象</h2><ul>
<li>在自定义的监听器类上使用 <strong>@WebListener</strong> 注解将该类注册到监听器列表中去。</li>
</ul>
<hr>
<h1 id="ServletContextListener"><a href="#ServletContextListener" class="headerlink" title="ServletContextListener"></a>ServletContextListener</h1><p><strong>作用：</strong>监听<code>ServletContext</code>对象的创建和销毁</p>
<p><strong>方法：</strong></p>
<ul>
<li><p><code>void contextDestroyed(ServletContextEvent sce)</code></p>
<ul>
<li>  <code>ServletContext</code>对象被销毁之前会自动调用该方法</li>
</ul>
</li>
<li><p><code>void contextInitialized(ServletContextEvent sce)</code></p>
<ul>
<li>  <code>ServletContext</code>对象创建之后会自动调用该方法。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/22/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><span class="page-number current">23</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/24/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
